<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Debezium Connector for Oracle :: Debezium Documentation</title>
    <link rel="canonical" href="https://debezium.io/documentation/reference/stable/connectors/oracle.html">
    <meta name="generator" content="Antora 3.1.7">
<link rel="stylesheet" href="../../../debezium-antora/css/site.css">
<link rel="stylesheet" href="../../../debezium-antora/css/debezium-antora.css">
<link rel="stylesheet" href="../../../debezium-antora/css/highlightjs-dark.css">
<link rel="stylesheet" href="https://static.jboss.org/css/rhbar.css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.js"></script>
<script src="../../../debezium-antora/js/jquery.ba-floatingscrollbar.js"></script>
</head>
<body class="article">
<header class="header">
  <div id="rhbar">
      <a class="jbdevlogo" href="https://developers.redhat.com"></a>
      <a class="rhlogo" href="https://www.redhat.com"></a>
  </div>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
          <img src="/assets/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 14px;"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/documentation/faq">FAQ</a>
        <a class="navbar-item" href="/documentation">DOCUMENTATION</a>
        <a class="navbar-item" href="/releases">RELEASES</a>
        <a class="navbar-item" href="/community">COMMUNITY</a>
        <a class="navbar-item" href="/blog">BLOG</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="reference" data-version="stable">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Debezium 2.7 Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorial.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../install.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../postgres-plugins.html">PostgreSQL Decoding Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features.html">Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/avro.html">Avro Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/topic-auto-create-config.html">Customizing Topic Auto-Creation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/signalling.html">Sending Signals to Debezium</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/notification.html">Receive notifications from Debezium</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mysql.html">MySQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mariadb.html">MariaDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mongodb.html">MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="postgresql.html">PostgreSQL</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="oracle.html">Oracle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sqlserver.html">SQL Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="db2.html">Db2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cassandra.html">Cassandra</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="vitess.html">Vitess</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spanner.html">Spanner</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jdbc.html">JDBC</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="informix.html">Informix</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Transformations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/topic-routing.html">Topic Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/event-flattening.html">New Record State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/mongodb-event-flattening.html">MongoDB New Document State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/event-changes.html">Event Changes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/outbox-event-router.html">Outbox Event Router</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/mongodb-outbox-event-router.html">MongoDB Outbox Event Router</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/filtering.html">Message Filtering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/schema-change-event-filter.html">Schema Change Event Filtering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/content-based-routing.html">Content-Based Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/applying-transformations-selectively.html">Using SMT Predicates to Selectively Apply Transformations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/partition-routing.html">Partition Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/header-to-value.html">HeaderToValue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/timezone-converter.html">Timezone Converter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/timescaledb.html">TimescaleDB Integration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/convert-cloudevent-to-saveable-form.html">Convert CloudEvents to Saveable Form</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Post Processors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../post-processors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../post-processors/reselect-columns.html">Reselect Columns</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">API and SPI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../development/engine.html">Debezium Engine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../development/converters.html">Custom Converters</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/serdes.html">Change Event SerDes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/outbox.html">Outbox Quarkus Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/cloudevents.html">CloudEvents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/tracing.html">OpenTelemetry</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/testcontainers.html">Integration Testing with Testcontainers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/debezium-server.html">Debezium Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/kubernetes.html">Running on Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/openshift.html">Running on Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/debezium-ui.html">Debezium UI</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Debezium Documentation</span>
    <span class="version">2.7</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Debezium Documentation</span>
      <ul class="versions">
        <li class="version">
          <a href="/documentation/reference/nightly/index.html">nightly</a>
        </li>
        <li class="version is-current">
          <a href="/documentation/reference/2.7/index.html">2.7</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/3.0/index.html">3.0</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.6/index.html">2.6</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.5/index.html">2.5</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.4/index.html">2.4</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.3/index.html">2.3</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.2/index.html">2.2</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.1/index.html">2.1</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.0/index.html">2.0</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/1.9/index.html">1.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main" class="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Debezium Documentation</a></li>
    <li>Connectors</li>
    <li><a href="oracle.html">Oracle</a></li>
  </ul>
</nav>
    <div class="page-versions-container">
    Version:
    <div class="page-versions">
        <button class="version-menu-toggle versions-menu-current" title="Show other versions of page">2.7</button>
        <div class="version-menu">
                <a class="version" href="/documentation/reference/nightly/index.html">nightly</a>
                <a class="version is-current" href="/documentation/reference/2.7/index.html">2.7</a>
                <a class="version" href="/documentation/reference/3.0/index.html">3.0</a>
                <a class="version" href="/documentation/reference/2.6/index.html">2.6</a>
                <a class="version" href="/documentation/reference/2.5/index.html">2.5</a>
                <a class="version" href="/documentation/reference/2.4/index.html">2.4</a>
                <a class="version" href="/documentation/reference/2.3/index.html">2.3</a>
                <a class="version" href="/documentation/reference/2.2/index.html">2.2</a>
                <a class="version" href="/documentation/reference/2.1/index.html">2.1</a>
                <a class="version" href="/documentation/reference/2.0/index.html">2.0</a>
                <a class="version" href="/documentation/reference/1.9/index.html">1.9</a>
        </div>
        |
    </div>
    </div>
  <div class="edit-this-page"><a href="https://github.com/debezium/debezium/edit/2.7/documentation/modules/ROOT/pages/connectors/oracle.adoc">Edit this Page</a></div>
  </div>
<div class="article-grid">
<div class="article-cell1">
<article class="doc">
        
    <!-- This partial is a placeholder -->            <h1 class="page">Debezium Connector for Oracle</h1>
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#oracle-overview">Overview</a></li>
<li><a href="#how-the-oracle-connector-works">How the Oracle connector works</a>
<ul class="sectlevel2">
<li><a href="#oracle-snapshots">Snapshots</a></li>
<li><a href="#oracle-ad-hoc-snapshots">Ad hoc snapshots</a></li>
<li><a href="#debezium-oracle-incremental-snapshots">Incremental snapshots</a></li>
<li><a href="#connector-custom-snapshot">Custom snapshotter SPI</a></li>
<li><a href="#oracle-blocking-snapshots">Blocking snapshots</a></li>
<li><a href="#oracle-topic-names">Topic names</a></li>
<li><a href="#oracle-schema-history-topic">Schema history topic</a></li>
<li><a href="#oracle-schema-change-topic">Schema change topic</a></li>
<li><a href="#oracle-transaction-metadata">Transaction Metadata</a></li>
<li><a href="#oracle-logminer-mining-strategies">LogMiner Mining Strategies</a></li>
<li><a href="#oracle-logminer-query-modes">Query Modes</a></li>
<li><a href="#oracle-event-buffering">Event buffering</a></li>
<li><a href="#scn-jumps">SCN gap detection</a></li>
<li><a href="#low-change-frequency-offset-management">Low change frequency offset management</a></li>
</ul>
</li>
<li><a href="#oracle-events">Data change events</a>
<ul class="sectlevel2">
<li><a href="#oracle-change-event-keys">Change event keys</a></li>
<li><a href="#oracle-change-event-values">Change event values</a></li>
<li><a href="#oracle-create-events"><em>create</em> events</a></li>
<li><a href="#oracle-update-events"><em>update</em> events</a></li>
<li><a href="#oracle-delete-events"><em>delete</em> events</a></li>
<li><a href="#oracle-truncate-events"><em>truncate</em> events</a></li>
</ul>
</li>
<li><a href="#oracle-data-type-mappings">Data type mappings</a>
<ul class="sectlevel2">
<li><a href="#oracle-character-types">Character types</a></li>
<li><a href="#oracle-binary-character-lob-types">Binary and Character LOB types</a></li>
<li><a href="#oracle-numeric-types">Numeric types</a></li>
<li><a href="#oracle-boolean-types">Boolean types</a></li>
<li><a href="#oracle-temporal-types">Temporal types</a></li>
<li><a href="#oracle-rowid-types">ROWID types</a></li>
<li><a href="#oracle-xml-types">XML types</a></li>
<li><a href="#oracle-user-defined-types">User-defined types</a></li>
<li><a href="#oracle-supplied-types">Oracle-supplied types</a></li>
<li><a href="#oracle-default-values">Default Values</a></li>
</ul>
</li>
<li><a href="#debezium-oracle-connector-converters">Custom converters</a>
<ul class="sectlevel2">
<li><a href="#_number1_to_boolean"><code>NUMBER(1)</code> to Boolean</a></li>
<li><a href="#_number_to_zero_scale"><code>NUMBER</code> To Zero Scale</a></li>
<li><a href="#_raw_to_string"><code>RAW</code> to String</a></li>
</ul>
</li>
<li><a href="#setting-up-oracle">Setting up Oracle</a>
<ul class="sectlevel2">
<li><a href="#compatibility-of-the-debezium-oracle-connector-with-oracle-installation-types">Compatibility with Oracle installation types</a></li>
<li><a href="#schemas-that-the-debezium-oracle-connector-excludes-when-capturing-change-events">Schemas excluded from capture</a></li>
<li><a href="#tables-that-the-debezium-oracle-connector-excludes-when-capturing-change-events">Tables excluded from capture</a></li>
<li><a href="#_preparing_the_database">Preparing the database</a></li>
<li><a href="#oracle-redo-log-sizing">Redo log sizing</a></li>
<li><a href="#_archive_log_destinations">Archive log destinations</a></li>
<li><a href="#creating-users-for-the-connector">Creating users for the connector</a></li>
<li><a href="#support-for-oracle-standby-databases">Standby databases</a></li>
</ul>
</li>
<li><a href="#oracle-deploying-a-connector">Deployment</a>
<ul class="sectlevel2">
<li><a href="#oracle-example-configuration">Debezium Oracle connector configuration</a></li>
<li><a href="#oracle-adding-connector-configuration">Adding connector configuration</a></li>
<li><a href="#pluggable-vs-non-pluggable-databases">Pluggable vs Non-Pluggable databases</a></li>
</ul>
</li>
<li><a href="#oracle-connector-properties">Connector properties</a>
<ul class="sectlevel2">
<li><a href="#required-debezium-oracle-connector-configuration-properties">Required Debezium Oracle connector configuration properties</a></li>
</ul>
</li>
<li><a href="#oracle-monitoring">Monitoring</a>
<ul class="sectlevel2">
<li><a href="#_customized_mbean_names">Customized MBean names</a></li>
<li><a href="#oracle-snapshot-metrics">Snapshot Metrics</a></li>
<li><a href="#oracle-streaming-metrics">Streaming Metrics</a></li>
<li><a href="#oracle-schema-history-metrics">Schema History Metrics</a></li>
</ul>
</li>
<li><a href="#surrogate-schema-evolution">Surrogate schema evolution</a></li>
<li><a href="#oracle-openlogreplicator-support">OpenLogReplicator support</a>
<ul class="sectlevel2">
<li><a href="#_how_openlogreplicator_works">How OpenLogReplicator works</a></li>
<li><a href="#_preparing_the_database_2">Preparing the database</a></li>
<li><a href="#_creating_connector_users">Creating connector users</a></li>
<li><a href="#selecting-the-open-log-replicator-adapter">Configuring the OpenLogReplicator adapter</a></li>
<li><a href="#building-openlogreplicator">Building OpenLogReplicator</a></li>
<li><a href="#obtaining-oracle-jdbc-driver-openlogreplicator">Obtaining the Oracle JDBC driver for OpenLogReplicator</a></li>
<li><a href="#oracle-openlogreplicator-configuration">OpenLogReplicator configuration</a></li>
<li><a href="#oracle-openlogreplicator-connector-properties">OpenLogReplicator connector properties</a></li>
<li><a href="#oracle-openlogreplicator-row-id-support">OpenLogReplicator ROWID support</a></li>
<li><a href="#oracle-openlogreplicator-xml-support">OpenLogReplicator XML support</a></li>
</ul>
</li>
<li><a href="#oracle-xstreams-support">XStreams support</a>
<ul class="sectlevel2">
<li><a href="#_preparing_the_database_3">Preparing the Database</a></li>
<li><a href="#_creating_xstream_users_for_the_connector">Creating XStream users for the connector</a></li>
<li><a href="#_create_an_xstream_outbound_server">Create an XStream Outbound Server</a></li>
<li><a href="#selecting-the-xstream-adapter">Configuring the XStream adapter</a></li>
<li><a href="#obtaining-oracle-jdbc-driver-and-xstreams-api-files">Obtaining the Oracle JDBC driver and XStream API files</a></li>
<li><a href="#oracle-xstreams-connector-properties">XStream connector properties</a></li>
<li><a href="#oracle-xstreams-dbms-lob-package">XStream and DBMS_LOB</a></li>
</ul>
</li>
<li><a href="#oracle-frequently-asked-questions">Frequently Asked Questions</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oracle-overview"><a class="anchor" href="#oracle-overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Debezium&#8217;s Oracle connector captures and records row-level changes that occur in databases on an Oracle server,
including tables that are added while the connector is running.
You can configure the connector to emit change events for specific subsets of schemas and tables, or to ignore, mask, or truncate values in specific columns.</p>
</div>
<div class="paragraph">
<p>For information about the Oracle Database versions that are compatible with this connector, see the <a href="https://debezium.io/releases/">Debezium release overview</a>.</p>
</div>
<div class="paragraph">
<p>Debezium ingests change events from Oracle by using the native LogMiner database package
, the <a href="https://docs.oracle.com/database/121/XSTRM/xstrm_intro.htm#XSTRM72647">XStream API</a>, or <a href="https://www.bersler.com/openlogreplicator/">OpenLogReplicator</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-the-oracle-connector-works"><a class="anchor" href="#how-the-oracle-connector-works"></a>How the Oracle connector works</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To optimally configure and run a Debezium Oracle connector, it is helpful to understand how the connector performs snapshots, streams change events, determines Kafka topic names, uses metadata, and implements event buffering.</p>
</div>
<div class="sect2">
<h3 id="oracle-snapshots"><a class="anchor" href="#oracle-snapshots"></a>Snapshots</h3>
<div class="paragraph">
<p>Typically, the redo logs on an Oracle server are configured to not retain the complete history of the database.
As a result, the Debezium Oracle connector cannot retrieve the entire history of the database from the logs.
To enable the connector to establish a baseline for the current state of the database, the first time that the connector starts, it performs an initial <em>consistent snapshot</em> of the database.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the time needed to complete the initial snapshot exceeds the <code>UNDO_RETENTION</code> time that is set for the database (fifteen minutes, by default), an ORA-01555 exception can occur.
For more information about the error, and about the steps that you can take to recover from it, see the <a href="#what-causes-ora-01555-and-how-to-handle-it">Frequently asked questions</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>During a table&#8217;s snapshot, it&#8217;s possible for Oracle to raise an ORA-01466 exception.
This happens when a user modifies the schema of the table or adds, changes, or drops an index or related object associated with the table being snapshot.
In the event this happens, the connector will stop and the initial snapshot will need to be taken from the beginning.</p>
</div>
<div class="paragraph">
<p>To remediate the problem, you can configure the <a href="#oracle-property-snapshot-database-errors-max-retries"><code>snapshot.database.errors.max.retries</code></a> property with a value greater than <code>0</code> so that the specific table&#8217;s snapshot will restart.
While the entire snapshot will not start from the beginning when retrying, the specific table in question will be re-read from the beginning and the table&#8217;s topic will contain duplicate snapshot events.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="default-workflow-for-performing-an-initial-snapshot"><a class="anchor" href="#default-workflow-for-performing-an-initial-snapshot"></a>Default workflow that the Oracle connector uses to perform an initial snapshot</h4>
<div class="paragraph">
<p>The following workflow lists the steps that Debezium takes to create a snapshot.
These steps describe the process for a snapshot when the <a href="#oracle-property-snapshot-mode"><code>snapshot.mode</code></a>  configuration property is set to its default value, which is <code>initial</code>.
You can customize the way that the connector creates snapshots by changing the value of the <code>snapshot.mode</code> property.
If you configure a different snapshot mode, the connector completes the snapshot by using a modified version of this workflow.</p>
</div>
<div class="paragraph">
<p>When the snapshot mode is set to the default, the connector completes the following tasks to create a snapshot:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Establish a connection to the database.</p>
</li>
<li>
<p>Determine the tables to be captured.
By default, the connector captures all tables except those with <a href="#schemas-that-the-debezium-oracle-connector-excludes-when-capturing-change-events">schemas that exclude them from capture</a>.
After the snapshot completes, the connector continues to stream data for the specified tables.
If you want the connector to capture data only from specific tables you can direct the connector to capture the data for only a subset of tables or table elements by setting properties such as <a href="#oracle-property-table-include-list"><code>table.include.list</code></a> or <a href="#oracle-property-table-exclude-list"><code>table.exclude.list</code></a>.</p>
</li>
<li>
<p>Obtain a <code>ROW SHARE MODE</code> lock on each of the captured tables to prevent structural changes from occurring during creation of the snapshot.
Debezium holds the locks for only a short time.</p>
</li>
<li>
<p>Read the current system change number (SCN) position from the server&#8217;s redo log.</p>
</li>
<li>
<p>Capture the structure of all database tables, or all tables that are designated for capture.
The connector persists schema information in its internal database schema history topic.
The schema history provides information about the structure that is in effect when a change event occurs.<br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default, the connector captures the schema of every table in the database that is in capture mode, including tables that are not configured for capture.
If tables are not configured for capture, the initial snapshot captures only their structure; it does not capture any table data.
For more information about why snapshots persist schema information for tables that you did not include in the initial snapshot, see <a href="#understanding-why-initial-snapshots-capture-the-schema-history-for-all-tables">Understanding why initial snapshots capture the schema for all tables</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Release the locks obtained in Step 3.
Other database clients can now write to any previously locked tables.</p>
</li>
<li>
<p>At the SCN position that was read in Step 4, the connector scans the tables that are designated for capture (<code>SELECT * FROM &#8230;&#8203; AS OF SCN 123</code>).
During the scan, the connector completes the following tasks:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Confirms that the table was created before the snapshot began.
If the table was created after the snapshot began, the connector skips the table.
After the snapshot is complete, and the connector transitions to streaming, it emits change events for any tables that were created after the snapshot began.</p>
</li>
<li>
<p>Produces a <code>read</code> event for each row that is captured from a table.
All <code>read</code> events contain the same SCN position, which is the SCN position that was obtained in step 4.</p>
</li>
<li>
<p>Emits each <code>read</code> event to the Kafka topic for the source table.</p>
</li>
<li>
<p>Releases data table locks, if applicable.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Record the successful completion of the snapshot in the connector offsets.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The resulting initial snapshot captures the current state of each row in the captured tables.
From this baseline state, the connector captures subsequent changes as they occur.</p>
</div>
<div class="paragraph">
<p>After the snapshot process begins, if the process is interrupted due to connector failure, rebalancing, or other reasons, the process restarts after the connector restarts.
After the connector completes the initial snapshot, it continues streaming from the position that it read in Step 3 so that it does not miss any updates.
If the connector stops again for any reason, after it restarts, it resumes streaming changes from where it previously left off.</p>
</div>
<table id="oracle-connector-snapshot-mode-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Settings for <code>snapshot.mode</code> connector configuration property</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>always</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Perform snapshot on each connector start.
After the snapshot completes, the connector begins to stream event records for subsequent database changes.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>initial</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The connector performs a database snapshot as described in the <a href="#default-workflow-for-performing-an-initial-snapshot">default workflow for creating an initial snapshot</a>.
After the snapshot completes, the connector begins to stream event records for subsequent database changes.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>initial_only</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The connector performs a database snapshot and stops before streaming any change event records, not allowing any subsequent change events to be captured.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>schema_only</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Deprecated, see <code>no_data</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>no_data</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The connector captures the structure of all relevant tables, performing all of the steps described in the <a href="#default-workflow-for-performing-an-initial-snapshot">default snapshot workflow</a>, except that it does not create <code>READ</code> events to represent the data set at the point of the connector&#8217;s start-up (Step 6).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>schema_only_recovery</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Deprecated, see <code>recovery</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>recovery</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set this option to restore a database schema history topic that is lost or corrupted.
After a restart, the connector runs a snapshot that rebuilds the topic from the source tables.
You can also set the property to periodically prune a database schema history topic that experiences unexpected growth.<br>
<br>
WARNING: Do not use this mode to perform a snapshot if schema changes were committed to the database after the last connector shutdown.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>when_needed</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>After the connector starts, it performs a snapshot only if it detects one of the following circumstances:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It cannot detect any topic offsets.</p>
</li>
<li>
<p>A previously recorded offset specifies a log position that is not available on the server.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>configuration_based</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set the snapshot mode to <code>configuration_based</code> to control snapshot behavior through the set of connector properties that have the prefix 'snapshot.mode.configuration.based'.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>custom</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>custom</code> snapshot mode lets you inject your own implementation of the <code>io.debezium.spi.snapshot.Snapshotter</code> interface.
Set the <code>snapshot.mode.custom.name</code> configuration property to the name provided by the <code>name()</code> method of your implementation.
The name is specified on the classpath of your Kafka Connect cluster.
If you use the Debezium <code>EmbeddedEngine</code>, the name is included in the connector JAR file.
For more information, see <a href="#connector-custom-snapshot">custom snapshotter SPI</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information, see <a href="#oracle-property-snapshot-mode"><code>snapshot.mode</code></a> in the table of connector configuration properties.</p>
</div>
</div>
<div class="sect3">
<h4 id="understanding-why-initial-snapshots-capture-the-schema-history-for-all-tables"><a class="anchor" href="#understanding-why-initial-snapshots-capture-the-schema-history-for-all-tables"></a>Understanding why initial snapshots capture the schema history for all tables</h4>
<div class="paragraph">
<p>The initial snapshot that a connector runs captures two types of information:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Table data</dt>
<dd>
<p>Information about <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code> operations in tables that are named in the connector&#8217;s <a href="#oracle-property-table-include-list"><code>table.include.list</code></a> property.</p>
</dd>
<dt class="hdlist1">Schema data</dt>
<dd>
<p>DDL statements that describe the structural changes that are applied to tables.
Schema data is persisted to both the internal schema history topic, and to the connector&#8217;s schema change topic, if one is configured.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>After you run an initial snapshot, you might notice that the snapshot captures schema information for tables that are not designated for capture.
By default, initial snapshots are designed to capture schema information for every table that is present in the database, not only from tables that are designated for capture.
Connectors require that the table&#8217;s schema is present in the schema history topic before they can capture a table.
By enabling the initial snapshot to capture schema data for tables that are not part of the original capture set, Debezium prepares the connector to readily capture event data from these tables should that later become necessary.
If the initial snapshot does not capture a table&#8217;s schema, you must add the schema to the history topic before the connector can capture data from the table.</p>
</div>
<div class="paragraph">
<p>In some cases, you might want to limit schema capture in the initial snapshot.
This can be useful when you want to reduce the time required to complete a snapshot.
Or when Debezium connects to the database instance through a user account that has access to multiple logical databases, but you want the connector to capture changes only from tables in a specific logic database.</p>
</div>
<div class="ulist">
<div class="title">Additional information</div>
<ul>
<li>
<p><a href="#oracle-capturing-data-from-tables-not-captured-by-the-initial-snapshot-no-schema-change">Capturing data from tables not captured by the initial snapshot (no schema change)</a></p>
</li>
<li>
<p><a href="#oracle-capturing-data-from-new-tables-with-schema-changes">Capturing data from tables not captured by the initial snapshot (schema change)</a></p>
</li>
<li>
<p>Setting the <a href="#oracle-property-database-history-store-only-captured-tables-ddl"><code>schema.history.internal.store.only.captured.tables.ddl</code></a> property to specify the tables from which to capture schema information.</p>
</li>
<li>
<p>Setting the <a href="#oracle-property-database-history-store-only-captured-databases-ddl"><code>schema.history.internal.store.only.captured.databases.ddl</code></a> property to specify the logical databases from which to capture schema changes.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="oracle-capturing-data-from-tables-not-captured-by-the-initial-snapshot-no-schema-change"><a class="anchor" href="#oracle-capturing-data-from-tables-not-captured-by-the-initial-snapshot-no-schema-change"></a>Capturing data from tables not captured by the initial snapshot (no schema change)</h4>
<div class="paragraph">
<p>In some cases, you might want the connector to capture data from a table whose schema was not captured by the initial snapshot.
Depending on the connector configuration, the initial snapshot might capture the table schema only for specific tables in the database.
If the table schema is not present in the history topic, the connector fails to capture the table, and reports a missing schema error.</p>
</div>
<div class="paragraph">
<p>You might still be able to capture data from the table, but you must perform additional steps to add the table schema.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You want to capture data from a table with a schema that the connector did not capture during the initial snapshot.</p>
</li>
<li>
<p>All entries for the table in the transaction log use the same schema.
For information about capturing data from a new table that has undergone structural changes, see <a href="#oracle-capturing-data-from-new-tables-with-schema-changes">Capturing data from tables not captured by the initial snapshot (schema change)</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Stop the connector.</p>
</li>
<li>
<p>Remove the internal database schema history topic that is specified by the <a href="#oracle-property-database-history-kafka-topic"><code>schema.history.internal.kafka.topic property</code></a>.</p>
</li>
<li>
<p>In the connector configuration:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Set the <a href="#oracle-property-snapshot-mode"><code>snapshot.mode</code></a> to <code>schema_only_recovery</code>.</p>
</li>
<li>
<p>(Optional) Set the value of <a href="#oracle-property-database-history-store-only-captured-tables-ddl"><code>schema.history.internal.store.only.captured.tables.ddl</code></a> to <code>false</code> to ensure that in the future the connector can readily capture data for tables that are not currently designated for capture.
Connectors can capture data from a table only if the table&#8217;s schema history is present in the history topic.</p>
</li>
<li>
<p>Add the tables that you want the connector to capture to <code>table.include.list</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Restart the connector.
The snapshot recovery process rebuilds the schema history based on the current structure of the tables.</p>
</li>
<li>
<p>(Optional) After the snapshot completes, initiate an <a href="#debezium-oracle-incremental-snapshots">incremental snapshot</a> on the newly added tables.
The incremental snapshot first streams the historical data of the newly added tables, and then resumes reading changes from the redo and archive logs for previously configured tables, including changes that occur while that connector was off-line.</p>
</li>
<li>
<p>(Optional) Reset the <code>snapshot.mode</code> back to <code>schema_only</code> to prevent the connector from initiating recovery after a future restart.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="oracle-capturing-data-from-new-tables-with-schema-changes"><a class="anchor" href="#oracle-capturing-data-from-new-tables-with-schema-changes"></a>Capturing data from tables not captured by the initial snapshot (schema change)</h4>
<div class="paragraph">
<p>If a schema change is applied to a table, records that are committed before the schema change have different structures than those that were committed after the change.
When Debezium captures data from a table, it reads the schema history to ensure that it applies the correct schema to each event.
If the schema is not present in the schema history topic, the connector is unable to capture the table, and an error results.</p>
</div>
<div class="paragraph">
<p>If you want to capture data from a table that was not captured by the initial snapshot, and the schema of the table was modified, you must add the schema to the history topic, if it is not already available.
You can add the schema by running a new schema snapshot, or by running an initial snapshot for the table.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You want to capture data from a table with a schema that the connector did not capture during the initial snapshot.</p>
</li>
<li>
<p>A schema change was applied to the table so that the records to be captured do not have a uniform structure.</p>
</li>
</ul>
</div>
<div class="dlist">
<div class="title">Procedure</div>
<dl>
<dt class="hdlist1">Initial snapshot captured the schema for all tables (<code>store.only.captured.tables.ddl</code> was set to <code>false</code>)</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the <a href="#oracle-property-table-include-list"><code>table.include.list</code></a> property to specify the tables that you want to capture.</p>
</li>
<li>
<p>Restart the connector.</p>
</li>
<li>
<p>Initiate an <a href="#debezium-oracle-incremental-snapshots">incremental snapshot</a> if you want to capture existing data from the newly added tables.</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Initial snapshot did not capture the schema for all tables (<code>store.only.captured.tables.ddl</code> was set to <code>true</code>)</dt>
<dd>
<p>If the initial snapshot did not save the schema of the table that you want to capture, complete one of the following procedures:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Procedure 1: Schema snapshot, followed by incremental snapshot</dt>
<dd>
<p>In this procedure, the connector first performs a schema snapshot.
You can then initiate an incremental snapshot to enable the connector to synchronize data.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the connector.</p>
</li>
<li>
<p>Remove the internal database schema history topic that is specified by the <a href="#oracle-property-database-history-kafka-topic"><code>schema.history.internal.kafka.topic property</code></a>.</p>
</li>
<li>
<p>Clear the offsets in the configured Kafka Connect <a href="https://kafka.apache.org/documentation/#connectconfigs_offset.storage.topic"><code>offset.storage.topic</code></a>.
For more information about how to remove offsets, see the <a href="https://debezium.io/documentation/faq/#how_to_remove_committed_offsets_for_a_connector">Debezium community FAQ</a>.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Removing offsets should be performed only by advanced users who have experience in manipulating internal Kafka Connect data.
This operation is potentially destructive, and should be performed only as a last resort.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Set values for properties in the connector configuration as described in the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Set the value of the <a href="#oracle-property-snapshot-mode"><code>snapshot.mode</code></a> property to <code>schema_only</code>.</p>
</li>
<li>
<p>Edit the <a href="#oracle-property-table-include-list"><code>table.include.list</code></a> to add the tables that you want to capture.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Restart the connector.</p>
</li>
<li>
<p>Wait for Debezium to capture the schema of the new and existing tables.
Data changes that occurred any tables after the connector stopped are not captured.</p>
</li>
<li>
<p>To ensure that no data is lost, initiate an <a href="#debezium-oracle-incremental-snapshots">incremental snapshot</a>.</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Procedure 2: Initial snapshot, followed by optional incremental snapshot</dt>
<dd>
<p>In this procedure the connector performs a full initial snapshot of the database.
As with any initial snapshot, in a database with many large tables, running an initial snapshot can be a time-consuming operation.
After the snapshot completes, you can optionally trigger an incremental snapshot to capture any changes that occur while the connector is off-line.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the connector.</p>
</li>
<li>
<p>Remove the internal database schema history topic that is specified by the <a href="#oracle-property-database-history-kafka-topic"><code>schema.history.internal.kafka.topic property</code></a>.</p>
</li>
<li>
<p>Clear the offsets in the configured Kafka Connect <a href="https://kafka.apache.org/documentation/#connectconfigs_offset.storage.topic"><code>offset.storage.topic</code></a>.
For more information about how to remove offsets, see the <a href="https://debezium.io/documentation/faq/#how_to_remove_committed_offsets_for_a_connector">Debezium community FAQ</a>.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Removing offsets should be performed only by advanced users who have experience in manipulating internal Kafka Connect data.
This operation is potentially destructive, and should be performed only as a last resort.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Edit the <a href="#oracle-property-table-include-list"><code>table.include.list</code></a> to add the tables that you want to capture.</p>
</li>
<li>
<p>Set values for properties in the connector configuration as described in the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Set the value of the <a href="#oracle-property-snapshot-mode"><code>snapshot.mode</code></a> property to <code>initial</code>.</p>
</li>
<li>
<p>(Optional) Set <a href="#oracle-property-database-history-store-only-captured-tables-ddl"><code>schema.history.internal.store.only.captured.tables.ddl</code></a> to <code>false</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Restart the connector.
The connector takes a full database snapshot.
After the snapshot completes, the connector transitions to streaming.</p>
</li>
<li>
<p>(Optional) To capture any data that changed while the connector was off-line, initiate an <a href="#debezium-oracle-incremental-snapshots">incremental snapshot</a>.</p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="oracle-ad-hoc-snapshots"><a class="anchor" href="#oracle-ad-hoc-snapshots"></a>Ad hoc snapshots</h3>
<div class="paragraph">
<p>By default, a connector runs an initial snapshot operation only after it starts for the first time.
Following this initial snapshot, under normal circumstances, the connector does not repeat the snapshot process.
Any future change event data that the connector captures comes in through the streaming process only.</p>
</div>
<div class="paragraph">
<p>However, in some situations the data that the connector obtained during the initial snapshot might become stale, lost, or incomplete.
To provide a mechanism for recapturing table data, Debezium includes an option to perform ad hoc snapshots.
You might want to perform an ad hoc snapshot after any of the following changes occur in your Debezium environment:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The connector configuration is modified to capture a different set of tables.</p>
</li>
<li>
<p>Kafka topics are deleted and must be rebuilt.</p>
</li>
<li>
<p>Data corruption occurs due to a configuration error or some other problem.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can re-run a snapshot for a table for which you previously captured a snapshot by initiating a so-called <em>ad-hoc snapshot</em>.
Ad hoc snapshots require the use of <a href="../configuration/signalling.html#sending-signals-to-a-debezium-connector" class="xref page">signaling tables</a>.
You initiate an ad hoc snapshot by sending a signal request to the Debezium signaling table.</p>
</div>
<div class="paragraph">
<p>When you initiate an ad hoc snapshot of an existing table, the connector appends content to the topic that already exists for the table.
If a previously existing topic was removed, Debezium can create a topic automatically if <a href="../configuration/topic-auto-create-config.html#customizing-debezium-automatically-created-topics" class="xref page">automatic topic creation</a> is enabled.</p>
</div>
<div class="paragraph">
<p>Ad hoc snapshot signals specify the tables to include in the snapshot.
The snapshot can capture the entire contents of the database, or capture only a subset of the tables in the database.
Also, the snapshot can capture a subset of the contents of the table(s) in the database.</p>
</div>
<div class="paragraph">
<p>You specify the tables to capture by sending an <code>execute-snapshot</code> message to the signaling table.
Set the type of the <code>execute-snapshot</code> signal to <code>incremental</code> or <code>blocking</code>, and provide the names of the tables to include in the snapshot, as described in the following table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Example of an ad hoc <code>execute-snapshot</code> signal record</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>incremental</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the type of snapshot that you want to run.<br>
Currently, you can request <code>incremental</code> or <code>blocking</code> snapshots.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data-collections</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>N/A</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An array that contains regular expressions matching the fully-qualified names of the table to be snapshotted.<br>
The format of the names is the same as for the <code>signal.data.collection</code> configuration option.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>additional-conditions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>N/A</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional array that specifies a set of additional conditions that the connector evaluates to determine the subset of records to include in a snapshot.<br>
Each additional condition is an object that specifies the criteria for filtering the data that an ad hoc snapshot captures.
You can set the following parameters for each additional condition:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>data-collection</code></dt>
<dd>
<p>The fully-qualified name of the table that the filter applies to.
You can apply different filters to each table.</p>
</dd>
<dt class="hdlist1"><code>filter</code></dt>
<dd>
<p>Specifies column values that must be present in a database record for the snapshot to include it, for example,  <code>"color='blue'"</code>.<br>
<br>
The values that you assign to the <code>filter</code> parameter are the same types of values that you might specify in the <code>WHERE</code> clause of <code>SELECT</code> statements when you set the <code>snapshot.select.statement.overrides</code> property for a blocking snapshot.</p>
</dd>
</dl>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>surrogate-key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>N/A</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional string that specifies the column name that the connector uses as the primary key of a table during the snapshot process.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Triggering an ad hoc incremental snapshot</div>
<p>You initiate an ad hoc incremental snapshot by adding an entry with the <code>execute-snapshot</code> signal type to the signaling table.
After the connector processes the message, it begins the snapshot operation.
The snapshot process reads the first and last primary key values and uses those values as the start and end point for each table.
Based on the number of entries in the table, and the configured chunk size, Debezium divides the table into chunks, and proceeds to snapshot each chunk, in succession, one at a time.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="#debezium-oracle-incremental-snapshots">Incremental snapshots</a>.</p>
</div>
<div class="paragraph">
<div class="title">Triggering an ad hoc blocking snapshot</div>
<p>You initiate an ad hoc blocking snapshot by adding an entry with the <code>execute-snapshot</code> signal type to the signaling table.
After the connector processes the message, it begins the snapshot operation.
The connector temporarily stops streaming, and then initiates a snapshot of the specified table, following the same process that it uses during an initial snapshot.
After the snapshot completes, the connector resumes streaming.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="#oracle-blocking-snapshots">Blocking snapshots</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="debezium-oracle-incremental-snapshots"><a class="anchor" href="#debezium-oracle-incremental-snapshots"></a>Incremental snapshots</h3>
<div class="paragraph">
<p>To provide flexibility in managing snapshots, Debezium includes a supplementary snapshot mechanism, known as <em>incremental snapshotting</em>.
Incremental snapshots rely on the Debezium mechanism for <a href="../configuration/signalling.html#sending-signals-to-a-debezium-connector" class="xref page">sending signals to a Debezium connector</a>.
Incremental snapshots are based on the <a href="https://github.com/debezium/debezium-design-documents/blob/main/DDD-3.md">DDD-3</a> design document.</p>
</div>
<div class="paragraph">
<p>In an incremental snapshot, instead of capturing the full state of a database all at once, as in an initial snapshot, Debezium captures each table in phases, in a series of configurable chunks.
You can specify the tables that you want the snapshot to capture and the <a href="#oracle-property-incremental-snapshot-chunk-size">size of each chunk</a>.
The chunk size determines the number of rows that the snapshot collects during each fetch operation on the database.
The default chunk size for incremental snapshots is 1024 rows.</p>
</div>
<div class="paragraph">
<p>As an incremental snapshot proceeds, Debezium uses watermarks to track its progress, maintaining a record of each table row that it captures.
This phased approach to capturing data provides the following advantages over the standard initial snapshot process:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can run incremental snapshots in parallel with streamed data capture, instead of postponing streaming until the snapshot completes.
The connector continues to capture near real-time events from the change log throughout the snapshot process, and neither operation blocks the other.</p>
</li>
<li>
<p>If the progress of an incremental snapshot is interrupted, you can resume it without losing any data.
After the process resumes, the snapshot begins at the point where it stopped, rather than recapturing the table from the beginning.</p>
</li>
<li>
<p>You can run an incremental snapshot on demand at any time, and repeat the process as needed to adapt to database updates.
For example, you might re-run a snapshot after you modify the connector configuration to add a table to its <a href="#oracle-property-table-include-list"><code>table.include.list</code></a> property.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Incremental snapshot process</div>
<p>When you run an incremental snapshot, Debezium sorts each table by primary key and then splits the table into chunks based on the <a href="#oracle-property-incremental-snapshot-chunk-size">configured chunk size</a>.
Working chunk by chunk, it then captures each table row in a chunk.
For each row that it captures, the snapshot emits a <code>READ</code> event.
That event represents the value of the row when the snapshot for the chunk began.</p>
</div>
<div class="paragraph">
<p>As a snapshot proceeds, it’s likely that other processes continue to access the database, potentially modifying table records.
To reflect such changes, <code>INSERT</code>, <code>UPDATE</code>, or <code>DELETE</code> operations are committed to the transaction log as per usual.
Similarly, the ongoing Debezium streaming process continues to detect these change events and emits corresponding change event records to Kafka.</p>
</div>
<div class="paragraph">
<div class="title">How Debezium resolves collisions among records with the same primary key</div>
<p>In some cases, the <code>UPDATE</code> or <code>DELETE</code> events that the streaming process emits are received out of sequence.
That is, the streaming process might emit an event that modifies a table row before the snapshot captures the chunk that contains the <code>READ</code> event for that row.
When the snapshot eventually emits the corresponding <code>READ</code> event for the row, its value is already superseded.
To ensure that incremental snapshot events that arrive out of sequence are processed in the correct logical order, Debezium employs a buffering scheme for resolving collisions.
Only after collisions between the snapshot events and the streamed events are resolved does Debezium emit an event record to Kafka.</p>
</div>
<div class="paragraph">
<div class="title">Snapshot window</div>
<p>To assist in resolving collisions between late-arriving <code>READ</code> events and streamed events that modify the same table row, Debezium employs a so-called <em>snapshot window</em>.
The snapshot windows demarcates the interval during which an incremental snapshot captures data for a specified table chunk.
Before the snapshot window for a chunk opens, Debezium follows its usual behavior and emits events from the transaction log directly downstream to the target Kafka topic.
But from the moment that the snapshot for a particular chunk opens, until it closes, Debezium performs a de-duplication step to resolve collisions between events that have the same primary key..</p>
</div>
<div class="paragraph">
<p>For each data collection, the Debezium emits two types of events, and stores the records for them both in a single destination Kafka topic.
The snapshot records that it  captures directly from a table are emitted as <code>READ</code> operations.
Meanwhile, as users continue to update records in the data collection, and the transaction log is updated to reflect each commit, Debezium emits <code>UPDATE</code> or <code>DELETE</code> operations for each change.</p>
</div>
<div class="paragraph">
<p>As the snapshot window opens, and Debezium begins processing a snapshot chunk, it delivers snapshot records to a memory buffer.
During the snapshot windows, the primary keys of the <code>READ</code> events in the buffer are compared to the primary keys of the incoming streamed events.
If no match is found, the streamed event record is sent directly to Kafka.
If Debezium detects a match, it discards the buffered <code>READ</code> event, and writes the streamed record to the destination topic, because the streamed event logically supersede the static snapshot event.
After the snapshot window for the chunk closes, the buffer contains only <code>READ</code> events for which no related transaction log events exist.
Debezium emits these remaining <code>READ</code> events to the table&#8217;s Kafka topic.</p>
</div>
<div class="paragraph">
<p>The connector repeats the process for each snapshot chunk.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Debezium connector for Oracle does not support schema changes while an incremental snapshot is running.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="oracle-triggering-an-incremental-snapshot"><a class="anchor" href="#oracle-triggering-an-incremental-snapshot"></a>Triggering an incremental snapshot</h4>
<div class="paragraph">
<p>Currently, the only way to initiate an incremental snapshot is to send an <a href="../configuration/signalling.html#debezium-signaling-ad-hoc-snapshots" class="xref page">ad hoc snapshot signal</a> to the signaling table on the source database.</p>
</div>
<div class="paragraph">
<p>You submit a signal to the signaling table as SQL <code>INSERT</code> queries.</p>
</div>
<div class="paragraph">
<p>After Debezium detects the change in the signaling table, it reads the signal, and runs the requested snapshot operation.</p>
</div>
<div class="paragraph">
<p>The query that you submit specifies the tables to include in the snapshot, and, optionally, specifies the type of snapshot operation.
Currently supports the <code>incremental</code> and <code>blocking</code> types.</p>
</div>
<div class="paragraph">
<p>To specify the tables to include in the snapshot, provide a <code>data-collections</code> array that lists the tables or an array of regular expressions used to match tables, for example,<br></p>
</div>
<div class="paragraph">
<p><code>{"data-collections": ["public.MyFirstTable", "public.MySecondTable"]}</code><br></p>
</div>
<div class="paragraph">
<p>The <code>data-collections</code> array for an incremental snapshot signal has no default value.
If the <code>data-collections</code> array is empty, Debezium detects that no action is required and does not perform a snapshot.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the name of a table that you want to include in a snapshot contains a dot (<code>.</code>) in the name of the database, schema, or table, to add the table to the <code>data-collections</code> array, you must escape each part of the name in double quotes.<br>
<br>
For example, to include a table that exists in the <code><strong>public</strong></code> schema and that has the name <code><strong>My.Table</strong></code>, use the following format: <code><strong>"public"."My.Table"</strong></code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="../configuration/signalling.html#debezium-signaling-enabling-source-signaling-channel" class="xref page">Signaling is enabled</a>.<br></p>
<div class="ulist">
<ul>
<li>
<p>A signaling data collection exists on the source database.</p>
</li>
<li>
<p>The signaling data collection is specified in the <a href="#oracle-property-signal-data-collection"><code>signal.data.collection</code></a> property.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Using a source signaling channel to trigger an incremental snapshot</div>
<ol class="arabic">
<li>
<p>Send a SQL query to add the ad hoc incremental snapshot request to the signaling table:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">INSERT INTO <em>&lt;signalTable&gt;</em> (id, type, data) VALUES (<em>'&lt;id&gt;'</em>, <em>'&lt;snapshotType&gt;'</em>, '{"data-collections": ["<em>&lt;tableName&gt;</em>","<em>&lt;tableName&gt;</em>"],"type":"<em>&lt;snapshotType&gt;</em>","additional-conditions":[{"data-collection": "<em>&lt;tableName&gt;</em>", "filter": "<em>&lt;additional-condition&gt;</em>"}]}');</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">INSERT INTO myschema.debezium_signal (id, type, data) <i class="conum" data-value="1"></i><b>(1)</b>
values ('ad-hoc-1',   <i class="conum" data-value="2"></i><b>(2)</b>
    'execute-snapshot',  <i class="conum" data-value="3"></i><b>(3)</b>
    '{"data-collections": ["schema1.table1", "schema2.table2"], <i class="conum" data-value="4"></i><b>(4)</b>
    "type":"incremental", <i class="conum" data-value="5"></i><b>(5)</b>
    "additional-conditions":[{"data-collection": "schema1.table1" ,"filter":"color=\'blue\'"}]}'); <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="paragraph">
<p>The values of the <code>id</code>,<code>type</code>, and <code>data</code> parameters in the command correspond to the <a href="../configuration/signalling.html#debezium-signaling-description-of-required-structure-of-a-signaling-data-collection" class="xref page">fields of the signaling table</a>.</p>
</div>
<div class="paragraph">
<p>The following table describes the parameters in the example:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Descriptions of fields in a SQL command for sending an incremental snapshot signal to the signaling table</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 22.2222%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>myschema.debezium_signal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the fully-qualified name of the signaling table on the source database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ad-hoc-1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>id</code> parameter specifies an arbitrary string that is assigned as the <code>id</code> identifier for the signal request.<br>
Use this string to identify logging messages to entries in the signaling table.
Debezium does not use this string.
Rather, during the snapshot, Debezium generates its own <code>id</code> string as a watermarking signal.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>execute-snapshot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>type</code> parameter specifies the operation that the signal is intended to trigger.<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data-collections</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A required component of the <code>data</code> field of a signal that specifies an array of table names or regular expressions to match table names to include in the snapshot.<br>
The array lists regular expressions which match tables by their fully-qualified names, using the same format as you use to specify the name of the connector&#8217;s signaling table in the <a href="#oracle-property-signal-data-collection"><code>signal.data.collection</code></a> configuration property.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>incremental</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An optional <code>type</code> component of the <code>data</code> field of a signal that specifies the type of snapshot operation to run.<br>
Currently supports the <code>incremental</code> and <code>blocking</code> types.<br>
If you do not specify a value, the connector runs an incremental snapshot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>additional-conditions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An optional array that specifies a set of additional conditions that the connector evaluates to determine the subset of records to include in a snapshot.<br>
Each additional condition is an object with <code>data-collection</code> and <code>filter</code> properties.
You can specify different filters for each data collection.<br>
* The <code>data-collection</code> property is the fully-qualified name of the data collection for which the filter will be applied.
For more information about the <code>additional-conditions</code> parameter, see <a href="#oracle-incremental-snapshots-additional-conditions">Ad hoc incremental snapshots with <code>additional-conditions</code></a>.</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
<div id="oracle-incremental-snapshots-additional-conditions" class="paragraph">
<div class="title">Ad hoc incremental snapshots with <code>additional-conditions</code></div>
<p>If you want a snapshot to include only a subset of the content in a table, you can modify the signal request by appending an <code>additional-conditions</code> parameter to the snapshot signal.</p>
</div>
<div class="paragraph">
<p>The SQL query for a typical snapshot takes the following form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">SELECT * FROM <em>&lt;tableName&gt;</em> ....</code></pre>
</div>
</div>
<div class="paragraph">
<p>By adding an <code>additional-conditions</code> parameter, you append a <code>WHERE</code> condition to the SQL query, as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">SELECT * FROM <em>&lt;data-collection&gt;</em> WHERE <em>&lt;filter&gt;</em> ....</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows a SQL query to send an ad hoc incremental snapshot request with an additional condition to the signaling table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">INSERT INTO <em>&lt;signalTable&gt;</em> (id, type, data) VALUES (<em>'&lt;id&gt;'</em>, <em>'&lt;snapshotType&gt;'</em>, '{"data-collections": ["<em>&lt;tableName&gt;</em>","<em>&lt;tableName&gt;</em>"],"type":"<em>&lt;snapshotType&gt;</em>","additional-conditions":[{"data-collection": "<em>&lt;tableName&gt;</em>", "filter": "<em>&lt;additional-condition&gt;</em>"}]}');</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, suppose you have a <code>products</code> table that contains the following columns:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code> (primary key)</p>
</li>
<li>
<p><code>color</code></p>
</li>
<li>
<p><code>quantity</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want an incremental snapshot of the <code>products</code> table to include only the data items where <code>color=blue</code>, you can use the following SQL statement to trigger the snapshot:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">INSERT INTO myschema.debezium_signal (id, type, data) VALUES('ad-hoc-1', 'execute-snapshot', '{"data-collections": ["schema1.products"],"type":"incremental", "additional-conditions":[{"data-collection": "schema1.products", "filter": "color=blue"}]}');</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>additional-conditions</code> parameter also enables you to pass conditions that are based on more than one column.
For example, using the <code>products</code> table from the previous example, you can submit a query that triggers an incremental snapshot that includes the data of only those items for which <code>color=blue</code> and <code>quantity&gt;10</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">INSERT INTO myschema.debezium_signal (id, type, data) VALUES('ad-hoc-1', 'execute-snapshot', '{"data-collections": ["schema1.products"],"type":"incremental", "additional-conditions":[{"data-collection": "schema1.products", "filter": "color=blue AND quantity&gt;10"}]}');</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example, shows the JSON for an incremental snapshot event that is captured by a connector.</p>
</div>
<div class="listingblock">
<div class="title">Example: Incremental snapshot event message</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "before":null,
    "after": {
        "pk":"1",
        "value":"New data"
    },
    "source": {
        ...
        "snapshot":"incremental" <i class="conum" data-value="1"></i><b>(1)</b>
    },
    "op":"r", <i class="conum" data-value="2"></i><b>(2)</b>
    "ts_ms":"1620393591654",
    "ts_us":"1620393591654547",
    "ts_ns":"1620393591654547920",
    "transaction":null
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Field name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>snapshot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the type of snapshot operation to run.<br>
Currently, the only valid options are <code>blocking</code> and <code>incremental</code>.<br>
Specifying a <code>type</code> value in the SQL query that you submit to the signaling table is optional.<br>
If you do not specify a value, the connector runs an incremental snapshot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>op</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the event type.<br>
The value for snapshot events is <code>r</code>, signifying a <code>READ</code> operation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="oracle-triggering-an-incremental-snapshot-kafka"><a class="anchor" href="#oracle-triggering-an-incremental-snapshot-kafka"></a>Using the Kafka signaling channel to trigger an incremental snapshot</h4>
<div class="paragraph">
<p>You can send a message to the <a href="../configuration/signalling.html#debezium-signaling-enabling-kafka-signaling-channel" class="xref page">configured Kafka topic</a> to request the connector to run an ad hoc incremental snapshot.</p>
</div>
<div class="paragraph">
<p>The key of the Kafka message must match the value of the <code>topic.prefix</code> connector configuration option.</p>
</div>
<div class="paragraph">
<p>The value of the message is a JSON object with <code>type</code> and <code>data</code> fields.</p>
</div>
<div class="paragraph">
<p>The signal type is <code>execute-snapshot</code>, and the <code>data</code> field must have the following fields:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Execute snapshot data fields</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>incremental</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The type of the snapshot to be executed.
Currently Debezium supports the <code>incremental</code> and <code>blocking</code> types.<br>
See the next section for more details.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data-collections</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>N/A</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An array of comma-separated regular expressions that match the fully-qualified names of tables to include in the snapshot.<br>
Specify the names by using the same format as is required for the <a href="#oracle-property-signal-data-collection">signal.data.collection</a> configuration option.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>additional-conditions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>N/A</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional array of additional conditions that specifies criteria that the connector evaluates to designate a subset of records to include in a snapshot.<br>
Each additional condition is an object that specifies the criteria for filtering the data that an ad hoc snapshot captures.
You can set the following parameters for each additional condition:
<code>data-collection</code>:: The fully-qualified name of the table that the filter applies to.
You can apply different filters to each table.
<code>filter</code>:: Specifies column values that must be present in a database record for the snapshot to include it, for example,  <code>"color='blue'"</code>.<br>
<br>
The values that you assign to the <code>filter</code> parameter are the same types of values that you might specify in the <code>WHERE</code> clause of <code>SELECT</code> statements when you set the <code>snapshot.select.statement.overrides</code> property for a blocking snapshot.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>An example of the execute-snapshot Kafka message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Key = `test_connector`

Value = `{"type":"execute-snapshot","data": {"data-collections": ["schema1.table1", "schema1.table2"], "type": "INCREMENTAL"}}`</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Ad hoc incremental snapshots with additional-conditions</div>
<p>Debezium uses the <code>additional-conditions</code> field to select a subset of a table&#8217;s content.</p>
</div>
<div class="paragraph">
<p>Typically, when Debezium runs a snapshot, it runs a SQL query such as:</p>
</div>
<div class="paragraph">
<p><code>SELECT * FROM <em>&lt;tableName&gt;</em> &#8230;&#8203;.</code></p>
</div>
<div class="paragraph">
<p>When the snapshot request includes an <code>additional-conditions</code> property, the <code>data-collection</code> and <code>filter</code> parameters of the  property are appended to the SQL query, for example:</p>
</div>
<div class="paragraph">
<p><code>SELECT * FROM <em>&lt;data-collection&gt;</em> WHERE <em>&lt;filter&gt;</em> &#8230;&#8203;.</code></p>
</div>
<div class="paragraph">
<p>For example, given a <code>products</code> table with the columns <code>id</code> (primary key), <code>color</code>, and <code>brand</code>, if you want a snapshot to include only content for which <code>color='blue'</code>, when you request the snapshot, you could add the <code>additional-conditions</code> property to filter the content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Key = `test_connector`

Value = `{"type":"execute-snapshot","data": {"data-collections": ["schema1.products"], "type": "INCREMENTAL", "additional-conditions": [{"data-collection": "schema1.products" ,"filter":"color='blue'"}]}}`</pre>
</div>
</div>
<div class="paragraph">
<p>You can use the <code>additional-conditions</code> property to pass conditions based on multiple columns.
For example, using the same <code>products</code> table as in the previous example, if you want a snapshot to include only the content from the <code>products</code> table for which <code>color='blue'</code>, and <code>brand='MyBrand'</code>, you could send the following request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Key = `test_connector`

Value = `{"type":"execute-snapshot","data": {"data-collections": ["schema1.products"], "type": "INCREMENTAL", "additional-conditions": [{"data-collection": "schema1.products" ,"filter":"color='blue' AND brand='MyBrand'"}]}}`</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="oracle-stopping-an-incremental-snapshot"><a class="anchor" href="#oracle-stopping-an-incremental-snapshot"></a>Stopping an incremental snapshot</h4>
<div class="paragraph">
<p>You can also stop an incremental snapshot by sending a signal to the table on the source database.
You submit a stop snapshot signal to the table by sending a SQL <code>INSERT</code> query.</p>
</div>
<div class="paragraph">
<p>After Debezium detects the change in the signaling table, it reads the signal, and stops the incremental snapshot operation if it&#8217;s in progress.</p>
</div>
<div class="paragraph">
<p>The query that you submit specifies the snapshot operation of <code>incremental</code>, and, optionally, the tables of the current running snapshot to be removed.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="../configuration/signalling.html#debezium-signaling-enabling-source-signaling-channel" class="xref page">Signaling is enabled</a>.<br></p>
<div class="ulist">
<ul>
<li>
<p>A signaling data collection exists on the source database.</p>
</li>
<li>
<p>The signaling data collection is specified in the <a href="#oracle-property-signal-data-collection"><code>signal.data.collection</code></a> property.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Using a source signaling channel to stop an incremental snapshot</div>
<ol class="arabic">
<li>
<p>Send a SQL query to stop the ad hoc incremental snapshot to the signaling table:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">INSERT INTO <em>&lt;signalTable&gt;</em> (id, type, data) values (<em>'&lt;id&gt;'</em>, 'stop-snapshot', '{"data-collections": ["<em>&lt;tableName&gt;</em>","<em>&lt;tableName&gt;</em>"],"type":"incremental"}');</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">INSERT INTO myschema.debezium_signal (id, type, data) <i class="conum" data-value="1"></i><b>(1)</b>
values ('ad-hoc-1',   <i class="conum" data-value="2"></i><b>(2)</b>
    'stop-snapshot',  <i class="conum" data-value="3"></i><b>(3)</b>
    '{"data-collections": ["schema1.table1", "schema2.table2"], <i class="conum" data-value="4"></i><b>(4)</b>
    "type":"incremental"}'); <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="paragraph">
<p>The values of the <code>id</code>, <code>type</code>, and <code>data</code> parameters in the signal command correspond to the <a href="../configuration/signalling.html#debezium-signaling-description-of-required-structure-of-a-signaling-data-collection" class="xref page">fields of the signaling table</a>.</p>
</div>
<div class="paragraph">
<p>The following table describes the parameters in the example:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Descriptions of fields in a SQL command for sending a stop incremental snapshot signal to the signaling table</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 22.2222%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>myschema.debezium_signal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the fully-qualified name of the signaling table on the source database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ad-hoc-1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>id</code> parameter specifies an arbitrary string that is assigned as the <code>id</code> identifier for the signal request.<br>
Use this string to identify logging messages to entries in the signaling table.
Debezium does not use this string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stop-snapshot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies <code>type</code> parameter specifies the operation that the signal is intended to trigger.<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data-collections</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An optional component of the <code>data</code> field of a signal that specifies an array of table names or regular expressions to match table names to remove from the snapshot.<br>
The array lists regular expressions which match tables by their fully-qualified names, using the same format as you use to specify the name of the connector&#8217;s signaling table in the <a href="#oracle-property-signal-data-collection"><code>signal.data.collection</code></a> configuration property.
If this component of the <code>data</code> field is omitted, the signal stops the entire incremental snapshot that is in progress.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>incremental</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A required component of the <code>data</code> field of a signal that specifies the type of snapshot operation that is to be stopped.<br>
Currently, the only valid option is <code>incremental</code>.<br>
If you do not specify a <code>type</code> value, the signal fails to stop the incremental snapshot.</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="oracle-stopping-an-incremental-snapshot-kafka"><a class="anchor" href="#oracle-stopping-an-incremental-snapshot-kafka"></a>Using the Kafka signaling channel to stop an incremental snapshot</h4>
<div class="paragraph">
<p>You can send a signal message to the <a href="../configuration/signalling.html#debezium-signaling-enabling-kafka-signaling-channel" class="xref page">configured Kafka signaling topic</a> to stop an ad hoc incremental snapshot.</p>
</div>
<div class="paragraph">
<p>The key of the Kafka message must match the value of the <code>topic.prefix</code> connector configuration option.</p>
</div>
<div class="paragraph">
<p>The value of the message is a JSON object with <code>type</code> and <code>data</code> fields.</p>
</div>
<div class="paragraph">
<p>The signal type is <code>stop-snapshot</code>, and the <code>data</code> field must have the following fields:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Execute snapshot data fields</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>incremental</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of the snapshot to be executed.
Currently Debezium supports only the <code>incremental</code> type. <br>
See the next section for more details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data-collections</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>N/A</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An optional array of comma-separated regular expressions that match the fully-qualified names of the tables to include in the snapshot.<br>
Specify the names by using the same format as is required for the <a href="#oracle-property-signal-data-collection">signal.data.collection</a> configuration option.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following example shows a typical <code>stop-snapshot</code> Kafka message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Key = `test_connector`

Value = `{"type":"stop-snapshot","data": {"data-collections": ["schema1.table1", "schema1.table2"], "type": "INCREMENTAL"}}`</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="connector-custom-snapshot"><a class="anchor" href="#connector-custom-snapshot"></a>Custom snapshotter SPI</h3>
<div class="paragraph">
<p>For more advanced uses, you can fine-tune control of the snapshot by implementing one of the following interfaces:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>io.debezium.snapshot.spi.Snapshotter</code></dt>
<dd>
<p>Controls whether the connector takes a snapshot.</p>
</dd>
<dt class="hdlist1"><code>io.debezium.snapshot.spi.SnapshotQuery</code></dt>
<dd>
<p>Controls how data is queried during a snapshot.</p>
</dd>
<dt class="hdlist1"><code>io.debezium.snapshot.spi.SnapshotLock</code></dt>
<dd>
<p>Controls whether the connector locks tables when taking a snapshot.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">io.debezium.snapshot.spi.Snapshotter interface. All built-in snapshot modes implement this interface.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/**
 * {@link Snapshotter} is used to determine the following details about the snapshot process:
 * &lt;p&gt;
 * - Whether a snapshot occurs. &lt;br&gt;
 * - Whether streaming continues during the snapshot. &lt;br&gt;
 * - Whether the snapshot includes schema (if supported). &lt;br&gt;
 * - Whether to snapshot data or schema following an error.
 * &lt;p&gt;
 * Although Debezium provides many default snapshot modes,
 * to provide more advanced functionality, such as partial snapshots,
 * you can customize implementation of the interface.
 * For more information, see the documentation.
 *
 *
 *
 */
@Incubating
public interface Snapshotter extends Configurable {

    /**
     * @return the name of the snapshotter.
     *
     *
     */
    String name();

    /**
     * @param offsetExists is {@code true} when the connector has an offset context (i.e. restarted)
     * @param snapshotInProgress is {@code true} when the connector is started, but a snapshot is already in progress
     *
     * @return {@code true} if the snapshotter should take a data snapshot
     */
    boolean shouldSnapshotData(boolean offsetExists, boolean snapshotInProgress);

    /**
     * @param offsetExists is {@code true} when the connector has an offset context (i.e. restarted)
     * @param snapshotInProgress is {@code true} when the connector is started, but a snapshot is already in progress
     *
     * @return {@code true} if the snapshotter should take a schema snapshot
     */
    boolean shouldSnapshotSchema(boolean offsetExists, boolean snapshotInProgress);

    /**
     * @return {@code true} if the snapshotter should stream after taking a snapshot
     */
    boolean shouldStream();

    /**
     * @return {@code true} whether the schema can be recovered if database schema history is corrupted.
     */
    boolean shouldSnapshotOnSchemaError();

    /**
     * @return {@code true} whether the snapshot should be re-executed when there is a gap in data stream.
     */
    boolean shouldSnapshotOnDataError();

    /**
     *
     * @return {@code true} if streaming should resume from the start of the snapshot
     * transaction, or {@code false} for when a connector resumes and takes a snapshot,
     * streaming should resume from where streaming previously left off.
     */
    default boolean shouldStreamEventsStartingFromSnapshot() {
        return true;
    }

    /**
     * Lifecycle hook called after the snapshot phase is successful.
     */
    default void snapshotCompleted() {
        // no operation
    }

    /**
     * Lifecycle hook called after the snapshot phase is aborted.
     */
    default void snapshotAborted() {
        // no operation
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">io.debezium.snapshot.spi.SnapshotQuery interface. All built-in snapshot query modes implement this interface.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/**
 * {@link SnapshotQuery} is used to determine the query used during a data snapshot
 *
 *
 */
public interface SnapshotQuery extends Configurable, Service {

    /**
     * @return the name of the snapshot lock.
     *
     *
     */
    String name();

    /**
     * Generate a valid query string for the specified table, or an empty {@link Optional}
     * to skip snapshotting this table (but that table will still be streamed from)
     *
     * @param tableId the table to generate a query for
     * @param snapshotSelectColumns the columns to be used in the snapshot select based on the column
     *                              include/exclude filters
     * @return a valid query string, or none to skip snapshotting this table
     */
    Optional&lt;String&gt; snapshotQuery(String tableId, List&lt;String&gt; snapshotSelectColumns);

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">io.debezium.snapshot.spi.SnapshotLock interface. All built-in snapshot lock modes implement this interface.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/**
 * {@link SnapshotLock} is used to determine the table lock mode used during schema snapshot
 *
 *
 */
public interface SnapshotLock extends Configurable, Service {

    /**
     * @return the name of the snapshot lock.
     *
     *
     */
    String name();

    /**
     * Returns a SQL statement for locking the given table during snapshotting, if required by the specific snapshotter
     * implementation.
     */
    Optional&lt;String&gt; tableLockingStatement(Duration lockTimeout, String tableId);

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="oracle-blocking-snapshots"><a class="anchor" href="#oracle-blocking-snapshots"></a>Blocking snapshots</h3>
<div class="paragraph">
<p>To provide more flexibility in managing snapshots, Debezium includes a supplementary ad hoc snapshot mechanism, known as a <em>blocking snapshot</em>.
Blocking snapshots rely on the Debezium mechanism for <a href="../configuration/signalling.html#sending-signals-to-a-debezium-connector" class="xref page">sending signals to a Debezium connector</a>.</p>
</div>
<div class="paragraph">
<p>A blocking snapshot behaves just like an <em>initial snapshot</em>, except that you can trigger it at run time.</p>
</div>
<div class="paragraph">
<p>You might want to run a blocking snapshot rather than use the standard initial snapshot process in the following situations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You add a new table and you want to complete the snapshot while the connector is running.</p>
</li>
<li>
<p>You add a large table, and you want the snapshot to complete in less time than is possible with an incremental snapshot.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Blocking snapshot process</div>
<p>When you run a blocking snapshot, Debezium stops streaming, and then initiates a snapshot of the specified table, following the same process that it uses during an initial snapshot.
After the snapshot completes, the streaming is resumed.</p>
</div>
<div class="paragraph">
<div class="title">Configure snapshot</div>
<p>You can set the following properties in the <code>data</code> component of a signal:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>data-collections: to specify which tables must be snapshot</p>
</li>
<li>
<p>additional-conditions: You can specify different filters for different table.<br></p>
<div class="ulist">
<ul>
<li>
<p>The <code>data-collection</code> property is the fully-qualified name of the table for which the filter will be applied.</p>
</li>
<li>
<p>The <code>filter</code> property will have the same value used in the  <code>snapshot.select.statement.overrides</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">  {"type": "blocking", "data-collections": ["schema1.table1", "schema1.table2"], "additional-conditions": [{"data-collection": "schema1.table1", "filter": "SELECT * FROM [schema1].[table1] WHERE column1 = 0 ORDER BY column2 DESC"}, {"data-collection": "schema1.table2", "filter": "SELECT * FROM [schema1].[table2] WHERE column2 &gt; 0"}]}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Possible duplicates</div>
<p>A delay might exist between the time that you send the signal to trigger the snapshot, and the time when streaming stops and the snapshot starts.
As a result of this delay, after the snapshot completes, the connector might emit some event records that duplicate records captured by the snapshot.</p>
</div>
</div>
<div class="sect2">
<h3 id="oracle-topic-names"><a class="anchor" href="#oracle-topic-names"></a>Topic names</h3>
<div class="paragraph">
<p>By default, the Oracle connector writes change events for all <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code> operations that occur in a table to a single Apache Kafka topic that is specific to that table.
The connector uses the following convention to name change event topics:</p>
</div>
<div class="paragraph">
<p><em>topicPrefix.schemaName.tableName</em></p>
</div>
<div class="paragraph">
<p>The following list provides definitions for the components of the default name:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><em>topicPrefix</em></dt>
<dd>
<p>The topic prefix as specified by the <a href="#oracle-property-topic-prefix"><code>topic.prefix</code></a> connector configuration property.</p>
</dd>
<dt class="hdlist1"><em>schemaName</em></dt>
<dd>
<p>The name of the schema in which the operation occurred.</p>
</dd>
<dt class="hdlist1"><em>tableName</em></dt>
<dd>
<p>The name of the table in which the operation occurred.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example, if <code>fulfillment</code> is the server name, <code>inventory</code> is the schema name, and the database contains tables with the names <code>orders</code>, <code>customers</code>, and <code>products</code>,
the Debezium Oracle connector emits events to the following Kafka topics, one for each table in the database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>fulfillment.inventory.orders
fulfillment.inventory.customers
fulfillment.inventory.products</pre>
</div>
</div>
<div class="paragraph">
<p>The connector applies similar naming conventions to label its internal database schema history topics, <a href="#oracle-schema-change-topic">schema change topics</a>, and <a href="#oracle-transaction-metadata">transaction metadata topics</a>.</p>
</div>
<div class="paragraph">
<p>If the default topic name do not meet your requirements, you can configure custom topic names.
To configure custom topic names, you specify regular expressions in the logical topic routing SMT.
For more information about using the logical topic routing SMT to customize topic naming, see <a href="../transformations/topic-routing.html#topic-routing" class="xref page">Topic routing</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="oracle-schema-history-topic"><a class="anchor" href="#oracle-schema-history-topic"></a>Schema history topic</h3>
<div class="paragraph">
<p>When a database client queries a database, the client uses the database’s current schema.
However, the database schema can be changed at any time, which means that the connector must be able to identify what the schema was at the time each insert, update, or delete operation was recorded.
Also, a connector cannot necessarily apply the current schema to every event.
If an event is relatively old, it&#8217;s possible that it was recorded before the current schema was applied.</p>
</div>
<div class="paragraph">
<p>To ensure correct processing of events that occur after a schema change, Oracle includes in the redo log not only the row-level changes that affect the data, but also the DDL statements that are applied to the database.
As the connector encounters these DDL statements in the redo log, it parses them and updates an in-memory representation of each table’s schema.
The connector uses this schema representation to identify the structure of the tables at the time of each insert, update, or delete operation and to produce the appropriate change event.
In a separate database schema history Kafka topic, the connector records all DDL statements along with the position in the redo log where each DDL statement appeared.</p>
</div>
<div class="paragraph">
<p>When the connector restarts after either a crash or a graceful stop, it starts reading the redo log from a specific position, that is, from a specific point in time.
The connector rebuilds the table structures that existed at this point in time by reading the database schema history Kafka topic and parsing all DDL statements up to the point in the redo log where the connector is starting.</p>
</div>
<div class="paragraph">
<p>This database schema history topic is internal for internal connector use only.
Optionally, the connector can also <a href="#oracle-schema-change-topic">emit schema change events to a different topic that is intended for consumer applications</a>.</p>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="#oracle-topic-names">Default names for topics</a> that receive Debezium event records.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="oracle-schema-change-topic"><a class="anchor" href="#oracle-schema-change-topic"></a>Schema change topic</h3>
<div class="paragraph">
<p>You can configure a Debezium Oracle connector to produce schema change events that describe structural changes that are applied to tables in the database.
The connector writes schema change events to a Kafka topic named <code><em>&lt;serverName&gt;</em></code>, where <code><em>serverName</em></code> is the namespace that is specified in the <a href="#oracle-property-topic-prefix"><code>topic.prefix</code></a> configuration property.</p>
</div>
<div class="paragraph">
<p>Debezium emits a new message to the schema change topic whenever it streams data from a new table, or when the structure of the table is altered.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Following a change in table structure, you must follow (the <a href="#surrogate-schema-evolution">schema evolution procedure</a>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Messages that the connector sends to the schema change topic contain a payload, and, optionally, also contain the schema of the change event message.</p>
</div>
<div class="paragraph">
<p>The schema for the schema change event has the following elements:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>name</code></dt>
<dd>
<p>The name of the schema change event message.</p>
</dd>
<dt class="hdlist1"><code>type</code></dt>
<dd>
<p>The type of the change event message.</p>
</dd>
<dt class="hdlist1"><code>version</code></dt>
<dd>
<p>The version of the schema. The version is an integer that is incremented each time the schema is changed.</p>
</dd>
<dt class="hdlist1"><code>fields</code></dt>
<dd>
<p>The fields that are included in the change event message.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<div class="title">Example: Schema of the Oracle connector schema change topic</div>
<p>The following example shows a typical schema in JSON format.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": {
    "type": "struct",
    "fields": [
      {
        "type": "string",
        "optional": false,
        "field": "databaseName"
      }
    ],
    "optional": false,
    "name": "io.debezium.connector.oracle.SchemaChangeKey",
    "version": 1
  },
  "payload": {
    "databaseName": "inventory"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The payload of a schema change event message includes the following elements:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>ddl</code></dt>
<dd>
<p>Provides the SQL <code>CREATE</code>, <code>ALTER</code>, or <code>DROP</code> statement that results in the schema change.</p>
</dd>
<dt class="hdlist1"><code>databaseName</code></dt>
<dd>
<p>The name of the database to which the statements are applied.
The value of <code>databaseName</code> serves as the message key.</p>
</dd>
<dt class="hdlist1"><code>tableChanges</code></dt>
<dd>
<p>A structured representation of the entire table schema after the schema change.
The <code>tableChanges</code> field contains an array that includes entries for each column of the table.
Because the structured representation presents data in JSON or Avro format, consumers can easily read messages without first processing them through a DDL parser.</p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default, the connector uses the <code>ALL_TABLES</code> database view to identify the table names to store in the schema history topic.
Within that view, the connector can access data only from tables that are available to the user account through which it connects to the database.</p>
</div>
<div class="paragraph">
<p>You can modify settings so that the schema history topic stores a different subset of tables.
Use one of the following methods to alter the set of tables that the topic stores:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Change the permissions of the account that Debezium uses to access the database so that a different set of tables are visible in the <code>ALL_TABLES</code> view.</p>
</li>
<li>
<p>Set the connector property <a href="#oracle-property-database-history-store-only-captured-tables-ddl"><code>schema.history.internal.store.only.captured.tables.ddl</code></a> to <code>true</code>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When the connector is configured to capture a table, it stores the history of the table&#8217;s schema changes not only in the schema change topic, but also in an internal database schema history topic.
The internal database schema history topic is for connector use only and it is not intended for direct use by consuming applications.
Ensure that applications that require notifications about schema changes consume that information only from the schema change topic.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Never partition the database schema history topic.
For the database schema history topic to function correctly, it must maintain a consistent, global order of the event records that the connector emits to it.</p>
</div>
<div class="paragraph">
<p>To ensure that the topic is not split among partitions, set the partition count for the topic by using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you create the database schema history topic manually, specify a partition count of <code>1</code>.</p>
</li>
<li>
<p>If you use the Apache Kafka broker to create the database schema history topic automatically, the topic is created, set the value of the <a href="https://kafka.apache.org/documentation/#brokerconfigs_num.partitions">Kafka <code>num.partitions</code></a> configuration option to <code>1</code>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The schema change topic message format is in an incubating state and might change without notice.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Example: Message emitted to the Oracle connector schema change topic</div>
<p>The following example shows a typical schema change message in JSON format.
The message contains a logical representation of the table schema.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": {
  ...
  },
  "payload": {
    "source": {
      "version": "2.7.1.Final",
      "connector": "oracle",
      "name": "server1",
      "ts_ms": 1588252618953,
      "ts_us": 1588252618953000,
      "ts_ns": 1588252618953000000,
      "snapshot": "true",
      "db": "ORCLPDB1",
      "schema": "DEBEZIUM",
      "table": "CUSTOMERS",
      "txId" : null,
      "scn" : "1513734",
      "commit_scn": "1513754",
      "lcr_position" : null,
      "rs_id": "001234.00012345.0124",
      "ssn": 1,
      "redo_thread": 1,
      "user_name": "user",
      "row_id": "AAASgjAAMAAAACnAAA"
    },
    "ts_ms": 1588252618953, <i class="conum" data-value="1"></i><b>(1)</b>
    "ts_us": 1588252618953987, <i class="conum" data-value="1"></i><b>(1)</b>
    "ts_ns": 1588252618953987512, <i class="conum" data-value="1"></i><b>(1)</b>
    "databaseName": "ORCLPDB1", <i class="conum" data-value="2"></i><b>(2)</b>
    "schemaName": "DEBEZIUM", //
    "ddl": "CREATE TABLE \"DEBEZIUM\".\"CUSTOMERS\" \n   (    \"ID\" NUMBER(9,0) NOT NULL ENABLE, \n    \"FIRST_NAME\" VARCHAR2(255), \n    \"LAST_NAME" VARCHAR2(255), \n    \"EMAIL\" VARCHAR2(255), \n     PRIMARY KEY (\"ID\") ENABLE, \n     SUPPLEMENTAL LOG DATA (ALL) COLUMNS\n   ) SEGMENT CREATION IMMEDIATE \n  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 \n NOCOMPRESS LOGGING\n  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645\n  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1\n  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)\n  TABLESPACE \"USERS\" ", <i class="conum" data-value="3"></i><b>(3)</b>
    "tableChanges": [ <i class="conum" data-value="4"></i><b>(4)</b>
      {
        "type": "CREATE", <i class="conum" data-value="5"></i><b>(5)</b>
        "id": "\"ORCLPDB1\".\"DEBEZIUM\".\"CUSTOMERS\"", <i class="conum" data-value="6"></i><b>(6)</b>
        "table": { <i class="conum" data-value="7"></i><b>(7)</b>
          "defaultCharsetName": null,
          "primaryKeyColumnNames": [ <i class="conum" data-value="8"></i><b>(8)</b>
            "ID"
          ],
          "columns": [ <i class="conum" data-value="9"></i><b>(9)</b>
            {
              "name": "ID",
              "jdbcType": 2,
              "nativeType": null,
              "typeName": "NUMBER",
              "typeExpression": "NUMBER",
              "charsetName": null,
              "length": 9,
              "scale": 0,
              "position": 1,
              "optional": false,
              "autoIncremented": false,
              "generated": false
            },
            {
              "name": "FIRST_NAME",
              "jdbcType": 12,
              "nativeType": null,
              "typeName": "VARCHAR2",
              "typeExpression": "VARCHAR2",
              "charsetName": null,
              "length": 255,
              "scale": null,
              "position": 2,
              "optional": false,
              "autoIncremented": false,
              "generated": false
            },
            {
              "name": "LAST_NAME",
              "jdbcType": 12,
              "nativeType": null,
              "typeName": "VARCHAR2",
              "typeExpression": "VARCHAR2",
              "charsetName": null,
              "length": 255,
              "scale": null,
              "position": 3,
              "optional": false,
              "autoIncremented": false,
              "generated": false
            },
            {
              "name": "EMAIL",
              "jdbcType": 12,
              "nativeType": null,
              "typeName": "VARCHAR2",
              "typeExpression": "VARCHAR2",
              "charsetName": null,
              "length": 255,
              "scale": null,
              "position": 4,
              "optional": false,
              "autoIncremented": false,
              "generated": false
            }
          ],
          "attributes": [ <i class="conum" data-value="10"></i><b>(10)</b>
            {
              "customAttribute": "attributeValue"
            }
          ]
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Descriptions of fields in messages emitted to the schema change topic</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Field name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ts_ms</code>, <code>ts_us</code>, <code>ts_ns</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional field that displays the time at which the connector processed the event.
The time is based on the system clock in the JVM running the Kafka Connect task.</p>
<p class="tableblock">In the source object, ts_ms indicates the time that the change was made in the database. By comparing the value for payload.source.ts_ms with the value for payload.ts_ms, you can determine the lag between the source database update and Debezium.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>databaseName</code><br>
<code>schemaName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifies the database and the schema that contains the change.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This field contains the DDL that is responsible for the schema change.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tableChanges</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An array of one or more items that contain the schema changes generated by a DDL command.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Describes the kind of change. The <code>type</code> can be set to one of the following values:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>CREATE</code></dt>
<dd>
<p>Table created.</p>
</dd>
<dt class="hdlist1"><code>ALTER</code></dt>
<dd>
<p>Table modified.</p>
</dd>
<dt class="hdlist1"><code>DROP</code></dt>
<dd>
<p>Table deleted.</p>
</dd>
</dl>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full identifier of the table that was created, altered, or dropped.
In the case of a table rename, this identifier is a concatenation of <code><em>&lt;old&gt;</em>,<em>&lt;new&gt;</em></code> table names.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents table metadata after the applied change.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>primaryKeyColumnNames</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of columns that compose the table&#8217;s primary key.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>columns</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata for each column in the changed table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>attributes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom attribute metadata for each table change.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In messages that the connector sends to the schema change topic, the message key is the name of the database that contains the schema change.
In the following example, the <code>payload</code> field contains the <code>databaseName</code> key:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": {
    "type": "struct",
    "fields": [
      {
        "type": "string",
        "optional": false,
        "field": "databaseName"
      }
    ],
    "optional": false,
    "name": "io.debezium.connector.oracle.SchemaChangeKey",
    "version": 1
  },
  "payload": {
    "databaseName": "ORCLPDB1"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="oracle-transaction-metadata"><a class="anchor" href="#oracle-transaction-metadata"></a>Transaction Metadata</h3>
<div class="paragraph">
<p>Debezium can generate events that represent transaction metadata boundaries and that enrich data change event messages.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Limits on when Debezium receives transaction metadata</div>
<div class="paragraph">
<p>Debezium registers and receives metadata only for transactions that occur after you deploy the connector.
Metadata for transactions that occur before you deploy the connector is not available.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Database transactions are represented by a statement block that is enclosed between the <code>BEGIN</code> and <code>END</code> keywords.
Debezium generates transaction boundary events for the <code>BEGIN</code> and <code>END</code> delimiters in every transaction.
Transaction boundary events contain the following fields:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>status</code></dt>
<dd>
<p><code>BEGIN</code> or <code>END</code>.</p>
</dd>
<dt class="hdlist1"><code>id</code></dt>
<dd>
<p>String representation of the unique transaction identifier.</p>
</dd>
<dt class="hdlist1"><code>ts_ms</code></dt>
<dd>
<p>The time of a transaction boundary event (<code>BEGIN</code> or <code>END</code> event) at the data source.
If the data source does not provide Debezium with the event time, then the field instead represents the time at which Debezium processes the event.</p>
</dd>
<dt class="hdlist1"><code>event_count</code> (for <code>END</code> events)</dt>
<dd>
<p>Total number of events emmitted by the transaction.</p>
</dd>
<dt class="hdlist1"><code>data_collections</code> (for <code>END</code> events)</dt>
<dd>
<p>An array of pairs of <code>data_collection</code> and <code>event_count</code> elements that indicates the number of events that the connector emits for changes that originate from a data collection.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The following example shows a typical transaction boundary message:</p>
</div>
<div class="listingblock">
<div class="title">Example: Oracle connector transaction boundary event</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "status": "BEGIN",
  "id": "5.6.641",
  "ts_ms": 1486500577125,
  "event_count": null,
  "data_collections": null
}

{
  "status": "END",
  "id": "5.6.641",
  "ts_ms": 1486500577691,
  "event_count": 2,
  "data_collections": [
    {
      "data_collection": "ORCLPDB1.DEBEZIUM.CUSTOMER",
      "event_count": 1
    },
    {
      "data_collection": "ORCLPDB1.DEBEZIUM.ORDER",
      "event_count": 1
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unless overridden via the <a href="#oracle-property-topic-transaction"><code>topic.transaction</code></a> option,
the connector emits transaction events to the <a href="#oracle-property-topic-prefix"><code><em>&lt;topic.prefix&gt;</em></code></a><code>.transaction</code> topic.</p>
</div>
<div class="sect3">
<h4 id="_change_data_event_enrichment"><a class="anchor" href="#_change_data_event_enrichment"></a>Change data event enrichment</h4>
<div class="paragraph">
<p>When transaction metadata is enabled, the data message <code>Envelope</code> is enriched with a new <code>transaction</code> field.
This field provides information about every event in the form of a composite of fields:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>id</code></dt>
<dd>
<p>String representation of unique transaction identifier.</p>
</dd>
<dt class="hdlist1"><code>total_order</code></dt>
<dd>
<p>The absolute position of the event among all events generated by the transaction.</p>
</dd>
<dt class="hdlist1"><code>data_collection_order</code></dt>
<dd>
<p>The per-data collection position of the event among all events that were emitted by the transaction.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The following example shows a typical transaction event message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "before": null,
  "after": {
    "pk": "2",
    "aa": "1"
  },
  "source": {
...
  },
  "op": "c",
  "ts_ms": "1580390884335",
  "ts_us": "1580390884335741",
  "ts_ns": "1580390884335741963",
  "transaction": {
    "id": "5.6.641",
    "total_order": "1",
    "data_collection_order": "1"
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="oracle-logminer-mining-strategies"><a class="anchor" href="#oracle-logminer-mining-strategies"></a>LogMiner Mining Strategies</h3>
<div class="paragraph">
<p>Entries in the Oracle redo logs do not store the original SQL statements that users submit to make DML changes.
Instead, a redo entry holds a set of change vectors and a set of object identifiers that represent the tablespace, table, and columns related to these vectors.
In other words, redo log entries don&#8217;t include the names of the schemas, tables, or columns affected by DML changes.</p>
</div>
<div class="paragraph">
<p>The Debezium Oracle connector uses the <a href="#oracle-property-log-mining-strategy"><code>log.mining.strategy</code></a> configuration property to control how Oracle LogMiner handles the lookup of the object identifiers in the change vectors.
In certain situations, one log mining strategy might prove more reliable than another with regard to schema changes.
However, before you choose a log mining strategy, it&#8217;s important to consider the implications it might have on performance and overhead.</p>
</div>
<div class="sect3">
<h4 id="_writing_the_data_dictionary_to_redo_logs"><a class="anchor" href="#_writing_the_data_dictionary_to_redo_logs"></a>Writing the data dictionary to redo logs</h4>
<div class="paragraph">
<p>The default mining strategy is called <code>redo_log_catalog</code>.
In this strategy, the database flushes a copy of the data dictionary to the redo logs immediately after each redo log switch.
This is the most reliable strategy for tracking schema changes that are interwoven with data changes, because Oracle LogMiner has a way to interpolate between the starting and ending data dictionary states across a series of change vectors.</p>
</div>
<div class="paragraph">
<p>However, the <code>redo_log_catalog</code> mode is also the most expensive, because it requires several key steps to function.
First, this mode requires the data dictionary to be flushed to the redo logs after every log switch.
Flushing the logs after each switch can quickly consume valuable space in the archive log, and the high volume of archive logs might exceed the number that database administrators prepared for.
If you intend to use this mode, coordinate with your database administrators to ensure that the database is configured appropriately.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you configure the connector to use the <code>redo_log_catalog</code> mode, do not use multiple Debezium Oracle connectors to capture changes from the same logical database.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_online_catalog_directly"><a class="anchor" href="#_using_the_online_catalog_directly"></a>Using the online catalog directly</h4>
<div class="paragraph">
<p>The next strategy mode, <code>online_catalog</code>, works differently from the <code>redo_log_catalog</code> mode.
When the strategy is set to <code>online_catalog</code>, the database never flushes the data dictionary to the redo logs.
Instead, Oracle LogMiner always uses the most current data dictionary state to perform comparisons.
By always using the current dictionary, and eliminating flushing to the redo logs, this strategy requires less overhead, and operates more efficiently.
However, these benefits are offset by the inability to parse interwoven schema changes and data changes.
As a result, this strategy can sometimes result in event failures.</p>
</div>
<div class="paragraph">
<p>If LogMiner was unable to reconstruct the SQL reliability after a schema change, check the redo logs for evidence.
Look for references to tables with names like <code>OBJ# 123456</code> (where the number is the table&#8217;s object identifier), or for columns with names like <code>COL1</code> or <code>COL2</code>.
When you configure the connector to use the <code>online_catalog</code> strategy, take steps to ensure that the table schema and its indices remain static and free from change.
If the Debezium connector is configured to use the <code>online_catalog</code> mode, and you must apply a schema change, perform the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Wait for the connector to capture all existing data changes (DML).</p>
</li>
<li>
<p>Perform the schema (DDL) change, and then wait for the connector to capture the change.</p>
</li>
<li>
<p>Resume data changes (DML) on the table.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Following this procedure helps to ensure that Oracle LogMiner can safely reconstruct the SQL for all data changes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_hybrid_approach"><a class="anchor" href="#_hybrid_approach"></a>Hybrid approach</h4>
<div class="paragraph">
<p>This is a new, experimental strategy that can be enabled by setting the strategy to <code>hybrid</code>.
The goal of this strategy is to provide the reliability of the <code>redo_log_catalog</code> strategy with the performance and low overhead of the <code>online_catalog</code> strategy, without incurring the disadvantages of either strategy.</p>
</div>
<div class="paragraph">
<p>The <code>hybrid</code> strategy works by primarily operating in the <code>online_catalog</code> mode, meaning that the Debezium Oracle connector first delegates event reconstruction to Oracle LogMiner.
If Oracle LogMiner successfully reconstructs the SQL, Debezium processes the event normally, as if it were configured to use the <code>online_catalog</code> strategy.
If the connector detects that Oracle LogMiner could not reconstruct the SQL, the connector attempts to reconstruct the SQL directly by using the schema history for that table object.
The connector reports a failure only if both Oracle LogMiner and the connector are unable to reconstruct the SQL.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot use the <code>hybrid</code> mining strategy if the <a href="#oracle-property-lob-enabled"><code>lob.enabled</code></a> property is set to <code>true</code>.
If you require streaming <code>CLOB</code>, <code>BLOB</code>, or <code>XML</code> data, only the <code>online_catalog</code> or <code>redo_log_catalog</code> strategies can be used.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="oracle-logminer-query-modes"><a class="anchor" href="#oracle-logminer-query-modes"></a>Query Modes</h3>
<div class="paragraph">
<p>The Debezium Oracle connector integrates with Oracle LogMiner by default.
This integration requires a specialized set of steps which includes generating a complex JDBC SQL query to ingest the changes recorded in the transaction logs as change events.
The <code>V$LOGMNR_CONTENTS</code> view used by the JDBC SQL query does not have any indices to improve the query&#8217;s performance, and so there are different query modes that can be used that control how the SQL query is generated as a way to improve the query&#8217;s execution.</p>
</div>
<div class="paragraph">
<p>The <a href="#oracle-property-log-mining-query-filter-mode"><code>log.mining.query.filter.mode</code></a> connector property can be configured with one of the following to influence how the JDBC SQL query is generated:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>(Default) This mode creates a JDBC query that only filters based on the different operation types, such as inserts, updates, or deletes, at the database level.
When filtering the data based on the schema, table, or username include/exclude lists, this is done during the processing loop within the connector.<br>
<br>
This mode is often useful when capturing a small number of tables from a database that is not heavily saturated with changes.
The generated query is quite simple, and focuses primarily on reading as quickly as possible with low database overhead.</p>
</dd>
<dt class="hdlist1"><code>in</code></dt>
<dd>
<p>This mode creates a JDBC query that filters not only operation types at the database level, but also schema, table, and username include/exclude lists.
The query&#8217;s predicates are generated using a SQL in-clause based on the values specified in the include/exclude list configuration properties.<br>
<br>
This mode is often useful when capturing a large number of tables from a database that is heavily saturated with changes.
The generated query is much more complex than the <code>none</code> mode, and focuses on reducing network overhead and performing as much filtering at the database level as possible.<br>
<br>
Finally, <strong>do not</strong> specify regular expressions as part of schema and table include/exclude configuration properties.
Using regular expressions will cause the connector to not match changes based on these configuration properties, causing changes to be missed.</p>
</dd>
<dt class="hdlist1"><code>regex</code></dt>
<dd>
<p>This mode creates a JDBC query that filters not only operation types at the database level, but also schema, table, and username include/exclude lists.
However, unlike the <code>in</code> mode, this mode generates a SQL query using the Oracle <code>REGEXP_LIKE</code> operator using a conjunction or disjunction depending on whether include or excluded values are specified.<br>
<br>
This mode is often useful when capturing a variable number of tables that can be identified using a small number of regular expressions.
The generated query is much more complex than any other mode, and focuses on reducing network overhead and performing as much filtering at the database level as possible.<br></p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="oracle-event-buffering"><a class="anchor" href="#oracle-event-buffering"></a>Event buffering</h3>
<div class="paragraph">
<p>Oracle writes all changes to the redo logs in the order in which they occur, including changes that are later discarded by a rollback.
As a result, concurrent changes from separate transactions are intertwined.
When the connector first reads the stream of changes, because it cannot immediately determine which changes are committed or rolled back, it temporarily stores the change events in an internal buffer.
After a change is committed, the connector writes the change event from the buffer to Kafka.
The connector drops change events that are discarded by a rollback.</p>
</div>
<div class="paragraph">
<p>You can configure the buffering mechanism that the connector uses by setting the property <a href="#oracle-property-log-mining-buffer-type"><code>log.mining.buffer.type</code></a>.</p>
</div>
<div class="sect3">
<h4 id="_heap"><a class="anchor" href="#_heap"></a>Heap</h4>
<div class="paragraph">
<p>The default buffer type is configured using <code>memory</code>.
Under the default <code>memory</code> setting, the connector uses the heap memory of the JVM process to allocate and manage buffered event records.
If you use the <code>memory</code> buffer setting, be sure that the amount of memory that you allocate to the Java process can accommodate long-running and large transactions in your environment.</p>
</div>
</div>
<div class="sect3">
<h4 id="oracle-event-buffering-infinispan"><a class="anchor" href="#oracle-event-buffering-infinispan"></a>Infinispan</h4>
<div class="paragraph">
<p>The Debezium Oracle connector can also be configured to use Infinispan as its cache provider, supporting cache stores both locally with embedded mode or remotely on a server cluster.
In order to use Infinispan, the <a href="#oracle-property-log-mining-buffer-type"><code>log.mining.buffer.type</code></a> must be configured using either <code>infinispan_embedded</code> or <code>infinispan_remote</code>.</p>
</div>
<div class="paragraph">
<p>In order to allow flexibility with Infinispan cache configurations, the connector expects a series of cache configuration properties to be supplied when using Infinispan to buffer event data.
See the <a href="#oracle-connector-properties">configuration properties</a> in the <code>log.mining.buffer.infinispan.cache</code> namespace.
The contents of these configuration properties depend on whether the connector is to integrate with a remote Infinispan cluster or to use the embedded engine.</p>
</div>
<div class="paragraph">
<p>For example, the following illustrates what an embedded configuration would look like for the transaction cache property when using Infinispan in embedded mode:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;local-cache name="transactions"&gt;
  &lt;persistence passivation="false"&gt;
    &lt;file-store read-only="false" preload="true" shared="false"&gt;
      &lt;data path="./data"/&gt;
      &lt;index path="./index"/&gt;
    &lt;/file-store&gt;
  &lt;/persistence&gt;
&lt;/local-cache&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Looking at the configuration in-depth, the cache is configured to be persistent.
All caches should be configured this way to avoid loss of transaction events across connector restarts if a transaction is in-progress.
Additionally, the location where the cache is kept is defined by the <code>path</code> attribute and this should be a shared location accessible all possible runtime environments.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Infinispan buffer implementation utilizes multiple cache configurations with different names.
There should be a cache defined for <code>transactions</code>, <code>events</code>, <code>processed-transactions</code>, and <code>schema-changes</code>.
Each configuration can be tuned to your performance needs or be identical other than the cache name.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When supplying XML configuration as a JSON connector property value, line breaks must be omitted or replaced with a <code>\n</code> character.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Another example, the following illustrates the same cache configured with an Infinispan cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;distributed-cache name="transactions" statistics="true"&gt;
  &lt;encoding media-type="application/x-protostream" /&gt;
  &lt;persistence passivation="false"&gt;
   &lt;file-store read-only="false" preload="true" shared="false"&gt;
     &lt;data path="./data"/&gt;
     &lt;index path="./index"/&gt;
   &lt;/file-store&gt;
  &lt;/persistence&gt;
&lt;/distributed-cache&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Just like the embedded local-cache configuration from the previous example, this configuration is also defined to be persistent.
All caches should be configured this way to avoid loss of transaction events across connector restarts if a transaction is in-progress.</p>
</div>
<div class="paragraph">
<p>However, there are a few differences with noting.
First, the cache is defined as a distributed cache rather than a local-cache.
Secondly, the cache is defined to use the <code>application/x-protostream</code> encoding, which is required for all Debezium caches.
And lastly, no <code>path</code> attribute is necessary on the file store definition since the Infinispan cluster will handle this automatically.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Infinispan buffer type is considered incubating; the cache formats may change between versions and may require a re-snapshot.
The migration notes will indicate whether this is needed.</p>
</div>
<div class="paragraph">
<p>Additionally, when removing a Debezium Oracle connector that uses the Infinispan buffer, the persisted cache files are not removed from disk automatically.
If the same buffer location will be used by a new connector deployment, the files should be removed manually before deploying the new connector.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_infinispan_hotrod_client_integration"><a class="anchor" href="#_infinispan_hotrod_client_integration"></a>Infinispan Hotrod client integration</h5>
<div class="paragraph">
<p>The Debezium Oracle connector utilizes the Hotrod client to communicate with the Infinispan cluster.
Any connector property that is prefixed with <code>log.mining.buffer.infinispan.client.</code> will be passed directly to the Hotrod client using the <code>infinispan.client.</code> namespace, allowing for complete customization of how the client is to interact with the cluster.</p>
</div>
<div class="paragraph">
<p>There is at least one required configuration property that must be supplied when using this Infinspan mode:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>log.mining.buffer.infinispan.client.hotrod.server_list</code></dt>
<dd>
<p>Specifies the list of Infinispan server hostname and port combinations, using <code>&lt;hostname&gt;:&lt;port&gt;</code> format.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="scn-jumps"><a class="anchor" href="#scn-jumps"></a>SCN gap detection</h3>
<div class="paragraph">
<p>When the Debezium Oracle connector is configured to use LogMiner, it collects change events from Oracle by using a start and end range that is based on system change numbers (SCNs).
The connector manages this range automatically, increasing or decreasing the range depending on whether the connector is able to stream changes in near real-time, or must process a backlog of changes due to the volume of large or bulk transactions in the database.</p>
</div>
<div class="paragraph">
<p>Under certain circumstances, the Oracle database advances the SCN by an unusually high amount, rather than increasing the SCN value at a constant rate.
Such a jump in the SCN value can occur because of the way that a particular integration interacts with the database, or as a result of events such as hot backups.</p>
</div>
<div class="paragraph">
<p>The Debezium Oracle connector relies on the following configuration properties to detect the SCN gap and adjust the mining range.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>log.mining.scn.gap.detection.gap.size.min</code></dt>
<dd>
<p>Specifies the minimum gap size.</p>
</dd>
<dt class="hdlist1"><code>log.mining.scn.gap.detection.time.interval.max.ms</code></dt>
<dd>
<p>Specifies the maximum time interval.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The connector first compares the difference in the number of changes between the current SCN and the highest SCN in the current mining range.
If the difference between the current SCN value and the highest SCN value is greater than the minimum gap size, then the connector has potentially detected a SCN gap.
To confirm whether a gap exists, the connector next compares the timestamps of the current SCN and the SCN at the end of the previous mining range.
If the difference between the timestamps is less than the maximum time interval, then the existence of an SCN gap is confirmed.</p>
</div>
<div class="paragraph">
<p>When an SCN gap occurs, the Debezium connector automatically uses the current SCN as the end point for the range of the current mining session.
This allows the connector to quickly catch up to the real-time events without mining smaller ranges in between that return no changes because the SCN value was increased by an unexpectedly large number.
When the connector performs the preceding steps in response to an SCN gap, it ignores the value that is specified by the <a href="#oracle-property-log-mining-batch-size-max">log.mining.batch.size.max</a> property.
After the connector finishes the mining session and catches back up to real-time events, it resumes enforcement of the maximum log mining batch size.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>SCN gap detection is available only if the large SCN increment occurs while the connector is running and processing near real-time events.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="low-change-frequency-offset-management"><a class="anchor" href="#low-change-frequency-offset-management"></a>Low change frequency offset management</h3>
<div class="paragraph">
<p>The Debezium Oracle connector tracks system change numbers in the connector offsets so that when the connector is restarted, it can begin where it left off.
These offsets are part of each emitted change event; however, when the frequency of database changes are low (every few hours or days), the offsets can become stale and prevent the connector from successfully restarting if the system change number is no longer available in the transaction logs.</p>
</div>
<div class="paragraph">
<p>For connectors that use non-CDB mode to connect to Oracle, you can enable <a href="#oracle-property-heartbeat-interval-ms"><code>heartbeat.interval.ms</code></a> to force the connector to emit a heartbeat event at regular intervals so that offsets remain synchronized.</p>
</div>
<div class="paragraph">
<p>For connectors that use CDB mode to connect to Oracle, maintaining synchronization is more complicated.
Not only must you set <a href="#oracle-property-heartbeat-interval-ms"><code>heartbeat.interval.ms</code></a>, but it&#8217;s also necessary to set <a href="#oracle-property-heartbeat-action-query"><code>heartbeat.action.query</code></a>.
Specifying both properties is required, because in CDB mode, the connector specifically tracks changes inside the PDB only.
A supplementary mechanism is needed to trigger change events from within the pluggable database.
At regular intervals, the heartbeat action query causes the connector to insert a new table row, or update an existing row in the pluggable database.
Debezium detects the table changes and emits change events for them, ensuring that offsets remain synchronized, even in pluggable databases that process changes infrequently.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For the connector to use the <code>heartbeat.action.query</code> with tables that are not owned by the <a href="#creating-users-for-the-connector">connector user account</a>, you must grant the connector user permission to run the necessary <code>INSERT</code> or <code>UPDATE</code> queries on those tables.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oracle-events"><a class="anchor" href="#oracle-events"></a>Data change events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every data change event that the Oracle connector emits has a key and a value.
The structures of the key and value depend on the table from which the change events originate.
For information about how Debezium constructs topic names, see <a href="#oracle-topic-names">Topic names</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Debezium Oracle connector ensures that all Kafka Connect <em>schema names</em> are <a href="http://avro.apache.org/docs/current/spec.html#names">valid Avro schema names</a>.
This means that the logical server name must start with alphabetic characters or an underscore ([a-z,A-Z,_]),
and the remaining characters in the logical server name and all characters in the schema and table names must be alphanumeric characters or an underscore ([a-z,A-Z,0-9,\_]).
The connector automatically replaces invalid characters with an underscore character.</p>
</div>
<div class="paragraph">
<p>Unexpected naming conflicts can result when the only distinguishing characters between multiple logical server names, schema names, or table names are not valid characters, and those characters are replaced with underscores.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Debezium and Kafka Connect are designed around <em>continuous streams of event messages</em>.
However, the structure of these events might change over time, which can be difficult for topic consumers to handle.
To facilitate the processing of mutable event structures, each event in Kafka Connect is self-contained.
Every message key and value has two parts: a <em>schema</em> and <em>payload</em>.
The schema describes the structure of the payload, while the payload contains the actual data.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Changes that are performed by the <code>SYS</code> or <code>SYSTEM</code> user accounts are not captured by the connector.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="oracle-change-event-keys"><a class="anchor" href="#oracle-change-event-keys"></a>Change event keys</h3>
<div class="paragraph">
<p>For each changed table, the change event key is structured such that a field exists for each column in the primary key (or unique key constraint) of the table at the time when the event is created.</p>
</div>
<div class="paragraph">
<p>For example, a <code>customers</code> table that is defined in the <code>inventory</code> database schema, might have the following change event key:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">CREATE TABLE customers (
  id NUMBER(9) GENERATED BY DEFAULT ON NULL AS IDENTITY (START WITH 1001) NOT NULL PRIMARY KEY,
  first_name VARCHAR2(255) NOT NULL,
  last_name VARCHAR2(255) NOT NULL,
  email VARCHAR2(255) NOT NULL UNIQUE
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the value of the <a href="#oracle-property-topic-prefix"><code><em>&lt;topic.prefix&gt;</em></code></a><code>.transaction</code> configuration property is set to <code>server1</code>,
the JSON representation for every change event that occurs in the <code>customers</code> table in the database features the following key structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "schema": {
        "type": "struct",
        "fields": [
            {
                "type": "int32",
                "optional": false,
                "field": "ID"
            }
        ],
        "optional": false,
        "name": "server1.INVENTORY.CUSTOMERS.Key"
    },
    "payload": {
        "ID": 1004
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>schema</code> portion of the key contains a Kafka Connect schema that describes the content of the key portion.
In the preceding example, the <code>payload</code> value is not optional, the structure is defined by a schema named <code>server1.DEBEZIUM.CUSTOMERS.Key</code>, and there is one required field named <code>id</code> of type <code>int32</code>.
The value of the key&#8217;s <code>payload</code> field indicates that it is indeed a structure (which in JSON is just an object) with a single <code>id</code> field, whose value is <code>1004</code>.</p>
</div>
<div class="paragraph">
<p>Therefore, you can interpret this key as describing the row in the <code>inventory.customers</code> table (output from the connector named <code>server1</code>) whose <code>id</code> primary key column had a value of <code>1004</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="oracle-change-event-values"><a class="anchor" href="#oracle-change-event-values"></a>Change event values</h3>
<div class="paragraph">
<p>The structure of a value in a change event message mirrors the structure of the <a href="#oracle-change-event-keys">message key in the change event</a> in the message, and contains both a <em>schema</em> section and a <em>payload</em> section.</p>
</div>
<div class="paragraph">
<div class="title">Payload of a change event value</div>
<p>An <em>envelope</em> structure in the payload sections of a change event value contains the following fields:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>op</code></dt>
<dd>
<p>A mandatory field that contains a string value describing the type of operation.
The <code>op</code> field in the payload of an Oracle connector change event value contains one of the following values: <code>c</code> (create or insert), <code>u</code> (update), <code>d</code> (delete), or <code>r</code> (read, which indicates a snapshot).</p>
</dd>
<dt class="hdlist1"><code>before</code></dt>
<dd>
<p>An optional field that, if present, describes the state of the row <em>before</em> the event occurred.
The structure is described by the <code>server1.INVENTORY.CUSTOMERS.Value</code> Kafka Connect schema, which the <code>server1</code> connector uses for all rows in the <code>inventory.customers</code> table.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>after</code></dt>
<dd>
<p>An optional field that, if present, contains the state of a row <em>after</em> a change occurs.
The structure is described by the same <code>server1.INVENTORY.CUSTOMERS.Value</code> Kafka Connect schema that is used for the <code>before</code> field.</p>
</dd>
<dt class="hdlist1"><code>source</code></dt>
<dd>
<p>A mandatory field that contains a structure that describes the source metadata for the event.
In the case of the Oracle connector, the structure includes the following fields:</p>
<div class="ulist">
<ul>
<li>
<p>The Debezium version.</p>
</li>
<li>
<p>The connector name.</p>
</li>
<li>
<p>Whether the event is part of an ongoing snapshot or not.</p>
</li>
<li>
<p>The transaction id (not includes for snapshots).</p>
</li>
<li>
<p>The SCN of the change.</p>
</li>
<li>
<p>A timestamp that indicates when the record in the source database changed (for snapshots, the timestamp indicates when the snapshot occurred).</p>
</li>
<li>
<p>Username who made the change</p>
</li>
<li>
<p>The ROWID associated with the row</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>commit_scn</code> field is optional and describes the SCN of the transaction commit that the change event participates within.
This field is only present when using the LogMiner connection adapter.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>user_name</code> field is only populated when using the LogMiner connection adapter.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>ts_ms</code></dt>
<dd>
<p>An optional field that, if present, contains the time (based on the system clock in the JVM that runs the Kafka Connect task) at which the connector processed the event.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<div class="title">Schema of a change event value</div>
<p>The <em>schema</em> portion of the event message&#8217;s value contains a schema that describes the envelope structure of the payload and the nested fields within it.</p>
</div>
</div>
<div class="sect2">
<h3 id="oracle-create-events"><a class="anchor" href="#oracle-create-events"></a><em>create</em> events</h3>
<div class="paragraph">
<p>The following example shows the value of a <em>create</em> event value from the <code>customers</code> table that is described in the <a href="#oracle-change-event-keys">change event keys</a> example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "schema": {
        "type": "struct",
        "fields": [
            {
                "type": "struct",
                "fields": [
                    {
                        "type": "int32",
                        "optional": false,
                        "field": "ID"
                    },
                    {
                        "type": "string",
                        "optional": false,
                        "field": "FIRST_NAME"
                    },
                    {
                        "type": "string",
                        "optional": false,
                        "field": "LAST_NAME"
                    },
                    {
                        "type": "string",
                        "optional": false,
                        "field": "EMAIL"
                    }
                ],
                "optional": true,
                "name": "server1.DEBEZIUM.CUSTOMERS.Value",
                "field": "before"
            },
            {
                "type": "struct",
                "fields": [
                    {
                        "type": "int32",
                        "optional": false,
                        "field": "ID"
                    },
                    {
                        "type": "string",
                        "optional": false,
                        "field": "FIRST_NAME"
                    },
                    {
                        "type": "string",
                        "optional": false,
                        "field": "LAST_NAME"
                    },
                    {
                        "type": "string",
                        "optional": false,
                        "field": "EMAIL"
                    }
                ],
                "optional": true,
                "name": "server1.DEBEZIUM.CUSTOMERS.Value",
                "field": "after"
            },
            {
                "type": "struct",
                "fields": [
                    {
                        "type": "string",
                        "optional": true,
                        "field": "version"
                    },
                    {
                        "type": "string",
                        "optional": false,
                        "field": "name"
                    },
                    {
                        "type": "int64",
                        "optional": true,
                        "field": "ts_ms"
                    },
                    {
                        "type": "int64",
                        "optional": true,
                        "field": "ts_us"
                    },
                    {
                        "type": "int64",
                        "optional": true,
                        "field": "ts_ns"
                    },
                    {
                        "type": "string",
                        "optional": true,
                        "field": "txId"
                    },
                    {
                        "type": "string",
                        "optional": true,
                        "field": "scn"
                    },
                    {
                        "type": "string",
                        "optional": true,
                        "field": "commit_scn"
                    },
                    {
                        "type": "string",
                        "optional": true,
                        "field": "rs_id"
                    },
                    {
                        "type": "int64",
                        "optional": true,
                        "field": "ssn"
                    },
                    {
                        "type": "int32",
                        "optional": true,
                        "field": "redo_thread"
                    },
                    {
                        "type": "string",
                        "optional": true,
                        "field": "user_name"
                    },
                    {
                        "type": "boolean",
                        "optional": true,
                        "field": "snapshot"
                    },
                    {
                        "type": "string",
                        "optional": true,
                        "field": "row_id"
                    }
                ],
                "optional": false,
                "name": "io.debezium.connector.oracle.Source",
                "field": "source"
            },
            {
                "type": "string",
                "optional": false,
                "field": "op"
            },
            {
                "type": "int64",
                "optional": true,
                "field": "ts_ms"
            },
            {
                "type": "int64",
                "optional": true,
                "field": "ts_us"
            },
            {
                "type": "int64",
                "optional": true,
                "field": "ts_ns"
            }
        ],
        "optional": false,
        "name": "server1.DEBEZIUM.CUSTOMERS.Envelope"
    },
    "payload": {
        "before": null,
        "after": {
            "ID": 1004,
            "FIRST_NAME": "Anne",
            "LAST_NAME": "Kretchmar",
            "EMAIL": "annek@noanswer.org"
        },
        "source": {
            "version": "2.7.1.Final",
            "name": "server1",
            "ts_ms": 1520085154000,
            "ts_us": 1520085154000000,
            "ts_ns": 1520085154000000000,
            "txId": "6.28.807",
            "scn": "2122185",
            "commit_scn": "2122185",
            "rs_id": "001234.00012345.0124",
            "ssn": 1,
            "redo_thread": 1,
            "user_name": "user",
            "snapshot": false,
            "row_id": "AAASgjAAMAAAACnAAA"
        },
        "op": "c",
        "ts_ms": 1532592105975,
        "ts_us": 1532592105975741,
        "ts_ns": 1532592105975741582
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, notice how the event defines the following schema:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <em>envelope</em> (<code>server1.DEBEZIUM.CUSTOMERS.Envelope</code>).</p>
</li>
<li>
<p>The <code>source</code> structure (<code>io.debezium.connector.oracle.Source</code>, which is specific to the Oracle connector and reused across all events).</p>
</li>
<li>
<p>The table-specific schemas for the <code>before</code> and <code>after</code> fields.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The names of the schemas for the <code>before</code> and <code>after</code> fields are of the form <code><em>&lt;logicalName&gt;</em>.<em>&lt;schemaName&gt;</em>.<em>&lt;tableName&gt;</em>.Value</code>, and thus are entirely independent from the schemas for all other tables.
As a result, when you use the <a href="../configuration/avro.html#avro-serialization" class="xref page">Avro converter</a>, the Avro schemas for tables in each logical source have their own evolution and history.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>payload</code> portion of this event&#8217;s <em>value</em>, provides information about the event.
It describes that a row was created (<code>op=c</code>), and shows that the <code>after</code> field value contains the values that were inserted into the <code>ID</code>, <code>FIRST_NAME</code>, <code>LAST_NAME</code>, and <code>EMAIL</code> columns of the row.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default, the JSON representations of events are much larger than the rows that they describe.
The larger size is due to the JSON representation including both the schema and payload portions of a message.
You can use the <a href="../configuration/avro.html#avro-serialization" class="xref page">Avro Converter</a> to decrease the size of messages that the connector writes to Kafka topics.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="oracle-update-events"><a class="anchor" href="#oracle-update-events"></a><em>update</em> events</h3>
<div class="paragraph">
<p>The following example shows an <em>update</em> change event that the connector captures from the same table as the preceding <em>create</em> event.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "schema": { ... },
    "payload": {
        "before": {
            "ID": 1004,
            "FIRST_NAME": "Anne",
            "LAST_NAME": "Kretchmar",
            "EMAIL": "annek@noanswer.org"
        },
        "after": {
            "ID": 1004,
            "FIRST_NAME": "Anne",
            "LAST_NAME": "Kretchmar",
            "EMAIL": "anne@example.com"
        },
        "source": {
            "version": "2.7.1.Final",
            "name": "server1",
            "ts_ms": 1520085811000,
            "ts_us": 1520085811000000,
            "ts_ns": 1520085811000000000,
            "txId": "6.9.809",
            "scn": "2125544",
            "commit_scn": "2125544",
            "rs_id": "001234.00012345.0124",
            "ssn": 1,
            "redo_thread": 1,
            "user_name": "user",
            "snapshot": false,
            "row_id": "AAASgjAAMAAAACnAAA"
        },
        "op": "u",
        "ts_ms": 1532592713485,
        "ts_us": 1532592713485152,
        "ts_ns": 1532592713485152954,
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The payload has the same structure as the payload of a <em>create</em> (insert) event, but the following values are different:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The value of the <code>op</code> field is <code>u</code>, signifying that this row changed because of an update.</p>
</li>
<li>
<p>The <code>before</code> field shows the former state of the row with the values that were present before the <code>update</code> database commit.</p>
</li>
<li>
<p>The <code>after</code> field shows the updated state of the row, with the <code>EMAIL</code> value now set to <code>anne@example.com</code>.</p>
</li>
<li>
<p>The structure of the <code>source</code> field includes the same fields as before, but the values are different, because the connector captured the event from a different position in the redo log.</p>
</li>
<li>
<p>The <code>ts_ms</code> field shows the timestamp that indicates when Debezium processed the event.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>payload</code> section reveals several other useful pieces of information.
For example, by comparing the <code>before</code> and <code>after</code> structures, we can determine how a row changed as the result of a commit.
The <code>source</code> structure provides information about Oracle&#8217;s record of this change, providing traceability.
It also gives us insight into when this event occurred in relation to other events in this topic and in other topics.
Did it occur before, after, or as part of the same commit as another event?</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When the columns for a row&#8217;s primary/unique key are updated, the value of the row&#8217;s key changes.
As a result, Debezium emits <em>three</em> events after such an update:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>DELETE</code> event.</p>
</li>
<li>
<p>A <a href="#oracle-tombstone-events">tombstone event</a> with the old key for the row.</p>
</li>
<li>
<p>An <code>INSERT</code> event that provides the new key for the row.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="oracle-delete-events"><a class="anchor" href="#oracle-delete-events"></a><em>delete</em> events</h3>
<div class="paragraph">
<p>The following example shows a <em>delete</em> event for the table that is shown in the preceding <em>create</em> and <em>update</em> event examples.
The <code>schema</code> portion of the <em>delete</em> event is identical to the <code>schema</code> portion for those events.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "schema": { ... },
    "payload": {
        "before": {
            "ID": 1004,
            "FIRST_NAME": "Anne",
            "LAST_NAME": "Kretchmar",
            "EMAIL": "anne@example.com"
        },
        "after": null,
        "source": {
            "version": "2.7.1.Final",
            "name": "server1",
            "ts_ms": 1520085153000,
            "ts_us": 1520085153000000,
            "ts_ns": 1520085153000000000,
            "txId": "6.28.807",
            "scn": "2122184",
            "commit_scn": "2122184",
            "rs_id": "001234.00012345.0124",
            "ssn": 1,
            "redo_thread": 1,
            "user_name": "user",
            "snapshot": false,
            "row_id": "AAASgjAAMAAAACnAAA"
        },
        "op": "d",
        "ts_ms": 1532592105960,
        "ts_us": 1532592105960854,
        "ts_ns": 1532592105960854693
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>payload</code> portion of the event reveals several differences when compared to the payload of a <em>create</em> or <em>update</em> event:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The value of the <code>op</code> field is <code>d</code>, signifying that the row was deleted.</p>
</li>
<li>
<p>The <code>before</code> field shows the former state of the row that was deleted with the database commit.</p>
</li>
<li>
<p>The value of the <code>after</code> field is <code>null</code>, signifying that the row no longer exists.</p>
</li>
<li>
<p>The structure of the <code>source</code> field includes many of the keys that exist in <em>create</em> or <em>update</em> events, but the values in the <code>ts_ms</code>, <code>scn</code>, and <code>txId</code> fields are different.</p>
</li>
<li>
<p>The <code>ts_ms</code> shows a timestamp that indicates when Debezium processed this event.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <em>delete</em> event provides consumers with the information that they require to process the removal of this row.</p>
</div>
<div class="paragraph">
<p>The Oracle connector&#8217;s events are designed to work with <a href="https://cwiki.apache.org/confluence/display/KAFKA/Log+Compaction">Kafka log compaction</a>,
which allows for the removal of some older messages as long as at least the most recent message for every key is kept.
This allows Kafka to reclaim storage space while ensuring the topic contains a complete dataset and can be used for reloading key-based state.</p>
</div>
<div id="oracle-tombstone-events" class="paragraph">
<p>When a row is deleted, the <em>delete</em> event value shown in the preceding example still works with log compaction, because Kafka is able to remove all earlier messages that use the same key.
The message value must be set to <code>null</code> to instruct Kafka to remove <em>all messages</em> that share the same key.
To make this possible, by default, Debezium&#8217;s Oracle connector always follows a <em>delete</em> event with a special <em>tombstone</em> event that has the same key but <code>null</code> value.
You can change the default behavior by setting the connector property <a href="#oracle-property-tombstones-on-delete"><code>tombstones.on.delete</code></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="oracle-truncate-events"><a class="anchor" href="#oracle-truncate-events"></a><em>truncate</em> events</h3>
<div class="paragraph">
<p>A  <em>truncate</em> change event signals that a table has been truncated.
The message key is <code>null</code> in this case, the message value looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "schema": { ... },
    "payload": {
        "before": null,
        "after": null,
        "source": { <i class="conum" data-value="1"></i><b>(1)</b>
            "version": "2.7.1.Final",
            "connector": "oracle",
            "name": "oracle_server",
            "ts_ms": 1638974535000,
            "ts_us": 1638974535000000,
            "ts_ns": 1638974535000000000,
            "snapshot": "false",
            "db": "ORCLPDB1",
            "sequence": null,
            "schema": "DEBEZIUM",
            "table": "TEST_TABLE",
            "txId": "02000a0037030000",
            "scn": "13234397",
            "commit_scn": "13271102",
            "lcr_position": null,
            "rs_id": "001234.00012345.0124",
            "ssn": 1,
            "redo_thread": 1,
            "user_name": "user"
        },
        "op": "t", <i class="conum" data-value="2"></i><b>(2)</b>
        "ts_ms": 1638974558961, <i class="conum" data-value="3"></i><b>(3)</b>
        "ts_us": 1638974558961987, <i class="conum" data-value="3"></i><b>(3)</b>
        "ts_ns": 1638974558961987251, <i class="conum" data-value="3"></i><b>(3)</b>
        "transaction": null
    }
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Descriptions of <em>truncate</em> event value fields</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Field name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>source</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Mandatory field that describes the source metadata for the event. In a <em>truncate</em> event value, the <code>source</code> field structure is the same as for <em>create</em>, <em>update</em>, and <em>delete</em> events for the same table, provides this metadata:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Debezium version</p>
</li>
<li>
<p>Connector type and name</p>
</li>
<li>
<p>Database and table that contains the new row</p>
</li>
<li>
<p>Schema name</p>
</li>
<li>
<p>If the event was part of a snapshot (always <code>false</code> for <em>truncate</em> events)</p>
</li>
<li>
<p>ID of the transaction in which the operation was performed</p>
</li>
<li>
<p>SCN of the operation</p>
</li>
<li>
<p>Timestamp for when the change was made in the database</p>
</li>
<li>
<p>Username who performed the change</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>op</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Mandatory string that describes the type of operation. The <code>op</code> field value is <code>t</code>, signifying that this table was truncated.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ts_ms</code>, <code>ts_us</code>, <code>ts_ns</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional field that displays the time at which the connector processed the event.
The time is based on the system clock in the JVM running the Kafka Connect task.<br></p>
</div>
<div class="paragraph">
<p>In the <code>source</code> object, <code>ts_ms</code> indicates the time that the change was made in the database. By comparing the value for <code>payload.source.ts_ms</code> with the value for <code>payload.ts_ms</code>, you can determine the lag between the source database update and Debezium.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Because <em>truncate</em> events represent changes made to an entire table, and have no message key, in topics with multiple partitions, there is no guarantee that consumers receive <em>truncate</em> events and change events (<em>create</em>, <em>update</em>, etc.) for to a table in order.
For example, when a consumer reads events from different partitions, it might receive an <em>update</em> event for a table after it receives a <em>truncate</em> event for the same table.
Ordering can be guaranteed only if a topic uses a single partition.</p>
</div>
<div class="paragraph">
<p>If you do not want to capture <em>truncate</em> events, use the <a href="#oracle-property-skipped-operations"><code>skipped.operations</code></a> option to filter them out.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oracle-data-type-mappings"><a class="anchor" href="#oracle-data-type-mappings"></a>Data type mappings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When the Debezium Oracle connector detects a change in the value of a table row, it emits a change event that represents the change.
Each change event record is structured in the same way as the original table, with the event record containing a field for each column value.
The data type of a table column determines how the connector represents the column&#8217;s values in change event fields, as shown in the tables in the following sections.</p>
</div>
<div class="paragraph">
<p>For each column in a table, Debezium maps the source data type to a <em>literal type</em> and, and in some cases, a <em>semantic type</em>, in the corresponding event field.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Literal types</dt>
<dd>
<p>Describe how the value is literally represented, using one of the following Kafka Connect schema types: <code>INT8</code>, <code>INT16</code>, <code>INT32</code>, <code>INT64</code>, <code>FLOAT32</code>, <code>FLOAT64</code>, <code>BOOLEAN</code>, <code>STRING</code>, <code>BYTES</code>, <code>ARRAY</code>, <code>MAP</code>, and <code>STRUCT</code>.</p>
</dd>
<dt class="hdlist1">Semantic types</dt>
<dd>
<p>Describe how the Kafka Connect schema captures the <em>meaning</em> of the field, by using the name of the Kafka Connect schema for the field.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>If the default data type conversions do not meet your needs, you can <a href="../development/converters.html#custom-converters" class="xref page">create a custom converter</a> for the connector.</p>
</div>
<div class="paragraph">
<p>For some Oracle large object (CLOB, NCLOB, and BLOB) and numeric data types, you can manipulate the way that the connector performs the type mapping by changing default configuration property settings.
For more information about how Debezium properties control mappings for these data types, see <a href="#oracle-binary-character-lob-types">Binary and Character LOB types</a> and <a href="#oracle-numeric-types">Numeric types</a>.</p>
</div>
<div class="paragraph">
<p>Support for further data types is planned for subsequent releases.
Please file a <a href="https://issues.redhat.com/browse/DBZ">JIRA issue</a> for any specific types that might be missing.</p>
</div>
<div class="sect2">
<h3 id="oracle-character-types"><a class="anchor" href="#oracle-character-types"></a>Character types</h3>
<div class="paragraph">
<p>The following table describes how the connector maps basic character types.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Mappings for Oracle basic character types</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 16.6666%;">
<col style="width: 61.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Oracle data type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name) and Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>CHAR[(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NCHAR[(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NVARCHAR2[(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>VARCHAR[(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>VARCHAR2[(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="oracle-binary-character-lob-types"><a class="anchor" href="#oracle-binary-character-lob-types"></a>Binary and Character LOB types</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Support for <code>BLOB</code>, <code>CLOB</code>, and <code>NCLOB</code> is currently in incubating state, that is, the exact semantics, configuration options and so forth might change in future revisions, based on feedback we receive.
Please let us know if you encounter any problems while using these data types.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following table describes how the connector maps binary and character large object (LOB) data types.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Mappings for Oracle binary and character LOB types</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 16.6666%;">
<col style="width: 61.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Oracle data type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name) and Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BFILE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>This data type is not supported</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BLOB</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Depending on the setting of the <a href="#oracle-property-binary-handling-mode"><code>binary.handling.mode</code></a> property in the connector configuration, the connector maps LOB values of this type to one of the following semantic types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Raw bytes (the default)</p>
</li>
<li>
<p>A base64-encoded string</p>
</li>
<li>
<p>A base64-url-safe-encoded string</p>
</li>
<li>
<p>A hex-encoded string</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>CLOB</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>LONG</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>This data type is not supported.</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>LONG RAW</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>This data type is not supported.</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NCLOB</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>RAW</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Depending on the setting of the <a href="#oracle-property-binary-handling-mode"><code>binary.handling.mode</code></a> property in the connector configuration, the connector maps LOB values of this type to one of the following semantic types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Raw bytes (the default)</p>
</li>
<li>
<p>A base64-encoded string</p>
</li>
<li>
<p>A base64-url-safe-encoded string</p>
</li>
<li>
<p>A hex-encoded string</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Oracle only supplies column values for <code>CLOB</code>, <code>NCLOB</code>, and <code>BLOB</code> data types if they&#8217;re explicitly set or changed in a SQL statement.
As a result, change events never contain the value of an unchanged <code>CLOB</code>, <code>NCLOB</code>, or <code>BLOB</code> column.
Instead, they contain placeholders as defined by the connector property, <code>unavailable.value.placeholder</code>.</p>
</div>
<div class="paragraph">
<p>If the value of a <code>CLOB</code>, <code>NCLOB</code>, or <code>BLOB</code> column is updated, the new value is placed in the <code>after</code> element of the corresponding update change event.
The <code>before</code> element contains the unavailable value placeholder.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="oracle-numeric-types"><a class="anchor" href="#oracle-numeric-types"></a>Numeric types</h3>
<div class="paragraph">
<p>The following table describes how the Debezium Oracle connector maps numeric types.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can modify the way that the connector maps the Oracle <code>DECIMAL</code>, <code>NUMBER</code>, <code>NUMERIC</code>, and <code>REAL</code> data types by changing the value of the connector&#8217;s <a href="#oracle-property-decimal-handling-mode"><code>decimal.handling.mode</code></a> configuration property.
When the property is set to its default value of <code>precise</code>, the connector maps these Oracle data types to the Kafka Connect <code>org.apache.kafka.connect.data.Decimal</code> logical type, as indicated in the table.
When the value of the property is set to <code>double</code> or <code>string</code>, the connector uses alternate mappings for some Oracle data types.
For more information, see the <em>Semantic type and Notes</em> column in the following table.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Mappings for Oracle numeric data types</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 16.6666%;">
<col style="width: 61.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Oracle data type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name) and Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BINARY_FLOAT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>FLOAT32</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BINARY_DOUBLE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>FLOAT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DECIMAL[(P, S)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code> / <code>INT8</code> / <code>INT16</code> / <code>INT32</code> / <code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Decimal</code> if using <code>BYTES</code><br>
<br>
Handled equivalently to <code>NUMBER</code> (note that S defaults to 0 for <code>DECIMAL</code>).</p>
</div>
<div class="paragraph">
<p>When the <code>decimal.handling.mode</code> property is set to <code>double</code>, the connector represents <code>DECIMAL</code> values as Java <code>double</code> values with schema type <code>FLOAT64</code>.</p>
</div>
<div class="paragraph">
<p>When the <code>decimal.handling.mode</code> property is set to <code>string</code>, the connector represents DECIMAL values as their formatted string representation with schema type <code>STRING</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DOUBLE PRECISION</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRUCT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.data.VariableScaleDecimal</code><br>
<br>
Contains a structure with two fields: <code>scale</code> of type <code>INT32</code> that contains the scale of the transferred value and <code>value</code> of type <code>BYTES</code> containing the original value in an unscaled form.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>FLOAT[(P)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRUCT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.data.VariableScaleDecimal</code><br>
<br>
Contains a structure with two fields: <code>scale</code> of type <code>INT32</code> that contains the scale of the transferred value and <code>value</code> of type <code>BYTES</code> containing the original value in an unscaled form.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INTEGER</code>, <code>INT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Decimal</code><br>
<br>
<code>INTEGER</code> is mapped in Oracle to NUMBER(38,0) and hence can hold values larger than any of the <code>INT</code> types could store</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NUMBER[(P[, *])]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRUCT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.data.VariableScaleDecimal</code><br>
<br>
Contains a structure with two fields: <code>scale</code> of type <code>INT32</code> that contains the scale of the transferred value and <code>value</code> of type <code>BYTES</code> containing the original value in an unscaled form.</p>
</div>
<div class="paragraph">
<p>When the <code>decimal.handling.mode</code> property is set to <code>double</code>, the connector represents <code>NUMBER</code> values as Java <code>double</code> values with schema type <code>FLOAT64</code>.</p>
</div>
<div class="paragraph">
<p>When the <code>decimal.handling.mode</code> property is set to <code>string</code>, the connector represents <code>NUMBER</code> values as their formatted string representation with schema type <code>STRING</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NUMBER(P, S &lt;= 0)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT8</code> / <code>INT16</code> / <code>INT32</code> / <code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NUMBER</code> columns with a scale of 0 represent integer numbers.
A negative scale indicates rounding in Oracle, for example, a scale of -2 causes rounding to hundreds.<br>
<br>
Depending on the precision and scale, one of the following matching Kafka Connect integer type is chosen:<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p>P - S &lt; 3, <code>INT8</code><br></p>
</li>
<li>
<p>P - S &lt; 5, <code>INT16</code><br></p>
</li>
<li>
<p>P - S &lt; 10, <code>INT32</code><br></p>
</li>
<li>
<p>P - S &lt; 19, <code>INT64</code><br></p>
</li>
<li>
<p>P - S &gt;= 19, <code>BYTES</code> (<code>org.apache.kafka.connect.data.Decimal</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the <code>decimal.handling.mode</code> property is set to <code>double</code>, the connector represents <code>NUMBER</code> values as Java <code>double</code> values with schema type <code>FLOAT64</code>.</p>
</div>
<div class="paragraph">
<p>When the <code>decimal.handling.mode</code> property is set to <code>string</code>, the connector represents <code>NUMBER</code> values as their formatted string representation with schema type <code>STRING</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NUMBER(P, S &gt; 0)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Decimal</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NUMERIC[(P, S)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code> / <code>INT8</code> / <code>INT16</code> / <code>INT32</code> / <code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Decimal</code> if using <code>BYTES</code><br>
<br>
Handled equivalently to <code>NUMBER</code> (note that S defaults to 0 for <code>NUMERIC</code>).</p>
</div>
<div class="paragraph">
<p>When the <code>decimal.handling.mode</code> property is set to <code>double</code>, the connector represents <code>NUMERIC</code> values as Java <code>double</code> values with schema type <code>FLOAT64</code>.</p>
</div>
<div class="paragraph">
<p>When the <code>decimal.handling.mode</code> property is set to <code>string</code>, the connector represents <code>NUMERIC</code> values as their formatted string representation with schema type <code>STRING</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>SMALLINT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Decimal</code><br>
<br>
<code>SMALLINT</code> is mapped in Oracle to NUMBER(38,0) and hence can hold values larger than any of the <code>INT</code> types could store</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>REAL</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRUCT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.data.VariableScaleDecimal</code><br>
<br>
Contains a structure with two fields: <code>scale</code> of type <code>INT32</code> that contains the scale of the transferred value and <code>value</code> of type <code>BYTES</code> containing the original value in an unscaled form.</p>
</div>
<div class="paragraph">
<p>When the <code>decimal.handling.mode</code> property is set to <code>double</code>, the connector represents <code>REAL</code> values as Java <code>double</code> values with schema type <code>FLOAT64</code>.</p>
</div>
<div class="paragraph">
<p>When the <code>decimal.handling.mode</code> property is set to <code>string</code>, the connector represents <code>REAL</code> values as their formatted string representation with schema type <code>STRING</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>As mention above, Oracle allows negative scales in <code>NUMBER</code> type.
This can cause an issue during conversion to the Avro format when the number is represented as the <code>Decimal</code>.
<code>Decimal</code> type includes scale information, but <a href="https://avro.apache.org/docs/1.11.1/specification/#decimal">Avro specification</a> allows only positive values for the scale.
Depending on the schema registry used, it may result into Avro serialization failure.
To avoid this issue, you can use <code>NumberToZeroScaleConverter</code>, which converts sufficiently high numbers (P - S &gt;= 19) with negative scale into <code>Decimal</code> type with zero scale.
It can be configured as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">converters=zero_scale
zero_scale.type=io.debezium.connector.oracle.converters.NumberToZeroScaleConverter
zero_scale.decimal.mode=precise</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the number is converted to <code>Decimal</code> type (<code>zero_scale.decimal.mode=precise</code>), but for completeness remaining two supported types (<code>double</code> and <code>string</code>) are supported as well.</p>
</div>
</div>
<div class="sect2">
<h3 id="oracle-boolean-types"><a class="anchor" href="#oracle-boolean-types"></a>Boolean types</h3>
<div class="paragraph">
<p>Oracle does not provide native support for a <code>BOOLEAN</code> data type.
However, it is common practice to use other data types with certain semantics to simulate the concept of a logical <code>BOOLEAN</code> data type.</p>
</div>
<div class="paragraph">
<p>To enable you to convert source columns to Boolean data types, Debezium provides a <code>NumberOneToBooleanConverter</code> <a href="../development/converters.html#custom-converters" class="xref page">custom converter</a> that you can use in one of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Map all <code>NUMBER(1)</code> columns to a <code>BOOLEAN</code> type.</p>
</li>
<li>
<p>Enumerate a subset of columns by using a comma-separated list of regular expressions.<br>
To use this type of conversion, you must set the <a href="#oracle-property-converters"><code>converters</code></a> configuration property with the <code>selector</code> parameter, as shown in the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">converters=boolean
boolean.type=io.debezium.connector.oracle.converters.NumberOneToBooleanConverter
boolean.selector=.*MYTABLE.FLAG,.*.IS_ARCHIVED</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="oracle-temporal-types"><a class="anchor" href="#oracle-temporal-types"></a>Temporal types</h3>
<div class="paragraph">
<p>Other than the Oracle <code>INTERVAL</code>, <code>TIMESTAMP WITH TIME ZONE</code>, and <code>TIMESTAMP WITH LOCAL TIME ZONE</code> data types, the way that the connector converts temporal types depends on the value of the <code>time.precision.mode</code> configuration property.</p>
</div>
<div class="paragraph">
<p>When the <code>time.precision.mode</code> configuration property is set to <code>adaptive</code> (the default), then the connector determines the literal and semantic type for the temporal types based on the column&#8217;s data type definition so that events <em>exactly</em> represent the values in the database:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 20%;">
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Oracle data type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name) and Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DATE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.Timestamp</code><br>
<br>
Represents the number of milliseconds since the UNIX epoch, and does not include timezone information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INTERVAL DAY[(M)] TO SECOND</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>FLOAT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.MicroDuration</code><br>
<br>
The number of micro seconds for a time interval using the <code>365.25 / 12.0</code> formula for days per month average.<br>
<br>
<code>io.debezium.time.Interval</code> (when <code>interval.handling.mode</code> is set to <code>string</code>)<br>
<br>
The string representation of the interval value that follows the pattern <code>P&lt;years&gt;Y&lt;months&gt;M&lt;days&gt;DT&lt;hours&gt;H&lt;minutes&gt;M&lt;seconds&gt;S</code>, for example,  <code>P1Y2M3DT4H5M6.78S</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INTERVAL YEAR[(M)] TO MONTH</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>FLOAT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.MicroDuration</code><br>
<br>
The number of micro seconds for a time interval using the <code>365.25 / 12.0</code> formula for days per month average.<br>
<br>
<code>io.debezium.time.Interval</code> (when <code>interval.handling.mode</code> is set to <code>string</code>)<br>
<br>
The string representation of the interval value that follows the pattern <code>P&lt;years&gt;Y&lt;months&gt;M&lt;days&gt;DT&lt;hours&gt;H&lt;minutes&gt;M&lt;seconds&gt;S</code>, for example,  <code>P1Y2M3DT4H5M6.78S</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIMESTAMP(0 - 3)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.Timestamp</code><br>
<br>
Represents the number of milliseconds since the UNIX epoch, and does not include timezone information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIMESTAMP, TIMESTAMP(4 - 6)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.MicroTimestamp</code><br>
<br>
Represents the number of microseconds since the UNIX epoch, and does not include timezone information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIMESTAMP(7 - 9)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.NanoTimestamp</code><br>
<br>
Represents the number of nanoseconds since the UNIX epoch, and does not include timezone information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIMESTAMP WITH TIME ZONE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.ZonedTimestamp</code><br>
<br>
A string representation of a timestamp with timezone information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIMESTAMP WITH LOCAL TIME ZONE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.ZonedTimestamp</code><br>
<br>
A string representation of a timestamp in UTC.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When the <code>time.precision.mode</code> configuration property is set to <code>connect</code>, then the connector uses the predefined Kafka Connect logical types.
This can be useful when consumers only know about the built-in Kafka Connect logical types and are unable to handle variable-precision time values.
Because the level of precision that Oracle supports exceeds the level that the logical types in Kafka Connect support, if you set <code>time.precision.mode</code> to <code>connect</code>, <strong>a loss of precision</strong> results when the <em>fractional second precision</em> value of a database column is greater than 3:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 20%;">
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Oracle data type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name) and Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DATE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT32</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Date</code><br>
<br>
Represents the number of days since the UNIX epoch.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INTERVAL DAY[(M)] TO SECOND</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>FLOAT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.MicroDuration</code><br>
<br>
The number of micro seconds for a time interval using the <code>365.25 / 12.0</code> formula for days per month average.<br>
<br>
<code>io.debezium.time.Interval</code> (when <code>interval.handling.mode</code> is set to <code>string</code>)<br>
<br>
The string representation of the interval value that follows the pattern <code>P&lt;years&gt;Y&lt;months&gt;M&lt;days&gt;DT&lt;hours&gt;H&lt;minutes&gt;M&lt;seconds&gt;S</code>, for example,  <code>P1Y2M3DT4H5M6.78S</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INTERVAL YEAR[(M)] TO MONTH</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>FLOAT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.MicroDuration</code><br>
<br>
The number of micro seconds for a time interval using the <code>365.25 / 12.0</code> formula for days per month average.<br>
<br>
<code>io.debezium.time.Interval</code> (when <code>interval.handling.mode</code> is set to <code>string</code>)<br>
<br>
The string representation of the interval value that follows the pattern <code>P&lt;years&gt;Y&lt;months&gt;M&lt;days&gt;DT&lt;hours&gt;H&lt;minutes&gt;M&lt;seconds&gt;S</code>, for example,  <code>P1Y2M3DT4H5M6.78S</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIMESTAMP(0 - 3)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Timestamp</code><br>
<br>
Represents the number of milliseconds since the UNIX epoch, and does not include timezone information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIMESTAMP(4 - 6)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Timestamp</code><br>
<br>
Represents the number of milliseconds since the UNIX epoch, and does not include timezone information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIMESTAMP(7 - 9)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Timestamp</code><br>
<br>
Represents the number of milliseconds since the UNIX epoch, and does not include timezone information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIMESTAMP WITH TIME ZONE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.ZonedTimestamp</code><br>
<br>
A string representation of a timestamp with timezone information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIMESTAMP WITH LOCAL TIME ZONE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.ZonedTimestamp</code><br>
<br>
A string representation of a timestamp in UTC.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="oracle-rowid-types"><a class="anchor" href="#oracle-rowid-types"></a>ROWID types</h3>
<div class="paragraph">
<p>The following table describes how the connector maps ROWID (row address) data types.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Mappings for Oracle ROWID data types</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 16.6666%;">
<col style="width: 61.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Oracle data type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name) and Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ROWID</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>This data type is not supported when using Oracle XStream.</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>UROWID</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>This data type is not supported</em>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="oracle-xml-types"><a class="anchor" href="#oracle-xml-types"></a>XML types</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Support for <code>XMLTYPE</code> is currently in an incubating state.
Depending on the feedback that we receive, the exact semantics, configuration options, and so forth might change in future revisions.
Please let us know if you encounter any problems while using these data types.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following table describes how the connector maps XMLTYPE data types.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Mappings for Oracle XMLTYPE data types</caption>
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 16.6666%;">
<col style="width: 61.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Oracle data type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name) and Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>XMLTYPE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.data.Xml</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="oracle-user-defined-types"><a class="anchor" href="#oracle-user-defined-types"></a>User-defined types</h3>
<div class="paragraph">
<p>Oracle enables you to define custom data types to provide flexibility when the built-in data types do not satisfy your requirements.
There are a several user-defined types such as Object types, REF data types, Varrays, and Nested Tables.
At this time, you cannot use the Debezium Oracle connector with any of these user-defined types.</p>
</div>
</div>
<div class="sect2">
<h3 id="oracle-supplied-types"><a class="anchor" href="#oracle-supplied-types"></a>Oracle-supplied types</h3>
<div class="paragraph">
<p>Oracle provides SQL-based interfaces that you can use to define new types when the built-in or ANSI-supported types are insufficient.
Oracle offers several commonly used data types to serve a broad array of purposes such as <strong>Any</strong> or <strong>Spatial</strong> types.
At this time, you cannot use the Debezium Oracle connector with any of these data types.</p>
</div>
</div>
<div class="sect2">
<h3 id="oracle-default-values"><a class="anchor" href="#oracle-default-values"></a>Default Values</h3>
<div class="paragraph">
<p>If a default value is specified for a column in the database schema, the Oracle connector will attempt to propagate this value to the schema of the corresponding Kafka record field.
Most common data types are supported, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Character types (<code>CHAR</code>, <code>NCHAR</code>, <code>VARCHAR</code>, <code>VARCHAR2</code>, <code>NVARCHAR</code>, <code>NVARCHAR2</code>)</p>
</li>
<li>
<p>Numeric types (<code>INTEGER</code>, <code>NUMERIC</code>, etc.)</p>
</li>
<li>
<p>Temporal types (<code>DATE</code>, <code>TIMESTAMP</code>, <code>INTERVAL</code>, etc.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a temporal type uses a function call such as <code>TO_TIMESTAMP</code> or <code>TO_DATE</code> to represent the default value, the connector will resolve the default value by making an additional database call to evaluate the function.
For example, if a <code>DATE</code> column is defined with the default value of <code>TO_DATE('2021-01-02', 'YYYY-MM-DD')</code>, the column&#8217;s default value will be the number of days since the UNIX epoch for that date or <code>18629</code> in this case.</p>
</div>
<div class="paragraph">
<p>If a temporal type uses the <code>SYSDATE</code> constant to represent the default value, the connector will resolve this based on whether the column is defined as <code>NOT NULL</code> or <code>NULL</code>.
If the column is nullable, no default value will be set; however, if the column isn&#8217;t nullable then the default value will be resolved as either <code>0</code> (for <code>DATE</code> or <code>TIMESTAMP(n)</code> data types) or <code>1970-01-01T00:00:00Z</code> (for <code>TIMESTAMP WITH TIME ZONE</code> or <code>TIMESTAMP WITH LOCAL TIME ZONE</code> data types).
The default value type will be numeric except if the column is a <code>TIMESTAMP WITH TIME ZONE</code> or <code>TIMESTAMP WITH LOCAL TIME ZONE</code> in which case its emitted as a string.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="debezium-oracle-connector-converters"><a class="anchor" href="#debezium-oracle-connector-converters"></a>Custom converters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, the Debezium Oracle connector provides several <code>CustomConverter</code> implementations specific to Oracle data types.
These custom converters provide alternative mappings for specific data types based on the connector configuration.
To add a <code>CustomConverter</code> to the connector, follow the instructions in the <a href="../development/converters.adoc">Custom Converters documentation</a>.</p>
</div>
<div class="sect2">
<h3 id="_number1_to_boolean"><a class="anchor" href="#_number1_to_boolean"></a><code>NUMBER(1)</code> to Boolean</h3>
<div class="paragraph">
<p>Beginning with version 23, Oracle database provides a <code>BOOLEAN</code> logical data type.
In earlier versions, the database simulates a <code>BOOLEAN</code> type by using a <code>NUMBER(1)</code> data type, constrained with a value of <code>0</code> for false, or a value of <code>1</code> for true.</p>
</div>
<div class="paragraph">
<p>By default, when Debezium emits change events for source columns that use the <code>NUMBER(1)</code> data type, it converts the data to the <code>INT8</code> literal type.
If the default mapping for <code>NUMBER(1)</code> data types does not meet your needs, you can configure the connector to use the logical <code>BOOL</code> type when it emits these columns by configuring the <code>NumberOneToBooleanConverter</code>, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="title">Example: <code>NumberOneToBooleanConverter</code> configuration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">converters=number-to-boolean
number-to-boolean.type=io.debezium.connector.oracle.converters.NumberOneToBooleanConverter
number-to-boolean.selector=.*.MY_TABLE.DATA</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, the <code>selector</code> property is optional.
The <code>selector</code> property specifies a regular expression that designates which tables or columns the converter applies to.
If you omit the <code>selector</code> property, when Debezium emits an event, every column with the <code>NUMBER(1)</code> data type is converted to a field that uses the logical <code>BOOL</code> type.</p>
</div>
</div>
<div class="sect2">
<h3 id="_number_to_zero_scale"><a class="anchor" href="#_number_to_zero_scale"></a><code>NUMBER</code> To Zero Scale</h3>
<div class="paragraph">
<p>Oracle supports creating <code>NUMBER</code> based columns with negative scale, that is, <code>NUMBER(-2)</code>.
Not all systems can process negative scale values, so these values can result in processing problems in your pipeline.
For example, because Apache Avro does not support these values, problems can occur if Debezium converts events to Avro format.
Similarly, downstream consumers that do not support these values can also encounter errors.</p>
</div>
<div class="listingblock">
<div class="title">Example configuration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">converters=number-zero-scale
number-zero-scale.type=io.debezium.connector.oracle.converters.NumberToZeroScaleConverter
number-zero-scale.decimal.mode=precise</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, the <code>decimal.mode</code> property specifies how the connector emits decimal values.
This property is optional.
If you omit the <code>decimal.mode</code> property, the converter defaults to using the <code>PRECISE</code> decimal handling mode.</p>
</div>
</div>
<div class="sect2">
<h3 id="_raw_to_string"><a class="anchor" href="#_raw_to_string"></a><code>RAW</code> to String</h3>
<div class="paragraph">
<p>Although Oracle recommends against the use of certain data types, such as <code>RAW</code>, legacy systems might continue to use such types.
By default, Debezium emits <code>RAW</code> column types as logical <code>BYTES</code>, a type that enables the storage of binary or text-based data.</p>
</div>
<div class="paragraph">
<p>In some cases, <code>RAW</code> columns might store character data as a series of bytes.
To facilitate consumption by consumers, you can configure Debezium to use the <code>RawToStringConverter</code>.
The <code>RawToStringConverter</code> provides a way to easily target such <code>RAW</code> columns and emit values as strings, rather than bytes.
The following example shows how to add the <code>RawToStringConverter</code> to the connector configuration:</p>
</div>
<div class="listingblock">
<div class="title">Example: <code>RawToStringConverter</code> configuration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">converters=raw-to-string
raw-to-string.type=io.debezium.connector.oracle.converters.RawToStringConverter
raw-to-string.selector=.*.MY_TABLE.DATA</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, the <code>selector</code> property enables you to define a regular expression that specifies the tables or columns that the converter processes.
If you omit the <code>selector</code> property, the converter maps all <code>RAW</code> column types to logical <code>STRING</code> field types.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting-up-oracle"><a class="anchor" href="#setting-up-oracle"></a>Setting up Oracle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following steps are necessary to set up Oracle for use with the Debezium Oracle connector.
These steps assume the use of the multi-tenancy configuration with a container database and at least one pluggable database.
If you do not intend to use a multi-tenant configuration, it might be necessary to adjust the following steps.</p>
</div>
<div class="paragraph">
<p>For information about using Vagrant to set up Oracle in a virtual machine, see the <a href="https://github.com/debezium/oracle-vagrant-box/">Debezium Vagrant Box for Oracle database</a> GitHub repository.</p>
</div>
<div class="sect2">
<h3 id="compatibility-of-the-debezium-oracle-connector-with-oracle-installation-types"><a class="anchor" href="#compatibility-of-the-debezium-oracle-connector-with-oracle-installation-types"></a>Compatibility with Oracle installation types</h3>
<div class="paragraph">
<p>An Oracle database can be installed either as a standalone instance or using Oracle Real Application Cluster (RAC).
The Debezium Oracle connector is compatible with both types of installation.</p>
</div>
</div>
<div class="sect2">
<h3 id="schemas-that-the-debezium-oracle-connector-excludes-when-capturing-change-events"><a class="anchor" href="#schemas-that-the-debezium-oracle-connector-excludes-when-capturing-change-events"></a>Schemas excluded from capture</h3>
<div class="paragraph">
<p>When the Debezium Oracle connector captures tables, it automatically excludes tables from the following schemas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>appqossys</code></p>
</li>
<li>
<p><code>audsys</code></p>
</li>
<li>
<p><code>ctxsys</code></p>
</li>
<li>
<p><code>dvsys</code></p>
</li>
<li>
<p><code>dbsfwuser</code></p>
</li>
<li>
<p><code>dbsnmp</code></p>
</li>
<li>
<p><code>qsmadmin_internal</code></p>
</li>
<li>
<p><code>lbacsys</code></p>
</li>
<li>
<p><code>mdsys</code></p>
</li>
<li>
<p><code>ojvmsys</code></p>
</li>
<li>
<p><code>olapsys</code></p>
</li>
<li>
<p><code>orddata</code></p>
</li>
<li>
<p><code>ordsys</code></p>
</li>
<li>
<p><code>outln</code></p>
</li>
<li>
<p><code>sys</code></p>
</li>
<li>
<p><code>system</code></p>
</li>
<li>
<p><code>wmsys</code></p>
</li>
<li>
<p><code>xdb</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To enable the connector to capture changes from a table, the table must use a schema that is not named in the preceding list.</p>
</div>
</div>
<div class="sect2">
<h3 id="tables-that-the-debezium-oracle-connector-excludes-when-capturing-change-events"><a class="anchor" href="#tables-that-the-debezium-oracle-connector-excludes-when-capturing-change-events"></a>Tables excluded from capture</h3>
<div class="paragraph">
<p>When the Debezium Oracle connector captures tables, it automatically excludes tables that match the following rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Compression Advisor tables matching the pattern <code>CMP[3|4]$[0-9]+</code>.</p>
</li>
<li>
<p>Index-organized tables matching the pattern <code>SYS_IOT_OVER_%</code>.</p>
</li>
<li>
<p>Spatial tables matching the patterns <code>MDRT_%</code>, <code>MDRS_%</code>, or <code>MDXT_%</code>.</p>
</li>
<li>
<p>Nested tables</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To enable the connector to capture a table with a name that matches any of the preceding rules, you must rename the table.</p>
</div>
</div>
<div class="sect2">
<h3 id="_preparing_the_database"><a class="anchor" href="#_preparing_the_database"></a>Preparing the database</h3>
<div class="listingblock">
<div class="title">Configuration needed for Oracle LogMiner</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ORACLE_SID=ORACLCDB dbz_oracle sqlplus /nolog

CONNECT sys/top_secret AS SYSDBA
alter system set db_recovery_file_dest_size = 10G;
alter system set db_recovery_file_dest = '/opt/oracle/oradata/recovery_area' scope=spfile;
shutdown immediate
startup mount
alter database archivelog;
alter database open;
-- Should now "Database log mode: Archive Mode"
archive log list

exit;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Oracle AWS RDS does not allow you to execute the commands above nor does it allow you to log in as sysdba. AWS provides these alternative commands to configure LogMiner. Before executing these commands, ensure that your Oracle AWS RDS instance is enabled for backups.</p>
</div>
<div class="paragraph">
<p>To confirm that Oracle has backups enabled, execute the command below first. The LOG_MODE should say ARCHIVELOG. If it does not, you may need to reboot your Oracle AWS RDS instance.</p>
</div>
<div class="listingblock">
<div class="title">Configuration needed for Oracle AWS RDS LogMiner</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">SQL&gt; SELECT LOG_MODE FROM V$DATABASE;

LOG_MODE
------------
ARCHIVELOG</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once LOG_MODE is set to ARCHIVELOG, execute the commands to complete LogMiner configuration. The first command set the database to archivelogs and the second adds supplemental logging.</p>
</div>
<div class="listingblock">
<div class="title">Configuration needed for Oracle AWS RDS LogMiner</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">exec rdsadmin.rdsadmin_util.set_configuration('archivelog retention hours',24);

exec rdsadmin.rdsadmin_util.alter_supplemental_logging('ADD');</code></pre>
</div>
</div>
<div class="paragraph">
<p>To enable Debezium to capture the <em>before</em> state of changed database rows, you must also enable supplemental logging for captured tables or for the entire database.
The following example illustrates how to configure supplemental logging for all columns in a single <code>inventory.customers</code> table.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ALTER TABLE inventory.customers ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enabling supplemental logging for all table columns increases the volume of the Oracle redo logs.
To prevent excessive growth in the size of the logs, apply the preceding configuration selectively.</p>
</div>
<div class="paragraph">
<p>Minimal supplemental logging must be enabled at the database level and can be configured as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="oracle-redo-log-sizing"><a class="anchor" href="#oracle-redo-log-sizing"></a>Redo log sizing</h3>
<div class="paragraph">
<p>Depending on the database configuration, the size and number of redo logs might not be sufficient to achieve acceptable performance.
Before you set up the Debezium Oracle connector, ensure that the capacity of the redo logs is sufficient to support the database.</p>
</div>
<div class="paragraph">
<p>The capacity of the redo logs for a database must be sufficient to store its data dictionary.
In general, the size of the data dictionary increases with the number of tables and columns in the database.
If the redo log lacks sufficient capacity, both the database and the Debezium connector might experience performance problems.</p>
</div>
<div class="paragraph">
<p>Consult with your database administrator to evaluate whether the database might require increased log capacity.</p>
</div>
</div>
<div class="sect2">
<h3 id="_archive_log_destinations"><a class="anchor" href="#_archive_log_destinations"></a>Archive log destinations</h3>
<div class="paragraph">
<p>Oracle database administrators can configure up to 31 different destinations for archive logs.
Administrators can set parameters for each destination to designate it for a specific use, for example, log shipping for physical standbys, or external storage to allow for extended log retention.
Oracle reports details about archive log destinations in the <code>V$ARCHIVE_DEST_STATUS</code> view.</p>
</div>
<div class="paragraph">
<p>The Debezium Oracle connector only uses destinations that have a status of <code>VALID</code> and a type of <code>LOCAL</code>.
If your Oracle environment includes multiple destinations that satisfy that criteria, consult with your Oracle administrator to determine which archive log destination Debezium should use.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To specify the archive log destination that you want Debezium to use, set the <a href="#oracle-property-log-mining-archive-destination-name"><code>log.mining.archive.destination.name</code></a> property in the connector configuration.<br>
<br>
For example, suppose that a database is configured with two archive destination paths, <code>/path/one</code> and <code>/path/two</code>, and that the <code>V$ARCHIVE_DEST_STATUS</code> table associates these paths with destination names that are specified in the column <code>DEST_NAME</code>.
If both destinations satisfy the criteria for Debezium&#8201;&#8212;&#8201;that is, their <code>status</code> is <code>VALID</code> and their <code>type</code> is <code>LOCAL</code>&#8201;&#8212;&#8201;to configure the connector to use the archive logs that the database writes to <code>/path/two</code>, set the value of <code>log.mining.archive.destination.name</code> to the value in the <code>DEST_NAME</code> column that is associated with <code>/path/two</code> in the <code>V$ARCHIVE_DEST_STATUS</code> table.
For example, if the <code>DEST_NAME</code> is <code>LOG_ARCHIVE_DEST_3</code> for <code>/path/two</code>, you would configure Debezium as follows:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "log.mining.archive.destination.name": "LOG_ARCHIVE_DEST_3"
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not set the value of <code>log.mining.archive.destination.name</code> to the path that the database uses for the archive logs.
Set the property to the name of an archive log destination in the <code>DEST_NAME</code> column for a row in the <code>V$ARCHIVE_DEST_STATUS</code> table that satisfies your archive log retention policy.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If your Oracle environment includes multiple destinations that satisfy that criteria, and you fail to specify the preferred destination, the Debezium Oracle connector selects the destination path at random.
Because the retention policy that is configured for each destination might differ, this can lead to errors if the connector selects a path from which the requested log data was deleted.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="creating-users-for-the-connector"><a class="anchor" href="#creating-users-for-the-connector"></a>Creating users for the connector</h3>
<div class="paragraph">
<p>For the Debezium Oracle connector to capture change events, it must run as an Oracle LogMiner user that has specific permissions.
The following example shows the SQL for creating an Oracle user account for the connector in a multi-tenant database model.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The connector captures database changes that are made by its own Oracle user account.
However, it does not capture changes that are made by the <code>SYS</code> or <code>SYSTEM</code> user accounts.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="oracle-create-users-logminer" class="listingblock">
<div class="title">Creating the connector&#8217;s LogMiner user</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">sqlplus sys/top_secret@//localhost:1521/ORCLCDB as sysdba
  CREATE TABLESPACE logminer_tbs DATAFILE '/opt/oracle/oradata/ORCLCDB/logminer_tbs.dbf'
    SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;
  exit;

sqlplus sys/top_secret@//localhost:1521/ORCLPDB1 as sysdba
  CREATE TABLESPACE logminer_tbs DATAFILE '/opt/oracle/oradata/ORCLCDB/ORCLPDB1/logminer_tbs.dbf'
    SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;
  exit;

sqlplus sys/top_secret@//localhost:1521/ORCLCDB as sysdba

  CREATE USER c##dbzuser IDENTIFIED BY dbz
    DEFAULT TABLESPACE logminer_tbs
    QUOTA UNLIMITED ON logminer_tbs
    CONTAINER=ALL;

  GRANT CREATE SESSION TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="1"></i><b>(1)</b>
  GRANT SET CONTAINER TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="2"></i><b>(2)</b>
  GRANT SELECT ON V_$DATABASE to c##dbzuser CONTAINER=ALL; <i class="conum" data-value="3"></i><b>(3)</b>
  GRANT FLASHBACK ANY TABLE TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="4"></i><b>(4)</b>
  GRANT SELECT ANY TABLE TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="5"></i><b>(5)</b>
  GRANT SELECT_CATALOG_ROLE TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="6"></i><b>(6)</b>
  GRANT EXECUTE_CATALOG_ROLE TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="7"></i><b>(7)</b>
  GRANT SELECT ANY TRANSACTION TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="8"></i><b>(8)</b>
  GRANT LOGMINING TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="9"></i><b>(9)</b>

  GRANT CREATE TABLE TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="10"></i><b>(10)</b>
  GRANT LOCK ANY TABLE TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="11"></i><b>(11)</b>
  GRANT CREATE SEQUENCE TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="12"></i><b>(12)</b>

  GRANT EXECUTE ON DBMS_LOGMNR TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="13"></i><b>(13)</b>
  GRANT EXECUTE ON DBMS_LOGMNR_D TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="14"></i><b>(14)</b>

  GRANT SELECT ON V_$LOG TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="15"></i><b>(15)</b>
  GRANT SELECT ON V_$LOG_HISTORY TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="16"></i><b>(16)</b>
  GRANT SELECT ON V_$LOGMNR_LOGS TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="17"></i><b>(17)</b>
  GRANT SELECT ON V_$LOGMNR_CONTENTS TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="18"></i><b>(18)</b>
  GRANT SELECT ON V_$LOGMNR_PARAMETERS TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="19"></i><b>(19)</b>
  GRANT SELECT ON V_$LOGFILE TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="20"></i><b>(20)</b>
  GRANT SELECT ON V_$ARCHIVED_LOG TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="21"></i><b>(21)</b>
  GRANT SELECT ON V_$ARCHIVE_DEST_STATUS TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="22"></i><b>(22)</b>
  GRANT SELECT ON V_$TRANSACTION TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="23"></i><b>(23)</b>

  GRANT SELECT ON V_$MYSTAT TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="24"></i><b>(24)</b>
  GRANT SELECT ON V_$STATNAME TO c##dbzuser CONTAINER=ALL; <i class="conum" data-value="25"></i><b>(25)</b>

  exit;</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Descriptions of permissions / grants</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Role name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CREATE SESSION</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the connector to connect to Oracle.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SET CONTAINER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the connector to switch between pluggable databases.
This is only required when the Oracle installation has container database support (CDB) enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SELECT ON V_$DATABASE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the connector to read the <code>V$DATABASE</code> table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FLASHBACK ANY TABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the connector to perform Flashback queries, which is how the connector performs the initial snapshot of data.
Optionally, rather than granting <code>FLASHBACK</code> permission on all tables, you can grant the FLASHBACK privilege for specific tables only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SELECT ANY TABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the connector to read any table.
Optionally, rather than granting <code>SELECT</code> permission on all tables, you can grant the <code>SELECT</code> privilege for specific tables only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SELECT_CATALOG_ROLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the connector to read the data dictionary, which is needed by Oracle LogMiner sessions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EXECUTE_CATALOG_ROLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the connector to write the data dictionary into the Oracle redo logs, which is needed to track schema changes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SELECT ANY TRANSACTION</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the snapshot process to perform a Flashback snapshot query against any transaction.
When <code>FLASHBACK ANY TABLE</code> is granted, this should also be granted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOGMINING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This role was added in newer versions of Oracle as a way to grant full access to Oracle LogMiner and its
packages.  On older versions of Oracle that don&#8217;t have this role, you can ignore this grant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CREATE TABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the connector to create its flush table in its default tablespace.
The flush table allows the connector to explicitly control flushing of the LGWR internal buffers to disk.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOCK ANY TABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the connector to lock tables during schema snapshot.
If snapshot locks are explicitly disabled via configuration, this grant can be safely ignored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CREATE SEQUENCE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the connector to create a sequence in its default tablespace.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EXECUTE ON DBMS_LOGMNR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the connector to run methods in the <code>DBMS_LOGMNR</code> package.
This is required to interact with Oracle LogMiner.
On newer versions of Oracle this is granted via the <code>LOGMINING</code> role but on older versions, this must be explicitly granted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EXECUTE ON DBMS_LOGMNR_D</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the connector to run methods in the <code>DBMS_LOGMNR_D</code> package.
This is required to interact with Oracle LogMiner.
On newer versions of Oracle this is granted via the <code>LOGMINING</code> role but on older versions, this must be explicitly granted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 to 25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SELECT ON V_$&#8230;&#8203;.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the connector to read these tables.
The connector must be able to read information about the Oracle redo and archive logs, and the current transaction state, to prepare the Oracle LogMiner session.
Without these grants, the connector cannot operate.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="support-for-oracle-standby-databases"><a class="anchor" href="#support-for-oracle-standby-databases"></a>Standby databases</h3>
<div class="paragraph">
<p>A standby database provides a synchronized copy of the primary instance.
In the event of a primary database failure, standby databases provide for continuous availability, and disaster recovery.
Oracle makes use of both physical and logical standby databases.</p>
</div>
<div class="paragraph">
<div class="title">Physical standbys</div>
<p>A physical standby is an exact, block-for-block copy of the primary production database, and its system change number (SCN) values are identical to those of the primary.
The Debezium Oracle connector cannot capture change events directly from a physical standby database, because physical standbys do not accept external connections.
The connector can capture events from a physical standby only after the standby is converted to the primary database.
The connector then connects to the former standby as if it were any primary database.</p>
</div>
<div class="paragraph">
<div class="title">Logical standbys</div>
<p>A logical standby contains the same logical data as the primary, but data might be stored in a different physical manner.
SCN offsets in a logical standby differ from the offsets in the primary database.
You can <a href="#configuring-the-debezium-oracle-connector-to-capture-events-from-a-logical-standby">configure the Debezium Oracle connector to capture changes from a logical standby database</a>.</p>
</div>
<div class="sect3">
<h4 id="_failover_databases"><a class="anchor" href="#_failover_databases"></a>Failover databases</h4>
<div class="paragraph">
<p>When you set up a failover database, it is generally best practice to use a physical standby database rather than a logical standby database.
A physical standby maintains a more consistent state with the primary database than does a logical standby.
Physical standbys contain an exact replica of the primary data, and the system change number (SCN) values of the standby are identical to those of the primary.
In a Debezium environment, after the database fails over to physical standby, the presence of consistent SCN values ensure that the connector can find the last processed SCN value.</p>
</div>
<div class="paragraph">
<p>A physical standby is locked in a read-only mode, with managed recovery running to maintain synchronization.
When a database is in standby mode, it does not accept external JDBC connections from clients, and it cannot be accessed by external application.</p>
</div>
<div class="paragraph">
<p>After a failure event, to permit Debezium to connect to the former physical standby,a DBA must perform several actions to enable failover to the standby, and promote it the the primary database.
The following list identifies some of the key actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cancel managed recovery on the standby.</p>
</li>
<li>
<p>Complete the active recovery process.</p>
</li>
<li>
<p>Convert the standby to the primary role.</p>
</li>
<li>
<p>Open the new primary to client read and write operations.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After the former physical standby is available for normal use, you can configure the Debezium Oracle connector to connect to it.
To enable the connector to capture from the new primary, edit the database hostname in the connector configuration, replacing the hostname of the original primary with the hostname of the new primary.</p>
</div>
</div>
<div class="sect3">
<h4 id="configuring-the-debezium-oracle-connector-to-capture-events-from-a-logical-standby"><a class="anchor" href="#configuring-the-debezium-oracle-connector-to-capture-events-from-a-logical-standby"></a>Configuring the Debezium Oracle connector to capture events from a logical standby</h4>
<div class="paragraph">
<p>When the Debezium connector for Oracle connects to a primary database, it uses an internal flush table to manage the flush cycles of the Oracle Log Writer Buffer (LGWR) process.
The flush process requires that the user account through which the connector accesses the database has permission to create and write to this flush table.
However, a logical stand-by database typically permits read-only access, preventing the connector from writing to the database.
You can modify the connector configuration to enable the connector to capture events from a logical standby, or the DBA can create a new writable tablespace in which the connector can store the flush table.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The ability to use the connector with a logical standby in an incubating state and can change without notice.
There is an open <a href="https://issues.redhat.com/browse/DBZ-3866">Jira issue</a> to investigate support for capturing changes from a physical standby.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To enable Debezium to capture events from an Oracle read-only logical standby database, add the following property to the connector configuration, to disable creation and management of the flush table:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">internal.log.mining.read.only=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding setting prevents the database from creating and updating the <code>LOG_MINING_FLUSH</code> table.
You can use the <code>internal.log.mining.read.only</code> property with an Oracle Standalone database, or with an Oracle RAC installation.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oracle-deploying-a-connector"><a class="anchor" href="#oracle-deploying-a-connector"></a>Deployment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To deploy a Debezium Oracle connector, you install the Debezium Oracle connector archive, configure the connector, and start the connector by adding its configuration to Kafka Connect.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="https://zookeeper.apache.org/">Apache ZooKeeper</a>, <a href="http://kafka.apache.org/">Apache Kafka</a>, and <a href="https://kafka.apache.org/documentation.html#connect">Kafka Connect</a> are installed.</p>
</li>
<li>
<p>Oracle Database is installed, and is <a href="#setting-up-oracle">configured to work with the Debezium connector</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download the Debezium <a href="https://repo1.maven.org/maven2/io/debezium/debezium-connector-oracle/2.7.1.Final/debezium-connector-oracle-2.7.1.Final-plugin.tar.gz">Oracle connector plug-in archive</a>.</p>
</li>
<li>
<p>Extract the files into your Kafka Connect environment.</p>
</li>
<li>
<p>Download the <a href="https://repo1.maven.org/maven2/com/oracle/database/jdbc/ojdbc8/21.11.0.0/ojdbc8-21.11.0.0.jar">JDBC driver for Oracle</a> from Maven Central and extract the downloaded driver file to the directory that contains the Debezium Oracle connector JAR file.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you use the Debezium Oracle connector with Oracle XStream, obtain the JDBC driver as part of the Oracle Instant Client package.
For more information, see <a href="#obtaining-oracle-jdbc-driver-and-xstreams-api-files">Obtaining the Oracle JDBC driver and XStream API files</a>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Download the <a href="https://repo1.maven.org/maven2/com/oracle/database/xml/xdb/21.11.0.0/xdb-21.11.0.0.jar">XDB library for Oracle</a> from Maven Central and extract the downloaded file to the directory that contains the Debezium Oracle connector JAR file.</p>
</li>
<li>
<p>Add the directory with the JAR files to <a href="https://kafka.apache.org/documentation/#connectconfigs">Kafka Connect&#8217;s <code>plugin.path</code></a>.</p>
</li>
<li>
<p>Restart your Kafka Connect process to pick up the new JAR files.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p><a href="#oracle-example-configuration">Configure the connector</a> and <a href="#oracle-adding-connector-configuration">add the configuration to your Kafka Connect cluster.</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="oracle-example-configuration"><a class="anchor" href="#oracle-example-configuration"></a>Debezium Oracle connector configuration</h3>
<div class="paragraph">
<p>Typically, you register a Debezium Oracle connector by submitting a JSON request that specifies the configuration properties for the connector.
The following example shows a JSON request for registering an instance of the Debezium Oracle connector with logical name <code>server1</code> at port 1521:</p>
</div>
<div class="paragraph">
<p>You can choose to produce events for a subset of the schemas and tables in a database.
Optionally, you can ignore, mask, or truncate columns that contain sensitive data, that are larger than a specified size, or that you do not need.</p>
</div>
<div class="listingblock">
<div class="title">Example: Debezium Oracle connector configuration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "name": "inventory-connector",  <i class="conum" data-value="1"></i><b>(1)</b>
    "config": {
        "connector.class" : "io.debezium.connector.oracle.OracleConnector",  <i class="conum" data-value="2"></i><b>(2)</b>
        "database.hostname" : "&lt;ORACLE_IP_ADDRESS&gt;",  <i class="conum" data-value="3"></i><b>(3)</b>
        "database.port" : "1521",  <i class="conum" data-value="4"></i><b>(4)</b>
        "database.user" : "c##dbzuser",  <i class="conum" data-value="5"></i><b>(5)</b>
        "database.password" : "dbz",   <i class="conum" data-value="6"></i><b>(6)</b>
        "database.dbname" : "ORCLCDB",  <i class="conum" data-value="7"></i><b>(7)</b>
        "topic.prefix" : "server1",  <i class="conum" data-value="8"></i><b>(8)</b>
        "tasks.max" : "1",  <i class="conum" data-value="9"></i><b>(9)</b>
        "database.pdb.name" : "ORCLPDB1",  <i class="conum" data-value="10"></i><b>(10)</b>
        "schema.history.internal.kafka.bootstrap.servers" : "kafka:9092", <i class="conum" data-value="11"></i><b>(11)</b>
        "schema.history.internal.kafka.topic": "schema-changes.inventory"  <i class="conum" data-value="12"></i><b>(12)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name that is assigned to the connector when you register it with a Kafka Connect service.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The name of this Oracle connector class.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The address of the Oracle instance.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The port number of the Oracle instance.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The name of the Oracle user, as specified in <a href="#creating-users-for-the-connector">Creating users for the connector</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The password for the Oracle user, as specified in <a href="#creating-users-for-the-connector">Creating users for the connector</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The name of the database to capture changes from.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Topic prefix that identifies and provides a namespace for the Oracle database server from which the connector captures changes.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>The maximum number of tasks to create for this connector.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>The name of the Oracle pluggable database that the connector captures changes from. Used in container database (CDB) installations only.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>The list of Kafka brokers that this connector uses to write and recover DDL statements to the database schema history topic.</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>The name of the database schema history topic where the connector writes and recovers DDL statements. This topic is for internal use only and should not be used by consumers.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the previous example, the <code>database.hostname</code> and <code>database.port</code> properties are used to define the connection to the database host.
However, in more complex Oracle deployments, or in deployments that use Transparent Network Substrate (TNS) names, you can use an alternative method in which you specify a JDBC URL.</p>
</div>
<div class="paragraph">
<p>The following JSON example shows the same configuration as in the preceding example, except that it uses a JDBC URL to connect to the database.</p>
</div>
<div class="listingblock">
<div class="title">Example: Debezium Oracle connector configuration that uses a JDBC URL to connect to the database</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "name": "inventory-connector",
    "config": {
        "connector.class" : "io.debezium.connector.oracle.OracleConnector",
        "tasks.max" : "1",
        "topic.prefix" : "server1",
        "database.user" : "c##dbzuser",
        "database.password" : "dbz",
        "database.url": "jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS_LIST=(LOAD_BALANCE=OFF)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=&lt;oracle ip 1&gt;)(PORT=1521))(ADDRESS=(PROTOCOL=TCP)(HOST=&lt;oracle ip 2&gt;)(PORT=1521)))(CONNECT_DATA=SERVICE_NAME=)(SERVER=DEDICATED)))",
        "database.dbname" : "ORCLCDB",
        "database.pdb.name" : "ORCLPDB1",
        "schema.history.internal.kafka.bootstrap.servers" : "kafka:9092",
        "schema.history.internal.kafka.topic": "schema-changes.inventory"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For the complete list of the configuration properties that you can set for the Debezium Oracle connector, see <a href="#oracle-connector-properties">Oracle connector properties</a>.</p>
</div>
<div class="paragraph">
<p>You can send this configuration with a <code>POST</code> command to a running Kafka Connect service.
The service records the configuration and starts a connector task that performs the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Connects to the Oracle database.</p>
</li>
<li>
<p>Reads the redo log.</p>
</li>
<li>
<p>Records change events to Kafka topics.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="oracle-adding-connector-configuration"><a class="anchor" href="#oracle-adding-connector-configuration"></a>Adding connector configuration</h3>
<div class="paragraph">
<p>To start running a Debezium Oracle connector, create a connector configuration, and add the configuration to your Kafka Connect cluster.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="#setting-up-oracle">Oracle is configured for use with Debezium</a>.</p>
</li>
<li>
<p>The Debezium Oracle connector is installed.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a <a href="#oracle-example-configuration">configuration</a> for the Oracle connector.</p>
</li>
<li>
<p>Use the <a href="https://kafka.apache.org/documentation/#connect_rest">Kafka Connect REST API</a> to add that connector configuration to your Kafka Connect cluster.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Results</div>
<p>After the connector starts, it <a href="#oracle-snapshots">performs a consistent snapshot</a> of the Oracle databases that the connector is configured for.
The connector then starts generating data change events for row-level operations and streaming the change event records to Kafka topics.</p>
</div>
</div>
<div class="sect2">
<h3 id="pluggable-vs-non-pluggable-databases"><a class="anchor" href="#pluggable-vs-non-pluggable-databases"></a>Pluggable vs Non-Pluggable databases</h3>
<div id="oracle-database-mode" class="paragraph">
<p>Oracle Database supports the following deployment types:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Container database (CDB)</dt>
<dd>
<p>A database that can contain multiple pluggable databases (PDBs).
Database clients connect to each PDB as if it were a standard, non-CDB database.</p>
</dd>
<dt class="hdlist1">Non-container database (non-CDB)</dt>
<dd>
<p>A standard Oracle database, which does not support the creation of pluggable databases.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Example: Debezium connector configuration for CDB deployments</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "config": {
        "connector.class" : "io.debezium.connector.oracle.OracleConnector",
        "tasks.max" : "1",
        "topic.prefix" : "server1",
        "database.hostname" : "&lt;oracle ip&gt;",
        "database.port" : "1521",
        "database.user" : "c##dbzuser",
        "database.password" : "dbz",
        "database.dbname" : "ORCLCDB",
        "database.pdb.name" : "ORCLPDB1",
        "schema.history.internal.kafka.bootstrap.servers" : "kafka:9092",
        "schema.history.internal.kafka.topic": "schema-changes.inventory"
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you configure a Debezium Oracle connector for use with an Oracle CDB, you must specify a value for the property <code>database.pdb.name</code>, which names the PDB that you want the connector to capture changes from.
For non-CDB installation, do <strong>not</strong> specify the <code>database.pdb.name</code> property.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Debezium Oracle connector configuration for non-CDB deployments</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "config": {
        "connector.class" : "io.debezium.connector.oracle.OracleConnector",
        "tasks.max" : "1",
        "topic.prefix" : "server1",
        "database.hostname" : "&lt;oracle ip&gt;",
        "database.port" : "1521",
        "database.user" : "c##dbzuser",
        "database.password" : "dbz",
        "database.dbname" : "ORCLCDB",
        "schema.history.internal.kafka.bootstrap.servers" : "kafka:9092",
        "schema.history.internal.kafka.topic": "schema-changes.inventory"
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oracle-connector-properties"><a class="anchor" href="#oracle-connector-properties"></a>Connector properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Debezium Oracle connector has numerous configuration properties that you can use to achieve the right connector behavior for your application.
Many properties have default values.
Information about the properties is organized as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#required-debezium-oracle-connector-configuration-properties">Required Debezium Oracle connector configuration properties</a></p>
</li>
<li>
<p><a href="#debezium-oracle-connector-database-history-configuration-properties">Database schema history connector configuration properties</a> that control how Debezium processes events that it reads from the database schema history topic.</p>
<div class="ulist">
<ul>
<li>
<p><a href="#oracle-pass-through-database-history-properties-for-configuring-producer-and-consumer-clients">Pass-through database schema history properties</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#debezium-oracle-connector-pass-through-database-driver-configuration-properties">Pass-through database driver properties</a> that control the behavior of the database driver.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="required-debezium-oracle-connector-configuration-properties"><a class="anchor" href="#required-debezium-oracle-connector-configuration-properties"></a>Required Debezium Oracle connector configuration properties</h3>
<div class="paragraph">
<p>The following configuration properties are <em>required</em> unless a default value is available.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 25%;">
<col style="width: 45%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Property</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Description</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-name"></a><a href="#oracle-property-name"><code>name</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Unique name for the connector. Attempting to register again with the same name will fail. (This property is required by all Kafka Connect connectors.)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-connector-class"></a><a href="#oracle-property-connector-class"><code>connector.class</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Java class for the connector. Always use a value of <code>io.debezium.connector.oracle.OracleConnector</code> for the Oracle connector.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-converters"></a><a href="#oracle-property-converters"><code>converters</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enumerates a comma-separated list of the symbolic names of the <a href="../development/converters.html#custom-converters" class="xref page">custom converter</a> instances that the connector can use.<br>
For example, <code>boolean</code>.<br>
This property is required to enable the connector to use a custom converter.</p>
</div>
<div class="paragraph">
<p>For each converter that you configure for a connector, you must also add a <code>.type</code> property, which specifies the fully-qualified name of the class that implements the converter interface.
The <code>.type</code> property uses the following format:<br></p>
</div>
<div class="paragraph">
<p><code><em>&lt;converterSymbolicName&gt;</em>.type</code><br></p>
</div>
<div class="paragraph">
<p>For example,<br></p>
</div>
<div class="literalblock">
<div class="content">
<pre>boolean.type: io.debezium.connector.oracle.converters.NumberOneToBooleanConverter</pre>
</div>
</div>
<div class="paragraph">
<p>If you want to further control the behavior of a configured converter, you can add one or more configuration parameters to pass values to the converter.
To associate any additional configuration parameters with a converter, prefix the parameter names with the symbolic name of the converter.<br>
<br>
For example, to define a <code>selector</code> parameter that specifies the subset of columns that the <code>boolean</code> converter processes, add the following property:<br></p>
</div>
<div class="literalblock">
<div class="content">
<pre>boolean.selector: .*MYTABLE.FLAG,.*.IS_ARCHIVED</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-tasks-max"></a><a href="#oracle-property-tasks-max"><code>tasks.max</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum number of tasks to create for this connector. The Oracle connector always uses a single task and therefore does not use this value, so the default is always acceptable.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-hostname"></a><a href="#oracle-property-database-hostname"><code>database.hostname</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>IP address or hostname of the Oracle database server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-port"></a><a href="#oracle-property-database-port"><code>database.port</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Integer port number of the Oracle database server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-user"></a><a href="#oracle-property-database-user"><code>database.user</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the Oracle user account that the connector uses to connect to the Oracle database server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-password"></a><a href="#oracle-property-database-password"><code>database.password</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Password to use when connecting to the Oracle database server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-dbname"></a><a href="#oracle-property-database-dbname"><code>database.dbname</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the database to connect to.
In a container database environment, specify the name of the root container database (CDB), not the name of an included pluggable database (PDB).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-url"></a><a href="#oracle-property-database-url"><code>database.url</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the raw database JDBC URL. Use this property to provide flexibility in defining that database connection.
Valid values include raw TNS names and RAC connection strings.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-pdb-name"></a><a href="#oracle-property-database-pdb-name"><code>database.pdb.name</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the Oracle pluggable database to connect to. Use this property with container database (CDB) installations only.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-topic-prefix"></a><a href="#oracle-property-topic-prefix"><code>topic.prefix</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Topic prefix that provides a namespace for the Oracle database server from which the connector captures changes.
The value that you set is used as a prefix for all Kafka topic names that the connector emits.
Specify a topic prefix that is unique among all connectors in your Debezium environment.
The following characters are valid: alphanumeric characters, hyphens, dots, and underscores.<br>
<br></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not change the value of this property.
If you change the name value, after a restart, instead of continuing to emit events to the original topics, the connector emits subsequent events to topics whose names are based on the new value.
The connector is also unable to recover its database schema history topic.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-connection-adapter"></a><a href="#oracle-property-database-connection-adapter"><code>database.connection.adapter</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>logminer</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The adapter implementation that the connector uses when it streams database changes.
You can set the following values:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>logminer</code> (default)</dt>
<dd>
<p>The connector uses the native Oracle LogMiner API.</p>
</dd>
<dt class="hdlist1"><code>olr</code></dt>
<dd>
<p>The connector uses OpenLogReplicator.</p>
</dd>
<dt class="hdlist1"><code>xstream</code></dt>
<dd>
<p>The connector uses the Oracle XStreams API.</p>
</dd>
</dl>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-mode"></a><a href="#oracle-property-snapshot-mode"><code>snapshot.mode</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>initial</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the mode that the connector uses to take snapshots of a captured table.
You can set the following values:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>always</code></dt>
<dd>
<p>The snapshot includes the structure and data of the captured tables.
Specify this value to populate topics with a complete representation of the data from the captured tables on each connector start.</p>
</dd>
<dt class="hdlist1"><code>initial</code></dt>
<dd>
<p>The snapshot includes the structure and data of the captured tables.
Specify this value to populate topics with a complete representation of the data from the captured tables.
If the snapshot completes successfully, upon next connector start snapshot is not executed again.</p>
</dd>
<dt class="hdlist1"><code>initial_only</code></dt>
<dd>
<p>The snapshot includes the structure and data of the captured tables.
The connector performs an initial snapshot and then stops, without processing any subsequent changes.</p>
</dd>
<dt class="hdlist1"><code>schema_only</code></dt>
<dd>
<p>Deprecated, see <code>no-data</code></p>
</dd>
<dt class="hdlist1"><code>no_data</code></dt>
<dd>
<p>The snapshot includes only the structure of captured tables.
Specify this value if you want the connector to capture data only for changes that occur after the snapshot.</p>
</dd>
<dt class="hdlist1"><code>schema_only_recovery</code></dt>
<dd>
<p>Deprecated, see <code>recovery</code>.</p>
</dd>
<dt class="hdlist1"><code>recovery</code></dt>
<dd>
<p>This is a recovery setting for a connector that has already been capturing changes.
When you restart the connector, this setting enables recovery of a corrupted or lost database schema history topic.
You might set it periodically to "clean up" a database schema history topic that has been growing unexpectedly.
Database schema history topics require infinite retention.
Note this mode is only safe to be used when it is guaranteed that no schema changes happened since the point in time the connector was shut down before and the point in time the snapshot is taken.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>After the snapshot is complete, the connector continues to read change events from the database&#8217;s redo logs except when <code>snapshot.mode</code> is configured as <code>initial_only</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>when_needed</code></dt>
<dd>
<p>After the connector starts, it performs a snapshot only if it detects one of the following circumstances:</p>
<div class="ulist">
<ul>
<li>
<p>It cannot detect any topic offsets.</p>
</li>
<li>
<p>A previously recorded offset specifies a log position that is not available on the server.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>configuration_based</code></dt>
<dd>
<p>With this option, you control snapshot behavior through a set of connector properties that have the prefix 'snapshot.mode.configuration.based'.</p>
</dd>
<dt class="hdlist1"><code>custom</code></dt>
<dd>
<p>The connector performs a snapshot according to the implementation specified by the <a href="#postgresql-property-snapshot-mode-custom-name"><code>snapshot.mode.custom.name</code></a> property, which defines a custom implementation of the <code>io.debezium.spi.snapshot.Snapshotter</code> interface.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For more information, see the <a href="#oracle-connector-snapshot-mode-options">table of <code>snapshot.mode</code> options</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-mode-configuration-based-snapshot-data"></a><a href="#oracle-property-configuration-based-snapshot-data"><code>snapshot.mode.configuration.based.snapshot.data</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>false</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If the <code>snapshot.mode</code> is set to <code>configuration_based</code>, set this property to specify whether the connector includes table data when it performs a snapshot.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-mode-configuration-based-snapshot-schema"></a><a href="#oracle-property-configuration-based-snapshot-schema"><code>snapshot.mode.configuration.based.snapshot.schema</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>false</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If the <code>snapshot.mode</code> is set to <code>configuration_based</code>, set this property to specify whether the connector includes the table schema when it performs a snapshot.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-mode-configuration-based-start-stream"></a><a href="#oracle-property-configuration-based-start-stream"><code>snapshot.mode.configuration.based.start.stream</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>false</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If the <code>snapshot.mode</code> is set to <code>configuration_based</code>, set this property to specify whether the connector begins to stream change events after a snapshot completes.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-mode-configuration-based-snapshot-on-schema-error"></a><a href="#oracle-property-configuration-based-snapshot-on-schema-error"><code>snapshot.mode.configuration.based.snapshot.on.schema.error</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>false</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If the <code>snapshot.mode</code> is set to <code>configuration_based</code>, set this property to specify whether the connector includes table schema in a snapshot if the schema history topic is not available.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-mode-configuration-based-snapshot-on-data-error"></a><a href="#oracle-property-configuration-based-snapshot-on-data-error"><code>snapshot.mode.configuration.based.snapshot.on.data.error</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>false</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If the <code>snapshot.mode</code> is set to <code>configuration_based</code>, this property specifies whether the connector attempts to snapshot table data if it does not find the last committed offset in the transaction log.<br>
Set the value to <code>true</code> to instruct the connector to perform a new snapshot.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-mode-custom-name"></a><a href="#oracle-property-snapshot-mode-custom-name"><code>snapshot.mode.custom.name</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If <code>snapshot.mode</code> is set to <code>custom</code>, use this setting to specify the name of the custom implementation that is provided in the <code>name()</code> method that is defined in the 'io.debezium.spi.snapshot.Snapshotter' interface.
After a connector restart, Debezium calls the specified custom implementation to determine whether to perform a snapshot.
For more information, see <a href="#connector-custom-snapshot">custom snapshotter SPI</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-locking-mode"></a><a href="#oracle-property-snapshot-locking-mode"><code>snapshot.locking.mode</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>shared</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls whether and for how long the connector holds a table lock. Table locks prevent certain types of changes table operations from occurring while the connector performs a snapshot.
You can set the following values:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>shared</code></dt>
<dd>
<p>Enables concurrent access to the table, but prevents any session from acquiring an exclusive table lock.
The connector acquires a <code>ROW SHARE</code> level lock while it captures table schema.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Prevents the connector from acquiring any table locks during the snapshot.
Use this setting only if no schema changes might occur during the creation of the snapshot.</p>
</dd>
<dt class="hdlist1"><code>custom</code></dt>
<dd>
<p>The connector performs a snapshot according to the implementation specified by the <a href="#oracle-property-snapshot-locking-mode-custom-name"><code>snapshot.locking.mode.custom.name</code></a> property, which is a custom implementation of the <code>io.debezium.spi.snapshot.SnapshotLock</code> interface.</p>
</dd>
</dl>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-locking-mode-custom-name"></a><a href="#oracle-property-snapshot-locking-mode-custom-name"><code>snapshot.locking.mode.custom.name</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When <code>snapshot.locking.mode</code> is set as <code>custom</code>, use this setting to specify the name of the custom implementation provided in the <code>name()</code> method that is defined by the 'io.debezium.spi.snapshot.SnapshotLock' interface.
For more information, see <a href="#connector-custom-snapshot">custom snapshotter SPI</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-query-mode"></a><a href="#oracle-property-snapshot-query-mode"><code>snapshot.query.mode</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>select_all</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies how the connector queries data while performing a snapshot.<br>
Set one of the following options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>select_all</code></dt>
<dd>
<p>The connector performs a <code>select all</code> query by default, optionally adjusting the columns selected based on the column include and exclude list configurations.</p>
</dd>
<dt class="hdlist1"><code>custom</code></dt>
<dd>
<p>The connector performs a snapshot query according to the implementation specified by the <a href="#oracle-property-snapshot-snapshot-query-mode-custom-name"><code>snapshot.query.mode.custom.name</code></a> property, which defines a custom implementation of the <code>io.debezium.spi.snapshot.SnapshotQuery</code> interface.<br></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This setting enables you to manage snapshot content in a more flexible manner compared to using the <a href="#oracle-property-snapshot-select-statement-overrides"><code>snapshot.select.statement.overrides</code></a> property.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-snapshot-query-mode-custom-name"></a><a href="#oracle-property-snapshot-query-mode-custom-name"><code>snapshot.query.mode.custom.name</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When <a href="#oracle-property-snapshot-query-mode"><code>snapshot.query.mode</code></a> is set to <code>custom</code>, use this setting to specify the name of the custom implementation provided in the <code>name()</code> method that is defined by the 'io.debezium.spi.snapshot.SnapshotQuery' interface.
For more information, see <a href="#connector-custom-snapshot">custom snapshotter SPI</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-include-collection-list"></a><a href="#oracle-property-snapshot-include-collection-list"><code>snapshot.include.collection.list</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>All tables specified in the connector&#8217;s <a href="#oracle-property-table-include-list"><code>table.include.list</code></a> property.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional, comma-separated list of regular expressions that match the fully-qualified names (<code><em>&lt;databaseName&gt;.</em><em>&lt;schemaName&gt;</em>.<em>&lt;tableName&gt;</em></code>) of the tables to include in a snapshot.</p>
</div>
<div class="paragraph">
<p>In a multitenant container database (CDB) environment, the regular expression must include the <a href="#oracle-property-database-pdb-name">pluggable database (PDB) name</a>, using the format <code><em>&lt;pdbName&gt;</em>.<em>&lt;schemaName&gt;</em>.<em>&lt;tableName&gt;</em></code>.</p>
</div>
<div class="paragraph">
<p>To match the name of a table, Debezium applies the regular expression that you specify as an <em>anchored</em> regular expression.
That is, the specified expression is matched against the entire name string of the table; it does not match substrings that might be present in a table name.<br>
In environments that use the LogMiner implementation, you must use POSIX regular expressions only.</p>
</div>
<div class="paragraph">
<p>A snapshot can only include tables that are named in the connector&#8217;s <a href="#oracle-property-table-include-list"><code>table.include.list</code></a> property.</p>
</div>
<div class="paragraph">
<p>This property takes effect only if the connector&#8217;s <a href="#oracle-property-snapshot-mode"><code>snapshot.mode</code></a> property is set to a value other than <code>never</code>.<br>
This property does not affect the behavior of incremental snapshots.<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-select-statement-overrides"></a><a href="#oracle-property-snapshot-select-statement-overrides"><code>snapshot.select.statement.overrides</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the table rows to include in a snapshot.
Use the property if you want a snapshot to include only a subset of the rows in a table.
This property affects snapshots only.
It does not apply to events that the connector reads from the log.</p>
</div>
<div class="paragraph">
<p>The property contains a comma-separated list of fully-qualified table names in the form <code><em>&lt;schemaName&gt;.&lt;tableName&gt;</em></code>. For example,<br>
<br>
<code>"snapshot.select.statement.overrides": "inventory.products,customers.orders"</code><br>
<br>
For each table in the list, add a further configuration property that specifies the <code>SELECT</code> statement for the connector to run on the table when it takes a snapshot.
The specified <code>SELECT</code> statement determines the subset of table rows to include in the snapshot.
Use the following format to specify the name of this <code>SELECT</code> statement property:<br>
<br>
<code>snapshot.select.statement.overrides.<em>&lt;schemaName&gt;</em>.<em>&lt;tableName&gt;</em></code><br>
<br>
For example,
<code>snapshot.select.statement.overrides.customers.orders</code><br>
<br>
Example:</p>
</div>
<div class="paragraph">
<p>From a <code>customers.orders</code> table that includes the soft-delete column, <code>delete_flag</code>, add the following properties if you want a snapshot to include only those records that are not soft-deleted:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"snapshot.select.statement.overrides": "customer.orders",
"snapshot.select.statement.overrides.customer.orders": "SELECT * FROM [customers].[orders] WHERE delete_flag = 0 ORDER BY id DESC"</pre>
</div>
</div>
<div class="paragraph">
<p>In the resulting snapshot, the connector includes only the records for which <code>delete_flag = 0</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-schema-include-list"></a><a href="#oracle-property-schema-include-list"><code>schema.include.list</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional, comma-separated list of regular expressions that match names of schemas for which you <strong>want</strong> to capture changes.
In environments that use the LogMiner implementation, you must use POSIX regular expressions only.
Any schema name not included in <code>schema.include.list</code> is excluded from having its changes captured.
By default, all non-system schemas have their changes captured.<br></p>
</div>
<div class="paragraph">
<p>To match the name of a schema, Debezium applies the regular expression that you specify as an <em>anchored</em> regular expression.
That is, the specified expression is matched against the entire name string of the schema; it does not match substrings that might be present in a schema name.<br>
If you include this property in the configuration, do not also set the <code>schema.exclude.list</code> property.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-include-schema-comments"></a><a href="#oracle-property-include-schema-comments"><code>include.schema.comments</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean value that specifies whether the connector should parse and publish table and column comments on metadata objects. Enabling this option will bring the implications on memory usage. The number and size of logical schema objects is what largely impacts how much memory is consumed by the Debezium connectors, and adding potentially large string data to each of them can potentially be quite expensive.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-schema-exclude-list"></a><a href="#oracle-property-schema-exclude-list"><code>schema.exclude.list</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional, comma-separated list of regular expressions that match names of schemas for which you <strong>do not</strong> want to capture changes.
In environments that use the LogMiner implementation, you must use POSIX regular expressions only.<br>
Any schema whose name is not included in <code>schema.exclude.list</code> has its changes captured, with the exception of system schemas.<br></p>
</div>
<div class="paragraph">
<p>To match the name of a schema, Debezium applies the regular expression that you specify as an <em>anchored</em> regular expression.
That is, the specified expression is matched against the entire name string of the schema; it does not match substrings that might be present in a schema name.<br>
If you include this property in the configuration, do not set the`schema.include.list` property.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-table-include-list"></a><a href="#oracle-property-table-include-list"><code>table.include.list</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional comma-separated list of regular expressions that match fully-qualified table identifiers for tables to be captured.
If you use the LogMiner implementation, use only POSIX regular expressions with this property.
When this property is set, the connector captures changes only from the specified tables.
Each table identifier uses the following format:<br>
<br>
<code><em>&lt;schema_name&gt;.&lt;table_name&gt;</em></code><br>
<br>
By default, the connector monitors every non-system table in each captured database.<br></p>
</div>
<div class="paragraph">
<p>To match the name of a table, Debezium applies the regular expression that you specify as an <em>anchored</em> regular expression.
That is, the specified expression is matched against the entire name string of the table; it does not match substrings that might be present in a table name.<br>
If you include this property in the configuration, do not also set the <code>table.exclude.list</code> property.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-table-exclude-list"></a><a href="#oracle-property-table-exclude-list"><code>table.exclude.list</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional comma-separated list of regular expressions that match fully-qualified table identifiers for tables to be excluded from monitoring.
If you use the LogMiner implementation, use only POSIX regular expressions with this property.
The connector captures change events from any table that is not specified in the exclude list.
Specify the identifier for each table using the following format:<br>
<br>
<code><em>&lt;schemaName&gt;.&lt;tableName&gt;</em></code>.</p>
</div>
<div class="paragraph">
<p>To match the name of a table, Debezium applies the regular expression that you specify as an <em>anchored</em> regular expression.
That is, the specified expression is matched against the entire name string of the table; it does not match substrings that might be present in a table name.<br>
If you include this property in the configuration, do not also set the <code>table.include.list</code> property.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-column-include-list"></a><a href="#oracle-property-column-include-list"><code>column.include.list</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional, comma-separated list of regular expressions that match the fully-qualified names of columns that want to include in the change event message values.
In environments that use the LogMiner implementation, you must use POSIX regular expressions only.
Fully-qualified names for columns use the following format:<br>
<br>
<code><em>&lt;Schema_name&gt;.&lt;table_name&gt;.&lt;column_name&gt;</em></code><br>
<br>
The primary key column is always included in an event&#8217;s key, even if you do not use this property to explicitly include its value.<br></p>
</div>
<div class="paragraph">
<p>To match the name of a column, Debezium applies the regular expression that you specify as an <em>anchored</em> regular expression.
That is, the specified expression is matched against the entire name string of the column it does not match substrings that might be present in a column name.<br>
If you include this property in the configuration, do not also set the <code>column.exclude.list</code> property.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-column-exclude-list"></a><a href="#oracle-property-column-exclude-list"><code>column.exclude.list</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional, comma-separated list of regular expressions that match the fully-qualified names of columns that you want to exclude from change event message values.
In environments that use the LogMiner implementation, you must use POSIX regular expressions only.
Fully-qualified column names use the following format:<br>
<br>
<code><em>&lt;schema_name&gt;.&lt;table_name&gt;.&lt;column_name&gt;</em></code><br>
<br>
The primary key column is always included in an event&#8217;s key, even if you use this property to explicitly exclude its value.<br></p>
</div>
<div class="paragraph">
<p>To match the name of a column, Debezium applies the regular expression that you specify as an <em>anchored</em> regular expression.
That is, the specified expression is matched against the entire name string of the column it does not match substrings that might be present in a column name.<br>
If you include this property in the configuration, do not set the <code>column.include.list</code> property.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-skip-messages-without-change"></a><a href="#oracle-property-skip-messages-without-change"><code>skip.messages.without.change</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether to skip publishing messages when there is no change in included columns. This would essentially filter messages if there is no change in columns included as per <code>column.include.list</code> or <code>column.exclude.list</code> properties.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-column-mask-hash"></a><a href="#oracle-property-column-mask-hash"><code>column.mask.hash.<em>hashAlgorithm</em>.with.salt.<em>salt</em></code></a>;
<a id="oracle-property-column-mask-hash-v2"></a><a href="#oracle-property-column-mask-hash-v2"><code>column.mask.hash.v2.<em>hashAlgorithm</em>.with.salt.<em>salt</em></code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional, comma-separated list of regular expressions that match the fully-qualified names of character-based columns.
Fully-qualified names for columns are of the form <code><em>&lt;schemaName&gt;</em>.<em>&lt;tableName&gt;</em>.<em>&lt;columnName&gt;</em></code>.<br>
To match the name of a column Debezium applies the regular expression that you specify as an <em>anchored</em> regular expression.
That is, the specified expression is matched against the entire name string of the column; the expression does not match substrings that might be present in a column name.<br>
In the resulting change event record, the values for the specified columns are replaced with pseudonyms.<br></p>
</div>
<div class="paragraph">
<p>A pseudonym consists of the hashed value that results from applying the specified <em>hashAlgorithm</em> and <em>salt</em>.
Based on the hash function that is used, referential integrity is maintained, while column values are replaced with pseudonyms.
Supported hash functions are described in the <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/security/StandardNames.html#MessageDigest">MessageDigest section</a> of the Java Cryptography Architecture Standard Algorithm Name Documentation.<br>
<br>
In the following example, <code>CzQMA0cB5K</code> is a randomly selected salt.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre>column.mask.hash.SHA-256.with.salt.CzQMA0cB5K = inventory.orders.customerName, inventory.shipment.customerName</pre>
</div>
</div>
<div class="paragraph">
<p>If necessary, the pseudonym is automatically shortened to the length of the column.
The connector configuration can include multiple properties that specify different hash algorithms and salts.<br>
<br>
Depending on the <em>hashAlgorithm</em> used, the <em>salt</em> selected, and the actual data set, the resulting data set might not be completely masked.<br>
<br>
Hashing strategy version 2 should be used to ensure fidelity if the value is being hashed in different places or systems.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-binary-handling-mode"></a><a href="#oracle-property-binary-handling-mode"><code>binary.handling.mode</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>bytes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies how binary (<code>blob</code>) columns should be represented in change events, including: <code>bytes</code> represents binary data as byte array (default), <code>base64</code> represents binary data as base64-encoded String, <code>base64-url-safe</code> represents binary data as base64-url-safe-encoded String, <code>hex</code> represents binary data as hex-encoded (base16) String</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-schema-name-adjustment-mode"></a><a href="#oracle-property-schema-name-adjustment-mode"><code>schema.name.adjustment.mode</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>none</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies how schema names should be adjusted for compatibility with the message converter used by the connector. Possible settings: <br></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>none</code> does not apply any adjustment.<br></p>
</li>
<li>
<p><code>avro</code> replaces the characters that cannot be used in the Avro type name with underscore.<br></p>
</li>
<li>
<p><code>avro_unicode</code> replaces the underscore or characters that cannot be used in the Avro type name with corresponding unicode like _uxxxx. Note: _ is an escape sequence like backslash in Java<br></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-field-name-adjustment-mode"></a><a href="#oracle-property-field-name-adjustment-mode"><code>field.name.adjustment.mode</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>none</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies how field names should be adjusted for compatibility with the message converter used by the connector. Possible settings: <br></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>none</code> does not apply any adjustment.<br></p>
</li>
<li>
<p><code>avro</code> replaces the characters that cannot be used in the Avro type name with underscore.<br></p>
</li>
<li>
<p><code>avro_unicode</code> replaces the underscore or characters that cannot be used in the Avro type name with corresponding unicode like _uxxxx. Note: _ is an escape sequence like backslash in Java<br></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="../configuration/avro.html#avro-naming" class="xref page">Avro naming</a> for more details.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-decimal-handling-mode"></a><a href="#oracle-property-decimal-handling-mode"><code>decimal.handling.mode</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>precise</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies how the connector should handle floating point values for <code>NUMBER</code>, <code>DECIMAL</code> and <code>NUMERIC</code> columns.
You can set one of the following options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>precise</code> (default)</dt>
<dd>
<p>Represents values precisely by using <code>java.math.BigDecimal</code> values represented in change events in a binary form.</p>
</dd>
<dt class="hdlist1"><code>double</code></dt>
<dd>
<p>Represents values by using <code>double</code> values.
Using <code>double</code> values is easier, but can result in a loss of precision.</p>
</dd>
<dt class="hdlist1"><code>string</code></dt>
<dd>
<p>Encodes values as formatted strings.
Using the <code>string</code> option is easier to consume, but results in a loss of semantic information about the real type.
For more information, see <a href="#oracle-numeric-types">Numeric types</a>.</p>
</dd>
</dl>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-interval-handling-mode"></a><a href="#oracle-property-interval-handling-mode"><code>interval.handling.mode</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>numeric</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies how the connector should handle values for <code>interval</code> columns:<br>
<br>
<code>numeric</code> represents intervals using approximate number of microseconds.<br>
<br>
<code>string</code> represents intervals exactly by using the string pattern representation <code>P&lt;years&gt;Y&lt;months&gt;M&lt;days&gt;DT&lt;hours&gt;H&lt;minutes&gt;M&lt;seconds&gt;S</code>. For example: <code>P1Y2M3DT4H5M6.78S</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-event-processing-failure-handling-mode"></a><a href="#oracle-property-event-processing-failure-handling-mode"><code>event.processing.failure.handling.mode</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>fail</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies how the connector should react to exceptions during processing of events.
You can set one of the following options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>fail</code></dt>
<dd>
<p>Propagates the exception (indicating the offset of the problematic event), causing the connector to stop.</p>
</dd>
<dt class="hdlist1"><code>warn</code></dt>
<dd>
<p>Causes the problematic event to be skipped. The offset of the problematic event is then logged.</p>
</dd>
<dt class="hdlist1"><code>skip</code></dt>
<dd>
<p>Causes the problematic event to be skipped.</p>
</dd>
</dl>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-max-batch-size"></a><a href="#oracle-property-max-batch-size"><code>max.batch.size</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>2048</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A positive integer value that specifies the maximum size of each batch of events to process during each iteration of this connector.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-max-queue-size"></a><a href="#oracle-property-max-queue-size"><code>max.queue.size</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>8192</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Positive integer value that specifies the maximum number of records that the blocking queue can hold.
When Debezium reads events streamed from the database, it places the events in the blocking queue before it writes them to Kafka.
The blocking queue can provide backpressure for reading change events from the database
in cases where the connector ingests messages faster than it can write them to Kafka, or when Kafka becomes unavailable.
Events that are held in the queue are disregarded when the connector periodically records offsets.
Always set the value of <code>max.queue.size</code> to be larger than the value of <a href="#oracle-property-max-batch-size"><code>max.batch.size</code></a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-max-queue-size-in-bytes"></a><a href="#oracle-property-max-queue-size-in-bytes"><code>max.queue.size.in.bytes</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code> (disabled)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A long integer value that specifies the maximum volume of the blocking queue in bytes.
By default, volume limits are not specified for the blocking queue.
To specify the number of bytes that the queue can consume, set this property to a positive long value.<br>
If <a href="#oracle-property-max-queue-size"><code>max.queue.size</code></a> is also set, writing to the queue is blocked when the size of the queue reaches the limit specified by either property.
For example, if you set <code>max.queue.size=1000</code>, and <code>max.queue.size.in.bytes=5000</code>, writing to the queue is blocked after the queue contains 1000 records, or after the volume of the records in the queue reaches 5000 bytes.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-poll-interval-ms"></a><a href="#oracle-property-poll-interval-ms"><code>poll.interval.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>500</code> (0.5 second)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Positive integer value that specifies the number of milliseconds the connector should wait during each iteration for new change events to appear.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-tombstones-on-delete"></a><a href="#oracle-property-tombstones-on-delete"><code>tombstones.on.delete</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls whether a <em>delete</em> event is followed by a tombstone event.
The following values are possible:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>true</code></dt>
<dd>
<p>For each delete operation, the connector emits a <em>delete</em> event and a subsequent tombstone event.</p>
</dd>
<dt class="hdlist1"><code>false</code></dt>
<dd>
<p>For each delete operation, the connector emits only a <em>delete</em> event.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>After a source record is deleted, a tombstone event (the default behavior) enables Kafka to completely delete all events that share the key of the deleted row in topics that have <a href="https://kafka.apache.org/documentation/#compaction">log compaction</a> enabled.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-message-key-columns"></a><a href="#oracle-property-message-key-columns"><code>message.key.columns</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A list of expressions that specify the columns that the connector uses to form custom message keys for change event records that it publishes to the Kafka topics for specified tables.</p>
</div>
<div class="paragraph">
<p>By default, Debezium uses the primary key column of a table as the message key for records that it emits.
In place of the default, or to specify a key for tables that lack a primary key, you can configure custom message keys based on one or more columns.<br>
To establish a custom message key for a table, list the table, followed by the columns to use as the message key.
Each list entry takes the following format:<br>
<br>
   <code><em>&lt;fullyQualifiedTableName&gt;</em></code>:<code><em>&lt;keyColumn&gt;</em></code>,<code><em>&lt;keyColumn&gt;</em></code><br>
<br>
To base a table key on multiple column names, insert commas between the column names.<br>
Each fully-qualified table name is a regular expression in the following format:<br>
<br>
<code><em>&lt;schemaName&gt;</em>.<em>&lt;tableName&gt;</em></code><br>
<br>
The property can include entries for multiple tables.
Use a semicolon to separate table entries in the list.<br>
 The following example sets the message key for the tables <code>inventory.customers</code> and <code>purchase.orders</code>:<br>
<br>
<code>inventory.customers:pk1,pk2;(.*).purchaseorders:pk3,pk4</code><br>
<br>
For the table <code>inventory.customer</code>, the columns <code>pk1</code> and <code>pk2</code> are specified as the message key.
For the <code>purchaseorders</code> tables in any schema, the columns <code>pk3</code> and <code>pk4</code> server as the message key.<br>
There is no limit to the number of columns that you use to create custom message keys.
However, it&#8217;s best to use the minimum number that are required to specify a unique key.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-column-truncate-to-length-chars"></a><a href="#oracle-property-column-truncate-to-length-chars"><code>column.truncate.to.<em>length</em>.chars</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional, comma-separated list of regular expressions that match the fully-qualified names of character-based columns.
Set this property if you want the connector to mask the values for a set of columns, for example, if they contain sensitive data.
Set <code><em>length</em></code> to a positive integer to replace data in the specified columns with the number of asterisk (<code>*</code>) characters specified by the <em>length</em> in the property name.
Set <em>length</em> to <code>0</code> (zero) to replace data in the specified columns with an empty string.</p>
</div>
<div class="paragraph">
<p>The fully-qualified name of a column observes the following format: <code><em>&lt;schemaName&gt;</em>.<em>&lt;tableName&gt;</em>.<em>&lt;columnName&gt;</em></code>.
To match the name of a column, Debezium applies the regular expression that you specify as an <em>anchored</em> regular expression.
That is, the specified expression is matched against the entire name string of the column; the expression does not match substrings that might be present in a column name.</p>
</div>
<div class="paragraph">
<p>You can specify multiple properties with different lengths in a single configuration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-column-mask-with-length-chars"></a><a href="#oracle-property-column-mask-with-length-chars"><code>column.mask.with.<em>length</em>.chars</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional comma-separated list of regular expressions for masking column names in change event messages by replacing characters with asterisks (<code>*</code>).<br>
Specify the number of characters to replace in the name of the property, for example, <code>column.mask.with.8.chars</code>.<br>
Specify length as a positive integer or zero.
Then add regular expressions to the list for each character-based column name where you want to apply a mask.<br>
Use the following format to specify fully-qualified column names: <code><em>&lt;schemaName&gt;</em>.<em>&lt;tableName&gt;</em>.<em>&lt;columnName&gt;</em></code>.<br>
<br>
The connector configuration can include multiple properties that specify different lengths.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-column-propagate-source-type"></a><a href="#oracle-property-column-propagate-source-type"><code>column.propagate.source.type</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional, comma-separated list of regular expressions that match the fully-qualified names of columns for which you want the connector to emit extra parameters that represent column metadata.
When this property is set, the connector adds the following fields to the schema of event records:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>__debezium.source.column.type</code><br></p>
</li>
<li>
<p><code>__debezium.source.column.length</code><br></p>
</li>
<li>
<p><code>__debezium.source.column.scale</code><br></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These parameters propagate a column&#8217;s original type name and length (for variable-width types), respectively.<br>
Enabling the connector to emit this extra data can assist in properly sizing specific numeric or character-based columns in sink databases.</p>
</div>
<div class="paragraph">
<p>The fully-qualified name of a column observes one of the following formats: <code><em>&lt;tableName&gt;</em>.<em>&lt;columnName&gt;</em></code>, or <code><em>&lt;schemaName&gt;</em>.<em>&lt;tableName&gt;</em>.<em>&lt;columnName&gt;</em></code>.<br>
To match the name of a column, Debezium applies the regular expression that you specify as an <em>anchored</em> regular expression.
That is, the specified expression is matched against the entire name string of the column; the expression does not match substrings that might be present in a column name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-datatype-propagate-source-type"></a><a href="#oracle-property-datatype-propagate-source-type"><code>datatype.propagate.source.type</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional, comma-separated list of regular expressions that specify the fully-qualified names of data types that are defined for columns in a database.
When this property is set, for columns with matching data types, the connector emits event records that include the following extra fields in their schema:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>__debezium.source.column.type</code><br></p>
</li>
<li>
<p><code>__debezium.source.column.length</code><br></p>
</li>
<li>
<p><code>__debezium.source.column.scale</code><br></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These parameters propagate a column&#8217;s original type name and length (for variable-width types), respectively.<br>
Enabling the connector to emit this extra data can assist in properly sizing specific numeric or character-based columns in sink databases.</p>
</div>
<div class="paragraph">
<p>The fully-qualified name of a column observes one of the following formats: <code><em>&lt;tableName&gt;</em>.<em>&lt;typeName&gt;</em></code>, or <code><em>&lt;schemaName&gt;</em>.<em>&lt;tableName&gt;</em>.<em>&lt;typeName&gt;</em></code>. <br>
To match the name of a data type, Debezium applies the regular expression that you specify as an <em>anchored</em> regular expression.
That is, the specified expression is matched against the entire name string of the data type; the expression does not match substrings that might be present in a type name.</p>
</div>
<div class="paragraph">
<p>For the list of Oracle-specific data type names, see the <a href="#oracle-data-type-mappings">Oracle data type mappings</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-heartbeat-interval-ms"></a><a href="#oracle-property-heartbeat-interval-ms"><code>heartbeat.interval.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies, in milliseconds, how frequently the connector sends messages to a heartbeat topic.<br>
Use this property to determine whether the connector continues to receive change events from the source database.<br>
It can also be useful to set the property in situations where no change events occur in captured tables for an extended period.<br>
In such a case, although the connector continues to read the redo log, it emits no change event messages, so that the offset in the Kafka topic remains unchanged.
Because the connector does not flush the latest system change number (SCN) that it read from the database, the database might retain the redo log files for longer than necessary.
If the connector restarts, the extended retention period could result in the connector redundantly sending some change events.<br>
The default value of <code>0</code> prevents the connector from sending any heartbeat messages.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-heartbeat-action-query"></a><a href="#oracle-property-heartbeat-action-query"><code>heartbeat.action.query</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies a query that the connector executes on the source database when the connector sends a heartbeat message.<br>
<br>
For example:<br>
<br>
<code>INSERT INTO test_heartbeat_table (text) VALUES ('test_heartbeat')</code><br>
<br>
The connector runs the query after it emits a <a href="#oracle-property-heartbeat-interval-ms">heartbeat message</a>.</p>
</div>
<div class="paragraph">
<p>Set this property and create a heartbeat table to receive the heartbeat messages to resolve situations in which <a href="#low-change-frequency-offset-management">Debezium fails to synchronize offsets on low-traffic databases that are on the same host as a high-traffic database</a>.
After the connector inserts records into the configured table, it is able to receive changes from the low-traffic database and acknowledge SCN changes in the database, so that offsets can be synchronized with the broker.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-delay-ms"></a><a href="#oracle-property-snapshot-delay-ms"><code>snapshot.delay.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies an interval in milliseconds that the connector waits after it starts before it takes a snapshot.<br>
Use this property to prevent snapshot interruptions when you start multiple connectors in a cluster, which might cause re-balancing of connectors.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-streaming-delay-ms"></a><a href="#oracle-property-streaming-delay-ms"><code>streaming.delay.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>0</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the time, in milliseconds, that the connector delays the start of the streaming process after it completes a snapshot.
Setting a delay interval helps to prevent the connector from restarting snapshots in the event that a failure occurs immediately after the snapshot completes, but before the streaming process begins.
Set a delay value that is higher than the value of the <a href="https://kafka.apache.org/documentation/#connectconfigs_offset.flush.interval.ms"><code>offset.flush.interval.ms</code></a> property that is set for the Kafka Connect worker.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-fetch-size"></a><a href="#oracle-property-snapshot-fetch-size"><code>snapshot.fetch.size</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>10000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the maximum number of rows that should be read in one go from each table while taking a snapshot.
The connector reads table contents in multiple batches of the specified size.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-query-fetch-size"></a><a href="#oracle-property-query-fetch-size"><code>query.fetch.size</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>10000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the number of rows that will be fetched for each database round-trip of a given query.
Using a value of <code>0</code> will use the JDBC driver&#8217;s default fetch size.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-provide-transaction-metadata"></a><a href="#oracle-property-provide-transaction-metadata"><code>provide.transaction.metadata</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set the property to <code>true</code> if you want Debezium to generate events with transaction boundaries and enriches data events envelope with transaction metadata.</p>
</div>
<div class="paragraph">
<p>See <a href="#oracle-transaction-metadata">Transaction Metadata</a> for additional details.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-strategy"></a><a href="#oracle-property-log-mining-strategy"><code>log.mining.strategy</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>redo_log_catalog</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the mining strategy that controls how Oracle LogMiner builds and uses a given data dictionary for resolving table and column ids to names.<br>
<br>
<code>redo_log_catalog</code>:: Writes the data dictionary to the online redo logs causing more archive logs to be generated over time.
This also enables tracking DDL changes against captured tables, so if the schema changes frequently this is the ideal choice.<br>
<br>
<code>online_catalog</code>:: Uses the database&#8217;s current data dictionary to resolve object ids and does not write any extra information to the online redo logs.
This allows LogMiner to mine substantially faster but at the expense that DDL changes cannot be tracked.
If the captured table(s) schema changes infrequently or never, this is the ideal choice.<br>
<br>
<code>hybrid</code>:: Uses a combination of the database&#8217;s current data dictionary and the Debezium in-memory schema model to resole table and column names seamlessly.
This mode performs at the level of the <code>online_catalog</code> LogMiner strategy with the schema tracking resilience of the <code>redo_log_catalog</code> strategy while not incurring the overhead of archive log generation and performance costs of the <code>redo_log_catalog</code> strategy.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-query-filter-mode"></a><a href="#oracle-property-log-mining-query-filter-mode"><code>log.mining.query.filter.mode</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>none</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the mining query mode that controls how the Oracle LogMiner query is built.<br>
<br>
<code>none</code>:: The query is generated without doing any schema, table, or username filtering in the query.<br>
<br>
<code>in</code>:: The query is generated using a standard SQL in-clause to filter schema, table, and usernames on the database side.
The schema, table, and username configuration include/exclude lists should not specify any regular expressions as the query is built using the values directly.<br>
<br>
<code>regex</code>:: The query is generated using Oracle&#8217;s <code>REGEXP_LIKE</code> operator to filter schema and table names on the database side, along with usernames using a SQL in-clause.
The schema and table configuration include/exclude lists can safely specify regular expressions.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-buffer-type"></a><a href="#oracle-property-log-mining-buffer-type"><code>log.mining.buffer.type</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>memory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The buffer type controls how the connector manages buffering transaction data.<br>
<br>
<code>memory</code> - Uses the JVM process' heap to buffer all transaction data.
Choose this option if you don&#8217;t expect the connector to process a high number of long-running or large transactions.
When this option is active, the buffer state is not persisted across restarts.
Following a restart, recreate the buffer from the SCN value of the current offset.<br>
<br>
<code>infinispan_embedded</code> - This option uses an embedded Infinispan cache to buffer transaction data and persist it to disk.<br>
<br>
<code>infinispan_remote</code> - This option uses a remote Infinispan cluster to buffer transaction data and persist it to disk.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-buffer-transaction-events-threshold"></a><a href="#oracle-property-log-mining-buffer-transaction-events-threshold"><code>log.mining.buffer.transaction.events.threshold</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum number of events a transaction is capable of having in the transaction buffer.
Transactions with event counts that exceed this threshold not be emitted and will be abandoned.
The default behavior is there is no transaction event threshold.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-buffer-infinispan-cache-global"></a><a href="#oracle-property-log-mining-buffer-infinispan-cache-global"><code>log.mining.buffer.infinispan.cache.global</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The XML configuration for the Infinispan global configuration.
For more information, see <a href="#oracle-event-buffering-infinispan">Infinispan event buffering</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-buffer-infinispan-cache-transactions"></a><a href="#oracle-property-log-mining-buffer-infinispan-cache-transactions"><code>log.mining.buffer.infinispan.cache.transactions</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The XML configuration for the Infinispan transaction cache.
For more information, see <a href="#oracle-event-buffering-infinispan">Infinispan event buffering</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-buffer-infinispan-cache-events"></a><a href="#oracle-property-log-mining-buffer-infinispan-cache-events"><code>log.mining.buffer.infinispan.cache.events</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The XML configuration for the Infinispan events cache.
For more information, see <a href="#oracle-event-buffering-infinispan">Infinispan event buffering</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-buffer-infinispan-cache-processed-transactions"></a><a href="#oracle-property-log-mining-buffer-infinispan-cache-processed-transactions"><code>log.mining.buffer.infinispan.cache.processed_transactions</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The XML configuration for the Infinispan processed transactions cache.
For more information, see <a href="#oracle-event-buffering-infinispan">Infinispan event buffering</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-buffer-infinispan-cache-schema-changes"></a><a href="#oracle-property-log-mining-buffer-infinispan-cache-schema-changes"><code>log.mining.buffer.infinispan.cache.schema_changes</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The XML configuration for the Infinispan schema changes cache.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-buffer-drop-on-stop"></a><a href="#oracle-property-log-mining-buffer-drop-on-stop"><code>log.mining.buffer.drop.on.stop</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether the buffer state is deleted after the connector stops in a graceful, expected way.<br>
<br>
This setting only impacts buffer implementations that persist state across restarts, such as <code>infinispan</code>.<br>
The default behavior is that the buffer state is always retained between restarts.<br>
<br>
Set to <code>true</code> only in testing or development environments.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-session-max-ms"></a><a href="#oracle-property-log-mining-session-max-ms"><code>log.mining.session.max.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum number of milliseconds that a LogMiner session can be active before a new session is used.<br>
<br>
For low volume systems, a LogMiner session may consume too much PGA memory when the same session is used for a long period of time.
The default behavior is to only use a new LogMiner session when a log switch is detected.
By setting this value to something greater than <code>0</code>, this specifies the maximum number of milliseconds a LogMiner session can be active before it gets stopped and started to deallocate and reallocate PGA memory.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-restart-connection"></a><a href="#oracle-property-log-mining-restart-connection"><code>log.mining.restart.connection</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether the JDBC connection will be closed and re-opened on log switches or when mining session has reached maximum lifetime threshold.<br>
<br>
By default, the JDBC connection is not closed across log switches or maximum session lifetimes.<br>
This should be enabled if you experience excessive Oracle SGA growth with LogMiner.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-batch-size-min"></a><a href="#oracle-property-log-mining-batch-size-min"><code>log.mining.batch.size.min</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The minimum SCN interval size that this connector attempts to read from redo/archive logs. Active batch size is also increased/decreased by this amount for tuning connector throughput when needed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-batch-size-max"></a><a href="#oracle-property-log-mining-batch-size-max"><code>log.mining.batch.size.max</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>100000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum SCN interval size that this connector uses when reading from redo/archive logs.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-batch-size-default"></a><a href="#oracle-property-log-mining-batch-size-default"><code>log.mining.batch.size.default</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>20000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The starting SCN interval size that the connector uses for reading data from redo/archive logs.
This also servers as a measure for adjusting batch size - when the difference between current SCN and beginning/end SCN of the batch is bigger than this value, batch size is increased/decreased.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-sleep-time-min-ms"></a><a href="#oracle-property-log-mining-sleep-time-min-ms"><code>log.mining.sleep.time.min.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The minimum amount of time that the connector sleeps after reading data from redo/archive logs and before starting reading data again. Value is in milliseconds.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-sleep-time-max-ms"></a><a href="#oracle-property-log-mining-sleep-time-max-ms"><code>log.mining.sleep.time.max.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>3000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum amount of time that the connector ill sleeps after reading data from redo/archive logs and before starting reading data again. Value is in milliseconds.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-sleep-time-default-ms"></a><a href="#oracle-property-log-mining-sleep-time-default-ms"><code>log.mining.sleep.time.default.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The starting amount of time that the connector sleeps after reading data from redo/archive logs and before starting reading data again. Value is in milliseconds.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-sleep-time-increment-ms"></a><a href="#oracle-property-log-mining-sleep-time-increment-ms"><code>log.mining.sleep.time.increment.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>200</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum amount of time up or down that the connector uses to tune the optimal sleep time when reading data from logminer. Value is in milliseconds.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-archive-log-hours"></a><a href="#oracle-property-log-mining-archive-log-hours"><code>log.mining.archive.log.hours</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of hours in the past from SYSDATE to mine archive logs.
When the default setting (<code>0</code>) is used, the connector mines all archive logs.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-archive-log-only-mode"></a><a href="#oracle-property-log-mining-archive-log-only-mode"><code>log.mining.archive.log.only.mode</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls whether or not the connector mines changes from just archive logs or a combination of the online redo logs and archive logs (the default).<br>
<br>
Redo logs use a circular buffer that can be archived at any point.
In environments where online redo logs are archived frequently, this can lead to LogMiner session failures.
In contrast to redo logs, archive logs are guaranteed to be reliable.
Set this option to <code>true</code> to force the connector to mine archive logs only.
After you set the connector to mine only the archive logs, the latency between an operation being committed and the connector emitting an associated change event might increase.
The degree of latency depends on how frequently the database is configured to archive online redo logs.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-archive-log-only-scn-poll-interval-ms"></a><a href="#oracle-property-log-mining-archive-log-only-scn-poll-interval-ms"><code>log.mining.archive.log.only.scn.poll.interval.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>10000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of milliseconds the connector will sleep in between polling to determine if the starting system change number is in the archive logs.
If <code>log.mining.archive.log.only.mode</code> is not enabled, this setting is not used.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-transaction-retention-ms"></a><a href="#oracle-property-log-mining-transaction-retention-ms"><code>log.mining.transaction.retention.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Positive integer value that specifies the number of milliseconds to retain long running transactions between redo log switches.
When set to <code>0</code>, transactions are retained until a commit or rollback is detected.</p>
</div>
<div class="paragraph">
<p>By default, the LogMiner adapter maintains an in-memory buffer of all running transactions.
Because all of the DML operations that are part of a transaction are buffered until a commit or rollback is detected,
long-running transactions should be avoided in order to not overflow that buffer.
Any transaction that exceeds this configured value is discarded entirely, and the connector does not emit any messages for the operations that were part of the transaction.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-archive-destination-name"></a><a href="#oracle-property-log-mining-archive-destination-name"><code>log.mining.archive.destination.name</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the configured Oracle archive destination to use when mining archive logs with LogMiner.<br>
<br>
The default behavior automatically selects the first valid, local configured destination.
However, you can use a specific destination can be used by providing the destination name, for example, <code>LOG_ARCHIVE_DEST_5</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-username-include-list"></a><a href="#oracle-property-log-mining-username-include-list"><code>log.mining.username.include.list</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of database users to include from the LogMiner query.
It can be useful to set this property if you want the capturing process to include changes from the specified users.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-username-exclude-list"></a><a href="#oracle-property-log-mining-username-exclude-list"><code>log.mining.username.exclude.list</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of database users to exclude from the LogMiner query.
It can be useful to set this property if you want the capturing process to always exclude the changes that specific users make.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-scn-gap-detection-gap-size-min"></a><a href="#oracle-property-log-mining-scn-gap-detection-gap-size-min"><code>log.mining.scn.gap.detection.gap.size.min</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1000000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies a value that the connector compares to the difference between the current and previous SCN values to determine whether an SCN gap exists.
If the difference between the SCN values is greater than the specified value, and the time difference is smaller than <a href="#oracle-property-log-mining-scn-gap-detection-time-interval-max-ms"><code>log.mining.scn.gap.detection.time.interval.max.ms</code></a> then an SCN gap is detected, and the connector uses a mining window larger than the configured maximum batch.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-scn-gap-detection-time-interval-max-ms"></a><a href="#oracle-property-log-mining-scn-gap-detection-time-interval-max-ms"><code>log.mining.scn.gap.detection.time.interval.max.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>20000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies a value,  in milliseconds, that the connector compares to the difference between the current and previous SCN timestamps  to determine whether an SCN gap exists.
If the difference between the timestamps is less than the specified value, and the SCN delta is greater than <a href="#oracle-property-log-mining-scn-gap-detection-gap-size-min"><code>log.mining.scn.gap.detection.gap.size.min</code></a>, then an SCN gap is detected and the connector uses a mining window larger than the configured maximum batch.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-flush-table-name"></a><a href="#oracle-property-log-mining-flush-table-name"><code>log.mining.flush.table.name</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>LOG_MINING_FLUSH</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the name of the flush table that coordinates flushing the Oracle LogWriter Buffer (LGWR) to the redo logs.
This name can be specified using the format <code><em>&lt;schemaName&gt;</em>.<em>&lt;tableName&gt;</em></code> or <code><em>&lt;tableName&gt;</em></code>.
Typically, multiple connectors can use the same flush table.
However, if connectors encounter table lock contention errors, use this property to specify a dedicated table for each connector deployment.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-log-mining-include-redo-sql"></a><a href="#oracle-property-log-mining-include-redo-sql"><code>log.mining.include.redo.sql</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether the redo log constructed SQL statement is included in <code>source.redo_sql</code> field.
This configuration is ignored when using XStream or OpenLogReplicator adapters.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-lob-enabled"></a><a href="#oracle-property-lob-enabled"><code>lob.enabled</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls whether or not large object (CLOB or BLOB) column values are emitted in change events.<br>
<br>
By default, change events have large object columns, but the columns contain no values.
There is a certain amount of overhead in processing and managing large object column types and payloads.
To capture large object values and serialized them in change events, set this option to <code>true</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-unavailable-value-placeholder"></a><a href="#oracle-property-unavailable-value-placeholder"><code>unavailable.value.placeholder</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>__debezium_unavailable_value</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the constant that the connector provides to indicate that the original value is unchanged and not provided by the database.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-rac-nodes"></a><a href="#oracle-property-rac-nodes"><code>rac.nodes</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A comma-separated list of Oracle Real Application Clusters (RAC) node host names or addresses.
This field is required to enable compatibility with an Oracle RAC deployment.</p>
</div>
<div class="paragraph">
<p>Specify the list of RAC nodes by using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Specify a value for <a href="#oracle-property-database-port"><code>database.port</code></a>, and use the specified port value for each address in the <code>rac.nodes</code> list.
For example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">database.port=1521
rac.nodes=192.168.1.100,192.168.1.101</code></pre>
</div>
</div>
</li>
<li>
<p>Specify a value for <a href="#oracle-property-database-port"><code>database.port</code></a>, and override the default port for one or more entries in the list.
The list can include entries that use the default <code>database.port</code> value, and entries that define their own unique port values.
For example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">database.port=1521
rac.nodes=192.168.1.100,192.168.1.101:1522</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you supply a raw JDBC URL for the database by using the <a href="#oracle-property-database-url"><code>database.url</code></a> property, instead of defining a value for <code>database.port</code>, each RAC node entry must explicitly specify a port value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-skipped-operations"></a><a href="#oracle-property-skipped-operations"><code>skipped.operations</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>t</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A comma-separated list of the operation types that you want the connector to skip during streaming.
You can configure the connector to skip the following types of operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>c</code> (insert/create)</p>
</li>
<li>
<p><code>u</code> (update)</p>
</li>
<li>
<p><code>d</code> (delete)</p>
</li>
<li>
<p><code>t</code> (truncate)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, only truncate operations are skipped.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-signal-data-collection"></a><a href="#oracle-property-signal-data-collection"><code>signal.data.collection</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default value</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Fully-qualified name of the data collection that is used to send <a href="../configuration/signalling.html#debezium-signaling-enabling-source-signaling-channel" class="xref page">signals</a> to the connector.
When you use this property with an Oracle pluggable database (PDB), set its value to the name of the root database.<br>
Use the following format to specify the collection name:<br>
<code><em>&lt;databaseName&gt;</em>.<em>&lt;schemaName&gt;</em>.<em>&lt;tableName&gt;</em></code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-signal-enabled-channels"></a><a href="#oracle-property-signal-enabled-channels"><code>signal.enabled.channels</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>source</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of the signaling channel names that are enabled for the connector.
By default, the following channels are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>source</code></p>
</li>
<li>
<p><code>kafka</code></p>
</li>
<li>
<p><code>file</code></p>
</li>
<li>
<p><code>jmx</code>
Optionally, you can also implement a <a href="../configuration/signalling.html#debezium-signaling-enabling-custom-signaling-channel" class="xref page">custom signaling channel</a>.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-notification-enabled-channels"></a><a href="#oracle-property-notification-enabled-channels"><code>notification.enabled.channels</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of notification channel names that are enabled for the connector.
By default, the following channels are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sink</code></p>
</li>
<li>
<p><code>log</code></p>
</li>
<li>
<p><code>jmx</code>
Optionally, you can also implement a <a href="../configuration/notification.html#debezium-notification-custom-channel" class="xref page">custom notification channel</a>.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-incremental-snapshot-chunk-size"></a><a href="#oracle-property-incremental-snapshot-chunk-size"><code>incremental.snapshot.chunk.size</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1024</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum number of rows that the connector fetches and reads into memory during an incremental snapshot chunk.
Increasing the chunk size provides greater efficiency, because the snapshot runs fewer snapshot queries of a greater size.
However, larger chunk sizes also require more memory to buffer the snapshot data.
Adjust the chunk size to a value that provides the best performance in your environment.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-incremental-snapshot-watermarking-strategy"></a><a href="#oracle-property-incremental-snapshot-watermarking-strategy"><code>incremental.snapshot.watermarking.strategy</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>insert_insert</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the watermarking mechanism that the connector uses during an incremental snapshot to deduplicate events that might be captured by an incremental snapshot and then recaptured after streaming resumes.<br>
You can specify one of the following options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>insert_insert</code></dt>
<dd>
<p>When you send a signal to initiate an incremental snapshot, for every chunk that Debezium reads during the snapshot, it writes an entry to the signaling data collection to record the signal to open the snapshot window.
After the snapshot completes, Debezium inserts a second entry that records the signal to close the window.</p>
</dd>
<dt class="hdlist1"><code>insert_delete</code></dt>
<dd>
<p>When you send a signal to initiate an incremental snapshot, for every chunk that Debezium reads, it writes a single entry to the signaling data collection to record the signal to open the snapshot window.
After the snapshot completes, this entry is removed.
No entry is created for the signal to close the snapshot window.
Set this option to prevent rapid growth of the signaling data collection.</p>
</dd>
</dl>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-topic-naming-strategy"></a><a href="#oracle-property-topic-naming-strategy"><code>topic.naming.strategy</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.schema.SchemaTopicNamingStrategy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the TopicNamingStrategy class that should be used to determine the topic name for data change, schema change, transaction, heartbeat event etc., defaults to <code>SchemaTopicNamingStrategy</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-topic-delimiter"></a><a href="#oracle-property-topic-delimiter"><code>topic.delimiter</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>.</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specify the delimiter for topic name, defaults to <code>.</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-topic-cache-size"></a><a href="#oracle-property-topic-cache-size"><code>topic.cache.size</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>10000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The size used for holding the topic names in bounded concurrent hash map. This cache will help to determine the topic name corresponding to a given data collection.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-topic-heartbeat-prefix"></a><a href="#oracle-property-topic-heartbeat-prefix"><code>topic.heartbeat.prefix</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>__debezium-heartbeat</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls the name of the topic to which the connector sends heartbeat messages. The topic name has this pattern:<br>
<br>
<em>topic.heartbeat.prefix</em>.<em>topic.prefix</em><br>
<br>
For example, if the topic prefix is <code>fulfillment</code>, the default topic name is <code>__debezium-heartbeat.fulfillment</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-topic-transaction"></a><a href="#oracle-property-topic-transaction"><code>topic.transaction</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>transaction</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls the name of the topic to which the connector sends transaction metadata messages. The topic name has this pattern:<br>
<br>
<em>topic.prefix</em>.<em>topic.transaction</em><br>
<br>
For example, if the topic prefix is <code>fulfillment</code>, the default topic name is <code>fulfillment.transaction</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-max-threads"></a><a href="#oracle-property-snapshot-max-threads"><code>snapshot.max.threads</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the number of threads that the connector uses when performing an initial snapshot.
To enable parallel initial snapshots, set the property to a value greater than 1.
In a parallel initial snapshot, the connector processes multiple tables concurrently.
This feature is incubating.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-snapshot-database-errors-max-retries"></a>&lt;oracle-property-snapshot-database-errors-max-retries, <code>snapshot.database.errors.max.retries</code>&gt;&gt;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the number of retry attempts to snapshot a table when a database error occurs.
This configuration property currently only retries failures related to <code>ORA-01466</code> exceptions.
By default, no additional retries will be performed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-custom-metric-tags"></a><a href="#oracle-property-custom-metric-tags"><code>custom.metric.tags</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>No default</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Defines tags that customize MBean object names by adding metadata that provides contextual information.
Specify a comma-separated list of key-value pairs.
Each key represents a tag for the MBean object name, and the corresponding value represents a value for the key, for example, <br>
<code>k1=v1,k2=v2</code></p>
</div>
<div class="paragraph">
<p>The connector appends the specified tags to the base MBean object name.
Tags can help you to organize and categorize metrics data.
You can define tags to identify particular application instances, environments, regions, versions, and so forth.
For more information, see <a href="#customized-mbean-names">Customized MBean names</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-errors-max-retires"></a><a href="#oracle-property-errors-max-retires"><code>errors.max.retries</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>-1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies how the connector responds after an operation that results in a retriable error, such as a connection error.<br>
Set one of the following options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-1</code></dt>
<dd>
<p>No limit. The connector always restarts automatically, and retries the operation, regardless of the number of previous failures.</p>
</dd>
<dt class="hdlist1"><code>0</code></dt>
<dd>
<p>Disabled. The connector fails immediately, and never retries the operation.
User intervention is required to restart the connector.</p>
</dd>
<dt class="hdlist1"><code>&gt; 0</code></dt>
<dd>
<p>The connector restarts automatically until it reaches the specified maximum number of retries.
After the next failure, the connector stops, and user intervention is required to restart it.</p>
</dd>
</dl>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-query-timeout-ms"></a><a href="#oracle-property-database-query-timeout-ms"><code>database.query.timeout.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>600000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time to wait for a query to execute, given in milliseconds. Defaults to 600 seconds (600,000 ms); zero means there is no limit.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="debezium-oracle-connector-database-history-configuration-properties"><a class="anchor" href="#debezium-oracle-connector-database-history-configuration-properties"></a>Debezium Oracle connector database schema history configuration properties</h4>
<div class="paragraph">
<p>Debezium provides a set of <code>schema.history.internal.*</code> properties that control how the connector interacts with the schema history topic.</p>
</div>
<div class="paragraph">
<p>The following table describes the <code>schema.history.internal</code> properties for configuring the Debezium connector.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Connector database schema history configuration properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 17%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-history-kafka-topic"></a><a href="#oracle-property-database-history-kafka-topic"><code>schema.history.internal.kafka.topic</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The full name of the Kafka topic where the connector stores the database schema history.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-history-kafka-bootstrap-servers"></a><a href="#oracle-property-database-history-kafka-bootstrap-servers"><code>schema.history.internal.kafka.bootstrap.servers</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A list of host/port pairs that the connector uses for establishing an initial connection to the Kafka cluster. This connection is used for retrieving the database schema history previously stored by the connector, and for writing each DDL statement read from the source database. Each pair should point to the same Kafka cluster used by the Kafka Connect process.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-history-kafka-recovery-poll-interval-ms"></a><a href="#oracle-property-database-history-kafka-recovery-poll-interval-ms"><code>schema.history.internal.kafka.recovery.poll.interval.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>100</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An integer value that specifies the maximum number of milliseconds the connector should wait during startup/recovery while polling for persisted data. The default is 100ms.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-history-kafka-query-timeout-ms"></a><a href="#oracle-property-database-history-kafka-query-timeout-ms"><code>schema.history.internal.kafka.query.timeout.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>3000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An integer value that specifies the maximum number of milliseconds the connector should wait while fetching cluster information using Kafka admin client.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-history-kafka-create-timeout-ms"></a><a href="#oracle-property-database-history-kafka-create-timeout-ms"><code>schema.history.internal.kafka.create.timeout.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>30000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An integer value that specifies the maximum number of milliseconds the connector should wait while create kafka history topic using Kafka admin client.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-history-kafka-recovery-attempts"></a><a href="#oracle-property-database-history-kafka-recovery-attempts"><code>schema.history.internal.kafka.recovery.attempts</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>100</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum number of times that the connector should try to read persisted history data before the connector recovery fails with an error. The maximum amount of time to wait after receiving no data is <code>recovery.attempts</code> × <code>recovery.poll.interval.ms</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-history-skip-unparseable-ddl"></a><a href="#oracle-property-database-history-skip-unparseable-ddl"><code>schema.history.internal.skip.unparseable.ddl</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A Boolean value that specifies whether the connector should ignore malformed or unknown database statements or stop processing so a human can fix the issue.
The safe default is <code>false</code>.
Skipping should be used only with care as it can lead to data loss or mangling when the binlog is being processed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-history-store-only-captured-tables-ddl"></a><a href="#oracle-property-database-history-store-only-captured-tables-ddl"><code>schema.history.internal.store.only.captured.tables.ddl</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A Boolean value that specifies whether the connector records schema structures from all tables in a schema or database, or only from tables that are designated for capture.<br>
Specify one of the following values:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>false</code> (default)</dt>
<dd>
<p>During a database snapshot, the connector records the schema data for all non-system tables in the database, including tables that are not designated for capture.
It&#8217;s best to retain the default setting.
If you later decide to capture changes from tables that you did not originally designate for capture, the connector can easily begin to capture data from those tables, because their schema structure is already stored in the schema history topic.
Debezium requires the schema history of a table so that it can identify the structure that was present at the time that a change event occurred.</p>
</dd>
<dt class="hdlist1"><code>true</code></dt>
<dd>
<p>During a database snapshot, the connector records the table schemas only for the tables from which Debezium captures change events.
If you change the default value, and you later configure the connector to capture data from other tables in the database, the connector lacks the schema information that it requires to capture change events from the tables.<br></p>
</dd>
</dl>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-history-store-only-captured-databases-ddl"></a><a href="#oracle-property-database-history-store-only-captured-databases-ddl"><code>schema.history.internal.store.only.captured.databases.ddl</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A Boolean value that specifies whether the connector records schema structures from all logical databases in the database instance.<br>
Specify one of the following values:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>true</code></dt>
<dd>
<p>The connector records schema structures only for tables in the logical database and schema from which Debezium captures change events.</p>
</dd>
<dt class="hdlist1"><code>false</code></dt>
<dd>
<p>The connector records schema structures for all logical databases.<br></p>
</dd>
</dl>
</div></div></td>
</tr>
</tbody>
</table>
<div id="oracle-pass-through-database-history-properties-for-configuring-producer-and-consumer-clients" class="paragraph">
<div class="title">Pass-through database schema history properties for configuring producer and consumer clients</div>
<p><br>
Debezium relies on a Kafka producer to write schema changes to database schema history topics.
Similarly, it relies on a Kafka consumer to read from database schema history topics when a connector starts.
You define the configuration for the Kafka producer and consumer clients by assigning values to a set of pass-through configuration properties that begin with the <code>schema.history.internal.producer.*</code> and <code>schema.history.internal.consumer.*</code> prefixes.
The pass-through producer and consumer database schema history properties control a range of behaviors, such as how these clients secure connections with the Kafka broker, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">schema.history.internal.producer.security.protocol=SSL
schema.history.internal.producer.ssl.keystore.location=/var/private/ssl/kafka.server.keystore.jks
schema.history.internal.producer.ssl.keystore.password=test1234
schema.history.internal.producer.ssl.truststore.location=/var/private/ssl/kafka.server.truststore.jks
schema.history.internal.producer.ssl.truststore.password=test1234
schema.history.internal.producer.ssl.key.password=test1234

schema.history.internal.consumer.security.protocol=SSL
schema.history.internal.consumer.ssl.keystore.location=/var/private/ssl/kafka.server.keystore.jks
schema.history.internal.consumer.ssl.keystore.password=test1234
schema.history.internal.consumer.ssl.truststore.location=/var/private/ssl/kafka.server.truststore.jks
schema.history.internal.consumer.ssl.truststore.password=test1234
schema.history.internal.consumer.ssl.key.password=test1234</code></pre>
</div>
</div>
<div class="paragraph">
<p>Debezium strips the prefix from the property name before it passes the property to the Kafka client.</p>
</div>
<div class="paragraph">
<p>See the Kafka documentation for more details about <a href="https://kafka.apache.org/documentation.html#producerconfigs">Kafka producer configuration properties</a> and <a href="https://kafka.apache.org/documentation.html#consumerconfigs">Kafka consumer configuration properties</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="debezium-oracle-connector-kafka-signals-configuration-properties"><a class="anchor" href="#debezium-oracle-connector-kafka-signals-configuration-properties"></a>Debezium connector Kafka signals configuration properties</h4>
<div class="paragraph">
<p>Debezium provides a set of <code>signal.*</code> properties that control how the connector interacts with the Kafka signals topic.</p>
</div>
<div class="paragraph">
<p>The following table describes the Kafka <code>signal</code> properties.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Kafka signals configuration properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 17%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-signal-kafka-topic"></a><a href="#oracle-property-signal-kafka-topic"><code>signal.kafka.topic</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>&lt;topic.prefix&gt;-signal</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Kafka topic that the connector monitors for ad hoc signals.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If <a href="../configuration/topic-auto-create-config.html#topic-auto-create-config" class="xref page">automatic topic creation</a> is disabled, you must manually create the required signaling topic.
A signaling topic is required to preserve signal ordering.
The signaling topic must have a single partition.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-signal-kafka-groupId"></a><a href="#oracle-property-signal-kafka-groupId"><code>signal.kafka.groupId</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>kafka-signal</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the group ID  that is used by Kafka consumers.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-signal-kafka-bootstrap-servers"></a><a href="#oracle-property-signal-kafka-bootstrap-servers"><code>signal.kafka.bootstrap.servers</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A list of host/port pairs that the connector uses for establishing an initial connection to the Kafka cluster.
Each pair references the Kafka cluster that is used by the Debezium Kafka Connect process.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-signal-kafka-poll-timeout-ms"></a><a href="#oracle-property-signal-kafka-poll-timeout-ms"><code>signal.kafka.poll.timeout.ms</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>100</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An integer value that specifies the maximum number of milliseconds that the connector waits when polling signals.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-kafka-consumer-offset-commit-enabled"></a><a href="#oracle-kafka-consumer-offset-commit-enabled"><code>kafka.consumer.offset.commit.enabled</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enable the offset commit for the signal topic in order to guarantee At-Least-Once delivery. If disabled, only signals received when the consumer is up&amp;running are processed. Any signals received when the consumer is down are lost.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="debezium-oracle-connector-pass-through-signals-kafka-consumer-configuration-properties"><a class="anchor" href="#debezium-oracle-connector-pass-through-signals-kafka-consumer-configuration-properties"></a>Debezium connector pass-through signals Kafka consumer client configuration properties</h4>
<div class="paragraph">
<p>The Debezium connector provides for pass-through configuration of the signals Kafka consumer.
Pass-through signals properties begin with the prefix <code>signals.consumer.*</code>.
For example, the connector passes properties such as <code>signal.consumer.security.protocol=SSL</code> to the Kafka consumer.</p>
</div>
<div class="paragraph">
<p>Debezium strips the prefixes from the properties before it passes the properties to the Kafka signals consumer.</p>
</div>
</div>
<div class="sect3">
<h4 id="debezium-oracle-connector-kafka-notifications-configuration-properties"><a class="anchor" href="#debezium-oracle-connector-kafka-notifications-configuration-properties"></a>Debezium connector sink notifications configuration properties</h4>
<div class="paragraph">
<p>The following table describes the <code>notification</code> properties.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. Sink notification configuration properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 17%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-notification-sink-topic-name"></a><a href="#oracle-property-notification-sink-topic-name"><code>notification.sink.topic.name</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the topic that receives notifications from Debezium.
This property is required when you configure the <a href="#oracle-property-notification-enabled-channels"><code>notification.enabled.channels</code></a> property to include <code>sink</code> as one of the enabled notification channels.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="debezium-oracle-connector-pass-through-database-driver-configuration-properties"><a class="anchor" href="#debezium-oracle-connector-pass-through-database-driver-configuration-properties"></a>Debezium Oracle connector pass-through database driver configuration properties</h4>
<div class="paragraph">
<p>The Debezium connector provides for pass-through configuration of the database driver.
Pass-through database properties begin with the prefix <code>driver.*</code>.
For example, the connector passes properties such as <code>driver.foobar=false</code> to the JDBC URL.</p>
</div>
<div class="paragraph">
<p>As is the case with the <a href="#oracle-pass-through-database-history-properties-for-configuring-producer-and-consumer-clients">pass-through properties for database schema history clients</a>, Debezium strips the prefixes from the properties before it passes them to the database driver.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oracle-monitoring"><a class="anchor" href="#oracle-monitoring"></a>Monitoring</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Debezium Oracle connector provides three metric types in addition to the built-in support for JMX metrics that Apache Zookeeper, Apache Kafka, and Kafka Connect have.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#oracle-snapshot-metrics">snapshot metrics</a>; for monitoring the connector when performing snapshots</p>
</li>
<li>
<p><a href="#oracle-streaming-metrics">streaming metrics</a>; for monitoring the connector when processing change events</p>
</li>
<li>
<p><a href="#oracle-schema-history-metrics">schema history metrics</a>; for monitoring the status of the connector&#8217;s schema history</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please refer to the <a href="../operations/monitoring.html#monitoring-debezium" class="xref page">monitoring documentation</a> for details of how to expose these metrics via JMX.</p>
</div>
<div class="sect2">
<h3 id="_customized_mbean_names"><a class="anchor" href="#_customized_mbean_names"></a>Customized MBean names</h3>
<div class="paragraph">
<p>Debezium connectors expose metrics via the MBean name for the connector.
These metrics, which are specific to each connector instance, provide data about the behavior of the connector&#8217;s snapshot, streaming, and schema history processes.</p>
</div>
<div class="paragraph">
<p>By default, when you deploy a correctly configured connector, Debezium generates a unique MBean name for each of the different connector metrics.
To view the metrics for a connector process, you configure your observability stack to monitor its MBean.
But these default MBean names depend on the connector configuration; configuration changes can result in changes to the MBean names.
A change to the MBean name breaks the linkage between the connector instance and the MBean, disrupting monitoring activity.
In this scenario, you must reconfigure the observability stack to use the new MBean name if you want to resume monitoring.</p>
</div>
<div class="paragraph">
<p>To prevent monitoring disruptions that result from MBean name changes, you can configure custom metrics tags.
You configure custom metrics by adding the <code>custom.metric.tags</code> property to the connector configuration.
The property accepts key-value pairs in which each key represents a tag for the MBean object name, and the corresponding value represents the value of that tag.
For example: <code>k1=v1,k2=v2</code>.
Debezium appends the specified tags to the MBean name of the connector.</p>
</div>
<div class="paragraph">
<p>After you configure the <code>custom.metric.tags</code> property for a connector, you can configure the observability stack to retrieve metrics associated with the specified tags.
The observability stack then uses the specified tags, rather than the mutable MBean names to uniquely identify connectors.
Later, if Debezium redefines how it constructs MBean names, or if the <code>topic.prefix</code> in the connector configuration changes, metrics collection is uninterrupted,
because the metrics scrape task uses the specified tag patterns to identify the connector.</p>
</div>
<div class="paragraph">
<p>A further benefit of using custom tags, is that you can use tags that reflect the architecture of your data pipeline, so that metrics are organized in a way that suits you operational needs.
For example, you might specify tags with values that declare the type of connector activity, the application context, or the data source, for example, <code>db1-streaming-for-application-abc</code>.
If you specify multiple key-value pairs, all of the specified pairs are appended to the connector&#8217;s MBean name.</p>
</div>
<div class="paragraph">
<p>The following example illustrates how tags modify the default MBean name.</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. How custom tags modify the connector MBean name</div>
<div class="content">
<div class="paragraph">
<p>By default, the Oracle connector uses the following MBean name for streaming metrics:
<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">debezium.oracle:type=connector-metrics,context=streaming,server=<em>&lt;topic.prefix&gt;</em></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you set the value of <code>custom.metric.tags</code> to <code>database=salesdb-streaming,table=inventory</code>, Debezium generates the following custom MBean name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">debezium.oracle:type=connector-metrics,context=streaming,server=<em>&lt;topic.prefix&gt;</em>,database=salesdb-streaming,table=inventory</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="oracle-snapshot-metrics"><a class="anchor" href="#oracle-snapshot-metrics"></a>Snapshot Metrics</h3>
<div id="oracle-monitoring-snapshots" class="paragraph">
<p>The <strong>MBean</strong> is <code>debezium.oracle:type=connector-metrics,context=snapshot,server=<em>&lt;topic.prefix&gt;</em></code>.</p>
</div>
<div class="paragraph">
<p>Snapshot metrics are not exposed unless a snapshot operation is active, or if a snapshot has occurred since the last connector start.</p>
</div>
<div class="paragraph">
<p>The following table lists the snapshot metrics that are available.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 45%;">
<col style="width: 25%;">
<col style="width: 30%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attributes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-lastevent_oracle"></a><a href="#connectors-snaps-metric-lastevent_oracle"><code>LastEvent</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The last snapshot event that the connector has read.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-millisecondssincelastevent_oracle"></a><a href="#connectors-snaps-metric-millisecondssincelastevent_oracle"><code>MilliSecondsSinceLastEvent</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of milliseconds since the connector has read and processed the most recent event.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-totalnumberofeventsseen_oracle"></a><a href="#connectors-snaps-metric-totalnumberofeventsseen_oracle"><code>TotalNumberOfEventsSeen</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of events that this connector has seen since last started or reset.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-numberofeventsfiltered_oracle"></a><a href="#connectors-snaps-metric-numberofeventsfiltered_oracle"><code>NumberOfEventsFiltered</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of events that have been filtered by include/exclude list filtering rules configured on the connector.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-capturedtables_oracle"></a><a href="#connectors-snaps-metric-capturedtables_oracle"><code>CapturedTables</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string[]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The list of tables that are captured by the connector.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-queuetotalcapacity_oracle"></a><a href="#connectors-snaps-metric-queuetotalcapacity_oracle"><code>QueueTotalCapacity</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The length the queue used to pass events between the snapshotter and the main Kafka Connect loop.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-queueremainingcapacity_oracle"></a><a href="#connectors-snaps-metric-queueremainingcapacity_oracle"><code>QueueRemainingCapacity</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The free capacity of the queue used to pass events between the snapshotter and the main Kafka Connect loop.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-totaltablecount_oracle"></a><a href="#connectors-snaps-metric-totaltablecount_oracle"><code>TotalTableCount</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of tables that are being included in the snapshot.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-remainingtablecount_oracle"></a><a href="#connectors-snaps-metric-remainingtablecount_oracle"><code>RemainingTableCount</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of tables that the snapshot has yet to copy.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-snapshotrunning_oracle"></a><a href="#connectors-snaps-metric-snapshotrunning_oracle"><code>SnapshotRunning</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether the snapshot was started.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-snapshotpaused_oracle"></a><a href="#connectors-snaps-metric-snapshotpaused_oracle"><code>SnapshotPaused</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether the snapshot was paused.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-snapshotaborted_oracle"></a><a href="#connectors-snaps-metric-snapshotaborted_oracle"><code>SnapshotAborted</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether the snapshot was aborted.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-snapshotcompleted_oracle"></a><a href="#connectors-snaps-metric-snapshotcompleted_oracle"><code>SnapshotCompleted</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether the snapshot completed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-snapshotdurationinseconds_oracle"></a><a href="#connectors-snaps-metric-snapshotdurationinseconds_oracle"><code>SnapshotDurationInSeconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of seconds that the snapshot has taken so far, even if not complete. Includes also time when snapshot was paused.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-snapshotpauseddurationinseconds_oracle"></a><a href="#connectors-snaps-metric-snapshotpauseddurationinseconds_oracle"><code>SnapshotPausedDurationInSeconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of seconds that the snapshot was paused. If the snapshot was paused several times, the paused time adds up.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-rowsscanned_oracle"></a><a href="#connectors-snaps-metric-rowsscanned_oracle"><code>RowsScanned</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Map&lt;String, Long&gt;</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Map containing the number of rows scanned for each table in the snapshot.
Tables are incrementally added to the Map during processing.
Updates every 10,000 rows scanned and upon completing a table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-maxqueuesizeinbytes_oracle"></a><a href="#connectors-snaps-metric-maxqueuesizeinbytes_oracle"><code>MaxQueueSizeInBytes</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum buffer of the queue in bytes. This metric is available if <a href="#oracle-property-max-queue-size-in-bytes"><code>max.queue.size.in.bytes</code></a> is set to a positive long value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-snaps-metric-currentqueuesizeinbytes_oracle"></a><a href="#connectors-snaps-metric-currentqueuesizeinbytes_oracle"><code>CurrentQueueSizeInBytes</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The current volume, in bytes, of records in the queue.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The connector also provides the following additional snapshot metrics when an incremental snapshot is executed:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 45%;">
<col style="width: 25%;">
<col style="width: 30%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attributes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-insnap-metric-chunkid_oracle"></a><a href="#connectors-insnap-metric-chunkid_oracle"><code>ChunkId</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The identifier of the current snapshot chunk.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-insnap-metric-chunkfrom_oracle"></a><a href="#connectors-insnap-metric-chunkfrom_oracle"><code>ChunkFrom</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The lower bound of the primary key set defining the current chunk.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-insnap-metric-chunkto_oracle"></a><a href="#connectors-insnap-metric-chunkto_oracle"><code>ChunkTo</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The upper bound of the primary key set defining the current chunk.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-insnap-metric-tablefrom_oracle"></a><a href="#connectors-insnap-metric-tablefrom_oracle"><code>TableFrom</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The lower bound of the primary key set of the currently snapshotted table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-insnap-metric-tableto_oracle"></a><a href="#connectors-insnap-metric-tableto_oracle"><code>TableTo</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The upper bound of the primary key set of the currently snapshotted table.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="oracle-streaming-metrics"><a class="anchor" href="#oracle-streaming-metrics"></a>Streaming Metrics</h3>
<div id="oracle-monitoring-streaming" class="paragraph">
<p>The <strong>MBean</strong> is <code>debezium.oracle:type=connector-metrics,context=streaming,server=<em>&lt;topic.prefix&gt;</em></code>.</p>
</div>
<div class="paragraph">
<p>The following table lists the streaming metrics that are available.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 45%;">
<col style="width: 25%;">
<col style="width: 30%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attributes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-lastevent_oracle"></a><a href="#connectors-strm-metric-lastevent_oracle"><code>LastEvent</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The last streaming event that the connector has read.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-millisecondssincelastevent_oracle"></a><a href="#connectors-strm-metric-millisecondssincelastevent_oracle"><code>MilliSecondsSinceLastEvent</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of milliseconds since the connector has read and processed the most recent event.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-totalnumberofeventsseen_oracle"></a><a href="#connectors-strm-metric-totalnumberofeventsseen_oracle"><code>TotalNumberOfEventsSeen</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of data change events reported by the source database since the last connector start, or since a metrics reset.
Represents the data change workload for Debezium to process.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-totalnumberofcreateeventsseen_oracle"></a><a href="#connectors-strm-metric-totalnumberofcreateeventsseen_oracle"><code>TotalNumberOfCreateEventsSeen</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of create events processed by the connector since its last start or metrics reset.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-totalnumberofupdateeventsseen_oracle"></a><a href="#connectors-strm-metric-totalnumberofupdateeventsseen_oracle"><code>TotalNumberOfUpdateEventsSeen</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of update events processed by the connector since its last start or metrics reset.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-totalnumberofdeleteeventsseen_oracle"></a><a href="#connectors-strm-metric-totalnumberofdeleteeventsseen_oracle"><code>TotalNumberOfDeleteEventsSeen</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of delete events processed by the connector since its last start or metrics reset.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-numberofeventsfiltered_oracle"></a><a href="#connectors-strm-metric-numberofeventsfiltered_oracle"><code>NumberOfEventsFiltered</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of events that have been filtered by include/exclude list filtering rules configured on the connector.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-capturedtables_oracle"></a><a href="#connectors-strm-metric-capturedtables_oracle"><code>CapturedTables</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string[]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The list of tables that are captured by the connector.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-queuetotalcapacity_oracle"></a><a href="#connectors-strm-metric-queuetotalcapacity_oracle"><code>QueueTotalCapacity</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The length the queue used to pass events between the streamer and the main Kafka Connect loop.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-queueremainingcapacity_oracle"></a><a href="#connectors-strm-metric-queueremainingcapacity_oracle"><code>QueueRemainingCapacity</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The free capacity of the queue used to pass events between the streamer and the main Kafka Connect loop.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-connected_oracle"></a><a href="#connectors-strm-metric-connected_oracle"><code>Connected</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Flag that denotes whether the connector is currently connected to the database server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-millisecondsbehindsource_oracle"></a><a href="#connectors-strm-metric-millisecondsbehindsource_oracle"><code>MilliSecondsBehindSource</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of milliseconds between the last change event&#8217;s timestamp and the connector processing it.
The values will incorporate any differences between the clocks on the machines where the database server and the connector are running.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-numberofcommittedtransactions_oracle"></a><a href="#connectors-strm-metric-numberofcommittedtransactions_oracle"><code>NumberOfCommittedTransactions</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of processed transactions that were committed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-sourceeventposition_oracle"></a><a href="#connectors-strm-metric-sourceeventposition_oracle"><code>SourceEventPosition</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Map&lt;String, String&gt;</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The coordinates of the last received event.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-lasttransactionid_oracle"></a><a href="#connectors-strm-metric-lasttransactionid_oracle"><code>LastTransactionId</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Transaction identifier of the last processed transaction.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-maxqueuesizeinbytes_oracle"></a><a href="#connectors-strm-metric-maxqueuesizeinbytes_oracle"><code>MaxQueueSizeInBytes</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum buffer of the queue in bytes. This metric is available if <a href="#oracle-property-max-queue-size-in-bytes"><code>max.queue.size.in.bytes</code></a> is set to a positive long value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-strm-metric-currentqueuesizeinbytes_oracle"></a><a href="#connectors-strm-metric-currentqueuesizeinbytes_oracle"><code>CurrentQueueSizeInBytes</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The current volume, in bytes, of records in the queue.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Debezium Oracle connector also provides the following additional streaming metrics:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 18. Descriptions of additional streaming metrics</caption>
<colgroup>
<col style="width: 45%;">
<col style="width: 25%;">
<col style="width: 30%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attributes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-currentscn"></a><a href="#oracle-streaming-metrics-currentscn"><code>CurrentScn</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BigInteger</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The most recent system change number that has been processed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-oldest-scn"></a><a href="#oracle-streaming-metrics-oldest-scn"><code>OldestScn</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BigInteger</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The oldest system change number in the transaction buffer.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-oldest-scn-age-in-milliseconds"></a><a href="#oracle-streaming-metrics-oldest-scn-age-in-milliseconds"><code>OldestScnAgeInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The oldest system change number&#8217;s age in milliseconds.
If the buffer is empty, the value will be <code>0</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-committed-scn"></a><a href="#oracle-streaming-metrics-committed-scn"><code>CommittedScn</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BigInteger</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The last committed system change number from the transaction buffer.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-offset-scn"></a><a href="#oracle-streaming-metrics-offset-scn"><code>OffsetScn</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BigInteger</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The system change number currently written to the connector&#8217;s offsets.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-currentredologfilename"></a><a href="#oracle-streaming-metrics-currentredologfilename"><code>CurrentRedoLogFileName</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string[]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Array of the log files that are currently mined.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-minimumminedlogcount"></a><a href="#oracle-streaming-metrics-minimumminedlogcount"><code>MinimumMinedLogCount</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The minimum number of logs specified for any LogMiner session.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-maximumminedlogcount"></a><a href="#oracle-streaming-metrics-maximumminedlogcount"><code>MaximumMinedLogCount</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum number of logs specified for any LogMiner session.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-redologstatus"></a><a href="#oracle-streaming-metrics-redologstatus"><code>RedoLogStatus</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string[]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Array of the current state for each mined logfile with the format <code><em>filename</em>|<em>status</em></code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-switchcounter"></a><a href="#oracle-streaming-metrics-switchcounter"><code>SwitchCounter</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of times the database has performed a log switch for the last day.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-lastcaptureddmlcount"></a><a href="#oracle-streaming-metrics-lastcaptureddmlcount"><code>LastCapturedDmlCount</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of DML operations observed in the last LogMiner session query.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-maxcaptureddmlinbatch"></a><a href="#oracle-streaming-metrics-maxcaptureddmlinbatch"><code>MaxCapturedDmlInBatch</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum number of DML operations observed while processing a single LogMiner session query.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-totalcaptureddmlcount"></a><a href="#oracle-streaming-metrics-totalcaptureddmlcount"><code>TotalCapturedDmlCount</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of DML operations observed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-fetchingquerycount"></a><a href="#oracle-streaming-metrics-fetchingquerycount"><code>FetchingQueryCount</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of LogMiner session query (aka batches) performed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-lastdurationoffetchqueryinmilliseconds"></a><a href="#oracle-streaming-metrics-lastdurationoffetchqueryinmilliseconds"><code>LastDurationOfFetchQueryInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The duration of the last LogMiner session query&#8217;s fetch in milliseconds.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-maxdurationoffetchqueryinmilliseconds"></a><a href="#oracle-streaming-metrics-maxdurationoffetchqueryinmilliseconds"><code>MaxDurationOfFetchQueryInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum duration of any LogMiner session query&#8217;s fetch in milliseconds.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-lastbatchprocessingtimeinmilliseconds"></a><a href="#oracle-streaming-metrics-lastbatchprocessingtimeinmilliseconds"><code>LastBatchProcessingTimeInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The duration for processing the last LogMiner query batch results in milliseconds.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-totalparsetimeinmilliseconds"></a><a href="#oracle-streaming-metrics-totalparsetimeinmilliseconds"><code>TotalParseTimeInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The time in milliseconds spent parsing DML event SQL statements.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-lastminingsessionstarttimeinmilliseconds"></a><a href="#oracle-streaming-metrics-lastminingsessionstarttimeinmilliseconds"><code>LastMiningSessionStartTimeInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The duration in milliseconds to start the last LogMiner session.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-maxminingsessionstarttimeinmilliseconds"></a><a href="#oracle-streaming-metrics-maxminingsessionstarttimeinmilliseconds"><code>MaxMiningSessionStartTimeInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The longest duration in milliseconds to start a LogMiner session.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-totalminingsessionstarttimeinmilliseconds"></a><a href="#oracle-streaming-metrics-totalminingsessionstarttimeinmilliseconds"><code>TotalMiningSessionStartTimeInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total duration in milliseconds spent by the connector starting LogMiner sessions.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-minbatchprocessingtimeinmilliseconds"></a><a href="#oracle-streaming-metrics-minbatchprocessingtimeinmilliseconds"><code>MinBatchProcessingTimeInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The minimum duration in milliseconds spent processing results from a single LogMiner session.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-maxbatchprocessingtimeinmilliseconds"></a><a href="#oracle-streaming-metrics-maxbatchprocessingtimeinmilliseconds"><code>MaxBatchProcessingTimeInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum duration in milliseconds spent processing results from a single LogMiner session.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-totalprocessingtimeinmilliseconds"></a><a href="#oracle-streaming-metrics-totalprocessingtimeinmilliseconds"><code>TotalProcessingTimeInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total duration in milliseconds spent processing results from LogMiner sessions.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-totalresultsetnexttimeinmilliseconds"></a><a href="#oracle-streaming-metrics-totalresultsetnexttimeinmilliseconds"><code>TotalResultSetNextTimeInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total duration in milliseconds spent by the JDBC driver fetching the next row to be processed from the log mining view.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-totalprocessedrows"></a><a href="#oracle-streaming-metrics-totalprocessedrows"><code>TotalProcessedRows</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of rows processed from the log mining view across all sessions.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-batchsize"></a><a href="#oracle-streaming-metrics-batchsize"><code>BatchSize</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of entries fetched by the log mining query per database round-trip.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-millisecondtosleepbetweenminingquery"></a><a href="#oracle-streaming-metrics-millisecondtosleepbetweenminingquery"><code>MillisecondToSleepBetweenMiningQuery</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of milliseconds the connector sleeps before fetching another batch of results from the log mining view.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-maxbatchprocessingthroughput"></a><a href="#oracle-streaming-metrics-maxbatchprocessingthroughput"><code>MaxBatchProcessingThroughput</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum number of rows/second processed from the log mining view.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-averagebatchprocessingthroughput"></a><a href="#oracle-streaming-metrics-averagebatchprocessingthroughput"><code>AverageBatchProcessingThroughput</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The average number of rows/second processed from the log mining.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-lastbatchprocessingthroughput"></a><a href="#oracle-streaming-metrics-lastbatchprocessingthroughput"><code>LastBatchProcessingThroughput</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The average number of rows/second processed from the log mining view for the last batch.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-networkconnectionproblemscounter"></a><a href="#oracle-streaming-metrics-networkconnectionproblemscounter"><code>NetworkConnectionProblemsCounter</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of connection problems detected.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-hourstokeeptransactioninbuffer"></a><a href="#oracle-streaming-metrics-hourstokeeptransactioninbuffer"><code>HoursToKeepTransactionInBuffer</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of hours that transactions are retained by the connector&#8217;s in-memory buffer without being committed or rolled back before being discarded.
For more information, see <a href="#oracle-property-log-mining-transaction-retention-ms"><code>log.mining.transaction.retention.ms</code></a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-number-of-active-transactions"></a><a href="#oracle-streaming-metrics-number-of-active-transactions"><code>NumberOfActiveTransactions</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of current active transactions in the transaction buffer.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-number-of-committed-transactions"></a><a href="#oracle-streaming-metrics-number-of-committed-transactions"><code>NumberOfCommittedTransactions</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of committed transactions in the transaction buffer.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-number-of-oversized-transactions"></a><a href="#oracle-streaming-metrics-number-of-oversized-transactions"><code>NumberOfOversizedTransactions</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of transactions that were discarded because their size exceeded <a href="#oracle-property-log-mining-buffer-transaction-events-threshold"><code>log.mining.buffer.transaction.events.threshold</code></a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-number-of-rolledback-transactions"></a><a href="#oracle-streaming-metrics-number-of-rolledback-transactions"><code>NumberOfRolledBackTransactions</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of rolled back transactions in the transaction buffer.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-commit-throughput"></a><a href="#oracle-streaming-metrics-commit-throughput"><code>CommitThroughput</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The average number of committed transactions per second in the transaction buffer.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-registered-dml-count"></a><a href="#oracle-streaming-metrics-registered-dml-count"><code>RegisteredDmlCount</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of registered DML operations in the transaction buffer.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-lag-from-source-in-milliseconds"></a><a href="#oracle-streaming-metrics-lag-from-source-in-milliseconds"><code>LagFromSourceInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The time difference in milliseconds between when a change occurred in the transaction logs and when its added to the transaction buffer.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-max-lag-from-source-in-milliseconds"></a><a href="#oracle-streaming-metrics-max-lag-from-source-in-milliseconds"><code>MaxLagFromSourceInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum time difference in milliseconds between when a change occurred in the transaction logs and when its added to the transaction buffer.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-min-lag-from-source-in-milliseconds"></a><a href="#oracle-streaming-metrics-min-lag-from-source-in-milliseconds"><code>MinLagFromSourceInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The minimum time difference in milliseconds between when a change occurred in the transaction logs and when its added to the transaction buffer.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-abandoned-transaction-ids"></a><a href="#oracle-streaming-metrics-abandoned-transaction-ids"><code>AbandonedTransactionIds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string[]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An array of the most recent abandoned transaction identifiers removed from the transaction buffer due to their age.
See <a href="#oracle-property-log-mining-transaction-retention-ms"><code>log.mining.transaction.retention.ms</code></a> for details.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-abandoned-transaction-count"></a><a href="#oracle-streaming-metrics-abandoned-transaction-count"><code>AbandonedTransactionCount</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Current number of entries in the <a href="#oracle-streaming-metrics-abandoned-transaction-ids">abandoned transactions</a> list.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-rolled-back-transaction-ids"></a><a href="#oracle-streaming-metrics-rolled-back-transaction-ids"><code>RolledBackTransactionIds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string[]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An array of the most recent transaction identifiers that have been mined and rolled back in the transaction buffer.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-last-commit-duration-in-milliseconds"></a><a href="#oracle-streaming-metrics-last-commit-duration-in-milliseconds"><code>LastCommitDurationInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The duration of the last transaction buffer commit operation in milliseconds.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-max-commit-duration-in-milliseconds"></a><a href="#oracle-streaming-metrics-max-commit-duration-in-milliseconds"><code>MaxCommitDurationInMilliseconds</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The duration of the longest transaction buffer commit operation in milliseconds.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-error-count"></a><a href="#oracle-streaming-metrics-error-count"><code>ErrorCount</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of errors detected.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-warning-count"></a><a href="#oracle-streaming-metrics-warning-count"><code>WarningCount</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of warnings detected.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-scn-freeze-count"></a><a href="#oracle-streaming-metrics-scn-freeze-count"><code>ScnFreezeCount</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of times that the system change number was checked for advancement and remains unchanged.
A high value can indicate that a long-running transactions is ongoing and is preventing the connector from flushing the most recently processed system change number to the connector&#8217;s offsets.
When conditions are optimal, the value should be close to or equal to <code>0</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-unparsable-ddl-count"></a><a href="#oracle-streaming-metrics-unparsable-ddl-count"><code>UnparsableDdlCount</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of DDL records that have been detected but could not be parsed by the DDL parser.
This should always be <code>0</code>; however when allowing unparsable DDL to be skipped, this metric can be used to determine if any warnings have been written to the connector logs.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-mining-session-user-global-area-memory-in-bytes"></a><a href="#oracle-streaming-metrics-mining-session-user-global-area-memory-in-bytes"><code>MiningSessionUserGlobalAreaMemoryInBytes</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The current mining session&#8217;s user global area (UGA) memory consumption in bytes.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-mining-session-user-global-area-max-memory-in-bytes"></a><a href="#oracle-streaming-metrics-mining-session-user-global-area-max-memory-in-bytes"><code>MiningSessionUserGlobalAreaMaxMemoryInBytes</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum mining session&#8217;s user global area (UGA) memory consumption in bytes across all mining sessions.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-mining-session-process-global-area-memory-in-bytes"></a><a href="#oracle-streaming-metrics-mining-session-process-global-area-memory-in-bytes"><code>MiningSessionProcessGlobalAreaMemoryInBytes</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The current mining session&#8217;s process global area (PGA) memory consumption in bytes.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-streaming-metrics-mining-session-process-global-area-max-memory-in-bytes"></a><a href="#oracle-streaming-metrics-mining-session-process-global-area-max-memory-in-bytes"><code>MiningSessionProcessGlobalAreaMaxMemoryInBytes</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum mining session&#8217;s process global area (PGA) memory consumption in bytes across all mining sessions.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="oracle-schema-history-metrics"><a class="anchor" href="#oracle-schema-history-metrics"></a>Schema History Metrics</h3>
<div id="oracle-monitoring-schema-history" class="paragraph">
<p>The <strong>MBean</strong> is <code>debezium.oracle:type=connector-metrics,context=schema-history,server=<em>&lt;topic.prefix&gt;</em></code>.</p>
</div>
<div class="paragraph">
<p>The following table lists the schema history metrics that are available.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 45%;">
<col style="width: 25%;">
<col style="width: 30%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attributes</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-shist-metric-status_oracle"></a><a href="#connectors-shist-metric-status_oracle"><code>Status</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>One of <code>STOPPED</code>, <code>RECOVERING</code> (recovering history from the storage), <code>RUNNING</code> describing the state of the database schema history.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-shist-metric-recoverystarttime_oracle"></a><a href="#connectors-shist-metric-recoverystarttime_oracle"><code>RecoveryStartTime</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The time in epoch seconds at what recovery has started.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-shist-metric-changesrecovered_oracle"></a><a href="#connectors-shist-metric-changesrecovered_oracle"><code>ChangesRecovered</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of changes that were read during recovery phase.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-shist-metric-changesapplied_oracle"></a><a href="#connectors-shist-metric-changesapplied_oracle"><code>ChangesApplied</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>the total number of schema changes applied during recovery and runtime.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-shist-metric-millisecondssincelastrecoveredchange_oracle"></a><a href="#connectors-shist-metric-millisecondssincelastrecoveredchange_oracle"><code>MilliSecondsSinceLast&#8203;RecoveredChange</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of milliseconds that elapsed since the last change was recovered from the history store.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-shist-metric-millisecondssincelastappliedchange_oracle"></a><a href="#connectors-shist-metric-millisecondssincelastappliedchange_oracle"><code>MilliSecondsSinceLast&#8203;AppliedChange</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of milliseconds that elapsed since the last change was applied.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-shist-metric-lastrecoveredchange_oracle"></a><a href="#connectors-shist-metric-lastrecoveredchange_oracle"><code>LastRecoveredChange</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The string representation of the last change recovered from the history store.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="connectors-shist-metric-lastappliedchange_oracle"></a><a href="#connectors-shist-metric-lastappliedchange_oracle"><code>LastAppliedChange</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The string representation of the last applied change.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="surrogate-schema-evolution"><a class="anchor" href="#surrogate-schema-evolution"></a>Surrogate schema evolution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Oracle connector automatically tracks and applies table schema changes by parsing DDL from the redo logs.
If the DDL parser encounters an incompatible statement, if needed, the connector provides an alternative way to apply the schema change.</p>
</div>
<div class="paragraph">
<p>By default, the connector stops when it encounters a DDL statement that it cannot parse.
You can use Debezium <a href="/documentation/reference/configuration/signalling">signaling</a> to trigger the update of the database schema from such DDL statements.</p>
</div>
<div class="paragraph">
<p>The type of the schema update action is <code>schema-changes</code>.
This action updates the schema of all tables enumerated in the signal parameters.
The message does not contain the update to the schema.
Instead, it contains the complete new schema structure.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 19. Action parameters</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>database</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Oracle database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schema</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the schema where changes are applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An array containing the requested schema updates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changes.type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the schema change, usually <code>ALTER</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changes.id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The fully-qualified name of the table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changes.table</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The fully-qualified name of the table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changes.table.defaultCharsetName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The character set name used for the table if different from database default</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changes.table.primaryKeyColumnNames</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array with the name of columns composing the primary key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changes.table.columns</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array with the column metadata</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;columns.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the column</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;columns.jdbcType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The JDBC type of the column as defined at <a href="https://docs.oracle.com/javase/8/docs/api/java/sql/Types.html">JDBC API</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;columns.typeName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the column type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;columns.typeExpression</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The full column type definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;columns.charsetName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The column character set if different from the default</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;columns.length</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The length/size constraint of the column</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;columns.scale</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The scale of numeric column</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;columns.position</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The position of the column in the table starting with <code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;columns.optional</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean <code>true</code> if column value is not mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;columns.autoIncremented</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean <code>true</code> if column value is automatically calculated from a sequence</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;columns.generated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean <code>true</code> if column value is automatically calculated</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>After the <code>schema-changes</code> signal is inserted, the connector must be restarted with an altered configuration that includes specifying the  <a href="#oracle-property-database-history-skip-unparseable-ddl"><code>schema.history.internal.skip.unparseable.ddl</code></a> option as <code>true</code>.
After the connector&#8217;s commit SCN advances beyond the DDL change, to prevent unparseable DDL statements from being skipped unexpectedly, return the connector configuration to its previous state.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 20. Example of a logging record</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>924e3ff8-2245-43ca-ba77-2af9af02fa07</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>schema-changes</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">data</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
   "database":"ORCLPDB1",
   "schema":"DEBEZIUM",
   "changes":[
      {
         "type":"ALTER",
         "id":"\"ORCLPDB1\".\"DEBEZIUM\".\"CUSTOMER\"",
         "table":{
            "defaultCharsetName":null,
            "primaryKeyColumnNames":[
               "ID",
               "NAME"
            ],
            "columns":[
               {
                  "name":"ID",
                  "jdbcType":2,
                  "typeName":"NUMBER",
                  "typeExpression":"NUMBER",
                  "charsetName":null,
                  "length":9,
                  "scale":0,
                  "position":1,
                  "optional":false,
                  "autoIncremented":false,
                  "generated":false
               },
               {
                  "name":"NAME",
                  "jdbcType":12,
                  "typeName":"VARCHAR2",
                  "typeExpression":"VARCHAR2",
                  "charsetName":null,
                  "length":1000,
                  "position":2,
                  "optional":true,
                  "autoIncremented":false,
                  "generated":false
               },
               {
                  "name":"SCORE",
                  "jdbcType":2,
                  "typeName":"NUMBER",
                  "typeExpression":"NUMBER",
                  "charsetName":null,
                  "length":6,
                  "scale":2,
                  "position":3,
                  "optional":true,
                  "autoIncremented":false,
                  "generated":false
               },
               {
                  "name":"REGISTERED",
                  "jdbcType":93,
                  "typeName":"TIMESTAMP(6)",
                  "typeExpression":"TIMESTAMP(6)",
                  "charsetName":null,
                  "length":6,
                  "position":4,
                  "optional":true,
                  "autoIncremented":false,
                  "generated":false
               }
            ]
         }
      }
   ]
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="oracle-openlogreplicator-support"><a class="anchor" href="#oracle-openlogreplicator-support"></a>OpenLogReplicator support</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The OpenLogReplicator ingestion adapter is currently in incubating state, i.e. exact semantics, configuration options etc. may change in future revisions, based on the feedback we receive.
Please let us know if you encounter any problems.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Debezium Oracle connector by default ingests changes using native Oracle LogMiner.
However, the connector can be toggled to use OpenLogReplicator, an open-source and free third-party application that reads Oracle changes directly from the redo and archive logs with low impact on the database.
To configure the connector to use OpenLogReplicator, you must apply specific database and connector configurations that differ from those that you use with LogMiner.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Download and compile OpenLogReplicator for your database environment.</p>
</li>
<li>
<p>OpenLogReplicator must be installed with direct access to the archive and redo log files. This does not necessarily require installation on the physical database server if the archive and redo logs can be accessed via some shared filesystem.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_how_openlogreplicator_works"><a class="anchor" href="#_how_openlogreplicator_works"></a>How OpenLogReplicator works</h3>
<div class="paragraph">
<p>OpenLogReplicator takes on the role of Oracle LogMiner and Oracle XStream when the Debezium Oracle connector streams changes.
It is responsible for the capturing of changes in the redo and archive logs as they occur and batching those changes into logical transactions.
Debezium Oracle connector is a consumer of OpenLogReplicator by connecting to the network endpoint provided by OpenLogReplicator and ingesting the transactions as they&#8217;re batched.</p>
</div>
<div class="paragraph">
<p>After the OpenLogReplicator adapter ingests changes, the Debezium Oracle connector transforms the events into <a href="#oracle-events">data change events</a> just like any other adapter.</p>
</div>
<div class="paragraph">
<p>From a network topology perspective, the Debezium Oracle connector relies on network connections to both the Oracle database and to the OpenLogReplicator.
Similarly, OpenLogReplicator requires a network connection to the Oracle database, as well as direct access to the raw redo and archive logs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_preparing_the_database_2"><a class="anchor" href="#_preparing_the_database_2"></a>Preparing the database</h3>
<div class="paragraph">
<p>The Oracle database must be configured to generate specific files, called archive logs.
An archive log is a saved copy of a full online redo log.
The database must be placed in <code>ARCHIVELOG</code> mode before it can archive redo log files.
To place the database in <code>ARCHIVELOG</code> mode, you must set specific configuration properties to specify the destination for saving the archive log files.</p>
</div>
<div class="paragraph">
<p>The following example shows a command for placing a database into archive log mode:</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Configuration needed for OpenLogReplicator</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ORACLE_SID=ORCLCDB dbz_oracle sqlplus /nolog

CONNECT sys/top_secret AS SYSDBA
alter system set db_recovery_file_dest_size = 5G;
alter system set db_recovery_file_dest = '/opt/oracle/oradata/recovery_area' scope=spfile;
shutdown immediate
startup mount
alter database archivelog;
alter database open;
-- Should show "Database log mode: Archive Mode"
archive log list

exit;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For Debezium to generate change events that show the <code>before</code> and <code>after</code> states of a table row, supplemental logging must be active on the database.
Supplemental logging adds column data to the redo logs to identify the rows that are affected when a table is modified.</p>
</div>
<div class="paragraph">
<p>You can use different methods to configure supplemental logging.
To support Debezium, you must enable at least minimal database-level supplemental logging.
Minimal supplemental logging writes the least amount of information needed to be able to create change events.
The following example shows a command that you might use to enable minimal supplemental logging.</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Configure database-level supplemental logging</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">ALTER DATABASE ADD SUPPLEMENTAL LOG DATA</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Debezium for Oracle can work with a higher degree of supplemental logging at the database level, if that is already configured for other purposes.
But if you do not require higher fidelity logging to support other applications, you can reduce database-level logging to the minimum level.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For each captured table, you must explicitly configure a higher fidelity supplemental logging, called <code>(ALL) COLUMNS</code>.
The <code>(ALL) COLUMNS</code> logging level guarantees that Oracle captures the state of a column regardless of whether the column changed when a redo entry is written to the redo log.
Enabling the higher logging level enables Debezium for Oracle to generate change events that provide the accurate <em>before</em> and <em>after</em> states for a row.</p>
</div>
<div class="paragraph">
<p>The following example shows a command for enabling supplemental logging for each captured table.</p>
</div>
<div class="exampleblock">
<div class="title">Example 4. Configure captured table supplemental logging</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">ALTER TABLE inventory.customers ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Whenever new tables are added to the Debezium Oracle&#8217;s connector configuration, you must configure supplemental logging for each table.
If a table that is configured for capture is not correctly configured for supplemental logging, after the connector begins streaming, it returns a warning message.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_creating_connector_users"><a class="anchor" href="#_creating_connector_users"></a>Creating connector users</h3>
<div class="paragraph">
<p>The Debezium Oracle connector requires a user account to be set up with specific permissions so that the connector can capture change events.
This user account will be used by both Debezium and OpenLogReplicator.
The following example shows a possible user account configuration for deploying Debezium with OpenLogReplicator in a multi-tenant Oracle environment.</p>
</div>
<div id="oracle-create-users-openlogreplicator" class="exampleblock">
<div class="title">Example 5. Creating OpenLogReplicator user</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs"># Create Log Miner Tablespace and User
sqlplus sys/top_secret@//localhost:1521/ORCLCDB as sysdba &lt;&lt;- EOF
  CREATE TABLESPACE LOGMINER_TBS DATAFILE '/opt/oracle/oradata/ORCLCDB/logminer_tbs.dbf' SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;
  exit;
EOF

sqlplus sys/top_secret@//localhost:1521/ORCLPDB1 as sysdba &lt;&lt;- EOF
  CREATE TABLESPACE LOGMINER_TBS DATAFILE '/opt/oracle/oradata/ORCLCDB/ORCLPDB1/logminer_tbs.dbf' SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;
  exit;
EOF

sqlplus sys/top_secret@//localhost:1521/ORCLCDB as sysdba &lt;&lt;- EOF
  CREATE USER c##dbzuser IDENTIFIED BY dbz DEFAULT TABLESPACE LOGMINER_TBS QUOTA UNLIMITED ON LOGMINER_TBS CONTAINER=ALL;

  -- Debezium specific permissions
  GRANT CREATE SESSION TO c##dbzuser CONTAINER=ALL;
  GRANT SET CONTAINER TO c##dbzuser CONTAINER=ALL;
  GRANT SELECT ON V_\$DATABASE TO c##dbzuser CONTAINER=ALL;
  GRANT SELECT ANY DICTIONARY TO c##dbzuser CONTAINER=ALL;
  GRANT LOCK ANY TABLE TO c##dbzuser CONTAINER=ALL;
  -- These can be reduced from ANY TABLE to your captured tables depending on your security model
  GRANT SELECT ANY TABLE TO c##dbzuser CONTAINER=ALL;
  GRANT FLASHBACK ANY TABLE TO c##dbzuser CONTAINER=ALL;

  -- OpenLogReplicator specific permissions
  ALTER SESSION SET CONTAINER = ORCLPDB1;
  GRANT SELECT, FLASHBACK ON SYS.CCOL$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.CDEF$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.COL$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.DEFERRED_STG$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.ECOL$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.LOB$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.LOBCOMPPART$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.LOBFRAG$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.OBJ$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.TAB$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.TABCOMPART$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.TABPART$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.TABSUBPART$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.TS$ TO c##dbzuser;
  GRANT SELECT, FLASHBACK ON SYS.USER$ TO c##dbzuser;

  exit;
EOF</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="selecting-the-open-log-replicator-adapter"><a class="anchor" href="#selecting-the-open-log-replicator-adapter"></a>Configuring the OpenLogReplicator adapter</h3>
<div class="paragraph">
<p>By default, Debezium uses Oracle LogMiner to ingest change events from Oracle.
You can modify the default settings to configure the connector to use the OpenLogReplicator adapter in place of LogMiner.</p>
</div>
<div class="paragraph">
<p>In the example that follows, the following properties are added to the connector configuration to enable the connector to use the OpenLogReplicator adapter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>database.connection.adapter</code></p>
</li>
<li>
<p><code>openlogreplicator.source</code></p>
</li>
<li>
<p><code>openlogreplicator.host</code></p>
</li>
<li>
<p><code>openlogreplicator.port</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "name": "inventory-connector",
    "config": {
        "connector.class" : "io.debezium.connector.oracle.OracleConnector",
        "tasks.max" : "1",
        "topic.prefix" : "server1",
        "database.hostname" : "&lt;oracle ip&gt;",
        "database.port" : "1521",
        "database.user" : "c##dbzuser",
        "database.password" : "dbz",
        "database.dbname" : "ORCLCDB",
        "database.pdb.name" : "ORCLPDB1",
        "schema.history.internal.kafka.bootstrap.servers" : "kafka:9092",
        "schema.history.internal.kafka.topic": "schema-changes.inventory",
        "database.connection.adapter": "olr",
        "openlogreplicator.source": "ORACLE",
        "openlogreplicator.host": "&lt;ip address or hostname of OpenLogReplicator&gt;",
        "openlogreplicator.port": "&lt;port OpenLogReplicator is listening on&gt;"
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="building-openlogreplicator"><a class="anchor" href="#building-openlogreplicator"></a>Building OpenLogReplicator</h3>
<div class="paragraph">
<p>OpenLogReplicator does not distribute binaries, so you must build the third-party tool from code.
OpenLogReplicator is written in C++; however, the author provides a container image to build the source for a variety of operating systems, including RHEL, Fedora, CentOS, Debian, and others.
For information about how to build the tool using a container, see the This <a href="https://github.com/bersler/OpenLogReplicator-docker">OpenLogReplicator GitHub repository</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="obtaining-oracle-jdbc-driver-openlogreplicator"><a class="anchor" href="#obtaining-oracle-jdbc-driver-openlogreplicator"></a>Obtaining the Oracle JDBC driver for OpenLogReplicator</h3>
<div class="paragraph">
<p>When you use the Debezium Oracle connector with the OpenLogReplicator, you must  obtain the Oracle JDBC driver to connect to Oracle databases.
For more information, see <a href="#obtaining-the-oracle-jdbc-driver">Obtaining the Oracle JDBC driver</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="oracle-openlogreplicator-configuration"><a class="anchor" href="#oracle-openlogreplicator-configuration"></a>OpenLogReplicator configuration</h3>
<div class="paragraph">
<p>OpenLogReplicator is a third-party standalone process that is responsible for reading the Oracle redo and archive logs.
Unlike other Debezium Oracle adapters, this means that there are two configurable components that must be configured independently of one another.</p>
</div>
<div class="paragraph">
<p>You configure OpenLogReplicator by using a JSON file called <code>scripts/OpenLogReplicator.json</code>.
For more information about the required format of this file, see the <a href="https://github.com/bersler/OpenLogReplicator/blob/master/documentation/reference-manual/reference-manual.adoc#openlogreplicator-json-file-format">OpenLogReplicator documentation</a>.</p>
</div>
<div class="exampleblock">
<div class="title">Example 6. OpenLogReplicator configuration</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "version": "1.5.0",
  "source": [{
    "alias": "SOURCE",
    "name": "ORACLE", <i class="conum" data-value="1"></i><b>(1)</b>
    "reader": {
      "type": "online",
      "path-mapping": ["/opt/olr/recovery_area", "/opt/olr/recovery_area/ORCLCDB/archivelog"], <i class="conum" data-value="2"></i><b>(2)</b>
      "user": "c##dbzuser", <i class="conum" data-value="3"></i><b>(3)</b>
      "password": "dbz", <i class="conum" data-value="4"></i><b>(4)</b>
      "server": "//&lt;ip&gt;:&lt;port&gt;/ORCLPDB1" <i class="conum" data-value="5"></i><b>(5)</b>
    },
    "format": { <i class="conum" data-value="6"></i><b>(6)</b>
      "type": "json",
      "column": 2,
      "db": 3,
      "interval-dts": 9,
      "interval-ytm": 4,
      "message": 2,
      "rid": 1,
      "schema": 7,
      "scn-all": 1,
      "timestamp-all": 1
    }
  }],
  "target": [{
    "alias": "DEBEZIUM",
    "source": "SOURCE",
    "writer": {
      "type": "network", <i class="conum" data-value="7"></i><b>(7)</b>
      "uri": "&lt;host&gt;:&lt;port&gt;" <i class="conum" data-value="8"></i><b>(8)</b>
    }
  }]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This should match the <code>openlogreplicator.source</code> connector configuration.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>List of file path pairs <code>[before1,after1,befor2,after2,&#8230;&#8203;]</code> where if a log file path matches one of the <code>beforeX</code> prefixes, the prefix is replaced with the <code>afterX</code> path.  This is useful when OpenLogReplicator is running on a different host than the source database and the path to the redo and archive logs different between the database and the OpenLogReplicator process.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This should match the <code>database.user</code> connector property.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This should match the <code>database.password</code> connector property.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>This should point to the database host, port, and Oracle SID.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>This specifies the payload format ingested by Debezium Oracle connector. Use these values as specified, as these are the only format options that we require beyond the defaults.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>This must specify <code>network</code>, as Debezium Oracle connector communicates with OpenLogReplicator via a network connection.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>This specifies the bind host and port that OpenLogReplicator listens for connections on.  This should be accessible by Debezium Oracle connector.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="oracle-openlogreplicator-connector-properties"><a class="anchor" href="#oracle-openlogreplicator-connector-properties"></a>OpenLogReplicator connector properties</h3>
<div class="paragraph">
<p>The following configuration properties are required when using OpenLogReplicator.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 25%;">
<col style="width: 45%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Property</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Description</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-openlogreplicator-source"></a><a href="#oracle-property-openlogreplicator-source"><code>openlogreplicator.source</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The logical name of the configured <code>source.name</code> element in the OpenLogReplicator JSON configuration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-openlogreplicator-host"></a><a href="#oracle-property-openlogreplicator-host"><code>openlogreplicator.host</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The host name or IP address of the OpenLogReplicator network service.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-openlogreplicator-port"></a><a href="#oracle-property-openlogreplicator-port"><code>openlogreplicator.port</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The port number that is used by the OpenLogReplicator network service.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="oracle-openlogreplicator-row-id-support"><a class="anchor" href="#oracle-openlogreplicator-row-id-support"></a>OpenLogReplicator ROWID support</h3>
<div class="paragraph">
<p>OpenLogReplicator does not provide the <code>ROWID</code> pseudocolumn details in its change event payloads.
Consequently, in environments that use the OpenLogReplicator adapter, the Debezium connector for Oracle consistently displays empty <code>row_id</code> values in the source information block.</p>
</div>
</div>
<div class="sect2">
<h3 id="oracle-openlogreplicator-xml-support"><a class="anchor" href="#oracle-openlogreplicator-xml-support"></a>OpenLogReplicator XML support</h3>
<div class="paragraph">
<p>To capture XML columns using Debezium Oracle connector with OpenLogReplicator, OpenLogReplicator should be 1.5.0 or later.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oracle-xstreams-support"><a class="anchor" href="#oracle-xstreams-support"></a>XStreams support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Debezium Oracle connector by default ingests changes using native Oracle LogMiner.
The connector can be toggled to use Oracle XStream instead.
To configure the connector to use Oracle XStream, you must apply specific database and connector configurations that differ from those that you use with LogMiner.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>To use the XStream API, you must have a license for the GoldenGate product.
Installing GoldenGate is not required.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_preparing_the_database_3"><a class="anchor" href="#_preparing_the_database_3"></a>Preparing the Database</h3>
<div class="listingblock">
<div class="title">Configuration needed for Oracle XStream</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ORACLE_SID=ORCLCDB dbz_oracle sqlplus /nolog

CONNECT sys/top_secret AS SYSDBA
alter system set db_recovery_file_dest_size = 5G;
alter system set db_recovery_file_dest = '/opt/oracle/oradata/recovery_area' scope=spfile;
alter system set enable_goldengate_replication=true;
shutdown immediate
startup mount
alter database archivelog;
alter database open;
-- Should show "Database log mode: Archive Mode"
archive log list

exit;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, supplemental logging must be enabled for captured tables or the database in order for data changes to capture the <em>before</em> state of changed database rows.
The following illustrates how to configure this on a specific table, which is the ideal choice to minimize the amount of information captured in the Oracle redo logs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ALTER TABLE inventory.customers ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_xstream_users_for_the_connector"><a class="anchor" href="#_creating_xstream_users_for_the_connector"></a>Creating XStream users for the connector</h3>
<div class="paragraph">
<p>The Debezium Oracle connector requires that users accounts be set up with specific permissions so that the connector can capture change events.
The following briefly describes these user configurations using a multi-tenant database model.</p>
</div>
<div id="oracle-create-users-xstream" class="listingblock">
<div class="title">Creating an XStream Administrator user</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">sqlplus sys/top_secret@//localhost:1521/ORCLCDB as sysdba
  CREATE TABLESPACE xstream_adm_tbs DATAFILE '/opt/oracle/oradata/ORCLCDB/xstream_adm_tbs.dbf'
    SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;
  exit;

sqlplus sys/top_secret@//localhost:1521/ORCLPDB1 as sysdba
  CREATE TABLESPACE xstream_adm_tbs DATAFILE '/opt/oracle/oradata/ORCLCDB/ORCLPDB1/xstream_adm_tbs.dbf'
    SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;
  exit;

sqlplus sys/top_secret@//localhost:1521/ORCLCDB as sysdba
  CREATE USER c##dbzadmin IDENTIFIED BY dbz
    DEFAULT TABLESPACE xstream_adm_tbs
    QUOTA UNLIMITED ON xstream_adm_tbs
    CONTAINER=ALL;

  GRANT CREATE SESSION, SET CONTAINER TO c##dbzadmin CONTAINER=ALL;

  BEGIN
     DBMS_XSTREAM_AUTH.GRANT_ADMIN_PRIVILEGE(
        grantee                 =&gt; 'c##dbzadmin',
        privilege_type          =&gt; 'CAPTURE',
        grant_select_privileges =&gt; TRUE,
        container               =&gt; 'ALL'
     );
  END;
  /

  exit;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Creating the connector&#8217;s XStream user</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">sqlplus sys/top_secret@//localhost:1521/ORCLCDB as sysdba
  CREATE TABLESPACE xstream_tbs DATAFILE '/opt/oracle/oradata/ORCLCDB/xstream_tbs.dbf'
    SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;
  exit;

sqlplus sys/top_secret@//localhost:1521/ORCLPDB1 as sysdba
  CREATE TABLESPACE xstream_tbs DATAFILE '/opt/oracle/oradata/ORCLCDB/ORCLPDB1/xstream_tbs.dbf'
    SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;
  exit;

sqlplus sys/top_secret@//localhost:1521/ORCLCDB as sysdba
  CREATE USER c##dbzuser IDENTIFIED BY dbz
    DEFAULT TABLESPACE xstream_tbs
    QUOTA UNLIMITED ON xstream_tbs
    CONTAINER=ALL;

  GRANT CREATE SESSION TO c##dbzuser CONTAINER=ALL;
  GRANT SET CONTAINER TO c##dbzuser CONTAINER=ALL;
  GRANT SELECT ON V_$DATABASE to c##dbzuser CONTAINER=ALL;
  GRANT FLASHBACK ANY TABLE TO c##dbzuser CONTAINER=ALL;
  GRANT SELECT_CATALOG_ROLE TO c##dbzuser CONTAINER=ALL;
  GRANT EXECUTE_CATALOG_ROLE TO c##dbzuser CONTAINER=ALL;
  exit;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_an_xstream_outbound_server"><a class="anchor" href="#_create_an_xstream_outbound_server"></a>Create an XStream Outbound Server</h3>
<div class="paragraph">
<p>Create an <a href="https://docs.oracle.com/cd/E11882_01/server.112/e16545/xstrm_cncpt.htm#XSTRM1088">XStream Outbound server</a>
(given the right privileges, this might be done automatically by the connector going forward, see <a href="https://issues.redhat.com/browse/DBZ-721">DBZ-721</a>):</p>
</div>
<div class="listingblock">
<div class="title">Create an XStream Outbound Server</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">sqlplus c##dbzadmin/dbz@//localhost:1521/ORCLCDB
DECLARE
  tables  DBMS_UTILITY.UNCL_ARRAY;
  schemas DBMS_UTILITY.UNCL_ARRAY;
BEGIN
    tables(1)  := NULL;
    schemas(1) := 'debezium';
  DBMS_XSTREAM_ADM.CREATE_OUTBOUND(
    server_name     =&gt;  'dbzxout',
    table_names     =&gt;  tables,
    schema_names    =&gt;  schemas);
END;
/
exit;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When setting up an XStream Outbound Server to capture changes from a pluggable database,
the <code>source_container_name</code> parameter should be provided specifying the pluggable database name.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Configure the XStream user account to connect to the XStream Outbound Server</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">sqlplus sys/top_secret@//localhost:1521/ORCLCDB as sysdba
BEGIN
  DBMS_XSTREAM_ADM.ALTER_OUTBOUND(
    server_name  =&gt; 'dbzxout',
    connect_user =&gt; 'c##dbzuser');
END;
/
exit;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A single XStream Outbound server cannot be shared by multiple Debezium Oracle connectors.
Each connector requires a unique XStream Outbound connector to be configured.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="selecting-the-xstream-adapter"><a class="anchor" href="#selecting-the-xstream-adapter"></a>Configuring the XStream adapter</h3>
<div class="paragraph">
<p>By default, Debezium uses Oracle LogMiner to ingest change events from Oracle.
You can adjust the connector configuration to enable the connector to use the Oracle XStreams adapter.</p>
</div>
<div class="paragraph">
<p>The following configuration example adds the properties <code>database.connection.adapter</code> and <code>database.out.server.name</code> to enable the connector to use the XStream API implementation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "name": "inventory-connector",
    "config": {
        "connector.class" : "io.debezium.connector.oracle.OracleConnector",
        "tasks.max" : "1",
        "topic.prefix" : "server1",
        "database.hostname" : "&lt;oracle ip&gt;",
        "database.port" : "1521",
        "database.user" : "c##dbzuser",
        "database.password" : "dbz",
        "database.dbname" : "ORCLCDB",
        "database.pdb.name" : "ORCLPDB1",
        "schema.history.internal.kafka.bootstrap.servers" : "kafka:9092",
        "schema.history.internal.kafka.topic": "schema-changes.inventory",
        "database.connection.adapter": "xstream",
        "database.out.server.name" : "dbzxout"
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="obtaining-oracle-jdbc-driver-and-xstreams-api-files"><a class="anchor" href="#obtaining-oracle-jdbc-driver-and-xstreams-api-files"></a>Obtaining the Oracle JDBC driver and XStream API files</h3>
<div class="paragraph">
<p>The Debezium Oracle connector requires the Oracle JDBC driver (<code>ojdbc8.jar</code>) to connect to Oracle databases.
If the connector uses XStream to access the database, you must also have the XStream API (<code>xstreams.jar</code>).
Licensing requirements prohibit Debezium from including these files in the Oracle connector archive.
However, the required files are available for free download as part of the Oracle Instant Client.
The following steps describe how to download the Oracle Instant Client and extract the required files.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>From a browser, download the <a href="https://www.oracle.com/database/technologies/instant-client/downloads.html">Oracle Instant Client package</a> for your operating system.</p>
</li>
<li>
<p>Extract the archive, and then open the <code>instantclient<em>_&lt;version&gt;</em></code> directory.</p>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">instantclient_21_1/
├── adrci
├── BASIC_LITE_LICENSE
├── BASIC_LITE_README
├── genezi
├── libclntshcore.so -&gt; libclntshcore.so.21.1
├── libclntshcore.so.12.1 -&gt; libclntshcore.so.21.1

...

├── ojdbc8.jar
├── ucp.jar
├── uidrvci
└── xstreams.jar</code></pre>
</div>
</div>
</li>
<li>
<p>Copy the <code>ojdbc8.jar</code> and <code>xstreams.jar</code> files, and add them to the <code><em>&lt;kafka_home&gt;</em>/libs</code> directory, for example, <code>kafka/libs</code>.</p>
</li>
<li>
<p>Create an environment variable, <code>LD_LIBRARY_PATH</code>, and set its value to the path to the Instant Client directory, for example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">LD_LIBRARY_PATH=/path/to/instant_client/</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="oracle-xstreams-connector-properties"><a class="anchor" href="#oracle-xstreams-connector-properties"></a>XStream connector properties</h3>
<div class="paragraph">
<p>The following configuration properties are <em>required</em> when using XStreams unless a default value is available.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 25%;">
<col style="width: 45%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Property</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Description</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="oracle-property-database-out-server-name"></a><a href="#oracle-property-database-out-server-name"><code>database.out.server.name</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the XStream outbound server configured in the database.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="oracle-xstreams-dbms-lob-package"><a class="anchor" href="#oracle-xstreams-dbms-lob-package"></a>XStream and DBMS_LOB</h3>
<div class="paragraph">
<p>Oracle provides a database package called <code>DBMS_LOB</code> that consists of a collection of programs to operate on BLOB, CLOB, and NCLOB columns.
Most of these programs manipulate the LOB column in totality, however, one program, <code>WRITEAPPEND</code>, is capable of manipulating a subset of the LOB data buffer.</p>
</div>
<div class="paragraph">
<p>When using XStream, <code>WRITEAPPEND</code> emits a logical change record (LCR) event for each invocation of the program.
These LCR events are not combined into a single change event like they are when using the Oracle LogMiner adapter, and so consumers of the topic should be prepared to receive events with partial column values.
This diverged behavior is captured in <a href="https://issues.redhat.com/browse/DBZ-4741">DBZ-4741</a> and will be addressed in a future release.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oracle-frequently-asked-questions"><a class="anchor" href="#oracle-frequently-asked-questions"></a>Frequently Asked Questions</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Is Oracle 11g supported?</strong></dt>
<dd>
<p>Oracle 11g is not supported; however, we do aim to be backward compatible with Oracle 11g on a best-effort basis.
We rely on the community to communicate compatibility concerns with Oracle 11g as well as provide bug fixes when a regression is identified.</p>
</dd>
<dt class="hdlist1"><strong>Isn&#8217;t Oracle LogMiner deprecated?</strong></dt>
<dd>
<p>No, Oracle only deprecated the continuous mining option with Oracle LogMiner in Oracle 12c and removed that option starting with Oracle 19c.
The Debezium Oracle connector does not rely on this option to function, and therefore can safely be used with newer versions of Oracle without any impact.</p>
</dd>
<dt class="hdlist1"><strong>How do I change the position in the offsets?</strong></dt>
<dd>
<p>The Debezium Oracle connector maintains two critical values in the offsets, a field named <code>scn</code> and another named <code>commit_scn</code>.
The <code>scn</code> field is a string that represents the low-watermark starting position the connector used when capturing changes.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Find out the name of the topic that contains the connector offsets.
This is configured based on the value set as the  <code>offset.storage.topic</code> configuration property.</p>
</li>
<li>
<p>Find out the last offset for the connector, the key under which it is stored and identify the partition used to store the offset.
This can be done using the <code>kafkacat</code> utility script provided by the Kafka broker installation.
An example might look like this:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kafkacat -b localhost -C -t my_connect_offsets -f 'Partition(%p) %k %s\n'
Partition(11) ["inventory-connector",{"server":"server1"}] {"scn":"324567897", "commit_scn":"324567897: 0x2832343233323:1"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The key for <code>inventory-connector</code> is <code>["inventory-connector",{"server":"server1"}]</code>, the partition is <code>11</code> and the last offset is the contents that follows the key.</p>
</div>
</li>
<li>
<p>To move back to a previous offset the connector should be stopped and the following command has to be issued:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">echo '["inventory-connector",{"server":"server1"}]|{"scn":"3245675000","commit_scn":"324567500"}' | \
kafkacat -P -b localhost -t my_connect_offsets -K \| -p 11</code></pre>
</div>
</div>
<div class="paragraph">
<p>This writes to partition <code>11</code> of the <code>my_connect_offsets</code> topic the given key and offset value.
In this example, we are reversing the connector back to SCN <code>3245675000</code> rather than <code>324567897</code>.</p>
</div>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1"><strong>What happens if the connector cannot find logs with a given offset SCN?</strong></dt>
<dd>
<p>The Debezium connector maintains a low and high -watermark SCN value in the connector offsets.
The low-watermark SCN represents the starting position and must exist in the available online redo or archive logs in order for the connector to start successfully.
When the connector reports it cannot find this offset SCN, this indicates that the logs that are still available do not contain the SCN and therefore the connector cannot mine changes from where it left off.</p>
<div class="paragraph">
<p>When this happens, there are two options.
The first is to remove the history topic and offsets for the connector and restart the connector, taking a new snapshot as suggested.
This will guarantee that no data loss will occur for any topic consumers.
The second is to manually manipulate the offsets, advancing the SCN to a position that is available in the redo or archive logs.
This will cause changes that occurred between the old SCN value and the newly provided SCN value to be lost and not written to the topics.
This is not recommended.</p>
</div>
</dd>
<dt class="hdlist1"><strong>What&#8217;s the difference between the various mining strategies?</strong></dt>
<dd>
<p>The Debezium Oracle connector provides three options for <code>log.mining.strategy</code>.</p>
<div class="paragraph">
<p>The default is <code>redo_in_catalog</code>, and this instructs the connector to write the Oracle data dictionary to the redo logs everytime a log switch is detected.
This data dictionary is necessary for Oracle LogMiner to track schema changes effectively when parsing the redo and archive logs.
This option will generate more than usual numbers of archive logs but allows tables being captured to be manipulated in real-time without any impact on capturing data changes.
This option generally requires more Oracle database memory and will cause the Oracle LogMiner session and process to take slightly longer to start after each log switch.</p>
</div>
<div class="paragraph">
<p>The second option, <code>online_catalog</code>, does not write the data dictionary to the redo logs.
Instead, Oracle LogMiner will always use the online data dictionary that contains the current state of the table&#8217;s structure.
This also means that if a table&#8217;s structure changes and no longer matches the online data dictionary, Oracle LogMiner will be unable to resolve table or column names if the table&#8217;s structure is changed.
This mining strategy option should not be used if the tables being captured are subject to frequent schema changes.
It&#8217;s important that all data changes be lock-stepped with the schema change such that all changes have been captured from the logs for the table, stop the connector, apply the schema change, and restart the connector and resume data changes on the table.
This option requires less Oracle database memory and Oracle LogMiner sessions generally start substantially faster since the data dictionary does not need to be loaded or primed by the LogMiner process.</p>
</div>
<div class="paragraph">
<p>The final option, <code>hybrid</code>, combines the strengths of the above two strategies with none of their weaknesses.
This strategy harnesses the performance of the <code>online_catalog</code> with the resilience in schema tracking of the <code>redo_in_catalog</code> while also avoiding the overhead and performance costs with the higher than normal archive log generation.
This mode utilizes a fallback mode where if LogMiner fails to reconstruct the SQL for a database change, the Debezium connector will rely on the in-memory schema model maintained by the connector to reconstruct the SQL in-flight.
The intent is that this mode will eventually transition to the default, and likely only mode of operation in the future.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Are there any limitations with the Hybrid mining strategy with LogMiner?</strong></dt>
<dd>
<p>Yes, the Hybrid mode for <code>log.mining.strategy</code> is still a work-in-progress strategy, and therefore does not yet support all data types.
At this time, this mode cannot reconstruct SQL statements that include operations against <code>CLOB</code>, <code>NCLOB</code>, <code>BLOB</code>, <code>XML</code>, nor <code>JSON</code> data types.
So in short, if you enable <code>lob.enabled</code> with a value of <code>true</code>, you will be unable to use the Hybrid strategy and the connector will fail to start as this combination is unsupported.</p>
</dd>
<dt class="hdlist1"><strong>Why does the connector appear to stop capturing changes on AWS?</strong></dt>
<dd>
<p>Due to the <a href="https://aws.amazon.com/blogs/networking-and-content-delivery/best-practices-for-deploying-gateway-load-balancer">fixed idle timeout of 350 seconds on the AWS Gateway Load Balancer</a>,
JDBC calls that require more than 350 seconds to complete can hang indefinitely.</p>
<div class="paragraph">
<p>In situations where calls to the Oracle LogMiner API take more than 350 seconds to complete, a timeout can be triggered, causing the AWS Gateway Load Balancer to hang.
For example, such timeouts can occur when a LogMiner session that processes large amounts of data runs concurrently with Oracle&#8217;s periodic checkpointing task.</p>
</div>
<div class="paragraph">
<p>To prevent timeouts from occurring on the AWS Gateway Load Balancer, enable keep-alive packets from the kafka Connect or Debezium Server environment, by performing the following task as the root user or as a super-user in the environment that hosts the connector:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From a terminal, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">sysctl -w net.ipv4.tcp_keepalive_time=60</code></pre>
</div>
</div>
</li>
<li>
<p>Edit <code>/etc/sysctl.conf</code> and set the value of the following variable as shown:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">net.ipv4.tcp_keepalive_time=60</code></pre>
</div>
</div>
</li>
<li>
<p>Reconfigure the Debezium for Oracle connector to use the <code>database.url</code> property rather than <code>database.hostname</code> and add the <code>(ENABLE=broken)</code> Oracle connect string descriptor as shown in the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">database.url=jdbc:oracle:thin:username/password!@(DESCRIPTION=(ENABLE=broken)(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(Host=hostname)(Port=port)))(CONNECT_DATA=(SERVICE_NAME=serviceName)))</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The preceding steps configure the TCP network stack to send keep-alive packets every 60 seconds.
As a result, the AWS Gateway Load Balancer does not timeout when JDBC calls to the LogMiner API take more than 350 seconds to complete, enabling the connector to continue to read changes from the database&#8217;s transaction logs.</p>
</div>
</dd>
</dl>
</div>
<div id="what-causes-ora-01555-and-how-to-handle-it" class="dlist">
<dl>
<dt class="hdlist1"><strong>What&#8217;s the cause for ORA-01555 and how to handle it?</strong></dt>
<dd>
<p>The Debezium Oracle connector uses flashback queries when the initial snapshot phase executes.
A flashback query is a special type of query that relies on the flashback area, maintained by the database&#8217;s <code>UNDO_RETENTION</code> database parameter, to return the results of a query based on what the contents of the table had at a given time, or in our case at a given SCN.
By default, Oracle generally only maintains an undo or flashback area for approximately 15 minutes unless this has been increased or decreased by your database administrator.
For configurations that capture large tables, it may take longer than 15 minutes or your configured <code>UNDO_RETENTION</code> to perform the initial snapshot and this will eventually lead to this exception:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ORA-01555: snapshot too old: rollback segment number 12345 with name "_SYSSMU11_1234567890$" too small</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first way to deal with this exception is to work with your database administrator and see whether they can increase the <code>UNDO_RETENTION</code> database parameter temporarily.
This does not require a restart of the Oracle database, so this can be done online without impacting database availability.
However, changing this may still lead to the above exception or a "snapshot too old" exception if the tablespace has inadequate space to store the necessary undo data.</p>
</div>
<div class="paragraph">
<p>The second way to deal with this exception is to not rely on the initial snapshot at all, setting the <code>snapshot.mode</code> to <code>schema_only</code> and then instead relying on incremental snapshots.
An incremental snapshot does not rely on a flashback query and therefore isn&#8217;t subject to ORA-01555 exceptions.</p>
</div>
</dd>
<dt class="hdlist1"><strong>What&#8217;s the cause for ORA-04036 and how to handle it?</strong></dt>
<dd>
<p>The Debezium Oracle connector may report an ORA-04036 exception when the database changes occur infrequently.
An Oracle LogMiner session is started and re-used until a log switch is detected.
The session is re-used as it provides the optimal performance utilization with Oracle LogMiner, but should a long-running mining session occur, this can lead to excessive PGA memory usage, eventually causing an exception like this:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ORA-04036: PGA memory used by the instance exceeds PGA_AGGREGATE_LIMIT</code></pre>
</div>
</div>
<div class="paragraph">
<p>This exception can be avoided by specifying how frequent Oracle switches redo logs or how long the Debezium Oracle connector is allowed to re-use the mining session.
The Debezium Oracle connector provides a configuration option, <a href="#oracle-property-log-mining-session-max-ms"><code>log.mining.session.max.ms</code></a>, which controls how long the current Oracle LogMiner session can be re-used for before being closed and a new session started.
This allows the database resources to be kept in-check without exceeding the PGA memory allowed by the database.</p>
</div>
</dd>
<dt class="hdlist1"><strong>What&#8217;s the cause for ORA-01882 and how to handle it?</strong></dt>
<dd>
<p>The Debezium Oracle connector may report the following exception when connecting to an Oracle database:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ORA-01882: timezone region not found</code></pre>
</div>
</div>
<div class="paragraph">
<p>This happens when the timezone information cannot be correctly resolved by the JDBC driver.
In order to solve this driver related problem, the driver needs to be told to not resolve the timezone details using regions.
This can be done by specifying a driver pass through property using <code>driver.oracle.jdbc.timezoneAsRegion=false</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>What&#8217;s the cause for ORA-25191 and how to handle it?</strong></dt>
<dd>
<p>The Debezium Oracle connector automatically ignores index-organized tables (IOT) as they are not supported by Oracle LogMiner.
However, if an ORA-25191 exception is thrown, this could be due to a unique corner case for such a mapping and the additional rules may be necessary to exclude these automatically.
An example of an ORA-25191 exception might look like this:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ORA-25191: cannot reference overflow table of an index-organized table</code></pre>
</div>
</div>
<div class="paragraph">
<p>If an ORA-25191 exception is thrown, please raise a Jira issue with the details about the table and it&#8217;s mappings, related to other parent tables, etc.
As a workaround, the include/exclude configuration options can be adjusted to prevent the connector from accessing such tables.</p>
</div>
</dd>
<dt class="hdlist1"><strong>How to solve SAX feature external-general-entities not supported</strong></dt>
<dd>
<p>Debezium 2.4 introduced support for Oracle&#8217;s <code>XMLTYPE</code> column type and to support this feature, the Oracle <code>xdb</code> and <code>xmlparserv2</code> dependencies are required.<br>
<br>
Oracle&#8217;s <code>xmlparserv2</code> dependency implements a SAX-based parser and if the runtime finds an uses this implementation rather than the other on the classpath, this error will occur.
In order to influence specifically which SAX implementation is used generally, the JVM will need to be started with a specific argument.<br>
<br>
When the following JVM argument is provided, the Oracle connector will start successfully without this error.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">-Djavax.xml.parsers.SAXParserFactory=com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl</code></pre>
</div>
</div>
</div>
</div>
</article>
</div>
<div class="article-cell2">
</div>
</div>

<div id="toc-rightbar"></div>    <footer class="footer">
        <div class="wrapper">
            <div class="copyright">Copyright &copy; 2024 Debezium Community (Rev: <span class="truncated"><a href="https://github.com/debezium/debezium/commit/09da4eba0f54a98300363f16f3f1c6fafbde4c81">09da4eba</a></span>)
            
        </div>
    </footer>
</main></div>
<script>
    /* Make sure TOC carets are expanded if sub-elements exist */
    $("#toc").each(function(i,v) {
      $(this).closest('article').addClass('with-toc');
    });

    $("#toc ul.sectlevel1 > li").each(function(i,v) {
      $(this).has("ul").addClass("expanded");
    });

    $(function() {
        /* Expands all the documentation submenus */
        $(".nav-list > .nav-item:not(.is-active) .nav-item-toggle").click();
    });

    /**
     * This checks if a "#toc" element exists in the DOM and if so:
     *
     *  1. Appends a cloned copy of the #toc node to the #toc-rightbar div.
     *  2. Forces the #toc-rightbar div to be visible.
     *  3. Adds the .toc-right class to the #article-wrapper div to restrict the article's overall width.
     */
    var $toc = $("#toc");
    if ( $toc.length ) {
        $("#toc-rightbar").append($toc.clone());
        $("body .main").addClass("with-toc");
    }

    /**
     * In order to make CSS changes that are backward compatible with old adoc files, this applies a version
     * style to the body tag so we can use it to differentiate between CSS styles per version if needed,
     * such as tfoot rows.
     */
    var $version = $("body .nav-container").data("version");
    var $versionClass = "version-" + $version;
    $versionClass = $versionClass.replace('.','-');
    $("body").addClass($versionClass);

    /** A CSS trick to wrap long-width tables in a div that can be scrolled on smaller screens */
    $("table.tableblock").wrap("<div class='table-scroll-wrapper'></div>");

    $(function() {
        /* apply floating scrollbar to the scroll-wrapper */
        $(".table-scroll-wrapper").floatingScrollbar();
    });

</script>
<script src="../../../debezium-antora/js/site.js"></script>
<script async src="../../../debezium-antora/js/vendor/highlight.js"></script>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-10656779-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76464546-1', 'auto');
  ga('send', 'pageview');
  ga('set', 'anonymizeIp', true);
  ga('require', 'linkid', 'linkid.js');
</script>
</body>
</html>