<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TimescaleDB Integration :: Debezium Documentation</title>
    <link rel="canonical" href="https://debezium.io/documentation/reference/stable/transformations/timescaledb.html">
    <meta name="generator" content="Antora 3.1.7">
<link rel="stylesheet" href="../../../debezium-antora/css/site.css">
<link rel="stylesheet" href="../../../debezium-antora/css/debezium-antora.css">
<link rel="stylesheet" href="../../../debezium-antora/css/highlightjs-dark.css">
<link rel="stylesheet" href="https://static.jboss.org/css/rhbar.css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.js"></script>
<script src="../../../debezium-antora/js/jquery.ba-floatingscrollbar.js"></script>
</head>
<body class="article">
<header class="header">
  <div id="rhbar">
      <a class="jbdevlogo" href="https://developers.redhat.com"></a>
      <a class="rhlogo" href="https://www.redhat.com"></a>
  </div>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
          <img src="/assets/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 14px;"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/documentation/faq">FAQ</a>
        <a class="navbar-item" href="/documentation">DOCUMENTATION</a>
        <a class="navbar-item" href="/releases">RELEASES</a>
        <a class="navbar-item" href="/community">COMMUNITY</a>
        <a class="navbar-item" href="/blog">BLOG</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="reference" data-version="stable">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Debezium 2.7 Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorial.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../install.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../postgres-plugins.html">PostgreSQL Decoding Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features.html">Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/avro.html">Avro Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/topic-auto-create-config.html">Customizing Topic Auto-Creation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/signalling.html">Sending Signals to Debezium</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/notification.html">Receive notifications from Debezium</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Source Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/mysql.html">MySQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/mariadb.html">MariaDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/mongodb.html">MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/postgresql.html">PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/oracle.html">Oracle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/sqlserver.html">SQL Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/db2.html">Db2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/cassandra.html">Cassandra</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/vitess.html">Vitess</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/spanner.html">Spanner</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/informix.html">Informix</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Sink Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/index-sink.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/jdbc.html">JDBC</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Transformations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="topic-routing.html">Topic Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="event-flattening.html">New Record State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mongodb-event-flattening.html">MongoDB New Document State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="event-changes.html">Event Changes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="outbox-event-router.html">Outbox Event Router</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mongodb-outbox-event-router.html">MongoDB Outbox Event Router</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="filtering.html">Message Filtering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="schema-change-event-filter.html">Schema Change Event Filtering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="content-based-routing.html">Content-Based Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="applying-transformations-selectively.html">Using SMT Predicates to Selectively Apply Transformations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="partition-routing.html">Partition Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="header-to-value.html">HeaderToValue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="timezone-converter.html">Timezone Converter</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="timescaledb.html">TimescaleDB Integration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="convert-cloudevent-to-saveable-form.html">Convert CloudEvents to Saveable Form</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Post Processors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../post-processors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../post-processors/reselect-columns.html">Reselect Columns</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">API and SPI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../development/engine.html">Debezium Engine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../development/converters.html">Custom Converters</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/serdes.html">Change Event SerDes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/outbox.html">Outbox Quarkus Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/cloudevents.html">CloudEvents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/tracing.html">OpenTelemetry</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/testcontainers.html">Integration Testing with Testcontainers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/debezium-server.html">Debezium Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/kubernetes.html">Running on Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/openshift.html">Running on Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/debezium-ui.html">Debezium UI</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Debezium Documentation</span>
    <span class="version">2.7</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Debezium Documentation</span>
      <ul class="versions">
        <li class="version">
          <a href="/documentation/reference/nightly/index.html">nightly</a>
        </li>
        <li class="version is-current">
          <a href="/documentation/reference/2.7/index.html">2.7</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/3.0/index.html">3.0</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.6/index.html">2.6</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.5/index.html">2.5</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.4/index.html">2.4</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.3/index.html">2.3</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.2/index.html">2.2</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.1/index.html">2.1</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.0/index.html">2.0</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/1.9/index.html">1.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main" class="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Debezium Documentation</a></li>
    <li>Transformations</li>
    <li><a href="timescaledb.html">TimescaleDB Integration</a></li>
  </ul>
</nav>
    <div class="page-versions-container">
    Version:
    <div class="page-versions">
        <button class="version-menu-toggle versions-menu-current" title="Show other versions of page">2.7</button>
        <div class="version-menu">
                <a class="version" href="/documentation/reference/nightly/index.html">nightly</a>
                <a class="version is-current" href="/documentation/reference/2.7/index.html">2.7</a>
                <a class="version" href="/documentation/reference/3.0/index.html">3.0</a>
                <a class="version" href="/documentation/reference/2.6/index.html">2.6</a>
                <a class="version" href="/documentation/reference/2.5/index.html">2.5</a>
                <a class="version" href="/documentation/reference/2.4/index.html">2.4</a>
                <a class="version is-missing" href="/documentation/reference/2.3/index.html">2.3</a>
                <a class="version is-missing" href="/documentation/reference/2.2/index.html">2.2</a>
                <a class="version is-missing" href="/documentation/reference/2.1/index.html">2.1</a>
                <a class="version is-missing" href="/documentation/reference/2.0/index.html">2.0</a>
                <a class="version is-missing" href="/documentation/reference/1.9/index.html">1.9</a>
        </div>
        |
    </div>
    </div>
  <div class="edit-this-page"><a href="https://github.com/debezium/debezium/edit/2.7/documentation/modules/ROOT/pages/transformations/timescaledb.adoc">Edit this Page</a></div>
  </div>
<div class="article-grid">
<div class="article-cell1">
<article class="doc">
        
    <!-- This partial is a placeholder -->            <h1 class="page">TimescaleDB Integration</h1>
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_installation">Installation</a></li>
<li><a href="#_how_it_works">How it works</a>
<ul class="sectlevel2">
<li><a href="#_hypertables">Hypertables</a></li>
</ul>
</li>
<li><a href="#_continuous_aggregates">Continuous aggregates</a>
<ul class="sectlevel2">
<li><a href="#_compression">Compression</a></li>
</ul>
</li>
<li><a href="#_timescaledb_configuration">TimescaleDB configuration</a></li>
<li><a href="#_connector_configuration">Connector configuration</a>
<ul class="sectlevel2">
<li><a href="#_connector_configuration_example">Connector configuration example</a></li>
</ul>
</li>
<li><a href="#_configuration_options">Configuration options</a></li>
</ul>
</div>
<div class="paragraph">
<p><a href="https://github.com/timescale/timescaledb">TimescaleDB</a> is an open-source database designed to make SQL scalable for time-series data.
It is based on PostgreSQL database and implemented as an extension of it.</p>
</div>
<div class="paragraph">
<p>The Debezium PostgreSQL connector can capture data changes from TimescaleDB.
The standard <a href="/documentation/reference/connectors/postgresql">PostgreSQL connector</a> reads the raw data from the database.
You can then use the <code>io.debezium.connector.postgresql.transforms.timescaledb.TimescaleDb</code> transformation to process the raw data, perform logical routing, and add relevant metadata.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation"><a class="anchor" href="#_installation"></a>Installation</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install TimescaleDB as described in the <a href="https://docs.timescale.com/">TimescaleDB documentation</a>.</p>
</li>
<li>
<p>Install the Debezium PostgresSQL connector according to the instructions in the <a href="/documentation/reference/install">Debezium installation guide</a>.</p>
</li>
<li>
<p>Configure TimescaleDB, and deploy the connector.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_it_works"><a class="anchor" href="#_how_it_works"></a>How it works</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Debezium can capture events from the following TimescaleDB functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hypertables</p>
</li>
<li>
<p>Continous aggregates</p>
</li>
<li>
<p>Compression</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These three functions are internally dependent.
Each of the functions are built on the PostgreSQL functionality for storing data in tables.
Debezium supports all three functions to differing degrees.</p>
</div>
<div class="paragraph">
<p>The SMT needs access to TimescaleDB metadata.
Because the SMT cannot access the database configuration at the connector level, you must explicitly define configuration metadata for the transformation.</p>
</div>
<div class="sect2">
<h3 id="_hypertables"><a class="anchor" href="#_hypertables"></a>Hypertables</h3>
<div class="paragraph">
<p>Hypertable is a logical table that is used to store time-series data.
Data is chunked (partitioned) according to a defined time-bound column.
TimescaleDB creates one or more physical tables in its internal schema, with each table representing a single chunk.
By default, the connector captures changes from each chunk table, and streams the changes to the individual topics that correspond to each chunk.
The Timescaledb transformation reassembles data from the separate topics, and then streams the reassembled data to a single topic.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The transformation has access to TimescaleDB metadata to obtain chunk/hypertable mapping.</p>
</li>
<li>
<p>The transformation reroutes the captured events from their chunk-specific topics to a single logical topic that is named according to the following pattern: <code><em>&lt;prefix&gt;</em>.<em>&lt;hypertable-schema-name&gt;</em>.<em>&lt;hypertable-name&gt;</em></code></p>
</li>
<li>
<p>The transformation adds the following headers to the event:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>__debezium_timescaledb_chunk_table</code></dt>
<dd>
<p>The name of the physical table that stores the event data.</p>
</dd>
<dt class="hdlist1"><code>__debezium_timescaledb_chunk_schema</code></dt>
<dd>
<p>The name of the schema that the physical table belongs to.</p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Example: Streaming data from a hypertable</div>
<p>The following example shows a SQL command for creating a <code>conditions</code> hypertable in the <code>public</code> schema:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">CREATE TABLE conditions (time TIMESTAMPTZ NOT NULL, location TEXT NOT NULL, temperature DOUBLE PRECISION NULL, humidity DOUBLE PRECISION NULL);
SELECT create_hypertable('conditions', 'time');</code></pre>
</div>
</div>
<div class="paragraph">
<p>The  Timescaledb  SMT routes change events captured in the hypertable to a topic with the name <code>timescaledb.public.conditions</code>.
The transformation enriches event messages with headers that you define in the configuration.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">__debezium_timescaledb_chunk_table: _hyper_1_1_chunk
__debezium_timescaledb_chunk_schema: _timescaledb_internal</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_continuous_aggregates"><a class="anchor" href="#_continuous_aggregates"></a>Continuous aggregates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Continuous aggregates provides automatic statistical calculations over data that is stored in hypertables.
The aggregate view is backed by its own hypertable which in turn is backed by a set of PostgreSQL tables.
The aggregates can be recalculated either automatically or manually.
After an aggregate is recalculated, the new values are stored in the hypertable, from which they can be captured and streamed.
Data from the aggregates is streamed to different topics, based on the chunk in which it is stored.
The Timescaledb transformation reassembles data that was streamed to different topics and routes it to a single topic.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The transformation has access to TimescaleDB metadata to obtain mappings between chunks and hypertables, and between hypertables and aggregates.</p>
</li>
<li>
<p>The transformation reroutes the captured events from their chunk-specific topics to a single logical topic that is named according to the following pattern <code><em>&lt;prefix&gt;</em>.<em>&lt;aggregate-schema-name&gt;</em>.<em>&lt;aggregate-name&gt;</em></code>.</p>
</li>
<li>
<p>The transformation adds the following headers to the event:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>__debezium_timescaledb_hypertable_table</code></dt>
<dd>
<p>The name of the hypertable that stores the continuous aggregate.</p>
</dd>
<dt class="hdlist1"><code>__debezium_timescaledb_hypertable_schema</code></dt>
<dd>
<p>The name of the schema that the hypertable belongs to.</p>
</dd>
<dt class="hdlist1"><code>__debezium_timescaledb_chunk_table</code></dt>
<dd>
<p>The name of the physical table that stores the continuous aggregate.</p>
</dd>
<dt class="hdlist1"><code>__debezium_timescaledb_chunk_schema</code></dt>
<dd>
<p>The name of the schema that the physical table belongs to.</p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Example: Streaming data from a continuous aggregate</div>
<p>The following example shows a SQL command for creating a continuous aggregate <code>conditions_summary</code> in the <code>public</code> schema.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">CREATE MATERIALIZED VIEW conditions_summary WITH (timescaledb.continuous) AS
  SELECT
    location,
    time_bucket(INTERVAL '1 hour', time) AS bucket,
    AVG(temperature),
    MAX(temperature),
    MIN(temperature)
  FROM conditions
  GROUP BY location, bucket;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The TimescaleDB SMT routes the change events captured in the aggregate to a topic with the name <code>timescaledb.public.conditions_summary</code>.
The transformation enriches event messages with headers that you define in the configuration.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">_debezium_timescaledb_chunk_table: _hyper_2_2_chunk
__debezium_timescaledb_chunk_schema: _timescaledb_internal
__debezium_timescaledb_hypertable_table: _materialized_hypertable_2
__debezium_timescaledb_hypertable_schema: _timescaledb_internal</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_compression"><a class="anchor" href="#_compression"></a>Compression</h3>
<div class="paragraph">
<p>The TimescaleDB SMT does not apply any special processing to compression functions.
Compressed chunks are forwarded unchanged to the next downstream job in the pipeline for further processing as needed.
Typically, messages with compressed chunks are dropped, and are not processed by subsequent jobs in the pipeline.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_timescaledb_configuration"><a class="anchor" href="#_timescaledb_configuration"></a>TimescaleDB configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Debezium uses replication slots to capture changes from TimescaleDB and PostgreSQL.
Replication slots Data store data in multiple message formats.
Typically, it&#8217;s best to configure Debezium to use the  <a href="/reference/connectors/postgresql.html#postgresql-pgoutput">pgoutput</a> decoder, the default decoder for TimescaleDB instances, to read from the slot.</p>
</div>
<div class="paragraph">
<p>To configure the replication slot, specify the following in the <code>postgresql.conf</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># REPLICATION
wal_level = logical             <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Instructs the server to use logical decoding with the write-ahead log.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To configure tables for replication, you must create a publication, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">CREATE PUBLICATION dbz_publication FOR ALL TABLES WITH (publish = 'insert, update')</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can create publications globally, as in the preceding example, or create separate publications for each table.
Because the TimescaleDB creates tables automatically, as needed, the use of global publications is strongly recommended.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connector_configuration"><a class="anchor" href="#_connector_configuration"></a>Connector configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Configure the TimescaleDB SMT in the same way that you would configure the PostgreSQL connector.
To enable the connector to correctly process events from TimescaleDB, add the following options to the connector configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">    "transforms": "timescaledb",
    "transforms.timescaledb.type": "io.debezium.connector.postgresql.transforms.timescaledb.TimescaleDb",
    "transforms.timescaledb.database.hostname": "timescaledb",
    "transforms.timescaledb.database.port": "...",
    "transforms.timescaledb.database.user": "...",
    "transforms.timescaledb.database.password": "...",
    "transforms.timescaledb.database.dbname": "..."</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_connector_configuration_example"><a class="anchor" href="#_connector_configuration_example"></a>Connector configuration example</h3>
<div class="paragraph">
<p>The following example shows the configuration for setting up a PostgreSQL connector to connect to a TimescaleDB server with the logical name <code>dbserver1</code> on port 5432 at 192.168.99.100.
Typically, you configure the Debezium PostgreSQL connector in a JSON file by setting the configuration properties available for the connector.</p>
</div>
<div class="paragraph">
<p>You can choose to produce events for a subset of the schemas and tables in a database.
Optionally, you can ignore, mask, or truncate columns that contain sensitive data, that exceed a specified size, or that you do not need.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "name": "timescaledb-connector",  <i class="conum" data-value="1"></i><b>(1)</b>
  "config": {
    "connector.class": "io.debezium.connector.postgresql.PostgresConnector", <i class="conum" data-value="2"></i><b>(2)</b>
    "database.hostname": "192.168.99.100", <i class="conum" data-value="3"></i><b>(3)</b>
    "database.port": "5432", <i class="conum" data-value="4"></i><b>(4)</b>
    "database.user": "postgres", <i class="conum" data-value="5"></i><b>(5)</b>
    "database.password": "postgres", <i class="conum" data-value="6"></i><b>(6)</b>
    "database.dbname" : "postgres", <i class="conum" data-value="7"></i><b>(7)</b>
    "topic.prefix": "dbserver1", <i class="conum" data-value="8"></i><b>(8)</b>
    "plugin.name": "pgoutput", <i class="conum" data-value="9"></i><b>(9)</b>
    "schema.include.list": "_timescaledb_internal", <i class="conum" data-value="10"></i><b>(10)</b>
    "transforms": "timescaledb", <i class="conum" data-value="11"></i><b>(11)</b>
    "transforms.timescaledb.type": "io.debezium.connector.postgresql.transforms.timescaledb.TimescaleDb", <i class="conum" data-value="12"></i><b>(12)</b>
    "transforms.timescaledb.database.hostname": "timescaledb", <i class="conum" data-value="13"></i><b>(13)</b>
    "transforms.timescaledb.database.port": "5432", <i class="conum" data-value="14"></i><b>(14)</b>
    "transforms.timescaledb.database.user": "postgres", <i class="conum" data-value="15"></i><b>(15)</b>
    "transforms.timescaledb.database.password": "postgres", <i class="conum" data-value="16"></i><b>(16)</b>
    "transforms.timescaledb.database.dbname": "postgres" <i class="conum" data-value="17"></i><b>(17)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the connector when registered with a Kafka Connect service.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The name of this PostgreSQL connector class.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The address of the TimescaleDB server.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The port number of the TimescaleDB server.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The name of the TimescaleDB user.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The password for the TimescaleDB.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The name of the TimescaleDB database to connect to.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>The topic prefix for the TimescaleDB server or cluster.
This prefix forms a namespace, and is used in the names of all Kafka topics to which the connector writes, the Kafka Connect schema names, and the namespaces of the corresponding Avro schema, when the Avro converter is used.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Indicates use of the <code>pgoutput</code> logical decoding plug-in.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>A list of all schemas that contain TimescaleDB physical tables.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>Enables the SMT to process raw TimescaleDB events.</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>Enables the SMT to process raw TimescaleDB events.</td>
</tr>
<tr>
<td><i class="conum" data-value="13"></i><b>13</b></td>
<td>Provides TimescaleDB connection information for the SMT.
The values must match the value of items <code>3</code> - <code>7</code>.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_options"><a class="anchor" href="#_configuration_options"></a>Configuration options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following table lists the configuration options that you can set for the TimescaleDB integration SMT.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. TimescaleDB integration SMT (<code>TimescaleDB</code>) configuration options</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 25%;">
<col style="width: 45%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Property</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Description</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="timescaledb-property-database-hostname"></a><a href="#timescaledb-property-database-hostname"><code>database.hostname</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>IP address or hostname of the TimescaleDB database server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="timescaledb-property-database-port"></a><a href="#timescaledb-property-database-port"><code>database.port</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>5432</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Integer port number of the TimescaleDB database server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="timescaledb-property-database-user"></a><a href="#timescaledb-property-database-user"><code>database.user</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the TimescaleDB database user for connecting to the TimescaleDB database server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="timescaledb-property-database-password"></a><a href="#timescaledb-property-database-password"><code>database.password</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Password to use when connecting to the TimescaleDB database server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="timescaledb-property-database-dbname"></a><a href="#timescaledb-property-database-dbname"><code>database.dbname</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No default</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the TimescaleDB database from which to stream changes.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="timescaledb-property-schema-list"></a><a href="#timescaledb-property-schema-list"><code>schema.list</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>_timescaledb_internal</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Comma-separated list of schema names that contain TimescaleDB raw (internal) data tables.
The SMT processes only those changes that originate in one of the schemas in the list.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="timescaledb-property-target-topic-prefix"></a><a href="#timescaledb-property-target-topic-prefix"><code>target.topic.prefix</code></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>timescaledb</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The namespace (prefix) of topics to which TimescaleDB events are routed.
The SMT routes messages into topics named `<em>&lt;prefix&gt;</em>.<em>&lt;schema&gt;</em>._&lt;hypertable</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</article>
</div>
<div class="article-cell2">
</div>
</div>

<div id="toc-rightbar"></div>    <footer class="footer">
        <div class="wrapper">
            <div class="copyright">Copyright &copy; 2024 Debezium Community (Rev: <span class="truncated"><a href="https://github.com/debezium/debezium/commit/f125822bd963edce277e238f65daf2e8e2522364">f125822b</a></span>)
            
        </div>
    </footer>
</main></div>
<script>
    /* Make sure TOC carets are expanded if sub-elements exist */
    $("#toc").each(function(i,v) {
      $(this).closest('article').addClass('with-toc');
    });

    $("#toc ul.sectlevel1 > li").each(function(i,v) {
      $(this).has("ul").addClass("expanded");
    });

    $(function() {
        /* Expands all the documentation submenus */
        $(".nav-list > .nav-item:not(.is-active) .nav-item-toggle").click();
    });

    /**
     * This checks if a "#toc" element exists in the DOM and if so:
     *
     *  1. Appends a cloned copy of the #toc node to the #toc-rightbar div.
     *  2. Forces the #toc-rightbar div to be visible.
     *  3. Adds the .toc-right class to the #article-wrapper div to restrict the article's overall width.
     */
    var $toc = $("#toc");
    if ( $toc.length ) {
        $("#toc-rightbar").append($toc.clone());
        $("body .main").addClass("with-toc");
    }

    /**
     * In order to make CSS changes that are backward compatible with old adoc files, this applies a version
     * style to the body tag so we can use it to differentiate between CSS styles per version if needed,
     * such as tfoot rows.
     */
    var $version = $("body .nav-container").data("version");
    var $versionClass = "version-" + $version;
    $versionClass = $versionClass.replace('.','-');
    $("body").addClass($versionClass);

    /** A CSS trick to wrap long-width tables in a div that can be scrolled on smaller screens */
    $("table.tableblock").wrap("<div class='table-scroll-wrapper'></div>");

    $(function() {
        /* apply floating scrollbar to the scroll-wrapper */
        $(".table-scroll-wrapper").floatingScrollbar();
    });

</script>
<script src="../../../debezium-antora/js/site.js"></script>
<script async src="../../../debezium-antora/js/vendor/highlight.js"></script>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-10656779-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76464546-1', 'auto');
  ga('send', 'pageview');
  ga('set', 'anonymizeIp', true);
  ga('require', 'linkid', 'linkid.js');
</script>
</body>
</html>