<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>New Record State Extraction :: Debezium Documentation</title>
    <link rel="canonical" href="https://www.debezium.io/documentation/reference/configuration/event-flattening.html">
    <meta name="generator" content="Antora 2.3.4">
<link rel="stylesheet" href="../../../debezium-antora/css/site.css">
<link rel="stylesheet" href="../../../debezium-antora/css/debezium-antora.css">
<link rel="stylesheet" href="../../../debezium-antora/css/highlightjs-dark.css">
<link rel="stylesheet" href="https://static.jboss.org/css/rhbar.css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.js"></script>
<script src="../../../debezium-antora/js/jquery.ba-floatingscrollbar.js"></script>
</head>
<body class="article">
<header class="header">
  <div id="rhbar">
      <a class="jbdevlogo" href="https://developers.redhat.com"></a>
      <a class="rhlogo" href="https://www.redhat.com"></a>
  </div>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
          <img src="/assets/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 14px;"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/documentation/faq">FAQ</a>
        <a class="navbar-item" href="/documentation">DOCUMENTATION</a>
        <a class="navbar-item" href="/releases">RELEASES</a>
        <a class="navbar-item" href="/community">COMMUNITY</a>
        <a class="navbar-item" href="/blog">BLOG</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="reference" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Debezium Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorial.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../install.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../postgres-plugins.html">PostgreSQL Decoding Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features.html">Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="avro.html">Avro Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="topic-routing.html">Topic Routing</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="event-flattening.html">New Record State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mongodb-event-flattening.html">MongoDB New Document State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="outbox-event-router.html">Outbox Event Router</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/mysql.html">MySQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/mongodb.html">MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/postgresql.html">PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/oracle.html">Oracle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/sqlserver.html">SQL Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/cassandra.html">Cassandra</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/serdes.html">Change Event SerDes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/testcontainers.html">Integration Testing with Testcontainers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/openshift.html">Running on Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/embedded.html">Embedding Debezium</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Debezium Documentation</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Debezium Documentation</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../index.html">master</a>
        </li>
        <li class="version">
          <a href="../../1.7/index.html">1.7</a>
        </li>
        <li class="version">
          <a href="../../1.6/index.html">1.6</a>
        </li>
        <li class="version">
          <a href="../../1.5/index.html">1.5</a>
        </li>
        <li class="version">
          <a href="../../1.4/index.html">1.4</a>
        </li>
        <li class="version">
          <a href="../../1.3/index.html">1.3</a>
        </li>
        <li class="version">
          <a href="../../1.2/index.html">1.2</a>
        </li>
        <li class="version">
          <a href="../../1.1/index.html">1.1</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">1.0</a>
        </li>
        <li class="version">
          <a href="../../0.10/index.html">0.10</a>
        </li>
        <li class="version">
          <a href="../../0.9/index.html">0.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main" class="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Debezium Documentation</a></li>
    <li>Configuration</li>
    <li><a href="event-flattening.html">New Record State Extraction</a></li>
  </ul>
</nav>
    <div class="page-versions-container">
    Version:
    <div class="page-versions">
        <button class="version-menu-toggle versions-menu-current" title="Show other versions of page">1.0</button>
        <!--<button class="version-menu-toggle versions-menu-select" title="Select other versions">Select</button>-->
        <div class="version-menu">
                <a class="version" href="../../configuration/event-flattening.html">master</a>
                <a class="version" href="../../1.7/configuration/event-flattening.html">1.7</a>
                <a class="version is-missing" href="../../1.6/index.html">1.6</a>
                <a class="version" href="../../1.5/configuration/event-flattening.html">1.5</a>
                <a class="version" href="../../1.4/configuration/event-flattening.html">1.4</a>
                <a class="version" href="../../1.3/configuration/event-flattening.html">1.3</a>
                <a class="version" href="../../1.2/configuration/event-flattening.html">1.2</a>
                <a class="version" href="../../1.1/configuration/event-flattening.html">1.1</a>
                <a class="version is-current" href="event-flattening.html">1.0</a>
                <a class="version" href="../../0.10/configuration/event-flattening.html">0.10</a>
                <a class="version" href="../../0.9/configuration/event-flattening.html">0.9</a>
        </div>
        |
    </div>
    </div>
  <div class="edit-this-page"><a href="https://github.com/debezium/debezium/edit/1.0/documentation/modules/ROOT/pages/configuration/event-flattening.adoc">Edit this Page</a></div>
  </div>
<div class="article-grid">
<div class="article-cell1">
<article class="doc">
            <div class="version-banner version-banner-outdated">
    You are viewing documentation for an outdated version of Debezium.
    <br/>
            If you want to view the latest stable version of this page, please go <a href="../../1.6/index.html">here</a>.
            
</div>            <h1 class="page">New Record State Extraction</h1>
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_configuration">Configuration</a>
<ul class="sectlevel2">
<li><a href="#_record_filtering_for_delete_records">Record filtering for delete records</a></li>
<li><a href="#_adding_metadata_fields_to_the_message">Adding metadata fields to the message</a></li>
<li><a href="#_adding_metadata_fields_to_the_header">Adding metadata fields to the header</a></li>
<li><a href="#_determine_original_operation_deprecated">Determine original operation  [DEPRECATED]</a></li>
<li><a href="#_adding_source_metadata_fields_deprecated">Adding source metadata fields [DEPRECATED]</a></li>
</ul>
</li>
<li><a href="#configuration_options">Configuration options</a></li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This SMT is supported only for the SQL database connectors, it does not work with the MongoDB connector.
See <a href="mongodb-event-flattening.html" class="page">here</a> for the MongoDB equivalent to this SMT.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Debezium generates data change events in a form of a complex message structure.
Each events consists of three parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>metadata, comprising the type of operation, information on the event source, a timestamp, and optionally transaction information</p>
</li>
<li>
<p>the row data before change</p>
</li>
<li>
<p>the row data after change</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>E.g. the general message structure for an <code>update</code> change looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
	"op": "u",
	"source": {
		...
	},
	"ts_ms" : "...",
	"before" : {
		"field1" : "oldvalue1",
		"field2" : "oldvalue2"
	},
	"after" : {
		"field1" : "newvalue1",
		"field2" : "newvalue2"
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>More details about the message structure are provided in <a href="../connectors/index.html" class="page">the documentation for each connector</a>.</p>
</div>
<div class="paragraph">
<p>This format allows the user to get most information about changes happening in the system.
The downside of using the complex format is that other connectors or other parts of the Kafka ecosystem usually expect the data in a simple message format that can generally be described like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
	"field1" : "newvalue1",
	"field2" : "newvalue2"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Debezium provides <a href="https://kafka.apache.org/documentation/#connect_transforms">a single message transformation</a> that crosses the bridge between the complex and simple formats, the <a href="https://github.com/debezium/debezium/blob/master/debezium-core/src/main/java/io/debezium/transforms/ExtractNewRecordState.java">ExtractNewRecordState</a> SMT.</p>
</div>
<div class="paragraph">
<p>The SMT provides three main functions.
It</p>
</div>
<div class="ulist">
<ul>
<li>
<p>extracts the <code>after</code> field from change events and replaces the original event just with this part</p>
</li>
<li>
<p>optionally filters delete and tombstone records, as per the capabilities and requirements of downstream consumers</p>
</li>
<li>
<p>optionally adds metadata fields from the change event to the outgoing flattened record</p>
</li>
<li>
<p>optionally add metadata fields to the header</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The SMT can be applied either to a source connector (Debezium) or a sink connector.
We generally recommend to apply the transformation on the sink side as it means that the messages stored in Apache Kafka will contain the whole context.
The final decision depends on use case for each user.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The configuration is a part of source/sink task connector and is expressed in a set of properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>transforms=unwrap,...
transforms.unwrap.type=io.debezium.transforms.ExtractNewRecordState
transforms.unwrap.drop.tombstones=false
transforms.unwrap.delete.handling.mode=rewrite
transforms.unwrap.add.source.fields=table,lsn</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_record_filtering_for_delete_records"><a class="anchor" href="#_record_filtering_for_delete_records"></a>Record filtering for delete records</h3>
<div class="paragraph">
<p>The SMT provides a special handling for events that signal a <code>delete</code> operation.
When a <code>DELETE</code> is executed on a datasource then Debezium generates two events:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a record with <code>d</code> operation that contains only old row data</p>
</li>
<li>
<p>(optionally) a record with <code>null</code> value and the same key (a "tombstone" message). This record serves as a marker for Apache Kafka that all messages with this key can be removed from the topic during <a href="https://kafka.apache.org/documentation/#compaction">log compaction</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Upon processing these two records, the SMT can pass on the <code>d</code> record as is,
convert it into another tombstone record or drop it.
The original tombstone message can be passed on as is or also be dropped.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The SMT by default filters out <strong>both</strong> delete records as widely used sink connectors do not support handling of tombstone messages at this point.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_adding_metadata_fields_to_the_message"><a class="anchor" href="#_adding_metadata_fields_to_the_message"></a>Adding metadata fields to the message</h3>
<div class="paragraph">
<p>The SMT can optionally add metadata fields from the original change event to the final flattened record. This functionality can be used to add things like the operation or the table from the change event, or connector-specific fields like the Postgres LSN field. For more information on what&#8217;s available see <a href="../connectors/index.html" class="page">the documentation for each connector</a>.</p>
</div>
<div class="paragraph">
<p>In case of duplicate field names (e.g. "ts_ms" exists twice), the struct should be specified to get the correct field (e.g. "source.ts_ms"). The fields will be prefixed with "__" or "__&lt;struct&gt;_", depending on the specification of the struct. Please use a comma separated list without spaces.</p>
</div>
<div class="paragraph">
<p>For example, the configuration</p>
</div>
<div class="listingblock">
<div class="content">
<pre>transforms=unwrap,...
transforms.unwrap.type=io.debezium.transforms.ExtractNewRecordState
transforms.unwrap.add.fields=op,table,lsn,source.ts_ms</pre>
</div>
</div>
<div class="paragraph">
<p>will add</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{ "__op" : "c", __table": "MY_TABLE", "__lsn": "123456789", "__source_ts_ms" : "123456789", ...}</pre>
</div>
</div>
<div class="paragraph">
<p>to the final flattened record.</p>
</div>
<div class="paragraph">
<p>For <code>DELETE</code> events, this option is only supported when the <code>delete.handling.mode</code> option is set to "rewrite".</p>
</div>
</div>
<div class="sect2">
<h3 id="_adding_metadata_fields_to_the_header"><a class="anchor" href="#_adding_metadata_fields_to_the_header"></a>Adding metadata fields to the header</h3>
<div class="paragraph">
<p>The SMT can optionally add metadata fields from the original change event to the header of the final flattened record. This functionality can be used to add things like the operation or the table from the change event, or connector-specific fields like the Postgres LSN field. For more information on what&#8217;s available see <a href="../connectors/index.html" class="page">the documentation for each connector</a>.</p>
</div>
<div class="paragraph">
<p>In case of duplicate field names (e.g. "ts_ms" exists twice), the struct should be specified to get the correct field (e.g. "source.ts_ms"). The fields will be prefixed with "__" or "__&lt;struct&gt;_", depending on the specification of the struct. Please use a comma separated list without spaces.</p>
</div>
<div class="paragraph">
<p>For example, the configuration</p>
</div>
<div class="listingblock">
<div class="content">
<pre>transforms=unwrap,...
transforms.unwrap.type=io.debezium.transforms.ExtractNewRecordState
transforms.unwrap.add.headers=op,table,lsn,source.ts_ms</pre>
</div>
</div>
<div class="paragraph">
<p>will add headers <code><em>op</code>, <code></em>table</code>, <code><em>lsn</code> and <code></em>source_ts_ms</code> to the outgoing record.</p>
</div>
</div>
<div class="sect2">
<h3 id="_determine_original_operation_deprecated"><a class="anchor" href="#_determine_original_operation_deprecated"></a>Determine original operation  [DEPRECATED]</h3>
<div class="paragraph">
<p><em>The <code>operation.header</code> option is deprecated and scheduled for removal. Please use add.headers instead. If both add.headers and operation.header are specified, the latter will be ignored.</em></p>
</div>
<div class="paragraph">
<p>When a message is flattened the final result won&#8217;t show whether it was an insert, update or first read
(deletions can be detected via tombstones or rewrites, see <a href="#configuration_options">Configuration options</a>).</p>
</div>
<div class="paragraph">
<p>To solve this problem Debezium offers an option to propagate the original operation via a header added to the message.
To enable this feature the option <code>operation.header</code> must be set to <code>true</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>transforms=unwrap,...
transforms.unwrap.type=io.debezium.transforms.ExtractNewRecordState
transforms.unwrap.operation.header=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>The possible values are the ones from the <code>op</code> field of the original change event.</p>
</div>
</div>
<div class="sect2">
<h3 id="_adding_source_metadata_fields_deprecated"><a class="anchor" href="#_adding_source_metadata_fields_deprecated"></a>Adding source metadata fields [DEPRECATED]</h3>
<div class="paragraph">
<p><em>The <code>add.source.fields</code> option is deprecated and scheduled for removal. Please use add.fields instead. If both add.fields and add.source.fields are specified, the latter will be ignored.</em></p>
</div>
<div class="paragraph">
<p>The SMT can optionally add metadata fields from the original change event&#8217;s <code>source</code> structure to the final flattened record (prefixed with "__"). This functionality can be used to add things like the table from the change event, or connector-specific fields like the Postgres LSN field. For more information on what&#8217;s available in the source structure see <a href="../connectors/index.html" class="page">the documentation for each connector</a>.</p>
</div>
<div class="paragraph">
<p>For example, the configuration</p>
</div>
<div class="listingblock">
<div class="content">
<pre>transforms=unwrap,...
transforms.unwrap.type=io.debezium.transforms.ExtractNewRecordState
transforms.unwrap.add.source.fields=table,lsn</pre>
</div>
</div>
<div class="paragraph">
<p>will add</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{ "__table": "MY_TABLE", "__lsn": "123456789", ...}</pre>
</div>
</div>
<div class="paragraph">
<p>to the final flattened record.</p>
</div>
<div class="paragraph">
<p>For <code>DELETE</code> events, this option is only supported when the <code>delete.handling.mode</code> option is set to "rewrite".</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration_options"><a class="anchor" href="#configuration_options"></a>Configuration options</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 35%;">
<col style="width: 10%;">
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>drop.tombstones</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The SMT removes the tombstone generated by Debezium from the stream.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>delete.handling.mode</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>drop</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The SMT can <code>drop</code> (the default), <code>rewrite</code> or pass delete events (<code>none</code>). The rewrite mode will add a <code>__deleted</code> column with true/false values based on record operation.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>add.fields</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specify a list of metadata fields to add to the flattened message. In case of duplicate field names (e.g. "ts_ms" exists twice), the struct should be specified to get the correct field (e.g. "source.ts_ms"). The fields will be prefixed with "__" or "__&lt;struct&gt;__", depending on the specification of the struct. Please use a comma separated list without spaces.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>add.headers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specify a list of metadata fields to add to the header of the flattened message. In case of duplicate field names (e.g. "ts_ms" exists twice), the struct should be specified to get the correct field (e.g. "source.ts_ms"). The fields will be prefixed with "__" or "__&lt;struct&gt;__", depending on the specification of the struct. Please use a comma separated list without spaces.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>operation.header</code> DEPRECATED</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>This option is deprecated and scheduled for removal. Please use add.headers instead. If both add.headers and operation.header are specified, the latter will be ignored.</em></p>
</div>
<div class="paragraph">
<p>The SMT adds the event operation (as obtained from the <code>op</code> field of the original record) as a message header.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>add.source.fields</code> DEPRECATED</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>This option is deprecated and scheduled for removal. Please use add.fields instead. If both add.fields and add.source.fields are specified, the latter will be ignored.</em></p>
</div>
<div class="paragraph">
<p>Fields from the change event&#8217;s <code>source</code> structure to add as metadata (prefixed with "__") to the flattened record.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</article>
</div>
<div class="article-cell2">
</div>
</div>

<div id="toc-rightbar"></div>    <footer class="footer">
        <div class="wrapper">
            <div class="copyright">Copyright &copy; 2021 Debezium Community</div>
        </div>
    </footer>
</main>
</div>
<script>
    /* Make sure TOC carets are expanded if sub-elements exist */
    $("#toc").each(function(i,v) {
      $(this).closest('article').addClass('with-toc');
    });

    $("#toc ul.sectlevel1 > li").each(function(i,v) {
      $(this).has("ul").addClass("expanded");
    });

    $(function() {
        /* Expands all the documentation submenus */
        $(".nav-list > .nav-item:not(.is-active) .nav-item-toggle").click();
    });

    /**
     * This checks if a "#toc" element exists in the DOM and if so:
     *
     *  1. Appends a cloned copy of the #toc node to the #toc-rightbar div.
     *  2. Forces the #toc-rightbar div to be visible.
     *  3. Adds the .toc-right class to the #article-wrapper div to restrict the article's overall width.
     */
    var $toc = $("#toc");
    if ( $toc.length ) {
        $("#toc-rightbar").append($toc.clone());
        $("body .main").addClass("with-toc");
    }

    /**
     * In order to make CSS changes that are backward compatible with old adoc files, this applies a version
     * style to the body tag so we can use it to differentiate between CSS styles per version if needed,
     * such as tfoot rows.
     */
    var $version = $("body .nav-container").data("version");
    var $versionClass = "version-" + $version;
    $versionClass = $versionClass.replace('.','-');
    $("body").addClass($versionClass);

    /** A CSS trick to wrap long-width tables in a div that can be scrolled on smaller screens */
    $("table.tableblock").wrap("<div class='table-scroll-wrapper'></div>");

    $(function() {
        /* apply floating scrollbar to the scroll-wrapper */
        $(".table-scroll-wrapper").floatingScrollbar();
    });

</script>
<script src="../../../debezium-antora/js/site.js"></script>
<script async src="../../../debezium-antora/js/vendor/highlight.js"></script>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-10656779-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76464546-1', 'auto');
  ga('send', 'pageview');
  ga('set', 'anonymizeIp', true);
  ga('require', 'linkid', 'linkid.js');
</script>
</body>
</html>