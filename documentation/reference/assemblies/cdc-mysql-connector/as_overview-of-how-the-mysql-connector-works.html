<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Overview of how the MySQL connector works :: Debezium Documentation</title>
    <link rel="canonical" href="https://www.debezium.io/documentation/reference/assemblies/cdc-mysql-connector/as_overview-of-how-the-mysql-connector-works.html">
    <meta name="generator" content="Antora 2.2.0">
<link rel="stylesheet" href="../../../debezium-antora/css/site.css">
<link rel="stylesheet" href="../../../debezium-antora/css/debezium-antora.css">
<link rel="stylesheet" href="../../../debezium-antora/css/highlightjs-dark.css">
<link rel="stylesheet" href="https://static.jboss.org/css/rhbar.css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.js"></script>
</head>
<body class="article">
<header class="header">
  <div id="rhbar">
      <a class="jbdevlogo" href="https://www.jboss.org/projects/about"></a>
      <a class="rhlogo" href="https://www.redhat.com"></a>
  </div>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
          <img src="/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 14px;"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/documentation/faq">FAQ</a>
        <a class="navbar-item" href="/documentation">DOCUMENTATION</a>
        <a class="navbar-item" href="/releases">RELEASES</a>
        <a class="navbar-item" href="/community">COMMUNITY</a>
        <a class="navbar-item" href="/blog">BLOG</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="reference" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Debezium Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tutorial.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../install.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../postgres-plugins.html">PostgreSQL Decoding Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../features.html">Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/avro.html">Avro Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/topic-routing.html">Topic Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/event-flattening.html">New Record State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/mongodb-event-flattening.html">MongoDB New Document State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/outbox-event-router.html">Outbox Event Router</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../connectors/mysql.html">MySQL</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="as_overview-of-how-the-mysql-connector-works.html">How It Works</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="as_setup-the-mysql-server.html">Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="as_deploy-the-mysql-connector.html">Deployment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="as_connector-common-issues.html">Common Issues</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/mongodb.html">MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/postgresql.html">PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/oracle.html">Oracle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/sqlserver.html">SQL Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/cassandra.html">Cassandra</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#integrations/serdes.adoc">Change Event SerDes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/outbox.html">Outbox Quarkus Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#integrations/cloudevents.adoc">CloudEvents</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/openshift.html">Running on Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/embedded.html">Embedding Debezium</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Debezium Documentation</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Debezium Documentation</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">master</a>
        </li>
        <li class="version">
          <a href="../../1.1/index.html">1.1</a>
        </li>
        <li class="version">
          <a href="../../1.0/index.html">1.0</a>
        </li>
        <li class="version">
          <a href="../../0.10/index.html">0.10</a>
        </li>
        <li class="version">
          <a href="../../0.9/index.html">0.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main" class="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Debezium Documentation</a></li>
    <li>Connectors</li>
    <li><a href="../../connectors/mysql.html">MySQL</a></li>
    <li><a href="as_overview-of-how-the-mysql-connector-works.html">How It Works</a></li>
  </ul>
</nav>
    <div class="page-versions-container">
    Version:
    <div class="page-versions">
        <button class="version-menu-toggle versions-menu-current" title="Show other versions of page">master</button>
        <!--<button class="version-menu-toggle versions-menu-select" title="Select other versions">Select</button>-->
        <div class="version-menu">
                <a class="version is-current" href="as_overview-of-how-the-mysql-connector-works.html">master</a>
                <a class="version" href="../../1.1/assemblies/cdc-mysql-connector/as_overview-of-how-the-mysql-connector-works.html">1.1</a>
                <a class="version is-missing" href="../../1.0/index.html">1.0</a>
                <a class="version is-missing" href="../../0.10/index.html">0.10</a>
                <a class="version is-missing" href="../../0.9/index.html">0.9</a>
        </div>
        |
    </div>
    </div>
  <div class="edit-this-page"><a href="https://github.com/debezium/debezium/edit/master/documentation/modules/ROOT/pages/assemblies/cdc-mysql-connector/as_overview-of-how-the-mysql-connector-works.adoc">Edit this Page</a></div>
  </div>
<article class="doc">
<h1 class="page">Overview of how the MySQL connector works</h1>
<div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#how-the-mysql-connector-uses-database-schemas_debezium">How the MySQL connector uses database schemas</a></li>
<li><a href="#how-the-mysql-connector-performs-database-snapshots_debezium">How the MySQL connector performs database snapshots</a></li>
<li><a href="#how-the-mysql-connector-handles-schema-change-topics_debezium">How the MySQL connector handles schema change topics</a></li>
<li><a href="#mysql-connector-events_debezium">MySQL connector events</a></li>
<li><a href="#how-the-mysql-connector-maps-data-types_debezium">How the MySQL connector maps data types</a></li>
<li><a href="#the-mysql-connector-and-kafka-topics_debezium">The MySQL connector and Kafka topics</a></li>
<li><a href="#mysql-supported-topologies_debezium">MySQL supported topologies</a></li>
</ul>
</div>
<div class="paragraph">
<p>The Debezium MySQL connector tracks the structure of the tables, performs snapshots, transforms binlog events into Debezium change events and records where those events are recorded in Kafka.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-the-mysql-connector-uses-database-schemas_debezium"><a class="anchor" href="#how-the-mysql-connector-uses-database-schemas_debezium"></a>How the MySQL connector uses database schemas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a database client queries a database, it uses the database&#8217;s current schema. As database schemas often change, the Debezium <strong>MySQL connector</strong> knows how the schema appeared for each <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code> operation.</p>
</div>
<div class="paragraph">
<p>MySQL includes both <em>row-level changes</em> and <em>DDL statements</em> in its binlog which the connector reads to parse and update the in-memory representation of each table&#8217;s schema. This is used to understand the table structure at the time of each operation, which produces accurate change events.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The connector records all DDL statements along with their position in the binlog in a separate database history so that when the connector restarts (<em>after a possible crash or graceful shutdown</em>), it continues reading the binlog from that specific point in time.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <a href="#the-mysql-connector-and-kafka-topics_debezium">The MySQL connector and Kafka topics</a> for more on topic naming conventions.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>If you do not use the <em>database history topic</em> described here, check out the <a href="#how-the-mysql-connector-handles-schema-change-topics_debezium">schema change topics</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-the-mysql-connector-performs-database-snapshots_debezium"><a class="anchor" href="#how-the-mysql-connector-performs-database-snapshots_debezium"></a>How the MySQL connector performs database snapshots</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When your Debezium MySQL connector is first started, it performs an initial <em>consistent snapshot</em> of your database. The following flow describes how this snapshot is completed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is the default snapshot mode which is set as <code>inital</code> in the <code>snapshot.mode</code> property. For other snapshots modes, please check out the <a href="as_deploy-the-mysql-connector.html#mysql-connector-configuration-properties_debezium" class="page">MySQL connector configuration properties</a>.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">The connector&#8230;&#8203;</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Grabs a <strong>global read lock</strong> that blocks <em>writes</em> by other database clients.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The snapshot itself does not prevent other clients from applying DDL which might interfere with the connector&#8217;s attempt to read the binlog position and table schemas. The global read lock is kept while teh binlog position is read before released in a later step.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Starts a transaction with <a href="https://dev.mysql.com/doc/refman/8.0/en/innodb-consistent-read.html">repeatable read semantics</a> to ensure that all subsequent reads within the transaction are done against the <em>consistent snapshot</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the current binlog position.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the schema of the databases and tables allowed by the connector&#8217;s configuration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Releases the <strong>global read lock</strong>. This now allows other database clients to write to the database.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>6</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Writes the DDL changes to the schema change topic, including all necessary <code>DROP&#8230;&#8203;</code> and <code>CREATE&#8230;&#8203;</code> DDL statements.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This happens if applicable.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>7</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans the database tables and generates <code>CREATE</code> events on the relevant table-specific Kakfa topics for each row.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>8</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Commits the transaction.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>9</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Records the completed snapshot in the connector offsets.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_what_happens_if_the_connector_fails"><a class="anchor" href="#_what_happens_if_the_connector_fails"></a>What happens if the connector fails?</h3>
<div class="paragraph">
<p>If the connector fails, stops, or is rebalanced while making the <em>initial snapshot</em>, the connector creates a new snapshot once restarted. Once that <em>intial snapshot</em> is completed, the Debezium MySQL connector restarts from the same position in the binlog so it does not miss any updates.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the connector stops for long enough, MySQL could purge old binlog files and the connector&#8217;s position would be lost. If the position is lost, the connecotr reverts to the <em>initial snapshot</em> for its starting position. For more tips on troubleshooting the Debezium MySQL connector, see <a href="#connector-common-issues">[connector-common-issues]</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_what_if_global_read_locks_are_not_allowed"><a class="anchor" href="#_what_if_global_read_locks_are_not_allowed"></a>What if Global Read Locks are not allowed?</h3>
<div class="paragraph">
<p><a id="no-global-read-lock-mysql-connect_debezium"></a></p>
</div>
<div class="paragraph">
<p>Some environments do not allow a <strong>global read lock</strong>. If the Debezium MySQL connector detects that global read locks are not permitted, the connector uses table-level locks instead and performs a snapshot with this method.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The user must have <code>LOCK_TABLES</code> privileges.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">The connector&#8230;&#8203;</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Starts a transaction with <a href="https://dev.mysql.com/doc/refman/8.0/en/innodb-consistent-read.html">repeatable read semantics</a> to ensure that all subsequent reads within the transaction are done against the <em>consistent snapshot</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reads and filters the names of the databases and tables.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the current binlog position.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the schema of the databases and tables allowed by the connector&#8217;s configuration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Writes the DDL changes to the schema change topic, including all necessary <code>DROP&#8230;&#8203;</code> and <code>CREATE&#8230;&#8203;</code> DDL statements.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This happens if applicable.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>6</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans the database tables and generates <code>CREATE</code> events on the relevant table-specific Kakfa topics for each row.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>7</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Commits the transaction.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>8</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Releases the table-level locks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>9</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Records the completed snapshot in the connector offsets.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-the-mysql-connector-handles-schema-change-topics_debezium"><a class="anchor" href="#how-the-mysql-connector-handles-schema-change-topics_debezium"></a>How the MySQL connector handles schema change topics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can configure the  Debezium <strong>MySQL connector</strong> to produce schema change events that include all DDL statements applied to databases in the MySQL server. The connector writes all of these events to a Kakfa topic named <code>&lt;serverName&gt;</code> where <code>serverName</code> is the name of the connector as specified in the <code>database.server.name</code> configuration property.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you choose to use <em>schema change events</em>, use the schema change topic and <strong>do not</strong> consume the database history topic.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Make sure that the <code>num.partitions</code> configuration for Kakfa is set to <code>1</code> to ensure schema changes are kept in the correct order.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_schema_change_topic_structure"><a class="anchor" href="#_schema_change_topic_structure"></a>Schema change topic structure</h3>
<div class="paragraph">
<p>Each message that is written to the schema change topic contains a message key which includes the name of the connected database used when applying DDL statements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": {
    "type": "struct",
    "name": "io.debezium.connector.mysql.SchemaChangeKey",
    "optional": false,
    "fields": [
      {
        "field": "databaseName",
        "type": "string",
        "optional": false
      }
    ]
  },
  "payload": {
    "databaseName": "inventory"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The schema change event message value contains a structure that includes the DDL statements, the database to which the statements were applied, and the position in the binlog where the statements appeared:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": {
    "type": "struct",
    "name": "io.debezium.connector.mysql.SchemaChangeValue",
    "optional": false,
    "fields": [
      {
        "field": "databaseName",
        "type": "string",
        "optional": false
      },
      {
        "field": "ddl",
        "type": "string",
        "optional": false
      },
      {
        "field": "source",
        "type": "struct",
        "name": "io.debezium.connector.mysql.Source",
        "optional": false,
        "fields": [
          {
            "type": "string",
            "optional": true,
            "field": "version"
          },
          {
            "type": "string",
            "optional": false,
            "field": "name"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "server_id"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "ts_sec"
          },
          {
            "type": "string",
            "optional": true,
            "field": "gtid"
          },
          {
            "type": "string",
            "optional": false,
            "field": "file"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "pos"
          },
          {
            "type": "int32",
            "optional": false,
            "field": "row"
          },
          {
            "type": "boolean",
            "optional": true,
            "default": false,
            "field": "snapshot"
          },
          {
            "type": "int64",
            "optional": true,
            "field": "thread"
          },
          {
            "type": "string",
            "optional": true,
            "field": "db"
          },
          {
            "type": "string",
            "optional": true,
            "field": "table"
          },
          {
            "type": "string",
            "optional": true,
            "field": "query"
          }
        ]
      }
    ]
  },
  "payload": {
    "databaseName": "inventory",
    "ddl": "CREATE TABLE products ( id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255) NOT NULL, description VARCHAR(512), weight FLOAT ); ALTER TABLE products AUTO_INCREMENT = 101;",
    "source" : {
      "version": "0.10.0.Beta4",
      "name": "mysql-server-1",
      "server_id": 0,
      "ts_sec": 0,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 154,
      "row": 0,
      "snapshot": true,
      "thread": null,
      "db": null,
      "table": null,
      "query": null
    }
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_important_tips_regarding_schema_change_topics"><a class="anchor" href="#_important_tips_regarding_schema_change_topics"></a>Important tips regarding schema change topics</h4>
<div class="paragraph">
<p>The <code>ddl</code> field may contain multiple DDL statements. Every statement applies to the database in the <code>databaseName</code> field and appears in the same order as they were applied in the database. The <code>source</code> field is structured exactly as a standard data change event written to table-specific topics. This field is useful to correlate events on different topic.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">....
    "payload": {
        "databaseName": "inventory",
        "ddl": "CREATE TABLE products ( id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,...
        "source" : {
            ....
        }
    }
....</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">What if a client submits DDL statements to <em>multiple databases</em>?</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>If MySQL applies them atomically, the connector takes the DDL statements in order, groups them by database, and creates a schema change event for each group.</p>
</li>
<li>
<p>If MySQL applies them individually, the connector creates a separate schema change event for each statement.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>If you do not use the <em>schema change topics</em> detailed here, check out the <a href="#how-the-mysql-connector-uses-database-schemas_debezium">database history topic</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mysql-connector-events_debezium"><a class="anchor" href="#mysql-connector-events_debezium"></a>MySQL connector events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All data change events produced by the Debezium MySQL connector contain a key and a value. The change event key and the change event value each contain a <em>schema</em> and a <em>payload</em> where the schema describes the structure of the payload and the payload contains the data.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The MySQL connector ensures that all Kakfa Connect schema names adhere to the <a href="http://avro.apache.org/docs/current/spec.html#names">Avro schema name format</a>. This is important as any character that is not a latin letter or underscore is replaced by an underscore which can lead to unexpected conflicts in schema names when the logical server names, database names, and table names container other characters that are replaced with these underscores.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_change_event_key"><a class="anchor" href="#_change_event_key"></a>Change event key</h3>
<div class="paragraph">
<p>For any given table, the change event&#8217;s key has a structure that contains a field for each column in the <code>PRIMARY KEY</code> (or unique constraint) at the time the event was created. Let us look at an example table and then how the schema and payload would appear for the table.</p>
</div>
<div class="listingblock">
<div class="title">example table</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">CREATE TABLE customers (
  id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
  first_name VARCHAR(255) NOT NULL,
  last_name VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL UNIQUE KEY
) AUTO_INCREMENT=1001;</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">example change event key</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
 "schema": { <i class="conum" data-value="1"></i><b>(1)</b>
    "type": "struct",
 "name": "mysql-server-1.inventory.customers.Key", <i class="conum" data-value="2"></i><b>(2)</b>
 "optional": false, <i class="conum" data-value="3"></i><b>(3)</b>
 "fields": [ <i class="conum" data-value="4"></i><b>(4)</b>
      {
        "field": "id",
        "type": "int32",
        "optional": false
      }
    ]
  },
 "payload": { <i class="conum" data-value="5"></i><b>(5)</b>
    "id": 1001
  }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>schema</code> describes what is in the <code>payload</code></p>
</li>
<li>
<p><code>mysql-server-1.inventory.customers.Key</code> is the name of the schema which defines the structure where <code>mysql-server-1</code> is the connector name, <code>inventory</code> is the database and <code>customers</code> is the table</p>
</li>
<li>
<p>denotes that the <code>payload</code> is not optional</p>
</li>
<li>
<p>specifies the type of fields expected in the <code>payload</code></p>
</li>
<li>
<p>the payload itself which in this case only contains a single <code>id</code> field</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This key describes the row in the <code>inventory.customers</code> table which is out from the connector entitled <code>mysql-server-1</code> whose <code>id</code> primary key column has a value of <code>1001</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_change_event_value"><a class="anchor" href="#_change_event_value"></a>Change event value</h3>
<div class="paragraph">
<p>The change event value contains a schema and a payload section. There are three types of change event values which have an envelope structure. The fields in this structure are explained below and marked on each of the change event value examples.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#_create_change_event_value">Create change event value</a></p>
</li>
<li>
<p><a href="#_update_change_event_value">Update change event value</a></p>
</li>
<li>
<p><a href="#_delete_change_event_value">Delete change event value</a></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Field name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mysql-server-1.inventory.customers.Key</code> is the name of the schema which defines the structure where <code>mysql-server-1</code> is the connector name, <code>inventory</code> is the database and <code>customers</code> is the table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>op</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <strong>mandatory</strong> string that describes the type of operation.</p>
</div>
<div class="ulist">
<div class="title">values</div>
<ul>
<li>
<p><code>c</code> = create</p>
</li>
<li>
<p><code>u</code> = update</p>
</li>
<li>
<p><code>d</code> = delete</p>
</li>
<li>
<p><code>r</code> = read (non <em>initial snapshot</em> only)</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>before</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An optional field that specifies the state of the row before the event occurred.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>after</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An optional field that specifies the state of the row after the event occurred.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>source</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <strong>mandatory</strong> field that describes the source metadata for the event including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the Debezium version</p>
</li>
<li>
<p>the connector name</p>
</li>
<li>
<p>the binlog name where the event was recorded</p>
</li>
<li>
<p>the binlog position</p>
</li>
<li>
<p>the row within the event</p>
</li>
<li>
<p>if the event was part of a snapshot</p>
</li>
<li>
<p>the name of the affected database and table</p>
</li>
<li>
<p>the id of the MySQL thread creating the event (non-snapshot only)</p>
</li>
<li>
<p>the MySQL server ID (if available)</p>
</li>
<li>
<p>timestamp</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <a href="as_setup-the-mysql-server.html#enable-query-log-events-for-cdc_debezium" class="page">binlog_rows_query_log_events</a> option is enabled and the connector has the <code>include.query</code> option enabled, a <code>query</code> field displays which contains the original SQL statement that generated the event.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ts_ms</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional field that displays the time at which the connector processed the event.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The time is based on the system clock in the JVM running the Kakfa Connect task.
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Let us look at an example table and then how the schema and payload would appear for the table.</p>
</div>
<div class="listingblock">
<div class="title">example table</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">CREATE TABLE customers (
  id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
  first_name VARCHAR(255) NOT NULL,
  last_name VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL UNIQUE KEY
) AUTO_INCREMENT=1001;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_create_change_event_value"><a class="anchor" href="#_create_change_event_value"></a>Create change event value</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": {
    "type": "struct",
    "fields": [
      {
        "type": "struct",
        "fields": [
          {
            "type": "int32",
            "optional": false,
            "field": "id"
          },
          {
            "type": "string",
            "optional": false,
            "field": "first_name"
          },
          {
            "type": "string",
            "optional": false,
            "field": "last_name"
          },
          {
            "type": "string",
            "optional": false,
            "field": "email"
          }
        ],
        "optional": true,
        "name": "mysql-server-1.inventory.customers.Value",
        "field": "before"
      },
      {
        "type": "struct",
        "fields": [
          {
            "type": "int32",
            "optional": false,
            "field": "id"
          },
          {
            "type": "string",
            "optional": false,
            "field": "first_name"
          },
          {
            "type": "string",
            "optional": false,
            "field": "last_name"
          },
          {
            "type": "string",
            "optional": false,
            "field": "email"
          }
        ],
        "optional": true,
        "name": "mysql-server-1.inventory.customers.Value",
        "field": "after"
      },
      {
        "type": "struct",
        "fields": [
          {
            "type": "string",
            "optional": false,
            "field": "version"
          },
          {
            "type": "string",
            "optional": false,
            "field": "connector"
          },
          {
            "type": "string",
            "optional": false,
            "field": "name"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "ts_ms"
          },
          {
            "type": "boolean",
            "optional": true,
            "default": false,
            "field": "snapshot"
          },
          {
            "type": "string",
            "optional": false,
            "field": "db"
          },
          {
            "type": "string",
            "optional": true,
            "field": "table"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "server_id"
          },
          {
            "type": "string",
            "optional": true,
            "field": "gtid"
          },
          {
            "type": "string",
            "optional": false,
            "field": "file"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "pos"
          },
          {
            "type": "int32",
            "optional": false,
            "field": "row"
          },
          {
            "type": "int64",
            "optional": true,
            "field": "thread"
          },
          {
            "type": "string",
            "optional": true,
            "field": "query"
          }
        ],
        "optional": false,
        "name": "io.product.connector.mysql.Source",
        "field": "source"
      },
      {
        "type": "string",
        "optional": false,
        "field": "op"
      },
      {
        "type": "int64",
        "optional": true,
        "field": "ts_ms"
      }
    ],
    "optional": false,
    "name": "mysql-server-1.inventory.customers.Envelope" <i class="conum" data-value="1"></i><b>(1)</b>
  },
  "payload": {
    "op": "c", <i class="conum" data-value="2"></i><b>(2)</b>
    "ts_ms": 1465491411815,
    "before": null, <i class="conum" data-value="3"></i><b>(3)</b>
    "after": { <i class="conum" data-value="4"></i><b>(4)</b>
      "id": 1004,
      "first_name": "Anne",
      "last_name": "Kretchmar",
      "email": "annek@noanswer.org"
    },
    "source": { <i class="conum" data-value="5"></i><b>(5)</b>
      "version": "0.10.0.Beta4",
      "connector": "mysql",
      "name": "mysql-server-1",
      "ts_ms": 0, <i class="conum" data-value="6"></i><b>(6)</b>
      "snapshot": false,
      "db": "inventory",
      "table": "customers",
      "server_id": 0,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 154,
      "row": 0,
      "thread": 7,
      "query": "INSERT INTO customers (first_name, last_name, email) VALUES ('Anne', 'Kretchmar', 'annek@noanswer.org')"
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_update_change_event_value"><a class="anchor" href="#_update_change_event_value"></a>Update change event value</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": { ... },
  "payload": {
    "before": { <i class="conum" data-value="3"></i><b>(3)</b>
      "id": 1004,
      "first_name": "Anne",
      "last_name": "Kretchmar",
      "email": "annek@noanswer.org"
    },
    "after": { <i class="conum" data-value="4"></i><b>(4)</b>
      "id": 1004,
      "first_name": "Anne Marie",
      "last_name": "Kretchmar",
      "email": "annek@noanswer.org"
    },
    "source": { <i class="conum" data-value="5"></i><b>(5)</b>
      "version": "0.10.0.Beta4",
      "name": "mysql-server-1",
      "connector": "mysql",
      "name": "mysql-server-1",
      "ts_ms": 1465581, <i class="conum" data-value="6"></i><b>(6)</b>
      "snapshot": false,
      "db": "inventory",
      "table": "customers",
      "server_id": 223344,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 484,
      "row": 0,
      "thread": 7,
      "query": "UPDATE customers SET first_name='Anne Marie' WHERE id=1004"
    },
    "op": "u", <i class="conum" data-value="2"></i><b>(2)</b>
    "ts_ms": 1465581029523
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_delete_change_event_value"><a class="anchor" href="#_delete_change_event_value"></a>Delete change event value</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": { ... },
  "payload": {
    "before": { <i class="conum" data-value="3"></i><b>(3)</b>
      "id": 1004,
      "first_name": "Anne Marie",
      "last_name": "Kretchmar",
      "email": "annek@noanswer.org"
    },
    "after": null, <i class="conum" data-value="4"></i><b>(4)</b>
    "source": { <i class="conum" data-value="5"></i><b>(5)</b>
      "version": "0.10.0.Beta4",
      "connector": "mysql",
      "name": "mysql-server-1",
      "ts_ms": 1465581, <i class="conum" data-value="6"></i><b>(6)</b>
      "snapshot": false,
      "db": "inventory",
      "table": "customers",
      "server_id": 223344,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 805,
      "row": 0,
      "thread": 7,
      "query": "DELETE FROM customers WHERE id=1004"
    },
    "op": "d", <i class="conum" data-value="2"></i><b>(2)</b>
    "ts_ms": 1465581902461
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-the-mysql-connector-maps-data-types_debezium"><a class="anchor" href="#how-the-mysql-connector-maps-data-types_debezium"></a>How the MySQL connector maps data types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Debezium MySQL connector represents changes to rows with events that are structured like the table in which the row exists. The event contains a field for each column value. The MySQL data type of that column dictates how the value is represented in the event.</p>
</div>
<div class="paragraph">
<p>Columns that store strings are defined in MySQL with a character set and collation. The MySQL connector uses the column&#8217;s character set when reading the binary representation of the column values in the binlog events. The following table shows how the connector maps the MySQL data types to both <em>literal</em> and <em>semantic</em> types.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>literal type</strong> : how the value is represented using Kakfa Connect schema types</p>
</li>
<li>
<p><strong>semantic type</strong> : how the Kakfa Connect schema captures the meaning of the field (schema name)</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL type</th>
<th class="tableblock halign-left valign-top">Literal type</th>
<th class="tableblock halign-left valign-top">Semantic type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BOOLEAN, BOOL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BOOLEAN</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BIT(1)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BOOLEAN</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BIT(&gt;1)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BYTES</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>io.debezium.data.Bits</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>length</code> schema parameter contains an integer that represents the number of bits. The <code>byte[]</code> contains the bits in <em>little-endian</em> form and is sized to contain the specified number of bits.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">example (where n is bits)</div>
<div class="content">
<pre>numBytes = n/8 + (n%8== 0 ? 0 : 1)</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TINYINT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT8</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SMALLINT[(M)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT16</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MEDIUMINT[(M)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT32</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT, INTEGER[(M)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT32</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BIGINT[(M)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT64</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REAL[(M,D)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FLOAT32</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FLOAT[(M,D)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FLOAT64</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DOUBLE[(M,D)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FLOAT64</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHAR(M)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(M)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BINARY(M)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BYTES</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARBINARY(M)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BYTES</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TINYBLOB</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BYTES</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TINYTEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BLOB</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BYTES</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MEDIUMBLOB</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BYTES</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MEDIUMTEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LONGBLOB</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BYTES</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LONGTEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JSON</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>io.debezium.data.Json</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Contains the string representation of a <code>JSON</code> document, array, or scalar.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENUM</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>io.debezium.data.Enum</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>allowed</code> schema parameter contains the comma-separated list of allowed values.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>io.debezium.data.EnumSet</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>allowed</code> schema parameter contains the comma-separated list of allowed values.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>YEAR[(2|4)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT32</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">io.debezium.time.Year</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIMESTAMP[(M)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>io.debezium.time.ZonedTimestamp</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In <a href="https://www.iso.org/iso-8601-date-and-time-format.html">ISO 8601</a> format with microsecond precision. MySQL allows <code>M</code> to be in the range of <code>0-6</code>.
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_temporal_values"><a class="anchor" href="#_temporal_values"></a>Temporal values</h3>
<div class="paragraph">
<p>Excluding the <code>TIMESTAMP</code> data type, MySQL temporal types depend on the value of the <code>time.precision.mode</code> configuration property.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <a href="as_deploy-the-mysql-connector.html#mysql-connector-configuration-properties_debezium" class="page">MySQL connector configuration properties</a> for more details.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Temporal values without timezones are converted from UTC to milliseconds or microseconds (<code>DATETIME</code>) or to the configured database timezone (<code>TIMESTAMP</code>).</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DATETIME</code> with a value of <code>2018-06-20 06:37:03</code> becomes <code>1529476623000</code>.</p>
</li>
<li>
<p><code>TIMESTAMP</code> with a value of <code>2018-06-20 06:37:03</code> becomes <code>2018-06-20T13:37:03Z</code>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
MySQL allows zero-values for <code>DATE</code>, <code>DATETIME</code>, and <code>TIMESTAMP</code> columns, which are sometimes preferred over null values. However, the MySQL connector represents them as null values when the column definition allows nulls, or as the epoch day when the column does not allow nulls.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">time.precision.mode=adaptive_time_microseconds(default)</dt>
<dd>
<p>The MySQL connector determins the literal type and semantic type based on the column&#8217;s data type definition so that events represent exactly the values in the database; all time fields are in microseconds.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL type</th>
<th class="tableblock halign-left valign-top">Literal type</th>
<th class="tableblock halign-left valign-top">Semantic type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT32</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>io.debezium.time.Date</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Represents the number of days since epoch.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIME[(M)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT64</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>io.debezium.time.MicroTime</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Represents the time value in microseconds and does not include timezone information. MySQL allows <code>M</code> to be in the range of <code>0-6</code>.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATETIME, DATETIME(0), DATETIME(1), DATETIME(2), DATETIME(3)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT64</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>io.debezium.time.Timestamp</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Represents the number of milliseconds past epoch and does not include timezone information.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATETIME(4), DATETIME(5), DATETIME(6)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT64</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>io.debezium.time.MicroTimestamp</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Represents the number of microseconds past epoch and does not include timezone information.
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">time.precision.mode=connect</dt>
<dd>
<p>The MySQL connector uses the predefined Kakfa Connect logical types. This approach is less precise than the default approach and the events could be less precise if the database column has a <em>fractional second precision</em> value of greater than <code>3</code>.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL type</th>
<th class="tableblock halign-left valign-top">Literal type</th>
<th class="tableblock halign-left valign-top">Semantic type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT32</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>org.apache.kafka.connect.data.Date</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Represents the number of days since epoch.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIME[(M)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT64</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>org.apache.kafka.connect.data.Time</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Represents the time value in microseconds since midnight and does not include timezone information.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATETIME[(M)]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT64</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>org.apache.kafka.connect.data.Timestamp</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Represents the number of milliseconds since epoch, and does not include timezone information.
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_decimal_values"><a class="anchor" href="#_decimal_values"></a>Decimal values</h3>
<div class="paragraph">
<p>Decimals are handled via the <code>decimal.handling.mode</code> property.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <a href="as_deploy-the-mysql-connector.html#mysql-connector-configuration-properties_debezium" class="page">MySQL connector configuration properties</a> for more details.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">decimal.handling.mode=precise</dt>
<dd>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL type</th>
<th class="tableblock halign-left valign-top">Literal type</th>
<th class="tableblock halign-left valign-top">Semantic type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NUMERIC[(M[,D])]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BYTES</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>org.apache.kafka.connect.data.Decimal</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>scaled</code> schema parameter contains an integer that represents how many digits the decimal point shifted.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DECIMAL[(M[,D])]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BYTES</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>org.apache.kafka.connect.data.Decimal</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>scaled</code> schema parameter contains an integer that represents how many digits the decimal point shifted.
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">decimal.handling.mode=double</dt>
<dd>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL type</th>
<th class="tableblock halign-left valign-top">Literal type</th>
<th class="tableblock halign-left valign-top">Semantic type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NUMERIC[(M[,D])]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FLOAT64</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DECIMAL[(M[,D])]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FLOAT64</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">decimal.handling.mode=string</dt>
<dd>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL type</th>
<th class="tableblock halign-left valign-top">Literal type</th>
<th class="tableblock halign-left valign-top">Semantic type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NUMERIC[(M[,D])]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DECIMAL[(M[,D])]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_spatial_data_types"><a class="anchor" href="#_spatial_data_types"></a>Spatial data types</h3>
<div class="paragraph">
<p>Currently, the Debezium MySQL connector supports the following spatial data types:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL type</th>
<th class="tableblock halign-left valign-top">Literal type</th>
<th class="tableblock halign-left valign-top">Semantic type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GEOMETRY, LINESTRING, POLYGON, MULTIPOINT, MULTILINESTRING, MULTIPOLYGON, GEOMETRYCOLLECTION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRUCT</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>io.debezium.data.geometry.Geometry</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Contains a structure with two fields:
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srid (INT32</code>: a spatial reference system id that defines the type of geometry object stored in the structure</p>
</li>
<li>
<p><code>wkb (BYTES)</code>: a binary representation of the geometry object encoded in the Well-Known-Binary (wkb) format. See the <a href="https://www.opengeospatial.org/standards/sfa">Open Geospatial Consortium</a> for more details.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-mysql-connector-and-kafka-topics_debezium"><a class="anchor" href="#the-mysql-connector-and-kafka-topics_debezium"></a>The MySQL connector and Kafka topics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Debezium MySQL connector writes events for all <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code> operations from a single table to a single Kafka topic. The Kafka topic naming convention is as follows:</p>
</div>
<div class="listingblock">
<div class="title">format</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">serverName.databaseName.tableName</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 1. example</div>
<div class="content">
<div class="paragraph">
<p>Let us say that <code>fulfillment</code> is the server name and <code>inventory</code> is the database which contains <strong>three</strong> tables of <code>orders</code>, <code>customers</code>, and <code>products</code>. The Debezium MySQL connector produces events on three Kafka topics, one for each table in the database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">fulfillment.inventory.orders

fulfillment.inventory.customers

fulfillment.inventory.products</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mysql-supported-topologies_debezium"><a class="anchor" href="#mysql-supported-topologies_debezium"></a>MySQL supported topologies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Debezium MySQL connector supports the following MySQL topologies:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Standalone</dt>
</dl>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>When a single MySQL server is used, the server must have the binlog enabled (<em>and optionally GTIDs enabled</em>) so the Debezium MySQL connector can monitor the server. This is often acceptable, since the binary log can also be used as an incremental <a href="https://dev.mysql.com/doc/refman/5.7/en/backup-methods.html">backup</a>. In this case, the MySQL connector always connects to and follows this standalone MySQL server instance.</p>
</div>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Master and slave</dt>
</dl>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The Debezium MySQL connector can follow one of the masters or one of the slaves (<em>if that slave has its binlog enabled</em>), but the connector only sees changes in the cluster that are visible to that server. Generally, this is not a problem except for the multi-master topologies.</p>
</div>
<div class="paragraph">
<p>The connector records its position in the servers binlog, which is different on each server in the cluster. Therefore, the connector will need to follow just one MySQL server instance. If that server fails, it must be restarted or recovered before the connector can continue.</p>
</div>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">High available clusters</dt>
</dl>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>A variety of <a href="https://dev.mysql.com/doc/mysql-ha-scalability/en/">high availability</a> solutions exist for MySQL, and they make it far easier to tolerate and almost immediately recover from problems and failures. Most HA MySQL clusters use GTIDs so that slaves are able to keep track of all changes on any of the master.</p>
</div>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Multi-master</dt>
</dl>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>A <a href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-replication-multi-master.html">multi-master MySQL topology</a> uses one or more MySQL slaves that each replicate from multiple masters. This is a powerful way to aggregate the replication of multiple MySQL clusters, and requires using GTIDs.</p>
</div>
<div class="paragraph">
<p>The Debezium MySQL connector can use these multi-master MySQL slaves as sources, and can fail over to different multi-master MySQL slaves as long as thew new slave is caught up to the old slave (<em>e.g., the new slave has all of the transactions that were last seen on the first slave</em>). This works even if the connector is only using a subset of databases and/or tables, as the connector can be configured to include or exclude specific GTID sources when attempting to reconnect to a new multi-master MySQL slave and find the correct position in the binlog.</p>
</div>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Hosted</dt>
</dl>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>There is support for the Debezium MySQL connector to use hosted options such as Amazon RDS and Amazon Aurora.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Because these hosted options do not allow a <strong>global read lock</strong>, table-level locks are used to create the <em>consistent snapshot</em>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</article>
    <footer class="footer">
        <div class="wrapper">
            <div class="copyright">Copyright &copy; 2020 Debezium Community</div>
        </div>
    </footer>
</main>
</div>
<script>
    /* Make sure TOC carets are expanded if sub-elements exist */
    $("#toc").each(function(i,v) {
      $(this).closest('article').addClass('with-toc');
    });

    $("#toc ul.sectlevel1 > li").each(function(i,v) {
      $(this).has("ul").addClass("expanded");
    });

    $(function() {
        /* Expands all the documentation submenus */
        $(".nav-list > .nav-item:not(.is-active) .nav-item-toggle").click();
    });

    /*
    $(".doc.with-toc").each(function(i,v) {
        var tocWidth = $(".toc").width();
        $(this).css("max-width", "calc(100% - " + (tocWidth+75) + "px)");
    });
    */
</script>
<script src="../../../debezium-antora/js/site.js"></script>
<script async src="../../../debezium-antora/js/vendor/highlight.js"></script>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-10656779-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76464546-1', 'auto');
  ga('send', 'pageview');
  ga('set', 'anonymizeIp', true);
  ga('require', 'linkid', 'linkid.js');
</script>
</body>
</html>