<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setting up MySQL server :: Debezium Documentation</title>
    <link rel="canonical" href="https://www.debezium.io/documentation/reference/assemblies/cdc-mysql-connector/as_setup-the-mysql-server.html">
    <meta name="generator" content="Antora 2.2.0">
<link rel="stylesheet" href="../../../debezium-antora/css/site.css">
<link rel="stylesheet" href="../../../debezium-antora/css/debezium-antora.css">
<link rel="stylesheet" href="../../../debezium-antora/css/highlightjs-dark.css">
<link rel="stylesheet" href="https://static.jboss.org/css/rhbar.css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.js"></script>
</head>
<body class="article">
<header class="header">
  <div id="rhbar">
      <a class="jbdevlogo" href="https://www.jboss.org/projects/about"></a>
      <a class="rhlogo" href="https://www.redhat.com"></a>
  </div>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
          <img src="/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 14px;"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/documentation/faq">FAQ</a>
        <a class="navbar-item" href="/documentation">DOCUMENTATION</a>
        <a class="navbar-item" href="/releases">RELEASES</a>
        <a class="navbar-item" href="/community">COMMUNITY</a>
        <a class="navbar-item" href="/blog">BLOG</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="reference" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Debezium Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tutorial.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../install.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../postgres-plugins.html">PostgreSQL Decoding Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../features.html">Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/avro.html">Avro Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/topic-routing.html">Topic Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/event-flattening.html">New Record State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/mongodb-event-flattening.html">MongoDB New Document State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/outbox-event-router.html">Outbox Event Router</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../connectors/mysql.html">MySQL</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="as_overview-of-how-the-mysql-connector-works.html">How It Works</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="as_setup-the-mysql-server.html">Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="as_deploy-the-mysql-connector.html">Deployment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="as_connector-common-issues.html">Common Issues</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/mongodb.html">MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/postgresql.html">PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/oracle.html">Oracle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/sqlserver.html">SQL Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/cassandra.html">Cassandra</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#integrations/serdes.adoc">Change Event SerDes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/outbox.html">Outbox Quarkus Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#integrations/cloudevents.adoc">CloudEvents</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/openshift.html">Running on Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/embedded.html">Embedding Debezium</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Debezium Documentation</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Debezium Documentation</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">master</a>
        </li>
        <li class="version">
          <a href="../../1.1/index.html">1.1</a>
        </li>
        <li class="version">
          <a href="../../1.0/index.html">1.0</a>
        </li>
        <li class="version">
          <a href="../../0.10/index.html">0.10</a>
        </li>
        <li class="version">
          <a href="../../0.9/index.html">0.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main" class="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Debezium Documentation</a></li>
    <li>Connectors</li>
    <li><a href="../../connectors/mysql.html">MySQL</a></li>
    <li><a href="as_setup-the-mysql-server.html">Setup</a></li>
  </ul>
</nav>
    <div class="page-versions-container">
    Version:
    <div class="page-versions">
        <button class="version-menu-toggle versions-menu-current" title="Show other versions of page">master</button>
        <!--<button class="version-menu-toggle versions-menu-select" title="Select other versions">Select</button>-->
        <div class="version-menu">
                <a class="version is-current" href="as_setup-the-mysql-server.html">master</a>
                <a class="version" href="../../1.1/assemblies/cdc-mysql-connector/as_setup-the-mysql-server.html">1.1</a>
                <a class="version is-missing" href="../../1.0/index.html">1.0</a>
                <a class="version is-missing" href="../../0.10/index.html">0.10</a>
                <a class="version is-missing" href="../../0.9/index.html">0.9</a>
        </div>
        |
    </div>
    </div>
  <div class="edit-this-page"><a href="https://github.com/debezium/debezium/edit/master/documentation/modules/ROOT/pages/assemblies/cdc-mysql-connector/as_setup-the-mysql-server.adoc">Edit this Page</a></div>
  </div>
<article class="doc">
<h1 class="page">Setting up MySQL server</h1>
<div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#create-a-mysql-user-for-cdc_debezium">Creating a MySQL user for Debezium</a></li>
<li><a href="#enable-the-mysql-binlog-for-cdc_debezium">Enabling the MySQL binlog for Debezium</a></li>
<li><a href="#enable-mysql-gtids-for-cdc_debezium">Enabling MySQL Global Transaction Identifiers for Debezium</a></li>
<li><a href="#setup-session-timeouts-for-cdc_debezium">Setting up session timeouts for Debezium</a></li>
<li><a href="#enable-query-log-events-for-cdc_debezium">Enabling query log events for Debezium</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-a-mysql-user-for-cdc_debezium"><a class="anchor" href="#create-a-mysql-user-for-cdc_debezium"></a>Creating a MySQL user for Debezium</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You have to define a MySQL user with appropriate permissions on all databases that the Debezium MySQL connector monitors.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a MySQL server.</p>
</li>
<li>
<p>You must know basic SQL commands.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create the MySQL user:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>mysql&gt; CREATE USER 'user'@'localhost' IDENTIFIED BY 'password';</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Grant the required permissions to the user:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-SQL hljs" data-lang="SQL">mysql&gt; GRANT SELECT, RELOAD, SHOW DATABASES, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'user' IDENTIFIED BY 'password';</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <a href="#permissions-explained-mysql-connector">permissions explained</a> for notes on each permission.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If using a hosted option such as Amazon RDS or Amazon Aurora that do not allow a <strong>global read lock</strong>, table-level locks are used to create the <em>consistent snapshot</em>. In this case, you need to also grant <code>LOCK_TABLES</code> permissions to the user that you create. See <a href="#overview-of-how-the-mysql-connector-works">[overview-of-how-the-mysql-connector-works]</a> for more details.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Finalize the user&#8217;s permissions:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>mysql&gt; FLUSH PRIVILEGES;</pre>
</div>
</div>
<div class="sect2">
<h3 id="_permissions_explained"><a class="anchor" href="#_permissions_explained"></a>Permissions explained</h3>
<table id="permissions-explained-mysql-connector" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Permission/item</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>enables the connector to select rows from tables in databases</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is only used when performing a snapshot.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RELOAD</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>enables the connector the use of the <code>FLUSH</code> statement to clear or reload internal caches, flush tables, or acquire locks.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is only used when performing a snapshot.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SHOW DATABASES</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>enables the connector to see database names by issuing the <code>SHOW DATABASE</code> statement.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is only used when performing a snapshot.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REPLICATION SLAVE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enables the connector to connect to and read the MySQL server binlog.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REPLICATION CLIENT</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>enables the connector the use of following statements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SHOW MASTER STATUS</code></p>
</li>
<li>
<p><code>SHOW SLAVE STATUS</code></p>
</li>
<li>
<p><code>SHOW BINARY LOGS</code></p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This is always required for the connector.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ON</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Identifies the <strong>database</strong> to which the permission apply.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TO 'user'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the <strong>user</strong> to which the permissions are granted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IDENTIFIED BY 'password'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the <strong>password</strong> for the user.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enable-the-mysql-binlog-for-cdc_debezium"><a class="anchor" href="#enable-the-mysql-binlog-for-cdc_debezium"></a>Enabling the MySQL binlog for Debezium</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You must enable binary logging for MySQL replication. The binary logs record transaction updates for replication tools to propogate changes.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a MySQL server.</p>
</li>
<li>
<p>You should have appropriate MySQL user privileges.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Check if the <code>log-bin</code> option is already on or not.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>mysql&gt; SELECT variable_value as "BINARY LOGGING STATUS (log-bin) ::"
FROM information_schema.global_variables WHERE variable_name='log_bin';</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>If <code>OFF</code>, configure your MySQL server configuration file with the following:</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <a href="#binlog-configuration-properties-mysql-connector">Binlog config properties</a> for notes on each property.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">server-id         = 223344 <i class="conum" data-value="1"></i><b>(1)</b>
log_bin           = mysql-bin <i class="conum" data-value="2"></i><b>(2)</b>
binlog_format     = ROW <i class="conum" data-value="3"></i><b>(3)</b>
binlog_row_image  = FULL <i class="conum" data-value="4"></i><b>(4)</b>
expire_logs_days  = 10 <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Confirm your changes by checking the binlog status once more.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>mysql&gt; SELECT variable_value as "BINARY LOGGING STATUS (log-bin) ::"
FROM information_schema.global_variables WHERE variable_name='log_bin';</pre>
</div>
</div>
<div class="sect2">
<h3 id="_binlog_configuration_properties"><a class="anchor" href="#_binlog_configuration_properties"></a>Binlog configuration properties</h3>
<table id="binlog-configuration-properties-mysql-connector" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Number</th>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>server-id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value for the <code>server-id</code> must be unique for each server and replication client within the MySQL cluster. When the MySQL connector is setup, we assign the connector a unique server ID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>log_bin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of <code>log_bin</code> is the base name of the sequence of binlog files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>binlog_format</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>binlog-format</code> must be set to <code>ROW</code> or <code>row</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>binlog_row_image</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>binlog_row_image</code> must be set to <code>FULL</code> or <code>full</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expire_logs_days</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This is the number of days for automatic binlog file removal. The default is <code>0</code> which means no automatic removal.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Set the value to match the needs of your environment.
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enable-mysql-gtids-for-cdc_debezium"><a class="anchor" href="#enable-mysql-gtids-for-cdc_debezium"></a>Enabling MySQL Global Transaction Identifiers for Debezium</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Global transaction identifiers (GTIDs) uniquely identify transactions that occur on a server within a cluster. Though not required for the Debezium MySQL connector, using GTIDs simplifies replication and allows you to more easily confirm if master and slave servers are consistent.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
GTIDs are only available from MySQL 5.6.5 and later. See the <a href="https://dev.mysql.com/doc/refman/8.0/en/replication-options-gtids.html#option_mysqld_gtid-mode">MySQL documentation</a> for more details.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a MySQL server.</p>
</li>
<li>
<p>You must know basic SQL commands.</p>
</li>
<li>
<p>You must have access to the MySQL configuration file.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable <code>gtid_mode</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>mysql&gt; gtid_mode=ON</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Enable <code>enforce_gtid_consistency</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>mysql&gt; enforce_gtid_consistency=ON</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Confirm the changes:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>mysql&gt; show global variables like '%GTID%';</pre>
</div>
</div>
<div class="listingblock">
<div class="title">response</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-SQL hljs" data-lang="SQL">+--------------------------+-------+
| Variable_name            | Value |
+--------------------------+-------+
| enforce_gtid_consistency | ON    |
| gtid_mode                | ON    |
+--------------------------+-------+</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_options_explained"><a class="anchor" href="#_options_explained"></a>Options explained</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Permission/item</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gtid_mode</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean which specifies whether GTID mode of the MySQL server is enabled or not.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ON</code> = enabled</p>
</li>
<li>
<p><code>OFF</code> = disabled</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>enforce_gtid_consistency</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean which instructs the server whether or not to enforce GTID consistency by allowing the execution of statements that can be logged in a transactionally safe manner; required when using GTIDs.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ON</code> = enabled</p>
</li>
<li>
<p><code>OFF</code> = disabled</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setup-session-timeouts-for-cdc_debezium"><a class="anchor" href="#setup-session-timeouts-for-cdc_debezium"></a>Setting up session timeouts for Debezium</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When an initial consistent snapshot is made for large databases, your established connection could timeout while the tables are being read. You can prevent this behavior by configuring <code>interactive_timeout</code> and <code>wait_timeout</code> in your MySQL configuration file.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a MySQL server.</p>
</li>
<li>
<p>You must know basic SQL commands.</p>
</li>
<li>
<p>You must have access to the MySQL configuration file.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Configure <code>interactive_timeout</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>mysql&gt; interactive_timeout=&lt;duration-in-seconds&gt;</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Configure <code>wait_timeout</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>mysql&gt; wait_timeout= &lt;duration-in-seconds&gt;</pre>
</div>
</div>
<div class="sect2">
<h3 id="_options_explained_2"><a class="anchor" href="#_options_explained_2"></a>Options explained</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Permission/item</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>interactive_timeout</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of seconds the server waits for activity on an interactive connection before closing it.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <a href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_interactive_timeout">MySQL&#8217;s documentation</a> for more details.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wait_timeout</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of seconds the server waits for activity on a noninteractive connection before closing it.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <a href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_wait_timeout">MySQL&#8217;s documentation</a> for more details.
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enable-query-log-events-for-cdc_debezium"><a class="anchor" href="#enable-query-log-events-for-cdc_debezium"></a>Enabling query log events for Debezium</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You might want to see the original <code>SQL</code> statement for each binlog event. Enabling the <code>binlog_rows_query_log_events</code> options in the MySQL configuration file allows you to do this.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This options is only available from MySQL 5.6 and later.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a MySQL server.</p>
</li>
<li>
<p>You must know basic SQL commands.</p>
</li>
<li>
<p>You must have access to the MySQL configuration file.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable <code>binlog_rows_query_log_events</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>mysql&gt; binlog_rows_query_log_events=ON</pre>
</div>
</div>
<div class="sect2">
<h3 id="_options_explained_3"><a class="anchor" href="#_options_explained_3"></a>Options explained</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Permission/item</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>binlog_rows_query_log_events`</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean which enables/disables support for including the original <code>SQL</code> statement in the binlog entry.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ON</code> = enabled</p>
</li>
<li>
<p><code>OFF</code> = disabled</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</article>
    <footer class="footer">
        <div class="wrapper">
            <div class="copyright">Copyright &copy; 2020 Debezium Community</div>
        </div>
    </footer>
</main>
</div>
<script>
    /* Make sure TOC carets are expanded if sub-elements exist */
    $("#toc").each(function(i,v) {
      $(this).closest('article').addClass('with-toc');
    });

    $("#toc ul.sectlevel1 > li").each(function(i,v) {
      $(this).has("ul").addClass("expanded");
    });

    $(function() {
        /* Expands all the documentation submenus */
        $(".nav-list > .nav-item:not(.is-active) .nav-item-toggle").click();
    });

    /*
    $(".doc.with-toc").each(function(i,v) {
        var tocWidth = $(".toc").width();
        $(this).css("max-width", "calc(100% - " + (tocWidth+75) + "px)");
    });
    */
</script>
<script src="../../../debezium-antora/js/site.js"></script>
<script async src="../../../debezium-antora/js/vendor/highlight.js"></script>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-10656779-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76464546-1', 'auto');
  ga('send', 'pageview');
  ga('set', 'anonymizeIp', true);
  ga('require', 'linkid', 'linkid.js');
</script>
</body>
</html>