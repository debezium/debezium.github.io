<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Monitoring Debezium :: Debezium Documentation</title>
    <link rel="canonical" href="https://debezium.io/documentation/reference/stable/operations/monitoring.html">
    <meta name="generator" content="Antora 3.1.7">
<link rel="stylesheet" href="../../../debezium-antora/css/site.css">
<link rel="stylesheet" href="../../../debezium-antora/css/debezium-antora.css">
<link rel="stylesheet" href="../../../debezium-antora/css/highlightjs-dark.css">
<link rel="stylesheet" href="https://static.jboss.org/css/rhbar.css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.js"></script>
<script src="../../../debezium-antora/js/jquery.ba-floatingscrollbar.js"></script>
</head>
<body class="article">
<header class="header">
  <div id="rhbar">
      <a class="jbdevlogo" href="https://developers.redhat.com"></a>
      <a class="rhlogo" href="https://www.redhat.com"></a>
  </div>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
          <img src="/assets/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 14px;"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/documentation/faq">FAQ</a>
        <a class="navbar-item" href="/documentation">DOCUMENTATION</a>
        <a class="navbar-item" href="/releases">RELEASES</a>
        <a class="navbar-item" href="/community">COMMUNITY</a>
        <a class="navbar-item" href="/blog">BLOG</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="reference" data-version="stable">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Debezium 2.7 Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorial.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../install.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../postgres-plugins.html">PostgreSQL Decoding Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features.html">Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/avro.html">Avro Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/topic-auto-create-config.html">Customizing Topic Auto-Creation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/signalling.html">Sending Signals to Debezium</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/notification.html">Receive notifications from Debezium</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/mysql.html">MySQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/mariadb.html">MariaDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/mongodb.html">MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/postgresql.html">PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/oracle.html">Oracle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/sqlserver.html">SQL Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/db2.html">Db2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/cassandra.html">Cassandra</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/vitess.html">Vitess</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/spanner.html">Spanner</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/jdbc.html">JDBC</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/informix.html">Informix</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Transformations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/topic-routing.html">Topic Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/event-flattening.html">New Record State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/mongodb-event-flattening.html">MongoDB New Document State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/event-changes.html">Event Changes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/outbox-event-router.html">Outbox Event Router</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/mongodb-outbox-event-router.html">MongoDB Outbox Event Router</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/filtering.html">Message Filtering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/schema-change-event-filter.html">Schema Change Event Filtering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/content-based-routing.html">Content-Based Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/applying-transformations-selectively.html">Using SMT Predicates to Selectively Apply Transformations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/partition-routing.html">Partition Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/header-to-value.html">HeaderToValue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/timezone-converter.html">Timezone Converter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/timescaledb.html">TimescaleDB Integration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/convert-cloudevent-to-saveable-form.html">Convert CloudEvents to Saveable Form</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Post Processors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../post-processors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../post-processors/reselect-columns.html">Reselect Columns</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">API and SPI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../development/engine.html">Debezium Engine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../development/converters.html">Custom Converters</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/serdes.html">Change Event SerDes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/outbox.html">Outbox Quarkus Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/cloudevents.html">CloudEvents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/tracing.html">OpenTelemetry</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/testcontainers.html">Integration Testing with Testcontainers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debezium-server.html">Debezium Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="logging.html">Logging</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="kubernetes.html">Running on Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="openshift.html">Running on Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debezium-ui.html">Debezium UI</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Debezium Documentation</span>
    <span class="version">2.7</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Debezium Documentation</span>
      <ul class="versions">
        <li class="version">
          <a href="/documentation/reference/nightly/index.html">nightly</a>
        </li>
        <li class="version is-current">
          <a href="/documentation/reference/2.7/index.html">2.7</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/3.0/index.html">3.0</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.6/index.html">2.6</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.5/index.html">2.5</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.4/index.html">2.4</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.3/index.html">2.3</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.2/index.html">2.2</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.1/index.html">2.1</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.0/index.html">2.0</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/1.9/index.html">1.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main" class="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Debezium Documentation</a></li>
    <li>Operations</li>
    <li><a href="monitoring.html">Monitoring</a></li>
  </ul>
</nav>
    <div class="page-versions-container">
    Version:
    <div class="page-versions">
        <button class="version-menu-toggle versions-menu-current" title="Show other versions of page">2.7</button>
        <div class="version-menu">
                <a class="version" href="/documentation/reference/nightly/index.html">nightly</a>
                <a class="version is-current" href="/documentation/reference/2.7/index.html">2.7</a>
                <a class="version" href="/documentation/reference/3.0/index.html">3.0</a>
                <a class="version" href="/documentation/reference/2.6/index.html">2.6</a>
                <a class="version" href="/documentation/reference/2.5/index.html">2.5</a>
                <a class="version" href="/documentation/reference/2.4/index.html">2.4</a>
                <a class="version" href="/documentation/reference/2.3/index.html">2.3</a>
                <a class="version" href="/documentation/reference/2.2/index.html">2.2</a>
                <a class="version" href="/documentation/reference/2.1/index.html">2.1</a>
                <a class="version" href="/documentation/reference/2.0/index.html">2.0</a>
                <a class="version" href="/documentation/reference/1.9/index.html">1.9</a>
        </div>
        |
    </div>
    </div>
  <div class="edit-this-page"><a href="https://github.com/debezium/debezium/edit/2.7/documentation/modules/ROOT/pages/operations/monitoring.adoc">Edit this Page</a></div>
  </div>
<div class="article-grid">
<div class="article-cell1">
<article class="doc">
        
    <!-- This partial is a placeholder -->            <h1 class="page">Monitoring Debezium</h1>
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#metrics-monitoring-connectors">Metrics for monitoring Debezium connectors</a></li>
<li><a href="#enabling-jmx-local-installation">Enabling JMX in local installations</a>
<ul class="sectlevel2">
<li><a href="#zookeeper-jmx-environment-variables">Zookeeper JMX environment variables</a></li>
<li><a href="#kafka-jmx-environment-variables">Kafka JMX environment variables</a></li>
<li><a href="#kafka-connect-jmx-environment-variables">Kafka Connect JMX environment variables</a></li>
</ul>
</li>
<li><a href="#enabling-jmx-docker">Enabling JMX in Docker</a>
<ul class="sectlevel2">
<li><a href="#zookeeper-jmx-environment-variables-docker">Zookeeper JMX environment variables in Docker</a></li>
<li><a href="#kafka-jmx-environment-variables-docker">Kafka JMX environment variables in Docker</a></li>
<li><a href="#kafka-connect-jmx-environment-variables-docker">Kafka Connect JMX environment variables in Docker</a></li>
</ul>
</li>
<li><a href="#using-prometheus-grafana">Using Prometheus and Grafana</a></li>
<li><a href="#java-flight-recorder">Java Flight Recording</a></li>
</ul>
</div>
<div class="paragraph">
<p>You can use the JMX metrics provided by <a href="https://zookeeper.apache.org/doc/r3.1.2/zookeeperJMX.html">Apache Zookeeper</a>, <a href="https://kafka.apache.org/documentation/#monitoring">Apache Kafka</a>, and <a href="https://kafka.apache.org/documentation/#connect_monitoring">Kafka Connect</a> to monitor Debezium.
To use these metrics, you must enable them when you start the Zookeeper, Kafka, and Kafka Connect services.
Enabling JMX involves setting the correct environment variables.
The environment variables that you must set depend on whether you are running Zookeeper, Kafka, and Kafka Connect in a local installation or in Docker containers.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you are running multiple services on the same machine,
be sure to use distinct JMX ports for each service.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="metrics-monitoring-connectors"><a class="anchor" href="#metrics-monitoring-connectors"></a>Metrics for monitoring Debezium connectors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to the built-in support for JMX metrics in Kafka, Zookeeper, and Kafka Connect,
each connector provides additional metrics that you can use to monitor their activities.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../connectors/db2.html#db2-monitoring" class="xref page">Db2 connector metrics</a></p>
</li>
<li>
<p><a href="../connectors/mongodb.html#mongodb-monitoring" class="xref page">MongoDB connector metrics</a></p>
</li>
<li>
<p><a href="../connectors/mysql.html#mysql-monitoring" class="xref page">MySQL connector metrics</a></p>
</li>
<li>
<p><a href="../connectors/oracle.html#oracle-monitoring" class="xref page">Oracle connector metrics</a></p>
</li>
<li>
<p><a href="../connectors/postgresql.html#postgresql-monitoring" class="xref page">PostgreSQL connector metrics</a></p>
</li>
<li>
<p><a href="../connectors/sqlserver.html#sqlserver-monitoring" class="xref page">SQL Server connector metrics</a></p>
</li>
<li>
<p><a href="../connectors/cassandra.html#cassandra-monitoring" class="xref page">Cassandra connector metrics</a></p>
</li>
<li>
<p><a href="../connectors/vitess.html#vitess-monitoring" class="xref page">Vitess connector metrics</a></p>
</li>
<li>
<p><a href="../connectors/spanner.html#spanner-monitoring" class="xref page">Spanner connector metrics</a></p>
</li>
<li>
<p><a href="../connectors/informix.html#informix-monitoring" class="xref page">Informix connector metrics</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enabling-jmx-local-installation"><a class="anchor" href="#enabling-jmx-local-installation"></a>Enabling JMX in local installations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With Zookeeper, Kafka, and Kafka Connect,
you enable JMX by setting the appropriate environment variables when you start each service.</p>
</div>
<div class="sect2">
<h3 id="zookeeper-jmx-environment-variables"><a class="anchor" href="#zookeeper-jmx-environment-variables"></a>Zookeeper JMX environment variables</h3>
<div class="paragraph">
<p>Zookeeper has built-in support for JMX.
When running Zookeeper using a local installation,
the <code>zkServer.sh</code> script recognizes the following environment variables:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>JMXPORT</code></dt>
<dd>
<p>Enables JMX and specifies the port number that will be used for JMX.
The value is used to specify the JVM parameter <code>-Dcom.sun.management.jmxremote.port=$JMXPORT</code>.</p>
</dd>
<dt class="hdlist1"><code>JMXAUTH</code></dt>
<dd>
<p>Whether JMX clients must use password authentication when connecting.
Must be either <code>true</code> or <code>false</code>.
The default is <code>false</code>.
The value is used to specify the JVM parameter <code>-Dcom.sun.management.jmxremote.authenticate=$JMXAUTH</code>.</p>
</dd>
<dt class="hdlist1"><code>JMXSSL</code></dt>
<dd>
<p>Whether JMX clients connect using SSL/TLS.
Must be either <code>true</code> or <code>false</code>.
The default is <code>false</code>.
The value is used to specify the JVM parameter <code>-Dcom.sun.management.jmxremote.ssl=$JMXSSL</code>.</p>
</dd>
<dt class="hdlist1"><code>JMXLOG4J</code></dt>
<dd>
<p>Whether the Log4J JMX MBeans should be disabled.
Must be either <code>true</code> (default) or <code>false</code>.
The default is <code>true</code>.
The value is used to specify the JVM parameter <code>-Dzookeeper.jmx.log4j.disable=$JMXLOG4J</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="kafka-jmx-environment-variables"><a class="anchor" href="#kafka-jmx-environment-variables"></a>Kafka JMX environment variables</h3>
<div class="paragraph">
<p>When running Kafka using a local installation,
the <code>kafka-server-start.sh</code> script recognizes the following environment variables:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>JMX_PORT</code></dt>
<dd>
<p>Enables JMX and specifies the port number that will be used for JMX.
The value is used to specify the JVM parameter <code>-Dcom.sun.management.jmxremote.port=$JMX_PORT</code>.</p>
</dd>
<dt class="hdlist1"><code>KAFKA_JMX_OPTS</code></dt>
<dd>
<p>The JMX options, which are passed directly to the JVM during startup.
The default options are:</p>
<div class="ulist">
<ul>
<li>
<p><code>-Dcom.sun.management.jmxremote</code></p>
</li>
<li>
<p><code>-Dcom.sun.management.jmxremote.authenticate=false</code></p>
</li>
<li>
<p><code>-Dcom.sun.management.jmxremote.ssl=false</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="kafka-connect-jmx-environment-variables"><a class="anchor" href="#kafka-connect-jmx-environment-variables"></a>Kafka Connect JMX environment variables</h3>
<div class="paragraph">
<p>When running Kafka using a local installation,
the <code>connect-distributed.sh</code> script recognizes the following environment variables:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>JMX_PORT</code></dt>
<dd>
<p>Enables JMX and specifies the port number that will be used for JMX.
The value is used to specify the JVM parameter <code>-Dcom.sun.management.jmxremote.port=$JMX_PORT</code>.</p>
</dd>
<dt class="hdlist1"><code>KAFKA_JMX_OPTS</code></dt>
<dd>
<p>The JMX options, which are passed directly to the JVM during startup.
The default options are:</p>
<div class="ulist">
<ul>
<li>
<p><code>-Dcom.sun.management.jmxremote</code></p>
</li>
<li>
<p><code>-Dcom.sun.management.jmxremote.authenticate=false</code></p>
</li>
<li>
<p><code>-Dcom.sun.management.jmxremote.ssl=false</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enabling-jmx-docker"><a class="anchor" href="#enabling-jmx-docker"></a>Enabling JMX in Docker</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are running Apache Zookeeper, Kafka, and Kafka Connect in via the Debezium container images,
enabling JMX requires several additional environment variables that are not typically needed when running on a local machine.
This is because the JVM requires the host name to which it will advertise itself to JMX clients.
Thus, Debezium&#8217;s container images for Zookeeper, Kafka, and Kafka Connect use several environment variables to enable and configure JMX.
Most of the environment variables are the same for all of the images,
but there are some minor differences.</p>
</div>
<div class="sect2">
<h3 id="zookeeper-jmx-environment-variables-docker"><a class="anchor" href="#zookeeper-jmx-environment-variables-docker"></a>Zookeeper JMX environment variables in Docker</h3>
<div class="paragraph">
<p>The <code>debezium/zookeeper</code> image recognizes the following JMX-related environment variables:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>JMXPORT</code> (Required)</dt>
<dd>
<p>The port number that will be used for JMX.
The value is used to specify the following JVM parameters:</p>
<div class="ulist">
<ul>
<li>
<p><code>-Dcom.sun.management.jmxremote.port=$JMXPORT</code></p>
</li>
<li>
<p><code>-Dcom.sun.management.jmxremote.rmi.port=$JMXPORT</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>JMXHOST</code> (Required)</dt>
<dd>
<p>The IP address or resolvable host name of the Docker host,
which JMX uses to construct a URL sent to the JMX client.
A value of <code>localhost</code> or <code>127.0.0.1</code> will not work.
Typically, <code>0.0.0.0</code> can be used.
The value is used to specify the JVM parameter <code>-Djava.rmi.server.hostname=$JMXHOST</code>.</p>
</dd>
<dt class="hdlist1"><code>JMXAUTH</code></dt>
<dd>
<p>Whether JMX clients must use password authentication when connecting.
Must be either <code>true</code> or <code>false</code>.
The default is <code>false</code>.
The value is used to specify the JVM parameter <code>-Dcom.sun.management.jmxremote.authenticate=$JMXAUTH</code>.</p>
</dd>
<dt class="hdlist1"><code>JMXSSL</code></dt>
<dd>
<p>Whether JMX clients connect using SSL/TLS.
Must be either <code>true</code> or <code>false</code>.
The default is <code>false</code>.
The value is used to specify the JVM parameter <code>-Dcom.sun.management.jmxremote.ssl=$JMXSSL</code>.</p>
</dd>
<dt class="hdlist1"><code>JMXLOG4J</code></dt>
<dd>
<p>Whether the Log4J JMX MBeans should be disabled.
Must be either <code>true</code> or <code>false</code>.
The default is <code>true</code>.
The value is used to specify the JVM parameter <code>-Dzookeeper.jmx.log4j.disable=$JMXLOG4J</code>.</p>
</dd>
</dl>
</div>
<div class="exampleblock">
<div class="title">Example 1. Enabling JMX in a Zookeeper Docker container</div>
<div class="content">
<div class="paragraph">
<p>The following example Docker command starts a container using the <code>debezium/zookeeper</code> image with values for the <code>JMXPORT</code> and <code>JMXHOST</code> environment variables,
and maps the Docker host&#8217;s port 9010 to the container&#8217;s JMX port:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">$ docker run -it --rm --name zookeeper -p 2181:2181 -p 2888:2888 -p 3888:3888 -p 9010:9010 -e JMXPORT=9010 -e JMXHOST=10.0.1.10 quay.io/debezium/zookeeper:latest</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="kafka-jmx-environment-variables-docker"><a class="anchor" href="#kafka-jmx-environment-variables-docker"></a>Kafka JMX environment variables in Docker</h3>
<div class="paragraph">
<p>The <code>debezium/kafka</code> image recognizes the following JMX-related environment variables:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>JMXPORT</code> (Required)</dt>
<dd>
<p>The port number that will be used for JMX.
The value is used to specify the following JVM parameters:</p>
<div class="ulist">
<ul>
<li>
<p><code>-Dcom.sun.management.jmxremote.port=$JMXPORT</code></p>
</li>
<li>
<p><code>-Dcom.sun.management.jmxremote.rmi.port=$JMXPORT</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>JMXHOST</code> (Required)</dt>
<dd>
<p>The IP address or resolvable host name of the Docker host,
which JMX uses to construct a URL sent to the JMX client.
A value of <code>localhost</code> or <code>127.0.0.1</code> will not work.
Typically, <code>0.0.0.0</code> can be used.
The value is used to specify the JVM parameter <code>-Djava.rmi.server.hostname=$JMXHOST</code>.</p>
</dd>
<dt class="hdlist1"><code>JMXAUTH</code></dt>
<dd>
<p>Whether JMX clients must use password authentication when connecting.
Must be either <code>true</code> or <code>false</code>.
The default is <code>false</code>.
The value is used to specify the JVM parameter <code>-Dcom.sun.management.jmxremote.authenticate=$JMXAUTH</code>.</p>
</dd>
<dt class="hdlist1"><code>JMXSSL</code></dt>
<dd>
<p>Whether JMX clients connect using SSL/TLS.
Must be either <code>true</code> or <code>false</code>.
The default is <code>false</code>.
The value is used to specify the JVM parameter <code>-Dcom.sun.management.jmxremote.ssl=$JMXSSL</code>.</p>
</dd>
</dl>
</div>
<div class="exampleblock">
<div class="title">Example 2. Enabling JMX in a Kafka Docker container</div>
<div class="content">
<div class="paragraph">
<p>The following example Docker command starts a container using the <code>debezium/kafka</code> image with values for the <code>JMXPORT</code> and <code>HOST_NAME</code> environment variables,
and maps the Docker host&#8217;s port 9011 to the container&#8217;s JMX port:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">$ docker run -it --rm --name kafka -p 9092:9092 -p 9011:9011 -e JMXPORT=9011 -e JMXHOST=10.0.1.10 --link zookeeper:zookeeper quay.io/debezium/kafka:latest</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="kafka-connect-jmx-environment-variables-docker"><a class="anchor" href="#kafka-connect-jmx-environment-variables-docker"></a>Kafka Connect JMX environment variables in Docker</h3>
<div class="paragraph">
<p>The <code>debezium/connect</code> image recognizes the following JMX-related environment variables:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>JMXPORT</code> (Required)</dt>
<dd>
<p>The port number that will be used for JMX.
The value is used to specify the following JVM parameters:</p>
<div class="ulist">
<ul>
<li>
<p><code>-Dcom.sun.management.jmxremote.port=$JMXPORT</code></p>
</li>
<li>
<p><code>-Dcom.sun.management.jmxremote.rmi.port=$JMXPORT</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>JMXHOST</code> (Required)</dt>
<dd>
<p>The IP address or resolvable host name of the Docker host,
which JMX uses to construct a URL sent to the JMX client.
A value of <code>localhost</code> or <code>127.0.0.1</code> will not work.
Typically, <code>0.0.0.0</code> can be used.
The value is used to specify the JVM parameter <code>-Djava.rmi.server.hostname=$JMXHOST</code>.</p>
</dd>
<dt class="hdlist1"><code>JMXAUTH</code></dt>
<dd>
<p>Whether JMX clients must use password authentication when connecting.
Must be either <code>true</code> or <code>false</code>.
The default is <code>false</code>.
The value is used to specify the JVM parameter <code>-Dcom.sun.management.jmxremote.authenticate=$JMXAUTH</code>.</p>
</dd>
<dt class="hdlist1"><code>JMXSSL</code></dt>
<dd>
<p>Whether JMX clients connect using SSL/TLS.
Must be either <code>true</code> or <code>false</code>.
The default is <code>false</code>.
The value is used to specify the JVM parameter <code>-Dcom.sun.management.jmxremote.ssl=$JMXSSL</code>.</p>
</dd>
</dl>
</div>
<div class="exampleblock">
<div class="title">Example 3. Enabling JMX in a Kafka Connect Docker container</div>
<div class="content">
<div class="paragraph">
<p>The following example Docker command starts a container using the <code>debezium/connect</code> image with values for the <code>JMXPORT</code> and <code>JMXHOST</code> environment variables,
and maps the Docker host&#8217;s port 9012 to the container&#8217;s JMX port:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">$ docker run -it --rm --name connect \
  -p 8083:8083 -p 9012:9012 \
  -e JMXPORT=9012 -e JMXHOST=10.0.1.10 \
  -e GROUP_ID=1 \
  -e CONFIG_STORAGE_TOPIC=my_connect_configs \
  -e OFFSET_STORAGE_TOPIC=my_connect_offsets \
  -e STATUS_STORAGE_TOPIC=my_connect_statuses \
  --link zookeeper:zookeeper \
  --link kafka:kafka \
  --link mysql:mysql \
  quay.io/debezium/connect:latest</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-prometheus-grafana"><a class="anchor" href="#using-prometheus-grafana"></a>Using Prometheus and Grafana</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The metrics exposed by Debezium and Kafka can be exported and displayed with <a href="https://prometheus.io/">Prometheus</a> and <a href="https://grafana.com/">Grafana</a>.
You can find an example for the required configuration and example dashboards for different connectors in the <a href="https://github.com/debezium/debezium-examples/tree/main/monitoring">Debezium examples repository</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>These dashboards are not part of Debezium itself and are maintained on a best-effort basis.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="java-flight-recorder"><a class="anchor" href="#java-flight-recorder"></a>Java Flight Recording</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Debezium container image for Kafka Connect also provides easy-to-use support for <a href="https://openjdk.java.net/jeps/328">JDK Flight Recorder</a>.
To enable the recording it is necessary to set the environment variable <code>ENABLE_JFR=true</code>.
The recording will then be started automatically upon container start.
By default, the recording is enabled, i.e. a continuous recording with default settings is done, which you then can dump using <em>jcmd</em> or JDK Mission Control.</p>
</div>
<div class="paragraph">
<p>It is possible to modify the recorder&#8217;s behaviour.
For that, you need to set either environment variables prefixed with <code>JFR_RECORDING_</code> to set recording parameters.
The part after the prefix is converted to lowercase and underscores are replaced with dashes so <code>JFR_RECORDING_PATH_TO_GC_ROOTS=true</code> becomes <code>path-to-gc-roots=true</code>.</p>
</div>
<div class="paragraph">
<p>Flight Recorder control options can be configured via <code>JFR_OPT_</code> prefixed environment variables.</p>
</div>
</div>
</div>
</article>
</div>
<div class="article-cell2">
</div>
</div>

<div id="toc-rightbar"></div>    <footer class="footer">
        <div class="wrapper">
            <div class="copyright">Copyright &copy; 2024 Debezium Community (Rev: <span class="truncated"><a href="https://github.com/debezium/debezium/commit/bc980c82ec31f23e9f4baa67e41060f59c528c21">bc980c82</a></span>)
            
        </div>
    </footer>
</main></div>
<script>
    /* Make sure TOC carets are expanded if sub-elements exist */
    $("#toc").each(function(i,v) {
      $(this).closest('article').addClass('with-toc');
    });

    $("#toc ul.sectlevel1 > li").each(function(i,v) {
      $(this).has("ul").addClass("expanded");
    });

    $(function() {
        /* Expands all the documentation submenus */
        $(".nav-list > .nav-item:not(.is-active) .nav-item-toggle").click();
    });

    /**
     * This checks if a "#toc" element exists in the DOM and if so:
     *
     *  1. Appends a cloned copy of the #toc node to the #toc-rightbar div.
     *  2. Forces the #toc-rightbar div to be visible.
     *  3. Adds the .toc-right class to the #article-wrapper div to restrict the article's overall width.
     */
    var $toc = $("#toc");
    if ( $toc.length ) {
        $("#toc-rightbar").append($toc.clone());
        $("body .main").addClass("with-toc");
    }

    /**
     * In order to make CSS changes that are backward compatible with old adoc files, this applies a version
     * style to the body tag so we can use it to differentiate between CSS styles per version if needed,
     * such as tfoot rows.
     */
    var $version = $("body .nav-container").data("version");
    var $versionClass = "version-" + $version;
    $versionClass = $versionClass.replace('.','-');
    $("body").addClass($versionClass);

    /** A CSS trick to wrap long-width tables in a div that can be scrolled on smaller screens */
    $("table.tableblock").wrap("<div class='table-scroll-wrapper'></div>");

    $(function() {
        /* apply floating scrollbar to the scroll-wrapper */
        $(".table-scroll-wrapper").floatingScrollbar();
    });

</script>
<script src="../../../debezium-antora/js/site.js"></script>
<script async src="../../../debezium-antora/js/vendor/highlight.js"></script>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-10656779-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76464546-1', 'auto');
  ga('send', 'pageview');
  ga('set', 'anonymizeIp', true);
  ga('require', 'linkid', 'linkid.js');
</script>
</body>
</html>