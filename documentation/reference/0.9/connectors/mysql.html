<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Debezium Connector for MySQL :: Debezium Documentation</title>
    <link rel="canonical" href="https://www.debezium.io/documentation/reference/connectors/mysql.html">
    <meta name="generator" content="Antora 2.2.0">
<link rel="stylesheet" href="../../../debezium-antora/css/site.css">
<link rel="stylesheet" href="../../../debezium-antora/css/debezium-antora.css">
<link rel="stylesheet" href="../../../debezium-antora/css/highlightjs-dark.css">
<link rel="stylesheet" href="https://static.jboss.org/css/rhbar.css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.js"></script>
</head>
<body class="article">
<header class="header">
  <div id="rhbar">
      <a class="jbdevlogo" href="https://www.jboss.org/projects/about"></a>
      <a class="rhlogo" href="https://www.redhat.com"></a>
  </div>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
          <img src="/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 14px;"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/documentation/faq">FAQ</a>
        <a class="navbar-item" href="/documentation">DOCUMENTATION</a>
        <a class="navbar-item" href="/releases">RELEASES</a>
        <a class="navbar-item" href="/community">COMMUNITY</a>
        <a class="navbar-item" href="/blog">BLOG</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="reference" data-version="0.9">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Debezium Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorial.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../install.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../postgres-plugins.html">PostgreSQL Decoding Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features.html">Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/avro.html">Avro Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/topic-routing.html">Topic Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/event-flattening.html">New Record State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/mongodb-event-flattening.html">MongoDB New Document State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/outbox-event-router.html">Outbox Event Router</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html">Overview</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="mysql.html">MySQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mongodb.html">MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="postgresql.html">PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="oracle.html">Oracle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sqlserver.html">SQL Server</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/openshift.html">Running on Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operations/embedded.html">Embedding Debezium</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Debezium Documentation</span>
    <span class="version">0.9</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Debezium Documentation</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../index.html">master</a>
        </li>
        <li class="version">
          <a href="../../1.1/index.html">1.1</a>
        </li>
        <li class="version">
          <a href="../../1.0/index.html">1.0</a>
        </li>
        <li class="version">
          <a href="../../0.10/index.html">0.10</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">0.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main" class="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Debezium Documentation</a></li>
    <li>Connectors</li>
    <li><a href="mysql.html">MySQL</a></li>
  </ul>
</nav>
    <div class="page-versions-container">
    Version:
    <div class="page-versions">
        <button class="version-menu-toggle versions-menu-current" title="Show other versions of page">0.9</button>
        <!--<button class="version-menu-toggle versions-menu-select" title="Select other versions">Select</button>-->
        <div class="version-menu">
                <a class="version" href="../../connectors/mysql.html">master</a>
                <a class="version" href="../../1.1/connectors/mysql.html">1.1</a>
                <a class="version" href="../../1.0/connectors/mysql.html">1.0</a>
                <a class="version" href="../../0.10/connectors/mysql.html">0.10</a>
                <a class="version is-current" href="mysql.html">0.9</a>
        </div>
        |
    </div>
    </div>
  <div class="edit-this-page"><a href="https://github.com/debezium/debezium/edit/0.9/documentation/modules/ROOT/pages/connectors/mysql.adoc">Edit this Page</a></div>
  </div>
<article class="doc">
<h1 class="page">Debezium Connector for MySQL</h1>
<div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#overview">Overview</a></li>
<li><a href="#setting-up-mysql">Setting up MySQL</a>
<ul class="sectlevel2">
<li><a href="#enabling-the-binlog">Enabling the binlog</a></li>
<li><a href="#enabling-gtids-optional">Enabling GTIDs (optional)</a></li>
<li><a href="#enabling-query-log-events-optional">Enabling Query Log Events (optional)</a></li>
<li><a href="#create-a-mysql-user-for-the-connector">Create a MySQL user for the connector</a></li>
</ul>
</li>
<li><a href="#supported-mysql-topologies">Supported MySQL topologies</a>
<ul class="sectlevel2">
<li><a href="#mysql-standalone">MySQL standalone</a></li>
<li><a href="#mysql-master-and-slave">MySQL master and slave</a></li>
<li><a href="#highly-available-mysql-clusters">Highly Available MySQL clusters</a></li>
<li><a href="#multi-master-mysql">Multi-Master MySQL</a></li>
<li><a href="#hosted-mysql">Hosted MySQL</a></li>
</ul>
</li>
<li><a href="#how-the-mysql-connector-works">How the MySQL connector works</a>
<ul class="sectlevel2">
<li><a href="#database-schema-history">Database schema history</a></li>
<li><a href="#snapshots">Snapshots</a></li>
<li><a href="#reading-the-binlog">Reading the MySQL binlog</a></li>
<li><a href="#topic-names">Topics names</a></li>
<li><a href="#schema-change-topic">Schema change topic</a></li>
<li><a href="#events">Events</a></li>
<li><a href="#data-types">Data types</a></li>
<li><a href="#when-things-go-wrong">When things go wrong</a></li>
</ul>
</li>
<li><a href="#deploying-a-connector">Deploying a connector</a>
<ul class="sectlevel2">
<li><a href="#monitoring">Monitoring</a></li>
<li><a href="#example-configuration">Example configuration</a></li>
<li><a href="#connector-properties">Connector properties</a></li>
</ul>
</li>
</ul>
</div>
<div class="paragraph">
<p>Debezium&#8217;s MySQL Connector can monitor and record all of the row-level changes in the databases on a MySQL server or HA MySQL cluster. The first time it connects to a MySQL server/cluster, it reads a consistent snapshot of all of the databases. When that snapshot is complete, the connector continuously reads the changes that were committed to MySQL 5.6 or later and generates corresponding insert, update and delete events. All of the events for each table are recorded in a separate Kafka topic, where they can be easily consumed by applications and services.</p>
</div>
<div class="paragraph">
<p>As of Debezium 0.4.0, this connector adds preliminary support for <a href="https://aws.amazon.com/rds/mysql/">Amazon RDS</a> and <a href="https://aws.amazon.com/rds/aurora/">Amazon Aurora (MySQL compatibility)</a>. However, due to limitations of these hosted forms of MySQL, the connector retains locks during an initial consistent snapshot <a href="#snapshots-without-global-read-locks">for the duration of the snapshot</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MySQL&#8217;s <a href="http://dev.mysql.com/doc/refman/5.7/en/binary-log.html"><em>binary log</em></a>, or <em>binlog</em>, records all operations in the same order they are committed by the database, including changes to the schemas of tables or changes to data stored within the tables. MySQL uses its binlog for replication and recovery.</p>
</div>
<div class="paragraph">
<p>Debezium&#8217;s MySQL connector reads MySQL&#8217;s binary log to understand what and in what order data has changed. It then produces a <em>change event</em> for every row-level insert, update, and delete operation in the binlog, recording all the change events for each table in a separate Kafka topic. Your client applications read the Kafka topics that correspond to the database tables it&#8217;s interested in following, and react to every row-level event it sees in those topics.</p>
</div>
<div class="paragraph">
<p>MySQL is usually set up to purge the binary logs after some period of time. This means that the binary log won&#8217;t have the complete history of all changes that have been made to the database. Therefore, when the MySQL connector first connects to a particular MySQL sever or cluster, it starts by performing a <a href="#snapshot"><em>consistent snapshot</em></a> of each of the databases. When the connector completes the snapshot, it then starts reading the binlog from the exact point at which the snapshot was made. This way, we start with a consistent view of all of the data, yet continue reading without having lost any of the changes made while the snapshot was being made.</p>
</div>
<div class="paragraph">
<p>The connector is also very tolerant of failures. As the connector reads the binlog and produces events, it records the binlog position with each event. If the connector stops for any reason (including communication failures, network problems, or crashes), upon restart it simply continues reading the binlog where it last left off. This includes snapshots: if the snapshot was not completed when the connector is stopped, upon restart it will begin a new snapshot. We&#8217;ll talk later about how the connector behaves <a href="#when-things-go-wrong">when things go wrong</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting-up-mysql"><a class="anchor" href="#setting-up-mysql"></a>Setting up MySQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before the Debezium MySQL connector can be used to monitor the changes committed on a MySQL server, the server must be set up to use <em>row-level binary logging</em> and have a database user with appropriate privileges. If MySQL is configured to use global transaction identifiers (GTIDs), then the Debezium connector can more easily reestablish connection should one of the MySQL servers fail.</p>
</div>
<div class="paragraph">
<p>The following sections outline in more detail how to set up these features in MySQL.</p>
</div>
<div class="sect2">
<h3 id="enabling-the-binlog"><a class="anchor" href="#enabling-the-binlog"></a>Enabling the binlog</h3>
<div class="paragraph">
<p>The MySQL server must be configured to use a <em>row-level</em> binary log, which is described in more detail in the <a href="http://dev.mysql.com/doc/refman/5.7/en/replication-options.html">MySQL documentation</a>. This is most often done in the MySQL server configuration file, and will look similar to the following fragment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>server-id         = 223344
log_bin           = mysql-bin
binlog_format     = row
binlog_row_image  = full
expire_logs_days  = 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the value for <a href="http://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_server_id"><code>server-id</code></a> must be unique for each server and replication client within the MySQL cluster. When we set up the connector, we&#8217;ll also assign the connector a unique server ID.</p>
</li>
<li>
<p>the value for <a href="http://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html#sysvar_log_bin"><code>log_bin</code></a> is the base name for the sequence of binlog files.</p>
</li>
<li>
<p>the value for <a href="http://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html#sysvar_binlog_format"><code>binlog_format</code></a> must be set to <code>row</code> or <code>ROW</code>.</p>
</li>
<li>
<p>the value for <a href="https://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html#sysvar_binlog_row_image"><code>binlog_row_image</code></a> must be set to <code>full</code> or <code>FULL</code>.</p>
</li>
<li>
<p>the value for <a href="http://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_expire_logs_days"><code>expire_log_days</code></a> is the number of days for automatic binary log file removal. The default is 0, which means "no automatic removal," so be sure to set a value that is appropriate for your environment.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Running a MySQL server with binary logging enabled does slightly reduce performance of the MySQL server, but the benefits generally outweigh the costs. Each binlog reader will also place a small load on the server, so using Debezium is a great way to minimize this load while providing the change events to a large variety and number of consumers.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="enabling-gtids-optional"><a class="anchor" href="#enabling-gtids-optional"></a>Enabling GTIDs (optional)</h3>
<div class="paragraph">
<p>The MySQL server can be configured to use <a href="https://dev.mysql.com/doc/refman/5.6/en/replication-gtids.html">GTID-based replication</a>. Global transaction identifiers, or GTIDs, were introduced in MySQL 5.6.5, and they uniquely identify a transaction that occurred on a particular server within a cluster. Using GTIDs greatly simplifies replication and makes it possible to easily confirm whether masters and slaves are consistent. <strong>Note that if you&#8217;re using an earlier version of MySQL, you will not be able to enable GTIDs.</strong></p>
</div>
<div class="paragraph">
<p>Enabling GTIDs can be done in the MySQL server configuration file, and will look similar to the following fragment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>gtid_mode                 = on
enforce_gtid_consistency  = on</code></pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the value for <a href="https://dev.mysql.com/doc/refman/5.6/en/replication-options-gtids.html#option_mysqld_gtid-mode"><code>gtid_mode</code></a> specifies the GTID mode of the MySQL server.</p>
</li>
<li>
<p>the value for <a href="https://dev.mysql.com/doc/refman/5.6/en/replication-options-gtids.html"><code>enforce_gtid_consistency</code></a> instructs the server to enforce GTID consistency by allowing execution of only those statements that can be logged in a transactionally safe manner, and is required when using GTIDs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Consult the <a href="https://dev.mysql.com/doc/refman/5.6/en/replication-options-gtids.html#option_mysqld_gtid-mode">MySQL documentation</a> for details and specifics about setting up GTIDs.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The MySQL connector does not require MySQL to use GTIDs and GTID-based replication. Each time the connector starts up, it will automatically detect whether it is enabled and adjust its behavior accordingly.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="enabling-query-log-events-optional"><a class="anchor" href="#enabling-query-log-events-optional"></a>Enabling Query Log Events (optional)</h3>
<div class="paragraph">
<p>Starting with MySQL 5.6 row based replication can be configured to include the original SQL statement with each binlog event. <strong>Note that if you&#8217;re using an earlier version of MySQL, you will not be able to enable this feature.</strong></p>
</div>
<div class="paragraph">
<p>Enabling this option can be done in the MySQL server configuration file, and will look similar to the following fragment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>binlog_rows_query_log_events = on</code></pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the value for <a href="https://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html#sysvar_binlog_rows_query_log_events"><code>binlog_rows_query_log_events</code></a> can be set to <code>on</code> or <code>ON</code> to enable support for including the original SQL statement in the binlog entry.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="create-a-mysql-user-for-the-connector"><a class="anchor" href="#create-a-mysql-user-for-the-connector"></a>Create a MySQL user for the connector</h3>
<div class="paragraph">
<p>A MySQL user must be defined that has all of the following permissions on all of the databases that the connector will monitor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html#priv_select"><code>SELECT</code></a> - enables the connector to select rows from tables in databases; used only when performing a snapshot</p>
</li>
<li>
<p><a href="http://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html#priv_reload"><code>RELOAD</code></a> - enables the connector of the <a href="http://dev.mysql.com/doc/refman/5.7/en/flush.html"><code>FLUSH</code></a> statement to clear or reload various internal caches, flush tables, or acquire locks; used only when performing a snapshot</p>
</li>
<li>
<p><a href="http://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html#priv_show-databases"><code>SHOW DATABASES</code></a> - enables the connector to see database names by issuing the <code>SHOW DATABASE</code> statement; used only when performing a snapshot</p>
</li>
<li>
<p><a href="http://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html#priv_replication-slave"><code>REPLICATION SLAVE</code></a> - enables the connector to connect to and read the binlog of its MySQL server; always required for the connector</p>
</li>
<li>
<p><a href="http://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html#priv_replication-client"><code>REPLICATION CLIENT</code></a> - enables the use of <code>SHOW MASTER STATUS</code>, <code>SHOW SLAVE STATUS</code>, and <code>SHOW BINARY LOGS</code>; always required for the connector</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, the following statement grants these permissions for a user <code>debezium</code> that authenticates with the password <code>dbz</code>, where the user can be on any machine:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GRANT SELECT, RELOAD, SHOW DATABASES, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'debezium' IDENTIFIED BY 'dbz';</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Choose a good password that is different from what we use above.</p>
</div>
<div class="paragraph">
<p>Also, the above grant is equivalent to specifying any authenticating client on <em>any</em> hosts, so obviously this is not recommended for production. Instead, in production you would almost certainly limit the replication user to the machine(s) where the MySQL connector is running within a Kafka Connect service, such as <code>&#8230;&#8203; 'debezium'@'connect.host.acme.com' &#8230;&#8203;</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using the MySQL connector with <a href="https://aws.amazon.com/rds/mysql/">Amazon RDS</a>, <a href="https://aws.amazon.com/rds/aurora/">Amazon Aurora (MySQL compatibility)</a>, or any other server where the connector&#8217;s database user is unable to obtain a global read lock, the database user must also have the <code>LOCK TABLES</code> permission. See the section on <a href="#snapshots-without-global-read-locks">snapshots without global read locks</a> and <a href="https://issues.jboss.org/projects/DBZ/issues/DBZ-140">DBZ-140</a> for additional details.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supported-mysql-topologies"><a class="anchor" href="#supported-mysql-topologies"></a>Supported MySQL topologies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The MySQL connector can be used with a variety of MySQL topologies.</p>
</div>
<div class="sect2">
<h3 id="mysql-standalone"><a class="anchor" href="#mysql-standalone"></a>MySQL standalone</h3>
<div class="paragraph">
<p>When a single MySQL server is used by itself, then that server must have the binlog enabled (and optionally GTIDs enabled) so that the MySQL connector can be able to monitor it. This is often acceptable, since the binary log can also be used as an <a href="http://dev.mysql.com/doc/refman/5.7/en/backup-methods.html">incremental backup</a>. In this case, the MySQL connector will always connect to and follow this standalone MySQL server instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="mysql-master-and-slave"><a class="anchor" href="#mysql-master-and-slave"></a>MySQL master and slave</h3>
<div class="paragraph">
<p><a href="http://dev.mysql.com/doc/refman/5.7/en/replication-solutions.html">MySQL replication</a> can be used to set up a cluster of MySQL instances, where one of the MySQL server instances is considered the <em>master</em> and the other(s) a <em>slave</em>. Topologies can include single master with single slave, single master with multiple slaves, and multiple masters with multiple slaves. Which you choose will depend on your requirements, your backup and recovery strategy, and how you are scaling MySQL to handle large data volumes and queries.</p>
</div>
<div class="paragraph">
<p>To use the MySQL connector with one of these topologies, the connector can follow one of the masters or one of the slaves (if that slave has its binlog enabled), but the connector will see only those changes in the cluster that are visible to that server. Generally, this is not a problem except for the multi-master topologies.</p>
</div>
<div class="paragraph">
<p>The connector records its position in the server&#8217;s binlog, which is different on each server in the cluster. Therefore, the connector will need to follow just one MySQL server instance. If that server fails, it must be restarted or recovered before the connector can continue.</p>
</div>
</div>
<div class="sect2">
<h3 id="highly-available-mysql-clusters"><a class="anchor" href="#highly-available-mysql-clusters"></a>Highly Available MySQL clusters</h3>
<div class="paragraph">
<p>A <a href="https://dev.mysql.com/doc/mysql-ha-scalability/en/">variety of high availability solutions</a> exist for MySQL, and they make it far easier to tolerate and almost immediately recover from problems and failures. Most HA MySQL clusters use GTIDs so that slaves are able to keep track of all changes on any of the master.</p>
</div>
</div>
<div class="sect2">
<h3 id="multi-master-mysql"><a class="anchor" href="#multi-master-mysql"></a>Multi-Master MySQL</h3>
<div class="paragraph">
<p>A <a href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-replication-multi-master.html">multi-master MySQL</a> topology uses one or more MySQL slaves that each replicate from <em>multiple</em> masters. This is a powerful way to aggregate the replication of multiple MySQL clusters, and requires using GTIDs.</p>
</div>
<div class="paragraph">
<p>As of Debezium 0.3.5, the Debezium MySQL connector can use these multi-master MySQL slaves as sources, and can fail over to <em>different</em> multi-master MySQL slaves as long as thew new slave is caught up to the old slave (e.g., the new slave has all of the transactions that were last seen on the first slave). This works even if the connector is only using a subset of databases and/or tables, as the connector can be configured to include or exclude specific GTID sources when attempting to reconnect to a new multi-master MySQL slave and find the correct position in the binlog.</p>
</div>
</div>
<div class="sect2">
<h3 id="hosted-mysql"><a class="anchor" href="#hosted-mysql"></a>Hosted MySQL</h3>
<div class="paragraph">
<p>As of Debezium 0.4.0, the MySQL connector adds preliminary support for <a href="https://aws.amazon.com/rds/mysql/">Amazon RDS</a> and <a href="https://aws.amazon.com/rds/aurora/">Amazon Aurora (MySQL compatibility)</a>. The connector works as usual when reading the binlog, but in these environments the <a href="#snapshots-without-global-read-locks">connector does perform snapshots differently</a>. This is because these hosted forms of MySQL prevent database users from being able to obtain a global read lock, so the only way for the connector to obtain a consistent snapshot is to use table-level locks instead. Unfortunately, table-level locks <a href="https://dev.mysql.com/doc/refman/5.7/en/lock-tables-and-transactions.html">affect current transactions</a>, and this means that the locks cannot be released until after the connector completes reading all data and commits its transaction.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-the-mysql-connector-works"><a class="anchor" href="#how-the-mysql-connector-works"></a>How the MySQL connector works</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section goes into detail about how the MySQL connector tracks the structure of the tables, performs snapshots, transform binlog events into Debezium change events, where those events are recorded in Kafka, and how the connector behaves when things go wrong.</p>
</div>
<div class="sect2">
<h3 id="database-schema-history"><a class="anchor" href="#database-schema-history"></a>Database schema history</h3>
<div class="paragraph">
<p>When a database client queries a database, it uses the database&#8217;s current schema. However, the database schema can be changed at any time, which means that the connector must know what the schema looked like at the time each insert, update, or delete operation is <em>recorded</em>. It can&#8217;t just use the current schema, either, since it may be processing events that are relatively old and may have been recorded before the tables' schemas were changed. Luckily, MySQL includes in the binlog the row-level changes to the data <em>and</em> the DDL statements that are applied to the database. As the connector reads the binlog and comes across these DDL statements, it parses them and updates an in-memory representation of each table&#8217;s schema, which is then used to understand the structure of the tables at the time each insert, update, or delete occurs and to produce the appropriate change event. It also records in a separate <em>database history</em> Kafka topic all of the DDL statements along with the position in the binlog where each DDL statement appeared.</p>
</div>
<div class="paragraph">
<p>When the connector restarts after having crashed or been stopped gracefully, the connector will start reading the binlog from a specific position (i.e., a specific point in time). The connector rebuilds the table structures that existed <em>at this point in time</em> by reading the database history Kafka topic and parsing all DDL statements up until the point in the binlog where the connector is starting.</p>
</div>
<div class="paragraph">
<p>This database history topic is for connector use only, but the connector can optionally generate <em>schema change events</em> on a different topic that is intended for consumer applications. We&#8217;ll cover this in the <a href="#schema-change-topic">Schema Change Topic</a> section.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When MySQL connector monitors a table to which a schema change tool like <strong>Gh-ost</strong> or <strong>pt-online-schema-change</strong> is applied then helper tables created during migration process need to be included among whitelisted tables.</p>
</div>
<div class="paragraph">
<p>If the downstream systems do not need the messages generated by the temporary table then a simple message transform can be written and applied to filter them out.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is vital that there is a global order of the events in the database schema history, therefore the database history topic must not be partitioned.
This means a partition count of 1 must be specified when creating this topic.
When relying on auto topic creation, make sure that Kafka&#8217;s <code>num.partitions</code> configuration option (the default number of partitions) is set to 1.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="snapshots"><a class="anchor" href="#snapshots"></a>Snapshots</h3>
<div class="paragraph">
<p>When a MySQL connector that is configured to follow a MySQL server instance is first started, it will by default perform an initial <em>consistent snapshot</em> of a database. This is the default mode, since much of the time the MySQL binlogs no longer contain the complete history of the database.</p>
</div>
<div class="paragraph">
<p>The connector performs the following steps each time it takes a snapshot:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Grab a global read lock that blocks writes by other database clients.</p>
</li>
<li>
<p>Start a transaction with <a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-consistent-read.html"><em>repeatable read</em> semantics</a> to ensure that all subsequent reads within this transaction are done against a single consistent snapshot.</p>
</li>
<li>
<p>Read the current position of the binlog.</p>
</li>
<li>
<p>Read the schema of the databases and tables allowed by the connector&#8217;s configuration.</p>
</li>
<li>
<p>Release the global read lock, allowing other DB clients to again write to the database</p>
</li>
<li>
<p>Optionally write the DDL changes to the <em>schema change topic</em>, including all necessary <code>DROP &#8230;&#8203;</code> and <code>CREATE &#8230;&#8203;</code> DDL statements</p>
</li>
<li>
<p>Scans all of the database tables and generates on the appropriate table-specific Kafka topics <code>CREATE</code> events for each row.</p>
</li>
<li>
<p>Commit the transaction.</p>
</li>
<li>
<p>Record in the connector offsets that the connector successfully completed the snapshot.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The transaction started in step 1 does not prevent other clients from making changes to the tables rows, but will instead provide the connector with a consistent and unchanging view of the data in the tables. However, the transaction does not prevent other clients from applying DDL, which could interfere with the connector&#8217;s attempt to read the binlog position and the table schemas. So, the connector obtains a global read lock in step 2 to prevent such problems, and it keeps this lock for a very short period of time while it reads the binlog position and table schemas in steps 3 and 4. This global read lock is released in step 5, before the connector performs the bulk of the work of copying the data.</p>
</div>
<div class="paragraph">
<p>If the connector fails, is rebalanced, or stops before the snapshot is complete, the connector will begin a new snapshot when it is restarted. Once the connector does complete its initial snapshot, the MySQL connector then proceeds to read the binlog from the position read during step 3, ensuring that the connector does not miss any updates. If the connector stops again for any reason, upon restart it will simply continue reading the binlog where it previously left off. However, if the connector remains stopped for long enough, MySQL might purge older binlog files and the connector&#8217;s last position may be lost. In this case, when the connector configured with <em>initial</em> snapshot mode (the default) is finally restarted, the MySQL server will no longer have the starting point and the connector will fail with an error.</p>
</div>
<div class="paragraph">
<p>A second snapshot mode allows the connector to perform snapshots <em>whenever necessary</em>. This behavior is similar to the default <em>initial</em> snapshot behavior mentioned above, except with one exception: if the connector is restarted <em>and</em> MySQL no longer has its starting point in the binlog, rather than failing the connector will instead perform another snapshot. This mode is perhaps the most automated, but at the risk of performing additional snapshots when things go wrong (generally when the connector is down too long).</p>
</div>
<div class="paragraph">
<p>The third snapshot mode ensures the connector <em>never</em> performs snapshots. When a new connector is configured this way, it will start reading the binlog from the beginning. This is not the default behavior because starting a new connector in this mode (without a snapshot) requires the MySQL binlog contain the entire history of all monitored databases, and MySQL instances are rarely configured this way. Specifically, the binlog must contain at least the <code>CREATE TABLE &#8230;&#8203;</code> statement for every monitored table. If this requirement is not satisfied, the connector will not be able to properly interpret the structure of the low-level events in the binlog, and it will simply skip all events for those missing table definitions. (The connector cannot rely upon the current definition of those tables, since the tables may have been altered after the initial events were recorded in the binlog, preventing the connector from properly interpreting the binlog events.)</p>
</div>
<div class="paragraph">
<p>As of 0.3.4, a fourth snapshot mode allows the connector to start reading the MySQL binlog from its current position when the connector is started. With the <code>schema_only</code> mode the connector reads the current binlog position, captures the current table schemas without reading any data, and then proceeds to read the binlog from its current position. This happens very quickly, and the resulting change event streams include only those change events that occurred <strong>after the snapshot started</strong>. This may be useful for consumers that don&#8217;t need to know the complete state of the database but only need to know the changes that were made since the connector was started.</p>
</div>
<div class="paragraph">
<p>As of 0.7.2, a fifth snapshot mode <code>schema_only_recovery</code> allows an existing connector to recover a corrupted or lost database history topic. It behaves similarly to <code>schema_only</code>, in that it captures the current table schemas without reading any data. The differences are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It can only be used on an existing connector, as an update to the connector&#8217;s configuration.</p>
</li>
<li>
<p>It begins reading the binlog at the last committed offset for this existing connector, rather than the binlog&#8217;s current position.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>schema_only_recovery</code> can also be used to periodically "clean up" a database history topic (which requires infinite retention) that may be growing unexpectedly. To do this, the database history topic must be manually deleted before updating the connector&#8217;s snapshot mode to <code>schema_only_recovery</code>.
Note that this mode is safe to use <strong>only</strong> if no schema changes have happened after the committed offset.
Otherwise, the binlog events between the committed offset and the binlog position with the schema change will be emitted with an inconsistent schema
(already based on the altered schema, which didn&#8217;t apply yet for these previous events).
It is therefore recommended&#8201;&#8212;&#8201;once recovery of the history topic has succeeded&#8201;&#8212;&#8201;to return to one of the other snapshotting modes, to prevent further snapshots after subsequent restarts of the connector.</p>
</div>
<div class="paragraph">
<p>Because of how the connector records offsets when performing a snapshot, the connector now defaults to <code>include.schema.events=true</code>. This writes all DDL changes performed during a snapshot to a topic that can be consumed by apps. And, more importantly, during the final step mentioned above it ensures that the updated offsets are recorded immediately (rather than waiting until a database change occurs).</p>
</div>
<div class="sect3">
<h4 id="snapshots-without-global-read-locks"><a class="anchor" href="#snapshots-without-global-read-locks"></a>Snapshots without global read locks</h4>
<div class="paragraph">
<p>Some MySQL environments, including <a href="https://aws.amazon.com/rds/mysql/">Amazon RDS</a> and <a href="https://aws.amazon.com/rds/aurora/">Amazon Aurora (MySQL compatibility)</a>, do not allow users to obtain global read locks. As of 0.4.0, when the MySQL connector detects that a global read lock is not allowed, it falls back to table-level locks (requiring the database user also has the <code>LOCK TABLES</code> privilege) and performs a snapshot using these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start a transaction with <a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-consistent-read.html"><em>repeatable read</em> semantics</a> to ensure that all subsequent reads within this transaction are done against a single consistent snapshot.</p>
</li>
<li>
<p>Fail to obtain a global read lock to block writes by other database clients.</p>
</li>
<li>
<p>Read names of the databases and tables, filtering them using the connector&#8217;s configuration.</p>
</li>
<li>
<p>Acquire a table-level lock on all configured tables.</p>
</li>
<li>
<p>Read the current position of the binlog.</p>
</li>
<li>
<p>Read the schema of all configured databases and tables.</p>
</li>
<li>
<p>Optionally write the DDL changes to the <em>schema change topic</em>, including all necessary <code>DROP &#8230;&#8203;</code> and <code>CREATE &#8230;&#8203;</code> DDL statements</p>
</li>
<li>
<p>Scans all of the database tables and generates on the appropriate table-specific Kafka topics <code>CREATE</code> events for each row.</p>
</li>
<li>
<p>Commit the transaction.</p>
</li>
<li>
<p>Release the table-level locks.</p>
</li>
<li>
<p>Record in the connector offsets that the connector successfully completed the snapshot.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that the <em>table-level locks are held for nearly all of the consistent snapshot</em>, including the reading of all database table content in step 7. This is very different than when a global read lock can be used, since that is held for a very short period of time. Unfortunately, this is the only way that the MySQL connector can obtain a consistent snapshot, since <a href="https://dev.mysql.com/doc/refman/5.7/en/lock-tables-and-transactions.html">releasing the table-level locks implicitly commits any open transaction held by the session</a>. Since we need the transaction to obtain a consistent snapshot of the database content, we are unable to release the table-level locks until after we&#8217;ve read the data in step 7 and committed our transaction in step 8.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="reading-the-binlog"><a class="anchor" href="#reading-the-binlog"></a>Reading the MySQL binlog</h3>
<div class="paragraph">
<p>The MySQL connector will typically spend the vast majority of its time reading the binlog of the MySQL server to which it is connected.</p>
</div>
<div class="paragraph">
<p>As the MySQL connector reads the binlog, it transforms the binary log events into Debezium <em>create</em>, <em>update</em>, or <em>delete</em> events that include the position in the binlog (including GTIDs if they are used) where the event was found. The MySQL connector forwards these change events to the Kafka Connect framework (running in the same process), which then synchronously writes them to the appropriate Kafka topic. Kafka Connect uses the term <em>offset</em> for the source-specific position information that Debezium includes with each event, and Kafka Connect periodically records the most recent offset in another Kafka topic.</p>
</div>
<div class="paragraph">
<p>When Kafka Connect gracefully shuts down, it stops the connectors, flushes all events to Kafka, and records the last offset received from each connector. Upon restart, Kafka Connect reads the last recorded offset for each connector, and starts the connector from that point. The MySQL connector uses the binlog filename, the position in that file, and the GTIDs (if they are enabled in MySQL server) recorded in its offset to request that MySQL send it the binlog events starting just after that position.</p>
</div>
</div>
<div class="sect2">
<h3 id="topic-names"><a class="anchor" href="#topic-names"></a>Topics names</h3>
<div class="paragraph">
<p>The MySQL connector writes events for all insert, update, and delete operations on a single table to a single Kafka topic. The name of the Kafka topics always takes the form <em>serverName</em>.<em>databaseName</em>.<em>tableName</em>, where <em>serverName</em> is the logical name of the connector as specified with the <code>database.server.name</code> configuration property, <em>databaseName</em> is the name of the database where the operation occurred, and <em>tableName</em> is the name of the database table on which the operation occurred.</p>
</div>
<div class="paragraph">
<p>For example, consider a MySQL installation with an <code>inventory</code> database that contains four tables: <code>products</code>, <code>products_on_hand</code>, <code>customers</code>, and <code>orders</code>. If the connector monitoring this database were given a logical server name of <code>fulfillment</code>, then the connector would produce events on these four Kafka topics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>fulfillment.inventory.products</code></p>
</li>
<li>
<p><code>fulfillment.inventory.products_on_hand</code></p>
</li>
<li>
<p><code>fulfillment.inventory.customers</code></p>
</li>
<li>
<p><code>fulfillment.inventory.orders</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="schema-change-topic"><a class="anchor" href="#schema-change-topic"></a>Schema change topic</h3>
<div class="paragraph">
<p>It is often useful for applications to consume events that describe the changes in the database schemas, so the MySQL connector can be configured to produce <em>schema change events</em> with all of the DDL statements applied to databases in the MySQL server. When enabled, the connector writes all such events to a Kafka topic named <em>serverName</em>, where <em>serverName</em> is the logical name of the connector as specified with the <code>database.server.name</code> configuration property. In our previous example where the logical server name is <code>fulfillment</code>, the schema change events would be recorded in the topic <code>fulfillment</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <a href="#database-schema-history">database history topic</a> and <em>schema change topic</em> both contain events with the DDL statement. However, we&#8217;ve designed the events on the schema change topic to be easier to consume, so they are more granular and always have the database name. If you&#8217;re going to consume schema change events, be sure to use the schema change topic and <em>never</em> consume the database history topic.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In order to keep the correct order of schema changes, the schema change topic must not be partitioned.
This means a partition count of 1 must be specified when creating this topic.
When relying on auto topic creation, make sure that Kafka&#8217;s <code>num.partitions</code> configuration option (the default number of partitions) is set to 1.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Each message written to the schema change topic will have a message key that contains the name of the database to which the client was connected and using when they applied the DDL statement(s):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": {
    "type": "struct",
    "name": "io.debezium.connector.mysql.SchemaChangeKey",
    "optional": false,
    "fields": [
      {
        "field": "databaseName",
        "type": "string",
        "optional": false
      }
    ]
  },
  "payload": {
    "databaseName": "inventory"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Meanwhile, the schema change event message&#8217;s value will contain a structure containing the DDL statement(s), the database to which the statements were <em>applied</em>, and the position in the binlog where the statement(s) appeared:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": {
    "type": "struct",
    "name": "io.debezium.connector.mysql.SchemaChangeValue",
    "optional": false,
    "fields": [
      {
        "field": "databaseName",
        "type": "string",
        "optional": false
      },
      {
        "field": "ddl",
        "type": "string",
        "optional": false
      },
      {
        "field": "source",
        "type": "struct",
        "name": "io.debezium.connector.mysql.Source",
        "optional": false,
        "fields": [
          {
            "type": "string",
            "optional": true,
            "field": "version"
          },
          {
            "type": "string",
            "optional": false,
            "field": "name"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "server_id"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "ts_sec"
          },
          {
            "type": "string",
            "optional": true,
            "field": "gtid"
          },
          {
            "type": "string",
            "optional": false,
            "field": "file"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "pos"
          },
          {
            "type": "int32",
            "optional": false,
            "field": "row"
          },
          {
            "type": "boolean",
            "optional": true,
            "default": false,
            "field": "snapshot"
          },
          {
            "type": "int64",
            "optional": true,
            "field": "thread"
          },
          {
            "type": "string",
            "optional": true,
            "field": "db"
          },
          {
            "type": "string",
            "optional": true,
            "field": "table"
          },
          {
            "type": "string",
            "optional": true,
            "field": "query"
          }
        ]
      }
    ]
  },
  "payload": {
    "databaseName": "inventory",
    "ddl": "CREATE TABLE products ( id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255) NOT NULL, description VARCHAR(512), weight FLOAT ); ALTER TABLE products AUTO_INCREMENT = 101;",
    "source" : {
      "version": "0.9.5.Final",
      "name": "mysql-server-1",
      "server_id": 0,
      "ts_sec": 0,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 154,
      "row": 0,
      "snapshot": true,
      "thread": null,
      "db": null,
      "table": null,
      "query": null
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ddl</code> field may contain multiple DDL statements, but every statement in the event will apply to the database named in the <code>databaseName</code> field and they will appear in the same order as applied to the database. Additionally, all of the events in the schema change topic will appear in the same order as applied to the MySQL server.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>source</code> field is the exact same structure that appears in normal data change events written to table-specific topics. You can use the contents of this field to correlate the events on different topics.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As mentioned above, each schema change event will contain one or more DDL statements that apply to a single database. What happens if a client submits a series of DDL statements that apply to <em>multiple</em> databases (e.g., perhaps they use fully-qualified names)? If MySQL applies those statements atomically (e.g., as a single transaction), then the connector will take those DDL statements <em>in order</em>, group them by the affected database, and then create a schema change event for each of those groups. On the other hand, if MySQL applies those statements individually, then the connector will create a separate schema change event for each statement.</p>
</div>
</div>
<div class="sect2">
<h3 id="events"><a class="anchor" href="#events"></a>Events</h3>
<div class="paragraph">
<p>All data change events produced by the MySQL connector have a key and a value, although the structure of the key and value depend on the table from which the change events originated (see <a href="#topic-names">Topic Names</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Starting with Kafka 0.10, Kafka can optionally record with the message key and value the <a href="http://kafka.apache.org/documentation.html#upgrade_10_performance_impact"><em>timestamp</em></a> at which the message was created (recorded by the producer) or written to the log by Kafka.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As of Debezium 0.3, the Debezium MySQL connector ensures that all Kafka Connect <em>schema names</em> are <a href="http://avro.apache.org/docs/current/spec.html#names">valid Avro schema names</a>. This means that the logical server name must start with Latin letters or an underscore (e.g., [a-z,A-Z,_]), and the remaining characters in the logical server name and all characters in the database and table names must be Latin letters, digits, or an underscore (e.g., [a-z,A-Z,0-9,\_]). If not, then all invalid characters will automatically be replaced with an underscore character.</p>
</div>
<div class="paragraph">
<p>This can lead to unexpected conflicts in schemas names when the logical server name, database names, and table names contain other characters, and the only distinguishing characters between table full names are invalid and thus replaced with underscores.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Debezium and Kafka Connect are designed around <em>continuous streams of event messages</em>, and the structure of these events may change over time. This could be difficult for consumers to deal with, so to make it very easy Kafka Connect makes each event self-contained. Every message key and value has two parts: a <em>schema</em> and <em>payload</em>. The schema describes the structure of the payload, while the payload contains the actual data.</p>
</div>
<div class="sect3">
<h4 id="change-events-key"><a class="anchor" href="#change-events-key"></a>Change event&#8217;s key</h4>
<div class="paragraph">
<p>For a given table, the change event&#8217;s key will have a structure that contains a field for each column in the primary key (or unique key constraint) of the table at the time the event was created. Consider an <code>inventory</code> database with a <code>customers</code> table defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">CREATE TABLE customers (
  id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
  first_name VARCHAR(255) NOT NULL,
  last_name VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL UNIQUE KEY
) AUTO_INCREMENT=1001;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Every change event for the <code>customers</code> table while it has this definition will feature the same key structure, which in JSON looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": {
    "type": "struct",
    "name": "mysql-server-1.inventory.customers.Key",
    "optional": false,
    "fields": [
      {
        "field": "id",
        "type": "int32",
        "optional": false
      }
    ]
  },
  "payload": {
    "id": 1001
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>schema</code> portion of the key contains a Kafka Connect schema describing what is in the payload portion, and in our case that means that the <code>payload</code> value is not optional, is a structure defined by a schema named <code>mysql-server-1.inventory.customers.Key</code>, and has one required field named <code>id</code> of type <code>int32</code>. If we look at the value of the key&#8217;s <code>payload</code> field, we&#8217;ll see that it is indeed a structure (which in JSON is just an object) with a single <code>id</code> field, whose value is <code>1004</code>.</p>
</div>
<div class="paragraph">
<p>Therefore, we interpret this key as describing the row in the <code>inventory.customers</code> table (output from the connector named <code>mysql-server-1</code>) whose <code>id</code> primary key column had a value of <code>1004</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Although the <code>column.blacklist</code> configuration property allows you to remove columns from the event values, all columns in a primary or unique key are always included in the event&#8217;s key.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the table does not have a primary or unique key, then the change event&#8217;s key will be null. This makes sense since the rows in a table without a primary or unique key constraint cannot be uniquely identified.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="change-events-value"><a class="anchor" href="#change-events-value"></a>Change event&#8217;s value</h4>
<div class="paragraph">
<p>The value of the change event message is a bit more complicated. Like the key message, it has a <em>schema</em> section and <em>payload</em> section. Starting with Debezium 0.2, the payload section of every change event value produced by the MySQL connector has an <em>envelope</em> structure with the following fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>op</code> is a mandatory field that contains a string value describing the type of operation. Values for the MySQL connector are <code>c</code> for create (or insert), <code>u</code> for update, <code>d</code> for delete, and <code>r</code> for read (in the case of a non-initial snapshot).</p>
</li>
<li>
<p><code>before</code> is an optional field that if present contains the state of the row <em>before</em> the event occurred. The structure will  be described by the <code>mysql-server-1.inventory.customers.Value</code> Kafka Connect schema, which the <code>mysql-server-1</code> connector uses for all rows in the <code>inventory.customers</code> table.</p>
</li>
<li>
<p><code>after</code> is an optional field that if present contains the state of the row <em>after</em> the event occurred. The structure is described by the same <code>mysql-server-1.inventory.customers.Value</code> Kafka Connect schema used in <code>before</code>.</p>
</li>
<li>
<p><code>source</code> is a mandatory field that contains a structure describing the source metadata for the event, which in the case of MySQL contains several fields: the Debezium version, the connector name, the name of the binlog file where the event was recorded, the position in that binlog file where the event appeared, the row within the event (if there is more than one), whether this event was part of a snapshot, name of the affected database and table, id of the MySQL thread creating the event (non-snapshot events only), and if available the MySQL server ID, and the timestamp in seconds.  For non-snapshot events, if the MySQL server has the <a href="#enabling-query-log-events-optional">binlog_rows_query_log_events</a> option enabled, and the connector is configured with the <code>include.query</code> option enabled, the query field will contain the original SQL statement that generated the event.</p>
</li>
<li>
<p><code>ts_ms</code> is optional and if present contains the time (using the system clock in the JVM running the Kafka Connect task) at which the connector processed the event.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And of course, the <em>schema</em> portion of the event message&#8217;s value contains a schema that describes this envelope structure and the nested fields within it.</p>
</div>
<div id="create-events" class="paragraph">
<p>Let&#8217;s look at what a <em>create</em> event value might look like for our <code>customers</code> table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": {
    "type": "struct",
    "fields": [
      {
        "type": "struct",
        "fields": [
          {
            "type": "int32",
            "optional": false,
            "field": "id"
          },
          {
            "type": "string",
            "optional": false,
            "field": "first_name"
          },
          {
            "type": "string",
            "optional": false,
            "field": "last_name"
          },
          {
            "type": "string",
            "optional": false,
            "field": "email"
          }
        ],
        "optional": true,
        "name": "mysql-server-1.inventory.customers.Value",
        "field": "before"
      },
      {
        "type": "struct",
        "fields": [
          {
            "type": "int32",
            "optional": false,
            "field": "id"
          },
          {
            "type": "string",
            "optional": false,
            "field": "first_name"
          },
          {
            "type": "string",
            "optional": false,
            "field": "last_name"
          },
          {
            "type": "string",
            "optional": false,
            "field": "email"
          }
        ],
        "optional": true,
        "name": "mysql-server-1.inventory.customers.Value",
        "field": "after"
      },
      {
        "type": "struct",
        "fields": [
          {
            "type": "string",
            "optional": false,
            "field": "version"
          },
          {
            "type": "string",
            "optional": false,
            "field": "connector"
          },
          {
            "type": "string",
            "optional": false,
            "field": "name"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "ts_ms"
          },
          {
            "type": "boolean",
            "optional": true,
            "default": false,
            "field": "snapshot"
          },
          {
            "type": "string",
            "optional": false,
            "field": "db"
          },
          {
            "type": "string",
            "optional": true,
            "field": "table"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "server_id"
          },
          {
            "type": "string",
            "optional": true,
            "field": "gtid"
          },
          {
            "type": "string",
            "optional": false,
            "field": "file"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "pos"
          },
          {
            "type": "int32",
            "optional": false,
            "field": "row"
          },
          {
            "type": "int64",
            "optional": true,
            "field": "thread"
          },
          {
            "type": "string",
            "optional": true,
            "field": "query"
          }
        ],
        "optional": false,
        "name": "io.debezium.connector.mysql.Source",
        "field": "source"
      },
      {
        "type": "string",
        "optional": false,
        "field": "op"
      },
      {
        "type": "int64",
        "optional": true,
        "field": "ts_ms"
      }
    ],
    "optional": false,
    "name": "mysql-server-1.inventory.customers.Envelope"
  },
  "payload": {
    "op": "c",
    "ts_ms": 1465491411815,
    "before": null,
    "after": {
      "id": 1004,
      "first_name": "Anne",
      "last_name": "Kretchmar",
      "email": "annek@noanswer.org"
    },
    "source": {
      "version": "0.9.5.Final",
      "connector": "mysql",
      "name": "mysql-server-1",
      "ts_ms": 0,
      "snapshot": false,
      "db": "inventory",
      "table": "customers",
      "server_id": 0,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 154,
      "row": 0,
      "thread": 7,
      "query": "INSERT INTO customers (first_name, last_name, email) VALUES ('Anne', 'Kretchmar', 'annek@noanswer.org')"
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we look at the <code>schema</code> portion of this event&#8217;s <em>value</em>, we can see the schema for the <em>envelope</em>, the schema for the <code>source</code> structure (which is specific to the MySQL connector and reused across all events), and the table-specific schemas for the <code>before</code> and <code>after</code> fields.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The names of the schemas for the <code>before</code> and <code>after</code> fields are of the form "<em>logicalName</em>.<em>tableName</em>.Value", and thus are entirely independent from all other schemas for all other tables. This means that when using the <a href="/docs/faq/#avro-converter">Avro Converter</a>, the resulting Avro schemas for <em>each table</em> in each <em>logical source</em> have their own evolution and history.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If we look at the <code>payload</code> portion of this event&#8217;s <em>value</em>, we can see the information in the event, namely that it is describing that the row was created (since <code>op=c</code>), and that the <code>after</code> field value contains the values of the new inserted row&#8217;s' <code>id</code>, <code>first_name</code>, <code>last_name</code>, and <code>email</code> columns.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It may appear that the JSON representations of the events are much larger than the rows they describe. This is true, because the JSON representation must include the <em>schema</em> and the <em>payload</em> portions of the message. It is possible and even recommended to use the <a href="/docs/faq/#avro-converter">Avro Converter</a> to dramatically decrease the size of the actual messages written to the Kafka topics.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="update-events" class="paragraph">
<p>The value of an <em>update</em> change event on this table will actually have the exact same <em>schema</em>, and its payload will be structured the same but will hold different values. Here&#8217;s an example:</p>
</div>
<div class="paragraph">
<p>Here&#8217;s that new event&#8217;s <em>value</em> formatted to be easier to read:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": { ... },
  "payload": {
    "before": {
      "id": 1004,
      "first_name": "Anne",
      "last_name": "Kretchmar",
      "email": "annek@noanswer.org"
    },
    "after": {
      "id": 1004,
      "first_name": "Anne Marie",
      "last_name": "Kretchmar",
      "email": "annek@noanswer.org"
    },
    "source": {
      "version": "0.9.5.Final",
      "name": "mysql-server-1",
      "connector": "mysql",
      "name": "mysql-server-1",
      "ts_ms": 1465581,
      "snapshot": false,
      "db": "inventory",
      "table": "customers",
      "server_id": 223344,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 484,
      "row": 0,
      "thread": 7,
      "query": "UPDATE customers SET first_name='Anne Marie' WHERE id=1004"
    },
    "op": "u",
    "ts_ms": 1465581029523
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When we compare this to the value in the <em>insert</em> event, we see a couple of differences in the <code>payload</code> section:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>op</code> field value is now <code>u</code>, signifying that this row changed because of an update</p>
</li>
<li>
<p>The <code>before</code> field now has the state of the row with the values before the database commit</p>
</li>
<li>
<p>The <code>after</code> field now has the updated state of the row, and here was can see that the <code>first_name</code> value is now <code>Anne Marie</code>.</p>
</li>
<li>
<p>The <code>source</code> field structure has the same fields as before, but the values are different since this event is from a different position in the binlog.</p>
</li>
<li>
<p>The <code>ts_ms</code> shows the timestamp that Debezium processed this event.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are several things we can learn by just looking at this <code>payload</code> section. We can compare the <code>before</code> and <code>after</code> structures to determine what actually changed in this row because of the commit. The <code>source</code> structure tells us information about MySQL&#8217;s record of this change (providing traceability), but more importantly this has information we can compare to other events in this and other topics to know whether this event occurred before, after, or as part of the same MySQL commit as other events.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When the columns for a row&#8217;s primary/unique key are updated, the value of the row&#8217;s key has changed so Debezium will output <em>three</em> events: a <code>DELETE</code> event and <a href="#tombstone-events">tombstone event</a> with the old key for the row, followed by an <code>INSERT</code> event with the new key for the row.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="delete-events" class="paragraph">
<p>So far we&#8217;ve seen samples of <em>create</em> and <em>update</em> events. Now, let&#8217;s look at the value of a <em>delete</em> event for the same table. Once again, the <code>schema</code> portion of the value will be exactly the same as with the <em>create</em> and <em>update</em> events:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "schema": { ... },
  "payload": {
    "before": {
      "id": 1004,
      "first_name": "Anne Marie",
      "last_name": "Kretchmar",
      "email": "annek@noanswer.org"
    },
    "after": null,
    "source": {
      "version": "0.9.5.Final",
      "connector": "mysql",
      "name": "mysql-server-1",
      "ts_ms": 1465581,
      "snapshot": false,
      "db": "inventory",
      "table": "customers",
      "server_id": 223344,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 805,
      "row": 0,
      "thread": 7,
      "query": "DELETE FROM customers WHERE id=1004"
    },
    "op": "d",
    "ts_ms": 1465581902461
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we look at the <code>payload</code> portion, we see a number of differences compared with the <em>create</em> or <em>update</em> event payloads:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>op</code> field value is now <code>d</code>, signifying that this row was deleted</p>
</li>
<li>
<p>The <code>before</code> field now has the state of the row that was deleted with the database commit</p>
</li>
<li>
<p>The <code>after</code> field is null, signifying that the row no longer exists</p>
</li>
<li>
<p>The <code>source</code> field structure has many of the same values as before, except the <code>ts_sec</code> and <code>pos</code> fields have changed (and the <code>file</code> might have changed in other circumstances).</p>
</li>
<li>
<p>The <code>ts_ms</code> shows the timestamp that Debezium processed this event.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This event gives a consumer all kinds of information that it can use to process the removal of this row. We include the old values so that some consumers might require them in order to properly handle the removal, and without it they may have to resort to far more complex behavior.</p>
</div>
<div class="paragraph">
<p>The MySQL connector&#8217;s events are designed to work with <a href="https://cwiki.apache.org/confluence/display/KAFKA/Log+Compaction">Kafka log compaction</a>, which allows for the removal of some older messages as long as at least the most recent message for every key is kept. This allows Kafka to reclaim storage space while ensuring the topic contains a complete dataset and can be used for reloading key-based state.</p>
</div>
<div id="tombstone-events" class="paragraph">
<p>When a row is deleted, the <em>delete</em> event value listed above still works with log compaction, since Kafka can still remove all earlier messages with that same key. But only if the message value is null will Kafka know that it can remove <em>all messages</em> with that same key. To make this possible, Debezium&#8217;s MySQL connector always follows <em>delete</em> event with a special <em>tombstone</em> event that has the same key but null value.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="data-types"><a class="anchor" href="#data-types"></a>Data types</h3>
<div class="paragraph">
<p>As described above, the MySQL connector represents the changes to rows with events that are structured like the table in which the row exist. The event contains a field for each column value, and how that value is represented in the event depends on the MySQL data type of the column. This section describes this mapping.</p>
</div>
<div class="paragraph">
<p>The following table describes how the connector maps each of the MySQL data types to a <em>literal type</em> and <em>semantic type</em> within the events' fields. Here, the <em>literal type</em> describes how the value is literally represented using Kafka Connect schema types, namely <code>INT8</code>, <code>INT16</code>, <code>INT32</code>, <code>INT64</code>, <code>FLOAT32</code>, <code>FLOAT64</code>, <code>BOOLEAN</code>, <code>STRING</code>, <code>BYTES</code>, <code>ARRAY</code>, <code>MAP</code>, and <code>STRUCT</code>. The <em>semantic type</em> describes how the Kafka Connect schema captures the <em>meaning</em> of the field using the name of the Kafka Connect schema for the field.</p>
</div>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 20%;">
<col style="width: 15%;">
<col style="width: 30%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL Data Type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name)</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BOOLEAN</code>, <code>BOOL</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BOOLEAN</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BIT(1)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BOOLEAN</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BIT( &gt; 1)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.data.Bits</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>length</code> schema parameter contains an integer representing the number of bits. The resulting <code>byte[]</code> will contain the bits in little-endian form and will be sized to contain at least the specified number of bits (e.g., <code>numBytes = n/8 + (n%8== 0 ? 0 : 1)</code> where <code>n</code> is the number of bits).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TINYINT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT8</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>SMALLINT[(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT16</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MEDIUMINT[(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT32</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT</code>, <code>INTEGER[(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT32</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BIGINT[(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>REAL[(M,D)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>FLOAT32</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>FLOAT[(M,D)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>FLOAT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DOUBLE[(M,D)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>FLOAT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>CHAR(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>VARCHAR(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BINARY(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>VARBINARY(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TINYBLOB</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TINYTEXT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BLOB</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TEXT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MEDIUMBLOB</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MEDIUMTEXT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>LONGBLOB</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>LONGTEXT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>JSON</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.data.Json</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Contains the string representation of a JSON document, array, or scalar.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ENUM</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.data.Enum</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>allowed</code> schema parameter contains the comma-separated list of allowed values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>SET</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.data.EnumSet</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>allowed</code> schema parameter contains the comma-separated list of allowed values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>YEAR[(2|4)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT32</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.Year</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIMESTAMP[(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.ZonedTimestamp</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Contains an ISO8601 formatted date and time (with up to microsecond precision) in a particular time zone. MySQL allows <code>M</code> to be in the range 0-6 to store up to microsecond precision.</p>
</div></div></td>
</tr>
</tfoot>
</table>
<div class="paragraph">
<p>Columns that store strings are defined in MySQL with a character set and collation, either explicitly on the column&#8217;s definition or implicitly by inheriting the table&#8217;s, database&#8217;s, or server&#8217;s default character sets and collations. As of 0.3.1, the MySQL connector uses the column&#8217;s character set when reading the binary representation of the column values in the binlog events.</p>
</div>
<div class="paragraph">
<p>Other data type mappings are described in the following sections.</p>
</div>
<div class="paragraph">
<p>If present, a column&#8217;s default value will be propagated to the corresponding field&#8217;s Kafka Connect schema.
For <code>TIMESTAMP</code> columns who&#8217;s default value is specified as <code>CURRENT_TIMESTAMP</code> or <code>NOW</code>, the value <em>1970-01-01 00:00:00</em> will be used as the default value in the Kafka Connect schema.
Change messages will contain the field&#8217;s default value
(unless an explicit column value had been given), so there should rarely be the need to obtain the default value from the schema.
Passing the default value helps though with satisfying the compatibility rules when <a href="../configuration/avro.html" class="page">using Avro</a> as serialization format together with the Confluent schema registry.</p>
</div>
<div class="sect3">
<h4 id="temporal-values"><a class="anchor" href="#temporal-values"></a>Temporal values</h4>
<div class="paragraph">
<p>Other than MySQL&#8217;s <code>TIMESTAMP</code> data type, the MySQL temporal types depend on the value of the <code>time.precision.mode</code> configuration property.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As of Debezium 0.7 <code>adaptive_time_microseconds</code> mode was introduced and is the default <code>time.precision.mode</code> for the MySQL connector. Mode <code>adaptive</code> was marked as deprecated.</p>
</div>
<div class="paragraph">
<p>As of Debezium 0.10 <code>adaptive</code> mode was removed and can longer be used.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When the <code>time.precision.mode</code> is set to <code>adaptive</code>, only positive TIME field values in the range of 00:00:00.000000 to 23:59:59.999999 can be captured correctly.
When the <code>time.precision.mode</code> is set to <code>connect</code> only values in the range of <code>00:00:00.000</code> to <code>23:59:59.999</code> can be handled.</p>
</div>
<div class="paragraph">
<p>The <code>adaptive</code> and <code>connect</code> time precision modes should only be used if you can make sure that the TIME values in your tables will never exceed the supported ranges. These modes will be removed in a future version of Debezium.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When the <code>time.precision.mode</code> configuration property is set to <code>adaptive_time_microseconds</code> (the default), then the connector will determine the literal type and semantic type for MySQL types <code>TIME</code>, <code>DATE</code> and <code>DATETIME</code> based on the column&#8217;s data type definition so that events <em>exactly</em> represent the values in the database, all TIME fields will be captured as microseconds:</p>
</div>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 35%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL Data Type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name)</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DATE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT32</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.Date</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents the number of days since epoch.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIME[(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.MicroTime</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents the time value in microseconds and does not include timezone information. MySQL allows <code>M</code> to be in the range 0-6 to store up to microsecond precision.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DATETIME</code>, <code>DATETIME(0)</code>, <code>DATETIME(1)</code>, <code>DATETIME(2)</code>, <code>DATETIME(3)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.Timestamp</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents the number of milliseconds past epoch, and does not include timezone information.</p>
</div></div></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DATETIME(4)</code>, <code>DATETIME(5)</code>, <code>DATETIME(6)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.MicroTimestamp</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents the number of microseconds past epoch, and does not include timezone information.</p>
</div></div></td>
</tr>
</tfoot>
</table>
<div class="paragraph">
<p>When the <code>time.precision.mode</code> configuration property is set to <code>adaptive</code> (deprecated), then the connector will determine the literal type and semantic type for the temporal types based on the column&#8217;s data type definition so that events <em>exactly</em> represent the values in the database:</p>
</div>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 35%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL Data Type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name)</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DATE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT32</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.Date</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents the number of days since epoch.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIME</code>, <code>TIME(0)</code>, <code>TIME(1)</code>, <code>TIME(2)</code>, <code>TIME(3)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT32</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.Time</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents the number of milliseconds past midnight, and does not include timezone information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIME(4)</code>, <code>TIME(5)</code>, <code>TIME(6)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.MicroTime</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents the number of microseconds past midnight, and does not include timezone information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DATETIME</code>, <code>DATETIME(0)</code>, <code>DATETIME(1)</code>, <code>DATETIME(2)</code>, <code>DATETIME(3)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.Timestamp</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents the number of milliseconds past epoch, and does not include timezone information.</p>
</div></div></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DATETIME(4)</code>, <code>DATETIME(5)</code>, <code>DATETIME(6)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.time.MicroTimestamp</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents the number of microseconds past epoch, and does not include timezone information.</p>
</div></div></td>
</tr>
</tfoot>
</table>
<div class="paragraph">
<p>When the <code>time.precision.mode</code> configuration property is set to <code>connect</code>, then the connector will use the predefined Kafka Connect logical types as was the case with the 0.2.x MySQL connector. This may be useful when consumers only know about the built-in Kafka Connect logical types and are unable to handle variable-precision time values. On the other hand, since MySQL allows both <code>TIME</code> and <code>DATETIME</code> to have <em>fractional second precision</em> of 0-6 to store up to microsecond precision, the events generated by a connector with the <code>connect</code> time precision mode will <em>*result in a loss of precision*</em> when the database column has a <em>fractional second precision</em> value greater than 3:</p>
</div>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 35%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL Data Type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name)</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DATE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT32</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Date</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents the number of days since epoch.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TIME[(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Time</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents the number of milliseconds since midnight, and does not include timezone information. MySQL allows <code>M</code> to be in the range 0-6 to store up to microsecond precision, though this mode results in a loss of precision when <code>M</code> &gt; 3.</p>
</div></div></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DATETIME[(M)]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>INT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Timestamp</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents the number of milliseconds since epoch, and does not include timezone information. MySQL allows <code>M</code> to be in the range 0-6 to store up to microsecond precision, though this mode results in a loss of precision when <code>M</code> &gt; 3.</p>
</div></div></td>
</tr>
</tfoot>
</table>
<div id="zero-values" class="paragraph">
<p>MySQL allows <a href="http://dev.mysql.com/doc/refman/5.7/en/date-and-time-types.html">zero-values</a> for <code>DATE</code>, <code>DATETIME</code>, and <code>TIMESTAMP</code> columns, which are sometimes preferred over null values. These values cannot be represented using any of the Java types with either of the <code>time.precision.mode</code> options, and therefore the MySQL connector will represent them as <code>null</code> values when the column definition allows nulls, or as the <em>epoch day</em> when the column does not allow nulls.</p>
</div>
<div class="sect4">
<h5 id="temporal-values-without-timezone"><a class="anchor" href="#temporal-values-without-timezone"></a>Temporal values without time zone</h5>
<div class="paragraph">
<p>The <code>DATETIME</code> type represents a local date and time such as "2018-01-13 09:48:27",
i.e. there&#8217;s no time zone information.
Such columns are converted into epoch milli-seconds or micro-seconds (based on the column&#8217;s precision) using UTC.
So e.g. the value "2018-06-20 06:37:03" of a column of type <code>DATETIME</code> (no precision given) will be represented by the value 1529476623000.</p>
</div>
<div class="paragraph">
<p>The <code>TIMESTAMP</code> type represents a timestamp without time zone information and is converted by MySQL from the server (or session&#8217;s) current time zone into UTC when writing and vice versa when reading back the value.
Such columns are converted into an equivalent <code>io.debezium.time.ZonedTimestamp</code> in UTC based on the server (or session&#8217;s) current time zone.
The timezone will be queried from the server by default.
If this fails, it must be specified explicitly as a connector option using the <code>database.serverTimezone</code> option.
So if for instance the database&#8217;s time zone (either globally or configured for the connector by means of aforementioned option) is "America/Los_Angeles",
the <code>TIMESTAMP</code> value "2018-06-20 06:37:03" will be represented by a <code>ZonedTimestamp</code> with the value "2018-06-20T13:37:03Z".</p>
</div>
<div class="paragraph">
<p>Note that the timezone of the JVM running Kafka Connect and Debezium does not affect these conversions.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The handling of these column types is based on using the non-legacy date/time handling mode of the MySQL JDBC connector.
It is therefore strongly advised against passing the <code>database.useLegacyDatetimeCode</code> connector option with a value of <code>false</code>,
as that may result in unexpected values of temporal columns in emitted change data messages.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="decimal-values"><a class="anchor" href="#decimal-values"></a>Decimal values</h4>
<div class="paragraph">
<p>When <code>decimal.handling.mode</code> configuration property is set to <code>precise</code>, then the connector will use the predefined Kafka Connect <code>org.apache.kafka.connect.data.Decimal</code> logical type for all <code>DECIMAL</code> and <code>NUMERIC</code> columns. This is the default mode.</p>
</div>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 35%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL Data Type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name)</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NUMERIC[(M[,D])]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Decimal</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>scaled</code> schema parameter contains an integer representing how many digits the decimal point was shifted.</p>
</div></div></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DECIMAL[(M[,D])]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BYTES</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>org.apache.kafka.connect.data.Decimal</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>scaled</code> schema parameter contains an integer representing how many digits the decimal point was shifted.</p>
</div></div></td>
</tr>
</tfoot>
</table>
<div class="paragraph">
<p>However, when <code>decimal.handling.mode</code> configuration property is set to <code>double</code>, then the connector will represent all <code>DECIMAL</code> and <code>NUMERIC</code> values as Java double values and encodes them as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 35%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL Data Type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name)</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NUMERIC[(M[,D])]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>FLOAT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DECIMAL[(M[,D])]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>FLOAT64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tfoot>
</table>
<div class="paragraph">
<p>The last option for <code>decimal.handling.mode</code> configuration property is <code>string</code>. In this case the connector will represent all <code>DECIMAL</code> and <code>NUMERIC</code> values as their formatted string representation and encodes them as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 35%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MySQL Data Type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name)</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NUMERIC[(M[,D])]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DECIMAL[(M[,D])]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRING</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tfoot>
</table>
</div>
<div class="sect3">
<h4 id="spatial-types"><a class="anchor" href="#spatial-types"></a>Spatial Data Types</h4>
<div class="paragraph">
<p>As of version 0.5.1, the MySQL connector also has limited support for some of the following <a href="https://dev.mysql.com/doc/refman/5.7/en/spatial-datatypes.html">spatial data types</a>:</p>
</div>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 20%;">
<col style="width: 15%;">
<col style="width: 30%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Spatial Data Type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name)</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>POINT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRUCT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.data.geometry.Point</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Contains a structure with 2 <code>FLOAT64</code> fields - <code>(x,y)</code> - each representing the coordinates of a geometric point and 1 optional <code>BYTES</code> field - <code>wkb</code> - representing the Well-Known Binary (WKB) of the coordinates of a geometric point</p>
</div></div></td>
</tr>
</tfoot>
</table>
<div class="paragraph">
<p>As of version 0.7.2, the MySQL connector has full support for all of the following <a href="https://dev.mysql.com/doc/refman/5.7/en/spatial-datatypes.html">spatial data types</a>:</p>
</div>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 20%;">
<col style="width: 15%;">
<col style="width: 30%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Spatial Data Type</th>
<th class="tableblock halign-left valign-top">Literal type (schema type)</th>
<th class="tableblock halign-left valign-top">Semantic type (schema name)</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>GEOMETRY</code><br>
<code>LINESTRING</code><br>
<code>POLYGON</code><br>
<code>MULTIPOINT</code><br>
<code>MULTILINESTRING</code><br>
<code>MULTIPOLYGON</code><br>
<code>GEOMETRYCOLLECTION</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>STRUCT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.debezium.data.geometry.Geometry</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Contains a structure with 2 fields<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srid (INT32)</code> - Spatial Reference System Identifier defining what type of geometry object is stored in the structure</p>
</li>
<li>
<p><code>wkb (BYTES)</code> - a binary representation of the geometry object encoded in the Well-Known-Binary format.
Please see <a href="http://www.opengeospatial.org/standards/sfa">Open Geospatial Consortium Simple Features Access specification</a> for the format details.</p>
</li>
</ul>
</div></div></td>
</tr>
</tfoot>
</table>
</div>
</div>
<div class="sect2">
<h3 id="when-things-go-wrong"><a class="anchor" href="#when-things-go-wrong"></a>When things go wrong</h3>
<div class="paragraph">
<p>Debezium is a distributed system that captures all changes in multiple upstream databases, and will never miss or lose an event. Of course, when the system is operating nominally or being administered carefully, then Debezium provides <em>exactly once</em> delivery of every change event. However, if a fault does happen then the system will still not lose any events, although while it is recovering from the fault it may repeat some change events. Thus, in these abnormal situations Debezium (like Kafka) provides <em>at least once</em> delivery of change events.</p>
</div>
<div class="paragraph">
<p>The rest of this section describes how Debezium handles various kinds of faults and problems.</p>
</div>
<div class="sect3">
<h4 id="_configuration_and_startup_errors"><a class="anchor" href="#_configuration_and_startup_errors"></a>Configuration and startup errors</h4>
<div class="paragraph">
<p>The connector will fail upon startup, report an error/exception in the log, and stop running when the connector&#8217;s configuration is invalid, when the connector cannot successfully connect to MySQL using the specified connectivity parameters, or when the connector is restarting from a previously-recorded position in the MySQL history (via binlog coordinates or GTID set) and MySQL no longer has that history available.</p>
</div>
<div class="paragraph">
<p>In these cases, the error will have more details about the problem and possibly a suggested work around. The connector can be restarted when the configuration has been corrected or the MySQL problem has been addressed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mysql_becomes_unavailable"><a class="anchor" href="#_mysql_becomes_unavailable"></a>MySQL becomes unavailable</h4>
<div class="paragraph">
<p>Once the connector is running, if the MySQL server it has been connected to becomes unavailable for any reason, the connector will fail with an error and the connector will stop. Simply restart the connector when the server is available.</p>
</div>
<div class="paragraph">
<p>Note that when using GTIDs and a highly available MySQL cluster, you can simply restart the connector immediately, and the connector will connect to a different MySQL server in the cluster, find the location in that server&#8217;s binlog that represents the last transaction that was processed completely, and start reading the new server&#8217;s binlog from that location.</p>
</div>
<div class="paragraph">
<p>When the connector and MySQL are not using GTIDs, the connector records the position within the specific binlog of the MySQL server to which it is connected. These binlog coordinates are only valid on that MySQL server, so to recover the connector must do so only by connecting to that server (or to another server that has been recovered from backups of the MySQL server).</p>
</div>
</div>
<div class="sect3">
<h4 id="_kafka_connect_process_stops_gracefully"><a class="anchor" href="#_kafka_connect_process_stops_gracefully"></a>Kafka Connect process stops gracefully</h4>
<div class="paragraph">
<p>If Kafka Connect is being run in distributed mode, and a Kafka Connect process is stopped gracefully, then prior to shutdown of that processes Kafka Connect will migrate all of the process' connector tasks to another Kafka Connect process in that group, and the new connector tasks will pick up exactly where the prior tasks left off. There will be a short delay in processing while the connector tasks are stopped gracefully and restarted on the new processes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_kafka_connect_process_crashes"><a class="anchor" href="#_kafka_connect_process_crashes"></a>Kafka Connect process crashes</h4>
<div class="paragraph">
<p>If the Kafka Connector process stops unexpectedly, then any connector tasks it was running will obviously terminate without recording their most recently-processed offsets. When Kafka Connect is being run in distributed mode, it will restart those connector tasks on other processes. However, the MySQL connectors will resume from the last offset <em>recorded</em> by the earlier processes, which means that the new replacement tasks may generate some of the same change events that were processed just prior to the crash. The number of duplicate events will depend on the offset flush period and the volume of data changes just before the crash.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Because there is a chance that some events may be duplicated during a recovery from failure, consumers should always anticipate some events may be duplicated. Debezium change are idempotent, so a sequence of events always results in the same state.</p>
</div>
<div class="paragraph">
<p>Debezium also includes with each change event message the source-specific information about the origin of the event, including the MySQL server&#8217;s time of the event, its binlog filename and position, and GTID (if used). Consumers can keep track of this information (especially GTIDs) to know whether it has already seen a particular event.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_kafka_becomes_unavailable"><a class="anchor" href="#_kafka_becomes_unavailable"></a>Kafka becomes unavailable</h4>
<div class="paragraph">
<p>As the connector generates change events, the Kafka Connect framework records those events in Kafka using the Kafka producer API. Kafka Connect will also periodically record the latest offset that appears in those change events, at a frequency you&#8217;ve specified in the Kafka Connect worker configuration. If the Kafka brokers become unavailable, the Kafka Connect worker process running the connectors will simply repeatedly attempt to reconnect to the Kafka brokers. In other words, the connector tasks will simply pause until a connection can be reestablished, at which point the connectors will resume exactly where they left off.</p>
</div>
</div>
<div class="sect3">
<h4 id="_connector_is_stopped_for_a_duration"><a class="anchor" href="#_connector_is_stopped_for_a_duration"></a>Connector is stopped for a duration</h4>
<div class="paragraph">
<p>If the connector is gracefully stopped, the database can continue to be used and any new changes will be recorded in the MySQL server&#8217;s binlog. When the connector is restarted, it will resume reading the MySQL binlog where it last left off, recording change events for all of the changes that were made while the connector was stopped.</p>
</div>
<div class="paragraph">
<p>A properly configured Kafka cluster is able to <a href="https://engineering.linkedin.com/kafka/benchmarking-apache-kafka-2-million-writes-second-three-cheap-machines">massive throughput</a>. Kafka Connect is written with Kafka best practices, and given enough resources will also be able to handle very large numbers of database change events. Because of this, when a connector has been restarted after a while, it is very likely to catch up with the database, though how quickly will depend upon the capabilities and performance of Kafka and the volume of changes being made to the data in MySQL.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the connector remains stopped for long enough, MySQL might purge older binlog files and the connector&#8217;s last position may be lost. In this case, when the connector configured with <em>initial</em> snapshot mode (the default) is finally restarted, the MySQL server will no longer have the starting point and the connector will perform an initial snapshot. On the other hand, if the connector&#8217;s snapshot mode is disabled, then the connector will fail with an error.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploying-a-connector"><a class="anchor" href="#deploying-a-connector"></a>Deploying a connector</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you&#8217;ve already installed <a href="https://zookeeper.apache.org">Zookeeper</a>, <a href="http://kafka.apache.org/">Kafka</a>, and <a href="http://kafka.apache.org/documentation.html#connect">Kafka Connect</a>, then using Debezium&#8217;s MySQL connector is easy. Simply download the <a href="https://repo1.maven.org/maven2/io/debezium/debezium-connector-mysql/0.9.5.Final/debezium-connector-mysql-0.9.5.Final-plugin.tar.gz">connector&#8217;s plugin archive</a>, extract the JARs into your Kafka Connect environment, and add the directory with the JARs to <a href="https://docs.confluent.io/current/connect/userguide.html#installing-plugins">Kafka Connect&#8217;s classpath</a>. Restart your Kafka Connect process to pick up the new JARs.</p>
</div>
<div class="paragraph">
<p>If immutable containers are your thing, then check out <a href="https://hub.docker.com/r/debezium/">Debezium&#8217;s Docker images</a> for Zookeeper, Kafka, and Kafka Connect with the MySQL connector already pre-installed and ready to go. Our <a href="../tutorial.html" class="page">tutorial</a> even walks you through using these images, and this is a great way to learn what Debezium is all about. You can even <a href="/blog/2016/05/31/Debezium-on-Kubernetes/">run Debezium on Kubernetes and OpenShift</a>.</p>
</div>
<div class="paragraph">
<p>To use the connector to produce change events for a particular MySQL server or cluster, simply create a <a href="#configuration">configuration file for the MySQL Connector</a> and use the <a href="https://docs.confluent.io/current/connect/references/restapi.html">Kafka Connect REST API</a> to add that connector to your Kafka Connect cluster. When the connector starts, it will grab a consistent snapshot of the databases in your MySQL server and start reading the MySQL binlog, producing events for every inserted, updated, and deleted row. The connector can optionally produce events with the DDL statements that were applied, and you can even choose to produce events for a subset of the databases and tables. Optionally ignore, mask, or truncate columns that are sensitive, too large, or not needed.</p>
</div>
<div class="sect2">
<h3 id="monitoring"><a class="anchor" href="#monitoring"></a>Monitoring</h3>
<div class="paragraph">
<p>Kafka, Zookeeper, and Kafka Connect all have <a href="../operations/monitoring.html" class="page">built-in support</a> for JMX metrics. The MySQL connector also publishes a number of metrics about the connector&#8217;s activities that can be monitored through JMX. The connector has two types of metrics. Snapshot metrics help you monitor the snapshot activity and are available when the connector is performing a snapshot. Binlog metrics help you monitor the progress and activity while the connector reads the MySQL binlog.</p>
</div>
<div class="sect3">
<h4 id="snapshot-metrics"><a class="anchor" href="#snapshot-metrics"></a>Snapshot Metrics</h4>
<div class="sect4">
<h5 id="_mbean_debezium_mysqltypeconnector_metricscontextsnapshotserverdatabase_server_name"><a class="anchor" href="#_mbean_debezium_mysqltypeconnector_metricscontextsnapshotserverdatabase_server_name"></a><strong>MBean: debezium.mysql:type=connector-metrics,context=snapshot,server=<em>&lt;database.server.name&gt;</em></strong></h5>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 30%;">
<col style="width: 10%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TotalTableCount</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of tables that are being included in the snapshot.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>RemainingTableCount</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of tables that the snapshot has yet to copy.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>HoldingGlobalLock</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether the connector currently holds a global or table write lock.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>SnapshotRunning</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether the snapshot was started.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>SnapshotAborted</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether the snapshot was aborted.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>SnapshotCompleted</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether the snapshot completed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>SnapshotDurationInSeconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of seconds that the snapshot has taken so far, even if not complete.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>RowsScanned</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Map&lt;String, Long&gt;</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Map containing the number of rows scanned for each table in the snapshot. Tables are incrementally added to the Map during processing. Updates every 10,000 rows scanned and upon completing a table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>LastEvent</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The last snapshot event that the connector has read.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MilliSecondsSinceLastEvent</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of milliseconds since the connector has read and processed the most recent event.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TotalNumberOfEventsSeen</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of events that this connector has seen since last started or reset.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NumberOfEventsFiltered</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of events that have been filtered by whitelist or blacklist filtering rules configured on the connector.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MonitoredTables</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string[]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The list of tables that are monitored by the connector.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>QueueTotalCapcity</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The length of the queue used to pass events between snapshot reader and the main Kafka Connect loop.</p>
</div></div></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>QueueRemainingCapcity</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The free capacity of the queue used to pass events between snapshot reader and the main Kafka Connect loop.</p>
</div></div></td>
</tr>
</tfoot>
</table>
</div>
</div>
<div class="sect3">
<h4 id="binlog-metrics"><a class="anchor" href="#binlog-metrics"></a>Binlog Metrics</h4>
<div class="sect4">
<h5 id="_mbean_debezium_mysqltypeconnector_metricscontextbinlogserverdatabase_server_name"><a class="anchor" href="#_mbean_debezium_mysqltypeconnector_metricscontextbinlogserverdatabase_server_name"></a><strong>MBean: debezium.mysql:type=connector-metrics,context=binlog,server=<em>&lt;database.server.name&gt;</em></strong></h5>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 30%;">
<col style="width: 10%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Connected</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Flag that denotes whether the connector is currently connected to the MySQL server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BinlogFilename</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the binlog filename that the connector has most recently read.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BinlogPosition</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The most recent position (in bytes) within the binlog that the connector has read.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>IsGtidModeEnabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Flag that denotes whether the connector is currently tracking GTIDs from MySQL server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>GtidSet</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The string representation of the most recent GTID set seen by the connector when reading the binlog.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>LastEvent</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The last binlog event that the connector has read.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>SecondsSinceLastEvent</code> (obsolete)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of seconds since the connector has read and processed the most recent event.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>SecondsBehindMaster</code> (obsolete)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of seconds between the last event&#8217;s MySQL timestamp and the connector processing it. The values will incorporate any differences between the clocks on the machines where the MySQL server and the MySQL connector are running.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MilliSecondsBehindSource</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of milliseconds between the last event&#8217;s MySQL timestamp and the connector processing it. The values will incorporate any differences between the clocks on the machines where the MySQL server and the MySQL connector are running.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TotalNumberOfEventsSeen</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of events that this connector has seen since last started or reset.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NumberOfSkippedEvents</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of events that have been skipped by the MySQL connector.  Typically events are skipped due to a malformed or unparseable event from MySQL&#8217;s binlog.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NumberOfEventsFiltered</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of events that have been filtered by whitelist or blacklist filtering rules configured on the connector.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NumberOfDisconnects</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of disconnects by the MySQL connector.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>SourceEventPosition</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>map&lt;string, string&gt;</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The coordinates of the last received event.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>LastTransactionId</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Transaction identifier of the last processed transaction.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>LastEvent</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The last binlog event that the connector has read.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MilliSecondsSinceLastEvent</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of milliseconds since the connector has read and processed the most recent event.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MonitoredTables</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string[]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The list of tables that are monitored by Debezium.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>QueueTotalCapcity</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The length of the queue used to pass events between binlog reader and the main Kafka Connect loop.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>QueueRemainingCapcity</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The free capacity of the queue used to pass events between binlog reader and the main Kafka Connect loop.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NumberOfCommittedTransactions</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of processed transactions that were committed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NumberOfRolledBackTransactions</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of processed transactions that were rolled back and not streamed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NumberOfNotWellFormedTransactions</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of transactions that have not conformed to expected protocol <code>BEGIN</code> + <code>COMMIT</code>/<code>ROLLBACK</code>. Should be <code>0</code> under normal conditions.</p>
</div></div></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NumberOfLargeTransactions</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of transactions that have not fitted into the look-ahead buffer. Should be significantly smaller than <code>NumberOfCommittedTransactions</code> and <code>NumberOfRolledBackTransactions</code> for optimal performance.</p>
</div></div></td>
</tr>
</tfoot>
</table>
<div class="paragraph">
<p><em>Note:</em> The transactions related attributes are available only if binlog event buffering is enabled - see <code>binlog.buffer.size</code> for more details</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="schema-history-metrics"><a class="anchor" href="#schema-history-metrics"></a>Schema History Metrics</h4>
<div class="sect4">
<h5 id="_mbean_debezium_mysqltypeconnector_metricscontextschema_historyserverdatabase_server_name"><a class="anchor" href="#_mbean_debezium_mysqltypeconnector_metricscontextschema_historyserverdatabase_server_name"></a><strong>MBean: debezium.mysql:type=connector-metrics,context=schema-history,server=<em>&lt;database.server.name&gt;</em></strong></h5>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 30%;">
<col style="width: 10%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Status</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>One of <code>STOPPED</code>, <code>RECOVERING</code> (recovering history from the storage), <code>RUNNING</code> describing state of the database history.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>RecoveryStartTime</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The time in epoch seconds at what recovery has started.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ChangesRecovered</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of changes that were read during recovery phase.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ChangesApplied</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of schema changes applie during recovery and runtime.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MilliSecondsSinceLastRecoveredChange</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of milliseconds that elapsed since the last change was recovered from the history store.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MilliSecondsSinceLastAppliedChange</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of milliseconds that elapsed since the last change was applied.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>LastRecoveredChange</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The string representation of the last change recovered from the history store.</p>
</div></div></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>LastAppliedChange</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The string representation of the last applied change.</p>
</div></div></td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example-configuration"><a class="anchor" href="#example-configuration"></a>Example configuration</h3>
<div class="paragraph">
<p>Using the MySQL connector is straightforward. Here is an example of the configuration for a MySQL connector that monitors a MySQL server at port 3306 on 192.168.99.100, which we logically name <code>fullfillment</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "name": "inventory-connector",  <i class="conum" data-value="1"></i><b>(1)</b>
  "config": {
    "connector.class": "io.debezium.connector.mysql.MySqlConnector", <i class="conum" data-value="2"></i><b>(2)</b>
    "database.hostname": "192.168.99.100", <i class="conum" data-value="3"></i><b>(3)</b>
    "database.port": "3306", <i class="conum" data-value="4"></i><b>(4)</b>
    "database.user": "debezium", <i class="conum" data-value="5"></i><b>(5)</b>
    "database.password": "dbz", <i class="conum" data-value="6"></i><b>(6)</b>
    "database.server.id": "184054", <i class="conum" data-value="7"></i><b>(7)</b>
    "database.server.name": "fullfillment", <i class="conum" data-value="8"></i><b>(8)</b>
    "database.whitelist": "inventory", <i class="conum" data-value="9"></i><b>(9)</b>
    "database.history.kafka.bootstrap.servers": "kafka:9092", <i class="conum" data-value="10"></i><b>(10)</b>
    "database.history.kafka.topic": "dbhistory.fullfillment", <i class="conum" data-value="11"></i><b>(11)</b>
    "include.schema.changes": "true" <i class="conum" data-value="12"></i><b>(12)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of our connector when we register it with a Kafka Connect service.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The name of this MySQL connector class.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The address of the MySQL server.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The port number of the MySQL server.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The name of the MySQL user that has the <a href="#mysql-user">required privileges</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The password for the MySQL user that has the <a href="#mysql-user">required privileges</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The connector&#8217;s identifier that must be unique within the MySQL cluster and similar to MySQL&#8217;s <code>server-id</code> configuration property.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>The logical name of the MySQL server/cluster, which forms a namespace and is used in all the names of the Kafka topics to which the connector writes, the Kafka Connect schema names, and the namespaces of the corresponding Avro schema when the <a href="#avro-converter">Avro Connector</a> is used.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>A list of all databases hosted by this server that this connector will monitor. This is optional, and there are other properties for listing the databases and tables to include or exclude from monitoring.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>The list of Kafka brokers that this connector will use to write and recover DDL statements to the database history topic.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>The name of the <a href="#database-schema-history">database history topic</a> where the connector will write and recover DDL statements. This topic is for internal use only and should not be used by consumers.</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>The flag specifying that the connector should generate on the <a href="#schema-change-topic">schema change topic</a> named <code>fullfillment</code> events with the DDL changes that <em>can</em> be used by consumers.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See the <a href="#connector-properties">complete list of connector properties</a> that can be specified in these configurations.</p>
</div>
<div class="paragraph">
<p>This configuration can be sent via POST to a running Kafka Connect service, which will then record the configuration and start up the one connector task that will connect to the MySQL database, read the binlog, and record events to Kafka topics.</p>
</div>
</div>
<div class="sect2">
<h3 id="connector-properties"><a class="anchor" href="#connector-properties"></a>Connector properties</h3>
<div class="paragraph">
<p>The following configuration properties are <em>required</em> unless a default value is available.</p>
</div>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 35%;">
<col style="width: 10%;">
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Unique name for the connector. Attempting to register again with the same name will fail. (This property is required by all Kafka Connect connectors.)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connector.class</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Java class for the connector. Always use a value of <code>io.debezium&#8203;.connector.mysql.MySqlConnector</code> for the MySQL connector.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tasks.max</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum number of tasks that should be created for this connector. The MySQL connector always uses a single task and therefore does not use this value, so the default is always acceptable.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.hostname</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>IP address or hostname of the MySQL database server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.port</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>3306</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Integer port number of the MySQL database server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.user</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the MySQL database to use when connecting to the MySQL database server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Password to use when connecting to the MySQL database server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.server.name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logical name that identifies and provides a namespace for the particular MySQL database server/cluster being monitored. The logical name should be unique across all other connectors, since it is used as a prefix for all Kafka topic names emanating from this connector.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.server.id</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>random</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A numeric ID of this database client, which must be unique across all currently-running database processes in the MySQL cluster. This connector joins the MySQL database cluster as another server (with this unique ID) so it can read the binlog. By default, a random number is generated between 5400 and 6400, though we recommend setting an explicit value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.history.kafka.topic</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The full name of the Kafka topic where the connector will store the database schema history.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.history&#8203;.kafka.bootstrap.servers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A list of host/port pairs that the connector will use for establishing an initial connection to the Kafka cluster. This connection will be used for retrieving database schema history previously stored by the connector, and for writing each DDL statement read from the source database. This should point to the same Kafka cluster used by the Kafka Connect process.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.whitelist</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>empty string</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional comma-separated list of regular expressions that match database names to be monitored; any database name not included in the whitelist will be excluded from monitoring. By default all databases will be monitored. May not be used with <code>database.blacklist</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.blacklist</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>empty string</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional comma-separated list of regular expressions that match database names to be excluded from monitoring; any database name not included in the blacklist will be monitored. May not be used with <code>database.whitelist</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>table.whitelist</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>empty string</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional comma-separated list of regular expressions that match fully-qualified table identifiers for tables to be monitored; any table not included in the whitelist will be excluded from monitoring. Each identifier is of the form <em>databaseName</em>.<em>tableName</em>. By default the connector will monitor every non-system table in each monitored database. May not be used with <code>table.blacklist</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>table.blacklist</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>empty string</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional comma-separated list of regular expressions that match fully-qualified table identifiers for tables to be excluded from monitoring; any table not included in the blacklist will be monitored. Each identifier is of the form <em>databaseName</em>.<em>tableName</em>. May not be used with <code>table.whitelist</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>column.blacklist</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>empty string</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional comma-separated list of regular expressions that match the fully-qualified names of columns that should be excluded from change event message values. Fully-qualified names for columns are of the form <em>databaseName</em>.<em>tableName</em>.<em>columnName</em>, or <em>databaseName</em>.<em>schemaName</em>.<em>tableName</em>.<em>columnName</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>column.truncate.to.<em>length</em>.chars</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional comma-separated list of regular expressions that match the fully-qualified names of character-based columns whose values should be truncated in the change event message values if the field values are longer than the specified number of characters. Multiple properties with different lengths can be used in a single configuration, although in each the length must be a positive integer. Fully-qualified names for columns are of the form <em>databaseName</em>.<em>tableName</em>.<em>columnName</em>, or <em>databaseName</em>.<em>schemaName</em>.<em>tableName</em>.<em>columnName</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>column.mask.with.<em>length</em>.chars</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional comma-separated list of regular expressions that match the fully-qualified names of character-based columns whose values should be replaced in the change event message values with a field value consisting of the specified number of asterisk (<code>*</code>) characters. Multiple properties with different lengths can be used in a single configuration, although in each the length must be a positive integer or zero. Fully-qualified names for columns are of the form <em>databaseName</em>.<em>tableName</em>.<em>columnName</em>, or <em>databaseName</em>.<em>schemaName</em>.<em>tableName</em>.<em>columnName</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>column.propagate.source.type</code> 0.8.0 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>n/a</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional comma-separated list of regular expressions that match the fully-qualified names of columns whose original type and length should be added as a parameter to the corresponding field schemas in the emitted change messages.
The schema parameters <code>__debezium.source.column.type</code>, <code>__debezium.source.column.length</code> and <code>_debezium.source.column.scale</code> will be used to propagate the original type name and length (for variable-width types), respectively.
Useful to properly size corresponding columns in sink databases.
Fully-qualified names for columns are of the form <em>databaseName</em>.<em>tableName</em>.<em>columnName</em>, or <em>databaseName</em>.<em>schemaName</em>.<em>tableName</em>.<em>columnName</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>time.precision.mode</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>adaptive_time&#8203;_microseconds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time, date, and timestamps can be represented with different kinds of precision, including: <code>adaptive_time_microseconds</code> (the default) captures the date, datetime and timestamp values exactly as in the database using either millisecond, microsecond, or nanosecond precision values based on the database column&#8217;s type, with the exception of TIME type fields, which are always captured as microseconds; <code>adaptive</code> (deprecated) captures the time and timestamp values exactly as in the database using either millisecond, microsecond, or nanosecond precision values based on the database column&#8217;s type; or <code>connect</code> always represents time and timestamp values using Kafka Connect&#8217;s built-in representations for Time, Date, and Timestamp, which uses millisecond precision regardless of the database columns' precision. See <a href="#temporal-values">Temporal values</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>decimal.handling.mode</code><br>
<code>string</code> in 0.7.4 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>precise</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies how the connector should handle values for <code>DECIMAL</code> and <code>NUMERIC</code> columns: <code>precise</code> (the default) represents them precisely using <code>java.math.BigDecimal</code> values represented in change events in a binary form; or <code>double</code> represents them using <code>double</code> values, which may result in a loss of precision but will be far easier to use. <code>string</code> option encodes values as formatted string which is easy to consume but a semantic information about the real type is lost. See <a href="#decimal-values">Decimal values</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>bigint.unsigned.handling.mode</code><br>
0.6.1 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>long</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies how BIGINT UNSIGNED columns should be represented in change events, including: <code>precise</code> uses <code>java.math.BigDecimal</code> to represent values, which are encoded in the change events using a binary representation and Kafka Connect&#8217;s <code>org.apache.kafka.connect.data.Decimal</code> type; <code>long</code> (the default) represents values using Java&#8217;s <code>long</code>, which may not offer the precision but will be far easier to use in consumers. <code>long</code> is usually the preferable setting. Only when working with values larger than 2^63, the <code>precise</code> setting should be used as those values can&#8217;t be conveyed using <code>long</code>. See <a href="#data-types">Data types</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>include.schema.changes</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean value that specifies whether the connector should publish changes in the database schema to a Kafka topic with the same name as the database server ID. Each schema change will be recorded using a key that contains the database name and whose value includes the DDL statement(s). This is independent of how the connector internally records database history. The default is <code>true</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>include.query</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean value that specifies whether the connector should include the original SQL query that generated the change event.<br>
Note: This option requires MySQL be configured with the binlog_rows_query_log_events option set to ON. Query will not be present for events generated from the snapshot process.<br>
WARNING: Enabling this option may expose tables or fields explicitly blacklisted or masked by including the original SQL statement in the change event. For this reason this option is defaulted to 'false'.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>event.deserialization&#8203;.failure.handling.mode</code><br>
0.6.2 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>fail</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies how the connector should react to exceptions during deserialization of binlog events.
<code>fail</code> will propagate the exception (indicating the problematic event and its binlog offset), causing the connector to stop.<br>
<code>warn</code> will cause the problematic event to be skipped and the problematic event and its binlog offset to be logged
(make sure that <a href="../operations/logging.html" class="page">the logger</a> is set to the <code>WARN</code> or <code>ERROR</code> level).<br>
<code>ignore</code> will cause problematic event will be skipped.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>inconsistent.schema.handling.mode</code><br>
0.7.3 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>fail</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies how the connector should react to binlog events that relate to tables that are not present in internal schema representation (i.e. internal representation is not consistent with database)
<code>fail</code> will throw an exception (indicating the problematic event and its binlog offset), causing the connector to stop.<br>
<code>warn</code> will cause the problematic event to be skipped and the problematic event and its binlog offset to be logged
(make sure that <a href="../operations/logging.html" class="page">the logger</a> is set to the <code>WARN</code> or <code>ERROR</code> level).<br>
<code>ignore</code> will cause the problematic event to be skipped.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max.queue.size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>8192</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Positive integer value that specifies the maximum size of the blocking queue into which change events read from the database log are placed before they are written to Kafka. This queue can provide backpressure to the binlog reader when, for example, writes to Kafka are slower or if Kafka is not available. Events that appear in the queue are not included in the offsets periodically recorded by this connector. Defaults to 8192, and should always be larger than the maximum batch size specified in the <code>max.batch.size</code> property.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max.batch.size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>2048</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Positive integer value that specifies the maximum size of each batch of events that should be processed during each iteration of this connector. Defaults to 2048.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>poll.interval.ms</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Positive integer value that specifies the number of milliseconds the connector should wait during each iteration for new change events to appear. Defaults to 1000 milliseconds, or 1 second.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connect.timeout.ms</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>30000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A positive integer value that specifies the maximum time in milliseconds this connector should wait after trying to connect to the MySQL database server before timing out. Defaults to 30 seconds.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gtid.source.includes</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A comma-separated list of regular expressions that match source UUIDs in the GTID set used to find the binlog position in the MySQL server. Only the GTID ranges that have sources matching one of these include patterns will be used. May not be used with <code>gtid.source.excludes</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gtid.source.excludes</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A comma-separated list of regular expressions that match source UUIDs in the GTID set used to find the binlog position in the MySQL server. Only the GTID ranges that have sources matching none of these exclude patterns will be used. May not be used with <code>gtid.source.includes</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gtid.new.channel.position</code><br>
0.9.0 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>latest</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When set to <code>latest</code>, when the connector sees a new GTID channel, it will start consuming from the last executed transaction in that GTID channel. If set to <code>earliest</code>, the connector starts reading that channel from the first available (not purged) GTID position. <code>earliest</code> is useful when you have a active-passive MySQL setup where Debezium is connected to master, in this case during failover the slave with new UUID (and GTID channel) starts receiving writes before Debezium is connected. These writes would be lost when using <code>latest</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tombstones.on.delete</code><br>
0.7.3 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls whether a tombstone event should be generated after a delete event.<br>
When <code>true</code> the delete operations are represented by a delete event and a subsequent tombstone event. When <code>false</code> only a delete event is sent.<br>
Emitting the tombstone event (the default behavior) allows Kafka to completely delete all events pertaining to the given key once the source record got deleted.</p>
</div></div></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ddl.parser.mode</code><br>
0.8.0 to 0.9.x</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>antlr</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls which parser should be used for parsing DDL statements when building up the meta-model of the captured database structure.<br>
Can be one of <code>legacy</code> (for the legacy hand-written parser implementation) or <code>antlr</code> (for new Antlr based implementation introduced in Debezium 0.8.0).<br>
While the legacy parser remains the default for Debezium 0.8.x, please try out the new implementation and report back any issues you encounter.<br>
The new parser is the default as of 0.9.</p>
</div>
<div class="paragraph">
<p>The legacy parser as well as this configuration property has been removed as of 0.10.</p>
</div></div></td>
</tr>
</tfoot>
</table>
<div class="paragraph">
<p>The following <em>advanced</em> configuration properties have good defaults that will work in most situations and therefore rarely need to be specified in the connector&#8217;s configuration.</p>
</div>
<table class="tableblock frame-all grid-all stretch table table-bordered table-striped">
<colgroup>
<col style="width: 35%;">
<col style="width: 10%;">
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connect.keep.alive</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A boolean value that specifies whether a separate thread should be used to ensure the connection to the MySQL server/cluster is kept alive.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>table.ignore.builtin</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean value that specifies whether built-in system tables should be ignored. This applies regardless of the table whitelist or blacklists. By default system tables are excluded from monitoring, and no events are generated when changes are made to any of the system tables.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.history.kafka.recovery.poll.interval.ms</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>100</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An integer value that specifies the maximum number of milliseconds the connector should wait during startup/recovery while polling for persisted data. The default is 100ms.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.history.kafka.recovery.attempts</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>4</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum number of times that the connector should attempt to read persisted history data before the connector recovery fails with an error. The maximum amount of time to wait after receiving no data is <code>recovery.attempts</code> x <code>recovery.poll.interval.ms</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.history.skip.unparseable.ddl</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean value that specifies if connector should ignore malformed or unknown database statements or stop processing and let operator to fix the issue.
The safe default is <code>false</code>.
Skipping should be used only with care as it can lead to data loss or mangling when binlog is processed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.history.store.only.monitored.tables.ddl</code><br>
0.7.2 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean value that specifies if connector should should record all DDL statements or (when <code>true</code>) only those that are relevant to tables that are monitored by Debezium (via filter configuration).
The safe default is <code>false</code>.
This feature should be used only with care as the missing data might be necessary when the filters are changed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.ssl.mode</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>disabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether to use an encrypted connection.  The default is <code>disabled</code>, and specifies to use an unencrypted connection.</p>
</div>
<div class="paragraph">
<p>The <code>preferred</code> option establishes an encrypted connection if the server supports secure connections but falls back to an unencrypted connection otherwise.</p>
</div>
<div class="paragraph">
<p>The <code>required</code> option establishes an encrypted connection but will fail if one cannot be made for any reason.</p>
</div>
<div class="paragraph">
<p>The <code>verify_ca</code> option behaves like <code>required</code> but additionally it verifies the server TLS certificate against the configured Certificate Authority (CA) certificates and will fail if it doesn&#8217;t match any valid CA certificates.</p>
</div>
<div class="paragraph">
<p>The <code>verify_identity</code> option behaves like <code>verify_ca</code> but additionally verifies that the server certificate matches the host of the remote connection.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>binlog.buffer.size</code><br>
0.7.0 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>0</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The size of a look-ahead buffer used by the binlog reader.<br>
Under specific conditions it is possible that MySQL binlog contains uncommitted data finished by a <code>ROLLBACK</code> statement.
Typical examples are using savepoints or mixing temporary and regular table changes in a single transaction.<br>
When a beginning of a transaction is detected then Debezium tries to roll forward the binlog position and find either <code>COMMIT</code> or <code>ROLLBACK</code> so it can decide whether the changes from  the transaction will be streamed or not.
The size of the buffer defines the maximum number of changes in the transaction that Debezium can buffer while searching for transaction boundaries.
If the size of transaction is larger than the buffer then Debezium needs to rewind and re-read the events that has not fit into the buffer while streaming. Value <code>0</code> disables buffering.<br>
Disabled by default.<br>
<em>Note:</em> This feature should be considered an incubating one. We need a feedback from customers but it is expected that it is not completely polished.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>snapshot.mode</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>initial</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the criteria for running a snapshot upon startup of the connector. The default is <code>initial</code>, and specifies the connector can run a snapshot only when no offsets have been recorded for the logical server name. The <code>when_needed</code> option specifies that the connector run a snapshot upon startup whenever it deems it necessary (when no offsets are available, or when a previously recorded offset specifies a binlog location or GTID that is not available in the server). The <code>never</code> option specifies that the connect should never use snapshots and that upon first startup with a logical server name the connector should read from the beginning of the binlog; this should be used with care, as it is only valid when the binlog is guaranteed to contain the entire history of the database. If you don&#8217;t need the topics to contain a consistent snapshot of the data but only need them to have the changes since the connector was started, you can use the <code>schema_only</code> option, where the connector only snapshots the schemas (not the data).</p>
</div>
<div class="paragraph">
<p><code>schema_only_recovery</code> is a recovery option for an existing connector to recover a corrupted or lost database history topic, or to periodically "clean up" a database history topic (which requires infinite retention) that may be growing unexpectedly.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>snapshot.locking.mode</code><br>
<em>0.7.3 and later</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>minimal</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls if and how long the connector holds onto the global MySQL read lock (preventing any updates to the database) while it is performing a snapshot.  There are three possible values <code>minimal</code>, <code>extended</code>, and <code>none</code>.<br></p>
</div>
<div class="paragraph">
<p><code>minimal</code> The connector holds the global read lock for just the initial portion of the snapshot while the connector reads the database schemas and other metadata. The remaining work in a snapshot involves selecting all rows from each table, and this can be done in a consistent fashion using the REPEATABLE READ transaction even when the global read lock is no longer held and while other MySQL clients are updating the database.<br></p>
</div>
<div class="paragraph">
<p><code>extended</code> In some cases where clients are submitting operations that MySQL excludes from REPEATABLE READ semantics, it may be desirable to block all writes for the entire duration of the snapshot. For these such cases, use this option.<br></p>
</div>
<div class="paragraph">
<p><code>none</code> Will prevent the connector from acquiring any table locks during the snapshot process. This value can be used with all snapshot modes but it is safe to use if and <em>only</em> if no schema changes are happening while the snapshot is taken. Note that for tables defined with MyISAM engine, the tables would still be locked despite this property being set as MyISAM acquires a table lock. This behaviour is unlike InnoDB engine which acquires row level locks.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>snapshot.minimal.locks</code><br>
<em>deprecated since 0.7.3</em><br>
<em>removed since 0.10</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls how long the connector holds onto the global MySQL read lock (preventing any updates to the database) while it is performing a snapshot. The default is <code>true</code>, meaning the connector holds the global read lock for just the initial portion of the snapshot while the connector reads the database schemas and other metadata. The remaining work in a snapshot involves selecting all rows from each table, and this can be done in a consistent fashion using the <code>REPEATABLE READ</code> transaction even when the global read lock is no longer held and while other
MySQL clients are updating the database. However, in some cases where clients are submitting operations that MySQL excludes from <code>REPEATABLE READ</code> semantics, it may be desirable to <em>block all writes</em> for the entire duration of the snapshot. In only such cases, set this property to <code>false</code>.<br>
<em>Deprecated:</em> This option has been deprecated and replaced with the <code>snapshot.locking.mode</code> configuration option. This option will be removed in a future release.<br></p>
</div>
<div class="paragraph">
<p>A <code>snapshot.minimal.locks</code> value of <code>true</code> should be replaced with <code>snapshot.locking.mode</code> set to <code>minimal</code>.<br></p>
</div>
<div class="paragraph">
<p>A <code>snapshot.minimal.locks</code> value of <code>false</code> should be replaced with <code>snapshot.locking.mode</code> set to <code>extended</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>snapshot.select.statement.overrides</code><br>
0.7.0 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls which rows from tables will be included in snapshot.<br>
This property contains a comma-separated list of fully-qualified tables <em>(DB_NAME.TABLE_NAME)</em>. Select statements for the individual tables are specified in further configuration properties, one for each table, identified by the id <code>snapshot.select.statement.overrides.[DB_NAME].[TABLE_NAME]</code>. The value of those properties is the SELECT statement to use when retrieving data from the specific table during snapshotting. <em>A possible use case for large append-only tables is setting a specific point where to start (resume) snapshotting, in case a previous snapshotting was interrupted.</em><br>
<strong>Note</strong>: This setting has impact on snapshots only. Events captured from binlog are not affected by it at all.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>min.row.count.to.stream.results</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>During a snapshot operation, the connector will query each included table to produce a read event for all rows in that table. This parameter determines whether the MySQL connection will pull all results for a table into memory (which is fast but requires large amounts of memory), or whether the results will instead be streamed (can be slower, but will work for very large tables). The value specifies the minimum number of rows a table must contain before the connector will stream results, and defaults to 1,000. Set this parameter to '0' to skip all table size checks and always stream all results during a snapshot.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>heartbeat.interval.ms</code><br>
0.7.3 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls how frequently the heartbeat messages are sent.<br>
This property contains an interval in milli-seconds that defines how frequently the connector sends heartbeat messages into a heartbeat topic.
Set this parameter to <code>0</code> to not send heartbeat messages at all.<br>
Disabled by default.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>heartbeat.topics.prefix</code><br>
0.7.3 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>__debezium-heartbeat</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls the naming of the topic to which heartbeat messages are sent.<br>
The topic is named according to the pattern <code>&lt;heartbeat.topics.prefix&gt;.&lt;server.name&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.initial.statements</code><br>
0.8.0 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A semicolon separated list of SQL statements to be executed when a JDBC connection (not the transaction log reading connection) to the database is established.
Use doubled semicolon (';;') to use a semicolon as a character and not as a delimiter.<br>
<em>Note: The connector may establish JDBC connections at its own discretion, so this should typically be used for configuration of session parameters only, but not for executing DML statements.</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>snapshot.delay.ms</code><br>
0.8.0 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An interval in milli-seconds that the connector should wait before taking a snapshot after starting up;<br>
Can be used to avoid snapshot interruptions when starting multiple connectors in a cluster, which may cause re-balancing of connectors.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>snapshot.fetch.size</code><br>
0.9.5 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies the maximum number of rows that should be read in one go from each table while taking a snapshot.
The connector will read the table contents in multiple batches of this size.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>enable.time.adjuster</code><br>
0.9.3 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>MySQL allows user to insert year value as either 2-digit or 4-digit.
In case of two digits the value is automatically mapped to 1970 - 2069 range.
This is usually done by database.<br>
Set to <code>true</code> (the default) when Debezium should do the conversion.<br>
Set to <code>false</code> when conversion is fully delegated to the database.</p>
</div></div></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>source.struct.version</code><br>
0.10 and later</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>v2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Schema version for the <code>source</code> block in CDC events; Debezium 0.10 introduced a few breaking<br>
changes to the structure of the <code>source</code> block in order to unify the exposed structure across
all the connectors.<br>
By setting this option to <code>v1</code> the structure used in earlier versions can be produced.
Note that this setting is not recommended and is planned for removal in a future Debezium version.</p>
</div></div></td>
</tr>
</tfoot>
</table>
<div class="paragraph">
<p>The connector also supports <em>pass-through</em> configuration properties that are used when creating the Kafka producer and consumer. Specifically, all connector configuration properties that begin with the <code>database.history.producer.</code> prefix are used (without the prefix) when creating the Kafka producer that writes to the database history, and all those that begin with the prefix <code>database.history.consumer.</code> are used (without the prefix) when creating the Kafka consumer that reads the database history upon connector startup.</p>
</div>
<div class="paragraph">
<p>For example, the following connector configuration properties can be used to <a href="http://kafka.apache.org/documentation.html#security_configclients">secure connections to the Kafka broker</a>:</p>
</div>
<div class="paragraph">
<p>In addition to the <em>pass-through</em> to the Kafka producer and consumer, the properties starting with <code>database.</code>, e.g. <code>database.tinyInt1isBit=false</code> are passed to the JDBC URL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>database.history.producer.security.protocol=SSL
database.history.producer.ssl.keystore.location=/var/private/ssl/kafka.server.keystore.jks
database.history.producer.ssl.keystore.password=test1234
database.history.producer.ssl.truststore.location=/var/private/ssl/kafka.server.truststore.jks
database.history.producer.ssl.truststore.password=test1234
database.history.producer.ssl.key.password=test1234
database.history.consumer.security.protocol=SSL
database.history.consumer.ssl.keystore.location=/var/private/ssl/kafka.server.keystore.jks
database.history.consumer.ssl.keystore.password=test1234
database.history.consumer.ssl.truststore.location=/var/private/ssl/kafka.server.truststore.jks
database.history.consumer.ssl.truststore.password=test1234
database.history.consumer.ssl.key.password=test1234</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be sure to consult the <a href="http://kafka.apache.org/documentation.html">Kafka documentation</a> for all of the configuration properties for Kafka producers and consumers. (The MySQL connector does use the <a href="http://kafka.apache.org/documentation.html#newconsumerconfigs">new consumer</a>.)</p>
</div>
</div>
</div>
</div>
</article>
    <footer class="footer">
        <div class="wrapper">
            <div class="copyright">Copyright &copy; 2020 Debezium Community</div>
        </div>
    </footer>
</main>
</div>
<script>
    /* Make sure TOC carets are expanded if sub-elements exist */
    $("#toc").each(function(i,v) {
      $(this).closest('article').addClass('with-toc');
    });

    $("#toc ul.sectlevel1 > li").each(function(i,v) {
      $(this).has("ul").addClass("expanded");
    });

    $(function() {
        /* Expands all the documentation submenus */
        $(".nav-list > .nav-item:not(.is-active) .nav-item-toggle").click();
    });

    /*
    $(".doc.with-toc").each(function(i,v) {
        var tocWidth = $(".toc").width();
        $(this).css("max-width", "calc(100% - " + (tocWidth+75) + "px)");
    });
    */
</script>
<script src="../../../debezium-antora/js/site.js"></script>
<script async src="../../../debezium-antora/js/vendor/highlight.js"></script>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-10656779-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76464546-1', 'auto');
  ga('send', 'pageview');
  ga('set', 'anonymizeIp', true);
  ga('require', 'linkid', 'linkid.js');
</script>
</body>
</html>