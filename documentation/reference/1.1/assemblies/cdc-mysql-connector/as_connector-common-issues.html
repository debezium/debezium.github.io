<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL connector common issues :: Debezium Documentation</title>
    <link rel="canonical" href="https://www.debezium.io/documentation/reference/assemblies/cdc-mysql-connector/as_connector-common-issues.html">
    <meta name="generator" content="Antora 2.2.0">
<link rel="stylesheet" href="../../../../debezium-antora/css/site.css">
<link rel="stylesheet" href="../../../../debezium-antora/css/debezium-antora.css">
<link rel="stylesheet" href="../../../../debezium-antora/css/highlightjs-dark.css">
<link rel="stylesheet" href="https://static.jboss.org/css/rhbar.css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.js"></script>
</head>
<body class="article">
<header class="header">
  <div id="rhbar">
      <a class="jbdevlogo" href="https://www.jboss.org/projects/about"></a>
      <a class="rhlogo" href="https://www.redhat.com"></a>
  </div>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
          <img src="/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 14px;"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/documentation/faq">FAQ</a>
        <a class="navbar-item" href="/documentation">DOCUMENTATION</a>
        <a class="navbar-item" href="/releases">RELEASES</a>
        <a class="navbar-item" href="/community">COMMUNITY</a>
        <a class="navbar-item" href="/blog">BLOG</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="reference" data-version="1.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Debezium Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tutorial.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../install.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../postgres-plugins.html">PostgreSQL Decoding Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../features.html">Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/avro.html">Avro Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/topic-routing.html">Topic Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/event-flattening.html">New Record State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/mongodb-event-flattening.html">MongoDB New Document State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/outbox-event-router.html">Outbox Event Router</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../connectors/mysql.html">MySQL</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="as_overview-of-how-the-mysql-connector-works.html">How It Works</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="as_setup-the-mysql-server.html">Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="as_deploy-the-mysql-connector.html">Deployment</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="as_connector-common-issues.html">Common Issues</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/mongodb.html">MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/postgresql.html">PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/oracle.html">Oracle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/sqlserver.html">SQL Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/cassandra.html">Cassandra</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/serdes.html">Change Event SerDes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/outbox.html">Outbox Quarkus Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/cloudevents.html">CloudEvents</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/openshift.html">Running on Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/embedded.html">Embedding Debezium</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Debezium Documentation</span>
    <span class="version">1.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Debezium Documentation</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../index.html">master</a>
        </li>
        <li class="version is-current">
          <a href="../../index.html">1.1</a>
        </li>
        <li class="version">
          <a href="../../../1.0/index.html">1.0</a>
        </li>
        <li class="version">
          <a href="../../../0.10/index.html">0.10</a>
        </li>
        <li class="version">
          <a href="../../../0.9/index.html">0.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main" class="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Debezium Documentation</a></li>
    <li>Connectors</li>
    <li><a href="../../connectors/mysql.html">MySQL</a></li>
    <li><a href="as_connector-common-issues.html">Common Issues</a></li>
  </ul>
</nav>
    <div class="page-versions-container">
    Version:
    <div class="page-versions">
        <button class="version-menu-toggle versions-menu-current" title="Show other versions of page">1.1</button>
        <!--<button class="version-menu-toggle versions-menu-select" title="Select other versions">Select</button>-->
        <div class="version-menu">
                <a class="version" href="../../../assemblies/cdc-mysql-connector/as_connector-common-issues.html">master</a>
                <a class="version is-current" href="as_connector-common-issues.html">1.1</a>
                <a class="version is-missing" href="../../../1.0/index.html">1.0</a>
                <a class="version is-missing" href="../../../0.10/index.html">0.10</a>
                <a class="version is-missing" href="../../../0.9/index.html">0.9</a>
        </div>
        |
    </div>
    </div>
  <div class="edit-this-page"><a href="https://github.com/debezium/debezium/edit/1.1/documentation/modules/ROOT/pages/assemblies/cdc-mysql-connector/as_connector-common-issues.adoc">Edit this Page</a></div>
  </div>
<article class="doc">
<h1 class="page">MySQL connector common issues</h1>
<div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#configuration-and-startup-errors_debezium">Configuration and startup errors</a></li>
<li><a href="#mysql-is-unavailable_debezium">MySQL is unavailable</a></li>
<li><a href="#kafka-connect-stops_debezium">Kafka Connect stops</a></li>
<li><a href="#mysql-purges-binlog-files_debezium">MySQL purges binlog files</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-and-startup-errors_debezium"><a class="anchor" href="#configuration-and-startup-errors_debezium"></a>Configuration and startup errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Debezium MySQL connector fails, reports an error, and stops running when the following startup errors occur:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The connector&#8217;s configuration is invalid.</p>
</li>
<li>
<p>The connector cannot connect to the MySQL server using the specified connectivity parameters.</p>
</li>
<li>
<p>The connector is attempting to restart at a position in the binlog where MySQL no longer has the history available.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you receive any of these errors, you receive more details in the error message. The error message also contains workarounds where possible.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mysql-is-unavailable_debezium"><a class="anchor" href="#mysql-is-unavailable_debezium"></a>MySQL is unavailable</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If your MySQL server becomes unavailable, the Debezium MySQL connector fails with an error and the connector stops. You simply need to restart the connector when the server is available.</p>
</div>
<div class="sect2">
<h3 id="_using_gtids"><a class="anchor" href="#_using_gtids"></a>Using GTIDs</h3>
<div class="paragraph">
<p>If you have GTIDs enabled and a highly available MySQL cluster, restart the connector immediately as the connector will simply connect to a different MySQL server in the cluster, find the location in the server&#8217;s binlog that represents the last transaction, and begin reading the new server&#8217;s binlog from that specific location.</p>
</div>
</div>
<div class="sect2">
<h3 id="_not_using_gtids"><a class="anchor" href="#_not_using_gtids"></a>Not Using GTIDs</h3>
<div class="paragraph">
<p>If you do not have GTIDs enabled, the connector only records the binlog position of the MySQL server to which it was connected. In order to restart from the correct binlog position, you must reconnect to that specific server.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kafka-connect-stops_debezium"><a class="anchor" href="#kafka-connect-stops_debezium"></a>Kafka Connect stops</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are three scenarios that cause some issues when Kafka Connect stops:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#_kafka_connect_stops_gracefully">Kafka Connect stops gracefully</a></p>
</li>
<li>
<p><a href="#_kafka_connect_process_crashes">Kafka Connect process crashes</a></p>
</li>
<li>
<p><a href="#_kafka_becomes_unavailable">Kafka becomes unavailable</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_kafka_connect_stops_gracefully"><a class="anchor" href="#_kafka_connect_stops_gracefully"></a>Kafka Connect stops gracefully</h3>
<div class="paragraph">
<p>When Kafka Connect stops gracefully, there is only a short delay while the Debezium MySQL connector tasks are stopped and restarted on new Kafka Connect processes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_kafka_connect_process_crashes"><a class="anchor" href="#_kafka_connect_process_crashes"></a>Kafka Connect process crashes</h3>
<div class="paragraph">
<p>If Kafka Connect crashes, the process stops and any Debezium MySQL connector tasks terminate without their most recently-processed offsets being recorded. In distributed mode, Kafka Connect restarts the connector tasks on other processes. However, the MySQL connector resumes from the last offset recorded by the earlier processes. This means that the replacement tasks may generate some of the same events processed prior to the crash, creating duplicate events.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Each change event message includes source-specific information about:
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>the event origin</p>
</li>
<li>
<p>the MySQL server&#8217;s event time</p>
</li>
<li>
<p>the binlog filename and position</p>
</li>
<li>
<p>GTIDs (if used)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kafka_becomes_unavailable"><a class="anchor" href="#_kafka_becomes_unavailable"></a>Kafka becomes unavailable</h3>
<div class="paragraph">
<p>The Kafka Connect framework records Debezium change events in Kafka using the Kafka producer API. If the Kafka brokers become unavailable, the Debezium MySQL connector pauses until the connection is reestablished and the connector resumes where it last left off.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mysql-purges-binlog-files_debezium"><a class="anchor" href="#mysql-purges-binlog-files_debezium"></a>MySQL purges binlog files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If the Debezium MySQL connector stops for too long, the MySQL server purges older binlog files and the connector&#8217;s last position may be lost. When the connector is restarted, the MySQL server no longer has the starting point and the connector performs another initial snapshot. If the snapshot mode is <code>disabled</code>, the connector fails with an error.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <a href="as_overview-of-how-the-mysql-connector-works.html#how-the-mysql-connector-performs-database-snapshots_debezium" class="page">How the MySQL connector performs database snapshots</a> for more information on initial snapshots.
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
    <footer class="footer">
        <div class="wrapper">
            <div class="copyright">Copyright &copy; 2020 Debezium Community</div>
        </div>
    </footer>
</main>
</div>
<script>
    /* Make sure TOC carets are expanded if sub-elements exist */
    $("#toc").each(function(i,v) {
      $(this).closest('article').addClass('with-toc');
    });

    $("#toc ul.sectlevel1 > li").each(function(i,v) {
      $(this).has("ul").addClass("expanded");
    });

    $(function() {
        /* Expands all the documentation submenus */
        $(".nav-list > .nav-item:not(.is-active) .nav-item-toggle").click();
    });

    /*
    $(".doc.with-toc").each(function(i,v) {
        var tocWidth = $(".toc").width();
        $(this).css("max-width", "calc(100% - " + (tocWidth+75) + "px)");
    });
    */
</script>
<script src="../../../../debezium-antora/js/site.js"></script>
<script async src="../../../../debezium-antora/js/vendor/highlight.js"></script>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-10656779-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76464546-1', 'auto');
  ga('send', 'pageview');
  ga('set', 'anonymizeIp', true);
  ga('require', 'linkid', 'linkid.js');
</script>
</body>
</html>