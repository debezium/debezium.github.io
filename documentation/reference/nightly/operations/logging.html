<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Debezium logging :: Debezium Documentation</title>
    <link rel="canonical" href="https://debezium.io/documentation/reference/stable/operations/logging.html">
    <meta name="generator" content="Antora 3.1.7">
<link rel="stylesheet" href="../../debezium-antora/css/site.css">
<link rel="stylesheet" href="../../debezium-antora/css/debezium-antora.css">
<link rel="stylesheet" href="../../debezium-antora/css/highlightjs-dark.css">
<link rel="stylesheet" href="https://static.jboss.org/css/rhbar.css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.js"></script>
<script src="../../debezium-antora/js/jquery.ba-floatingscrollbar.js"></script>
</head>
<body class="article">
<header class="header">
  <div id="rhbar">
      <a class="jbdevlogo" href="https://developers.redhat.com"></a>
      <a class="rhlogo" href="https://www.redhat.com"></a>
  </div>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
          <img src="/assets/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 14px;"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/documentation/faq">FAQ</a>
        <a class="navbar-item" href="/documentation">DOCUMENTATION</a>
        <a class="navbar-item" href="/releases">RELEASES</a>
        <a class="navbar-item" href="/community">COMMUNITY</a>
        <a class="navbar-item" href="/blog">BLOG</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="reference" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Debezium nightly Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorial.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../install.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../postgres-plugins.html">PostgreSQL Decoding Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features.html">Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/avro.html">Avro Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/topic-auto-create-config.html">Customizing Topic Auto-Creation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/signalling.html">Sending Signals to Debezium</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/notification.html">Receive notifications from Debezium</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/mysql.html">MySQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/mariadb.html">MariaDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/mongodb.html">MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/postgresql.html">PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/oracle.html">Oracle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/sqlserver.html">SQL Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/db2.html">Db2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/cassandra.html">Cassandra</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/vitess.html">Vitess</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/spanner.html">Spanner</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/jdbc.html">JDBC</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connectors/informix.html">Informix</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Transformations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/topic-routing.html">Topic Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/event-flattening.html">New Record State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/mongodb-event-flattening.html">MongoDB New Document State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/event-changes.html">Event Changes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/outbox-event-router.html">Outbox Event Router</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/mongodb-outbox-event-router.html">MongoDB Outbox Event Router</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/filtering.html">Message Filtering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/schema-change-event-filter.html">Schema Change Event Filtering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/content-based-routing.html">Content-Based Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/applying-transformations-selectively.html">Using SMT Predicates to Selectively Apply Transformations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/partition-routing.html">Partition Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/header-to-value.html">HeaderToValue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/timezone-converter.html">Timezone Converter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/timescaledb.html">TimescaleDB Integration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../transformations/convert-cloudevent-to-saveable-form.html">Convert CloudEvents to Saveable Form</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Post Processors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../post-processors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../post-processors/reselect-columns.html">Reselect Columns</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">API and SPI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../development/engine.html">Debezium Engine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../development/converters.html">Custom Converters</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/serdes.html">Change Event SerDes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/outbox.html">Outbox Quarkus Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/cloudevents.html">CloudEvents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/tracing.html">OpenTelemetry</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/testcontainers.html">Integration Testing with Testcontainers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debezium-server.html">Debezium Server</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="kubernetes.html">Running on Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="openshift.html">Running on Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debezium-ui.html">Debezium UI</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Debezium Documentation</span>
    <span class="version">nightly</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Debezium Documentation</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="/documentation/reference/nightly/index.html">nightly</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.7/index.html">2.7</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.6/index.html">2.6</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.5/index.html">2.5</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.4/index.html">2.4</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.3/index.html">2.3</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.2/index.html">2.2</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.1/index.html">2.1</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/2.0/index.html">2.0</a>
        </li>
        <li class="version">
          <a href="/documentation/reference/1.9/index.html">1.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main" class="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../stable/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Debezium Documentation</a></li>
    <li>Operations</li>
    <li><a href="logging.html">Logging</a></li>
  </ul>
</nav>
    <div class="page-versions-container">
    Version:
    <div class="page-versions">
        <button class="version-menu-toggle versions-menu-current" title="Show other versions of page">nightly</button>
        <div class="version-menu">
                <a class="version is-current" href="/documentation/reference/nightly/index.html">nightly</a>
                <a class="version" href="/documentation/reference/2.7/index.html">2.7</a>
                <a class="version" href="/documentation/reference/2.6/index.html">2.6</a>
                <a class="version" href="/documentation/reference/2.5/index.html">2.5</a>
                <a class="version" href="/documentation/reference/2.4/index.html">2.4</a>
                <a class="version" href="/documentation/reference/2.3/index.html">2.3</a>
                <a class="version" href="/documentation/reference/2.2/index.html">2.2</a>
                <a class="version" href="/documentation/reference/2.1/index.html">2.1</a>
                <a class="version" href="/documentation/reference/2.0/index.html">2.0</a>
                <a class="version" href="/documentation/reference/1.9/index.html">1.9</a>
        </div>
        |
    </div>
    </div>
  <div class="edit-this-page"><a href="https://github.com/debezium/debezium/edit/main/documentation/modules/ROOT/pages/operations/logging.adoc">Edit this Page</a></div>
  </div>
<div class="article-grid">
<div class="article-cell1">
<article class="doc">
        
    <div class="version-banner version-banner-development">
    You are viewing documentation for an unreleased version of Debezium.
    <br/>
            If you want to view the latest stable version of this page, please go <a href=/documentation/reference/stable/index.html>here</a>.
            
</div>            <h1 class="page">Debezium logging</h1>
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#logging-concepts">Logging concepts</a></li>
<li><a href="#understanding-default-logging-configuration">Understanding the default logging configuration</a></li>
<li><a href="#configuring-logging">Configuring logging</a>
<ul class="sectlevel2">
<li><a href="#changing-logging-level">Setting the logging level by configuring loggers</a></li>
<li><a href="#setting-the-logging-level-with-the-kafka-connect-rest-api">Dynamically setting the logging level with the Kafka Connect REST API</a></li>
<li><a href="#adding-mapped-diagnostic-contexts">Setting the logging level with mapped diagnostic contexts</a></li>
</ul>
</li>
<li><a href="#configuring-log-level-docker">Configuring the log level in the Debezium container images</a></li>
</ul>
</div>
<div class="paragraph">
<p>Debezium has extensive logging built into its connectors,
and you can change the logging configuration to control which of these log statements appear in the logs
and where those logs are sent.
Debezium (as well as Kafka, Kafka Connect, and Zookeeper) use the <a href="https://logging.apache.org/log4j/1.2/">Log4j</a> logging framework for Java.</p>
</div>
<div class="paragraph">
<p>By default, the connectors produce a fair amount of useful information when they start up,
but then produce very few logs when the connector is keeping up with the source databases.
This is often sufficient when the connector is operating normally,
but may not be enough when the connector is behaving unexpectedly.
In such cases, you can change the logging level so that the connector generates much more verbose log messages describing what the connector is doing and what it is not doing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logging-concepts"><a class="anchor" href="#logging-concepts"></a>Logging concepts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before configuring logging, you should understand what Log4J <em>loggers</em>, <em>log levels</em>, and <em>appenders</em> are.</p>
</div>
<h3 id="_loggers" class="discrete">Loggers</h3>
<div class="paragraph">
<p>Each log message produced by the application is sent to a specific <em>logger</em>
(for example, <code>io.debezium.connector.mysql</code>).
Loggers are arranged in hierarchies.
For example, the <code>io.debezium.connector.mysql</code> logger is the child of the <code>io.debezium.connector</code> logger,
which is the child of the <code>io.debezium</code> logger.
At the top of the hierarchy,
the <em>root logger</em> defines the default logger configuration for all of the loggers beneath it.</p>
</div>
<h3 id="_log_levels" class="discrete">Log levels</h3>
<div class="paragraph">
<p>Every log message produced by the application also has a specific <em>log level</em>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>ERROR</code> - errors, exceptions, and other significant problems</p>
</li>
<li>
<p><code>WARN</code> - <em>potential</em> problems and issues</p>
</li>
<li>
<p><code>INFO</code> - status and general activity (usually low-volume)</p>
</li>
<li>
<p><code>DEBUG</code> - more detailed activity that would be useful in diagnosing unexpected behavior</p>
</li>
<li>
<p><code>TRACE</code> - very verbose and detailed activity (usually very high-volume)</p>
</li>
</ol>
</div>
<h3 id="_appenders" class="discrete">Appenders</h3>
<div class="paragraph">
<p>An <em>appender</em> is essentially a destination where log messages are written.
Each appender controls the format of its log messages,
giving you even more control over what the log messages look like.</p>
</div>
<div class="paragraph">
<p>To configure logging, you specify the desired level for each logger and the appender(s) where those log messages should be written. Since loggers are hierarchical, the configuration for the root logger serves as a default for all of the loggers below it, although you can override any child (or descendant) logger.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="understanding-default-logging-configuration"><a class="anchor" href="#understanding-default-logging-configuration"></a>Understanding the default logging configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are running Debezium connectors in a Kafka Connect process,
then Kafka Connect uses the Log4j configuration file (for example, <code>/opt/kafka/config/connect-log4j.properties</code>) in the Kafka installation.
By default, this file contains the following configuration:</p>
</div>
<div class="listingblock">
<div class="title">connect-log4j.properties</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-properties hljs" data-lang="properties">log4j.rootLogger=INFO, stdout  <i class="conum" data-value="1"></i><b>(1)</b>

log4j.appender.stdout=org.apache.log4j.ConsoleAppender  <i class="conum" data-value="2"></i><b>(2)</b>
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout  <i class="conum" data-value="3"></i><b>(3)</b>
log4j.appender.stdout.layout.ConversionPattern=[%d] %p %m (%c)%n  <i class="conum" data-value="4"></i><b>(4)</b>
...</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Descriptions of <code>connect-log4j.properties</code> settings</caption>
<colgroup>
<col style="width: 12.5%;">
<col style="width: 87.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The root logger, which defines the default logger configuration.
By default, loggers include <code>INFO</code>, <code>WARN</code>, and <code>ERROR</code> messages.
These log messages are written to the <code>stdout</code> appender.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directs the <code>stdout</code> appender to write log messages to the console, as opposed to a file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies that the <code>stdout</code> appender uses a pattern matching algorithm to format log messages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The pattern that the <code>stdout</code> appender uses (see the <a href="https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html">Log4j documentation</a> for details).</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Unless you configure other loggers,
all of the loggers that Debezium uses inherit the <code>rootLogger</code> configuration.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-logging"><a class="anchor" href="#configuring-logging"></a>Configuring logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, Debezium connectors write all <code>INFO</code>, <code>WARN</code>, and <code>ERROR</code> messages to the console.
You can change the default logging configuration by using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#changing-logging-level">Setting the logging level by configuring loggers</a></p>
</li>
<li>
<p><a href="#setting-the-logging-level-with-the-kafka-connect-rest-api">Dynamically setting the logging level with the Kafka Connect REST API</a></p>
</li>
<li>
<p><a href="#adding-mapped-diagnostic-contexts">Setting the logging level by adding mapped diagnostic contexts</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There are other methods that you can use to configure Debezium logging with Log4j.
For more information, search for tutorials about setting up and using appenders to send log messages to specific destinations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="changing-logging-level"><a class="anchor" href="#changing-logging-level"></a>Setting the logging level by configuring loggers</h3>
<div class="paragraph">
<p>The default Debezium logging level provides sufficient information to show whether a connector is healthy or not.
However, if a connector is not healthy, you can change its logging level to troubleshoot the issue.</p>
</div>
<div class="paragraph">
<p>In general, Debezium connectors send their log messages to loggers with names that match the fully-qualified name of the Java class that is generating the log message.
Debezium uses packages to organize code with similar or related functions.
This means that you can control all of the log messages for a specific class or for all of the classes within or under a specific package.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Open the <code>log4j.properties</code> file.</p>
</li>
<li>
<p>Configure a logger for the connector.</p>
<div class="paragraph">
<p>The following example configures loggers for the MySQL connector and for the database schema history implementation used by the connector,
and sets them to log <code>DEBUG</code> level messages:<br></p>
</div>
<div class="listingblock">
<div class="title">log4j.properties</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-properties hljs" data-lang="properties">...
log4j.logger.io.debezium.connector.mysql=DEBUG, stdout  <i class="conum" data-value="1"></i><b>(1)</b>
log4j.logger.io.debezium.relational.history=DEBUG, stdout  <i class="conum" data-value="2"></i><b>(2)</b>

log4j.additivity.io.debezium.connector.mysql=false  <i class="conum" data-value="3"></i><b>(3)</b>
log4j.additivity.io.debezium.storage.kafka.history=false
...</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Descriptions of <code>log4j.properties</code> settings</caption>
<colgroup>
<col style="width: 12.5%;">
<col style="width: 87.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configures the logger named <code>io.debezium.connector.mysql</code> to send <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, and <code>ERROR</code> messages to the <code>stdout</code> appender.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configures the logger named <code>io.debezium.relational.history</code> to send <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, and <code>ERROR</code> messages to the <code>stdout</code> appender.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This pair of <code>log4j.additivity.io</code> entries disable <a href="https://logging.apache.org/log4j/2.x/manual/configuration.html#additivity">additivity</a>.
If you use multiple appenders, set <code>additivity</code> values to <code>false</code> to prevent duplicate log messages from being sent to the appenders of the parent loggers.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>If necessary, change the logging level for a specific subset of the classes within the connector.</p>
<div class="paragraph">
<p>Increasing the logging level for the entire connector increases the log verbosity,
which can make it difficult to understand what is happening.
In these cases,
you can change the logging level just for the subset of classes that are related to the issue that you are troubleshooting.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Set the connector&#8217;s logging level to either <code>DEBUG</code> or <code>TRACE</code>.</p>
</li>
<li>
<p>Review the connector&#8217;s log messages.</p>
<div class="paragraph">
<p>Find the log messages that are related to the issue that you are troubleshooting.
The end of each log message shows the name of the Java class that produced the message.</p>
</div>
</li>
<li>
<p>Set the connector&#8217;s logging level back to <code>INFO</code>.</p>
</li>
<li>
<p>Configure a logger for each Java class that you identified.</p>
<div class="paragraph">
<p>For example, consider a scenario in which you are unsure why the MySQL connector is skipping some events when it is processing the binlog.
Rather than turn on <code>DEBUG</code> or <code>TRACE</code> logging for the entire connector,
you can keep the connector&#8217;s logging level at <code>INFO</code> and then configure <code>DEBUG</code> or <code>TRACE</code> on just the class that is reading the binlog:</p>
</div>
<div class="listingblock">
<div class="title">log4j.properties</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-properties hljs" data-lang="properties">...
log4j.logger.io.debezium.connector.mysql=INFO, stdout
log4j.logger.io.debezium.connector.mysql.BinlogReader=DEBUG, stdout
log4j.logger.io.debezium.relational.history=INFO, stdout

log4j.additivity.io.debezium.connector.mysql=false
log4j.additivity.io.debezium.storage.kafka.history=false
log4j.additivity.io.debezium.connector.mysql.BinlogReader=false
...</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="setting-the-logging-level-with-the-kafka-connect-rest-api"><a class="anchor" href="#setting-the-logging-level-with-the-kafka-connect-rest-api"></a>Dynamically setting the logging level with the Kafka Connect REST API</h3>
<div class="paragraph">
<p>You can use the Kafka Connect REST API to set logging levels for a connector dynamically at runtime.
Unlike log level changes that you set in <code>log4j.properties</code>, changes that you make via the API take effect immediately, and do not require you to restart the worker.</p>
</div>
<div class="paragraph">
<p>The log level setting that you specify in the API applies only to the worker at the endpoint that receives the request.
The log levels of other workers in the cluster remain unchanged.</p>
</div>
<div class="paragraph">
<p>The specified level is not persisted after the worker restarts.
To make persistent changes to the logging level, set the log level in <code>log4j.properties</code> by <a href="#changing-logging-level">configuring loggers</a> or <a href="#adding-mapped-diagnostic-contexts">adding mapped diagnostic contexts</a>.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Set the log level by sending a PUT request to the <code>admin/loggers</code> endpoint that specifies the following information:</p>
<div class="ulist">
<ul>
<li>
<p>The package for which you want to change the log level.</p>
</li>
<li>
<p>The log level that you want to set.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">curl -s -X PUT -H "Content-Type:application/json" http://localhost:8083/admin/loggers/io.debezium.connector.<em>&lt;connector_package&gt;</em> -d '{"level": "<em>&lt;log_level&gt;</em>"}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, to log debug information for a Debezium MySQL connector, send the following request to Kafka Connect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">curl -s -X PUT -H "Content-Type:application/json" http://localhost:8083/admin/loggers/io.debezium.connector.mysql -d '{"level": "DEBUG"}'</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="adding-mapped-diagnostic-contexts"><a class="anchor" href="#adding-mapped-diagnostic-contexts"></a>Setting the logging level with mapped diagnostic contexts</h3>
<div class="paragraph">
<p>Most Debezium connectors (and the Kafka Connect workers) use multiple threads to perform different activities.
This can make it difficult to look at a log file and find only those log messages for a particular logical activity.
To make the log messages easier to find,
Debezium provides several <em>mapped diagnostic contexts</em> (MDC) that provide additional information for each thread.</p>
</div>
<div class="paragraph">
<p>Debezium provides the following MDC properties:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dbz.connectorType</code></dt>
<dd>
<p>A short alias for the type of connector.
For example, <code>MySql</code>, <code>Mongo</code>, <code>Postgres</code>, and so on.
All threads associated with the same <em>type</em> of connector use the same value,
so you can use this to find all log messages produced by a given type of connector.</p>
</dd>
<dt class="hdlist1"><code>dbz.connectorName</code></dt>
<dd>
<p>The name of the connector or database server as defined in the connector&#8217;s configuration.
For example <code>products</code>, <code>serverA</code>, and so on.
All threads associated with a specific <em>connector instance</em> use the same value,
so you can find all of the log messages produced by a specific connector instance.</p>
</dd>
<dt class="hdlist1"><code>dbz.connectorContext</code></dt>
<dd>
<p>A short name for an activity running as a separate thread running within the connector&#8217;s task.
For example, <code>main</code>, <code>binlog</code>, <code>snapshot</code>, and so on.
In some cases, when a connector assigns threads to specific resources (such as a table or collection),
the name of that resource could be used instead.
Each thread associated with a connector would use a distinct value,
so you can find all of the log messages associated with this particular activity.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To enable MDC for a connector,
you configure an appender in the <code>log4j.properties</code> file.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Open the <code>log4j.properties</code> file.</p>
</li>
<li>
<p>Configure an appender to use any of the supported Debezium MDC properties.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>In the following example, the <code>stdout</code> appender is configured to use these MDC properties:</p>
</div>
<div class="listingblock">
<div class="title">log4j.properties</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-properties hljs" data-lang="properties">...
log4j.appender.stdout.layout.ConversionPattern=%d{ISO8601} %-5p  %X{dbz.connectorType}|%X{dbz.connectorName}|%X{dbz.connectorContext}  %m   [%c]%n
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The configuration in the preceding example produces log messages similar to the ones in the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">...
2017-02-07 20:49:37,692 INFO   MySQL|dbserver1|snapshot  Starting snapshot for jdbc:mysql://mysql:3306/?useInformationSchema=true&amp;nullCatalogMeansCurrent=false&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;characterSetResults=UTF-8&amp;zeroDateTimeBehavior=convertToNull with user 'debezium'   [io.debezium.connector.mysql.SnapshotReader]
2017-02-07 20:49:37,696 INFO   MySQL|dbserver1|snapshot  Snapshot is using user 'debezium' with these MySQL grants:   [io.debezium.connector.mysql.SnapshotReader]
2017-02-07 20:49:37,697 INFO   MySQL|dbserver1|snapshot  	GRANT SELECT, RELOAD, SHOW DATABASES, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'debezium'@'%'   [io.debezium.connector.mysql.SnapshotReader]
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each line in the log includes the connector type (for example, <code>MySQL</code>), the name of the connector (for example, <code>dbserver1</code>), and the activity of the thread (for example, <code>snapshot</code>).</p>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-log-level-docker"><a class="anchor" href="#configuring-log-level-docker"></a>Configuring the log level in the Debezium container images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Debezium container images for Zookeeper, Kafka, and Kafka Connect all set up their <code>log4j.properties</code> file to configure the Debezium-related loggers.
All log messages are sent to the Docker container&#8217;s console (and thus the Docker logs).
The log messages are also written to files under the <code>/kafka/logs</code> directory.</p>
</div>
<div class="paragraph">
<p>The containers use a <code>LOG_LEVEL</code> environment variable to set the log level for the root logger.
You can use this environment variable to set the log level for the service running in the container.
When you start the container and set the value of this environment variable to a log level (for example, <code>-e LOG_LEVEL=DEBUG</code>),
all of the code within the container then uses that log level.</p>
</div>
<div class="paragraph">
<p>There is also an option to override other log4j properties.  If you want to configure <code>log4j.rootLogger</code>
differently, then use the environment variable <code>CONNECT_LOG4J_LOGGERS</code>. For example to log only to stdout
(without <code>appender</code>), you can use <code>CONNECT_LOG4J_LOGGERS=INFO, stdout</code>. You can also set other supported
log4j environment variables with the CONNECT_LOG4J prefix, which will be mapped to properties in the <code>log4j.properties</code>
file by removing the <code>CONNECT_</code> prefix, lowercasing all characters, and converting all '_' characters to '.'.</p>
</div>
<div class="paragraph">
<p>If you need more control over the logging configuration,
create a new container image that is based on ours,
except that in your <code>Dockerfile</code>, copy your own <code>log4j.properties</code> file into the image.
For example:</p>
</div>
<div class="listingblock">
<div class="title">Dockerfile</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-dockerfile hljs" data-lang="dockerfile">...
COPY log4j.properties $KAFKA_HOME/config/log4j.properties
...</code></pre>
</div>
</div>
</div>
</div>
</article>
</div>
<div class="article-cell2">
</div>
</div>

<div id="toc-rightbar"></div>    <footer class="footer">
        <div class="wrapper">
            <div class="copyright">Copyright &copy; 2024 Debezium Community (Rev: <span class="truncated"><a href="https://github.com/debezium/debezium/commit/bedf4e5251a39e0b36be9cc2e153eb8e756c9c4b">bedf4e52</a></span>)
            
        </div>
    </footer>
</main></div>
<script>
    /* Make sure TOC carets are expanded if sub-elements exist */
    $("#toc").each(function(i,v) {
      $(this).closest('article').addClass('with-toc');
    });

    $("#toc ul.sectlevel1 > li").each(function(i,v) {
      $(this).has("ul").addClass("expanded");
    });

    $(function() {
        /* Expands all the documentation submenus */
        $(".nav-list > .nav-item:not(.is-active) .nav-item-toggle").click();
    });

    /**
     * This checks if a "#toc" element exists in the DOM and if so:
     *
     *  1. Appends a cloned copy of the #toc node to the #toc-rightbar div.
     *  2. Forces the #toc-rightbar div to be visible.
     *  3. Adds the .toc-right class to the #article-wrapper div to restrict the article's overall width.
     */
    var $toc = $("#toc");
    if ( $toc.length ) {
        $("#toc-rightbar").append($toc.clone());
        $("body .main").addClass("with-toc");
    }

    /**
     * In order to make CSS changes that are backward compatible with old adoc files, this applies a version
     * style to the body tag so we can use it to differentiate between CSS styles per version if needed,
     * such as tfoot rows.
     */
    var $version = $("body .nav-container").data("version");
    var $versionClass = "version-" + $version;
    $versionClass = $versionClass.replace('.','-');
    $("body").addClass($versionClass);

    /** A CSS trick to wrap long-width tables in a div that can be scrolled on smaller screens */
    $("table.tableblock").wrap("<div class='table-scroll-wrapper'></div>");

    $(function() {
        /* apply floating scrollbar to the scroll-wrapper */
        $(".table-scroll-wrapper").floatingScrollbar();
    });

</script>
<script src="../../debezium-antora/js/site.js"></script>
<script async src="../../debezium-antora/js/vendor/highlight.js"></script>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-10656779-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76464546-1', 'auto');
  ga('send', 'pageview');
  ga('set', 'anonymizeIp', true);
  ga('require', 'linkid', 'linkid.js');
</script>
</body>
</html>