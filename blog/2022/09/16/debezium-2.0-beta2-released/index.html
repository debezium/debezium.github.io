<!DOCTYPE html> <html> <head> <title>Debezium 2.0.0.Beta2 Released</title> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="description" content="Debezium is an open source distributed platform for change data capture. Start it up, point it at your databases, and your apps can start responding to all of the inserts, updates, and deletes that other apps commit to your databases. Debezium is durable and fast, so your apps can respond quickly and never miss an event, even when things go wrong."> <meta content="Debezium" property="og:site_name"> <meta content="Debezium 2.0.0.Beta2 Released" property="og:title"> <meta content="https://debezium.io/assets/images/color_black_debezium_type_1200px.png" property="og:image" name="image"> <meta property="og:description" content="Debezium is an open source distributed platform for change data capture. Start it up, point it at your databases, and your apps can start responding to all of the inserts, updates, and deletes that other apps commit to your databases. Debezium is durable and fast, so your apps can respond quickly and never miss an event, even when things go wrong."> <meta property="og:url" content="https://debezium.io/blog/2022/09/16/debezium-2.0-beta2-released/"> <meta name="twitter:site" content="@debezium"> <meta name="twitter:title" content="Debezium 2.0.0.Beta2 Released"> <meta name="twitter:creator" content="@ccranfor"> <meta name="twitter:description" content="Debezium is an open source distributed platform for change data capture. Start it up, point it at your databases, and your apps can start responding to all of the inserts, updates, and deletes that other apps commit to your databases. Debezium is durable and fast, so your apps can respond quickly and never miss an event, even when things go wrong."> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="https://debezium.io/assets/images/color_black_debezium_type_1200px.png"> <meta property="twitter:url" content="https://debezium.io/blog/2022/09/16/debezium-2.0-beta2-released/"> <link rel="alternate" type="application/rss+xml" title="Debezium Blog" href="/blog.atom"> <link rel="shortcut icon" type="image/png" href="/favicon.ico"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css"/> <link rel="stylesheet" href="/assets/css/custom.css"/> <link rel="stylesheet" href="/assets/css/highlight.min.css"/> <link rel="stylesheet" href="/assets/css/coderay.css"/> </head> <body class="post"> <div id="rhbar"> <a class="jbdevlogo" href="https://developers.redhat.com"></a> <a class="rhlogo" href="https://www.redhat.com/"></a> </div> <div id> <div class="container" id="content"> <nav class="navbar navbar-inverse navbar-fix"> <div class="container-fluid"> <div class="navbar-header"> <button class="navbar-toggle collapsed border-0" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"><img class="project-logo" src="/assets/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 5px; margin-top: -5px;"></a> </div> <div class="collapse navbar-collapse collapsed" id="navigation"> <ul class="nav navbar-nav pull-right"> <li> <a href="/documentation/faq" class="">FAQ</a> </li> <li class="item"> <a href="/documentation/" class="">Documentation</a> </li> <li> <a href="/releases/" class="">Releases</a> </li> <li> <a href="/community/" class="">Community</a> </li> <li class="active"> <a href="/blog/" class="active">Blog</a> </li> </ul> </div> </div> </nav> <div class="row post-text-padding row-no-expand"> <div class="col-md-3"><div id="leftdocnav"> <div class="hidden-lg hidden-md hidden-sm"> <button class="navbar-toggle docssubmenu-toggle collapsed" data-target="#docssubmenu" data-toggle="collapse" style=" float: none; background-color: #656565; border-color: #656565; width: 100%; color: #fff; "> Navigation Menu </button> </div> <div class="collapse" id="docssubmenu"> <div class="doc-pills"> <ul class="nav nav-pills nav-stacked"> <li class="item"> <a href="/blog">Home</a> <div class="icon"><span class="icon-home"></span></div> </li> <li class="item"> <a href="/archives">Archive</a> <div class="icon"><span class="icon-arrow-down"></span></div> </li> <li class="item"> <a href="/blog.atom">Feed</a> <div class="icon"><span class="icon-rss"></span></div> </li> </ul> </div> <p></p> <div class="featured-posts"> <div id="#featured" style="margin-bottom: 4px; border-bottom: 1px solid #ccc; font-size: 115%; margin-left: 2px;">Featured Posts</div> <ul style="padding-inline-start: 22px;"> <li style="margin-bottom: 3px;"> <a href="/blog/2023/05/02/tensorflow-mnist-classification/" style="font-size: 95%;"> Image classification with Debezium and TensorFlow </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2020/11/04/streaming-vitess-at-bolt/" style="font-size: 95%;"> Streaming Vitess at Bolt </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2020/02/10/event-sourcing-vs-cdc/" style="font-size: 95%;"> Distributed Data for Microservices — Event Sourcing vs. Change Data Capture </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2019/10/01/audit-logs-with-change-data-capture-and-stream-processing/" style="font-size: 95%;"> Building Audit Logs with Change Data Capture and Stream Processing </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2019/07/12/streaming-cassandra-at-wepay-part-1/" style="font-size: 95%;"> Streaming Cassandra at WePay - Part 1 </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2019/02/19/reliable-microservices-data-exchange-with-the-outbox-pattern/" style="font-size: 95%;"> Reliable Microservices Data Exchange With the Outbox Pattern </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/12/05/automating-cache-invalidation-with-change-data-capture/" style="font-size: 95%;"> Automating Cache Invalidation With Change Data Capture </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/09/20/materializing-aggregate-views-with-hibernate-and-debezium/" style="font-size: 95%;"> Materializing Aggregate Views With Hibernate and Debezium </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/07/19/advantages-of-log-based-change-data-capture/" style="font-size: 95%;"> Five Advantages of Log-Based Change Data Capture </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/03/08/creating-ddd-aggregates-with-debezium-and-kafka-streams/" style="font-size: 95%;"> Creating DDD aggregates with Debezium and Kafka Streams </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/01/17/streaming-to-elasticsearch/" style="font-size: 95%;"> Streaming Data Changes from Your Database to Elasticsearch </a> </li> </ul> </div> <p></p> <p></p> <div class="cloud-tags"> <div id="tags" style="margin-bottom: 4px; border-bottom: 1px solid #ccc; font-size: 115%; margin-left: 2px;"> Tags </div> <div class="tag-cloud"> <span class="site-tag"> <a href="/tag/apache-kafka/" style="font-size: 82%"> apache kafka </a> </span> <span class="site-tag"> <a href="/tag/apache-kafka/" style="font-size: 90%"> apache kafka </a> </span> <span class="site-tag"> <a href="/tag/apicurio/" style="font-size: 82%"> apicurio </a> </span> <span class="site-tag"> <a href="/tag/avro/" style="font-size: 84%"> avro </a> </span> <span class="site-tag"> <a href="/tag/aws/" style="font-size: 82%"> aws </a> </span> <span class="site-tag"> <a href="/tag/camel/" style="font-size: 82%"> camel </a> </span> <span class="site-tag"> <a href="/tag/cassandra/" style="font-size: 232%"> cassandra </a> </span> <span class="site-tag"> <a href="/tag/cdc/" style="font-size: 82%"> cdc </a> </span> <span class="site-tag"> <a href="/tag/community/" style="font-size: 122%"> community </a> </span> <span class="site-tag"> <a href="/tag/community-stories/" style="font-size: 84%"> community stories </a> </span> <span class="site-tag"> <a href="/tag/containers/" style="font-size: 82%"> containers </a> </span> <span class="site-tag"> <a href="/tag/cqrs/" style="font-size: 84%"> cqrs </a> </span> <span class="site-tag"> <a href="/tag/datalake/" style="font-size: 82%"> datalake </a> </span> <span class="site-tag"> <a href="/tag/db2/" style="font-size: 210%"> db2 </a> </span> <span class="site-tag"> <a href="/tag/ddd/" style="font-size: 82%"> ddd </a> </span> <span class="site-tag"> <a href="/tag/debezium/" style="font-size: 90%"> debezium </a> </span> <span class="site-tag"> <a href="/tag/debezium-server/" style="font-size: 90%"> debezium server </a> </span> <span class="site-tag"> <a href="/tag/debezium-ui/" style="font-size: 88%"> debezium ui </a> </span> <span class="site-tag"> <a href="/tag/discussion/" style="font-size: 114%"> discussion </a> </span> <span class="site-tag"> <a href="/tag/docker/" style="font-size: 186%"> docker </a> </span> <span class="site-tag"> <a href="/tag/elasticsearch/" style="font-size: 82%"> elasticsearch </a> </span> <span class="site-tag"> <a href="/tag/event-sourcing/" style="font-size: 82%"> event sourcing </a> </span> <span class="site-tag"> <a href="/tag/example/" style="font-size: 88%"> example </a> </span> <span class="site-tag"> <a href="/tag/examples/" style="font-size: 112%"> examples </a> </span> <span class="site-tag"> <a href="/tag/fedora/" style="font-size: 82%"> fedora </a> </span> <span class="site-tag"> <a href="/tag/hiring/" style="font-size: 84%"> hiring </a> </span> <span class="site-tag"> <a href="/tag/iceberg/" style="font-size: 82%"> iceberg </a> </span> <span class="site-tag"> <a href="/tag/integration/" style="font-size: 82%"> integration </a> </span> <span class="site-tag"> <a href="/tag/introduction/" style="font-size: 84%"> introduction </a> </span> <span class="site-tag"> <a href="/tag/jaeger/" style="font-size: 82%"> jaeger </a> </span> <span class="site-tag"> <a href="/tag/json/" style="font-size: 82%"> json </a> </span> <span class="site-tag"> <a href="/tag/kafka/" style="font-size: 94%"> kafka </a> </span> <span class="site-tag"> <a href="/tag/kafka-streams/" style="font-size: 82%"> kafka streams </a> </span> <span class="site-tag"> <a href="/tag/kafka-streams/" style="font-size: 86%"> kafka streams </a> </span> <span class="site-tag"> <a href="/tag/kogito/" style="font-size: 82%"> kogito </a> </span> <span class="site-tag"> <a href="/tag/ksql/" style="font-size: 82%"> ksql </a> </span> <span class="site-tag"> <a href="/tag/kubernetes/" style="font-size: 82%"> kubernetes </a> </span> <span class="site-tag"> <a href="/tag/lakehouse/" style="font-size: 82%"> lakehouse </a> </span> <span class="site-tag"> <a href="/tag/machine-learning/" style="font-size: 82%"> machine learning </a> </span> <span class="site-tag"> <a href="/tag/microservices/" style="font-size: 84%"> microservices </a> </span> <span class="site-tag"> <a href="/tag/mongo/" style="font-size: 86%"> mongo </a> </span> <span class="site-tag"> <a href="/tag/mongodb/" style="font-size: 228%"> mongodb </a> </span> <span class="site-tag"> <a href="/tag/mysql/" style="font-size: 364%"> mysql </a> </span> <span class="site-tag"> <a href="/tag/news/" style="font-size: 112%"> news </a> </span> <span class="site-tag"> <a href="/tag/newsletter/" style="font-size: 88%"> newsletter </a> </span> <span class="site-tag"> <a href="/tag/oracle/" style="font-size: 258%"> oracle </a> </span> <span class="site-tag"> <a href="/tag/outbox/" style="font-size: 198%"> outbox </a> </span> <span class="site-tag"> <a href="/tag/postgres/" style="font-size: 332%"> postgres </a> </span> <span class="site-tag"> <a href="/tag/presentation/" style="font-size: 84%"> presentation </a> </span> <span class="site-tag"> <a href="/tag/production/" style="font-size: 82%"> production </a> </span> <span class="site-tag"> <a href="/tag/quarkus/" style="font-size: 92%"> quarkus </a> </span> <span class="site-tag"> <a href="/tag/questdb/" style="font-size: 82%"> questdb </a> </span> <span class="site-tag"> <a href="/tag/rds/" style="font-size: 84%"> rds </a> </span> <span class="site-tag"> <a href="/tag/releases/" style="font-size: 346%"> releases </a> </span> <span class="site-tag"> <a href="/tag/schema/" style="font-size: 82%"> schema </a> </span> <span class="site-tag"> <a href="/tag/scylla/" style="font-size: 82%"> scylla </a> </span> <span class="site-tag"> <a href="/tag/secrets/" style="font-size: 82%"> secrets </a> </span> <span class="site-tag"> <a href="/tag/sentry/" style="font-size: 82%"> sentry </a> </span> <span class="site-tag"> <a href="/tag/serialization/" style="font-size: 82%"> serialization </a> </span> <span class="site-tag"> <a href="/tag/smt/" style="font-size: 84%"> smt </a> </span> <span class="site-tag"> <a href="/tag/snapshots/" style="font-size: 84%"> snapshots </a> </span> <span class="site-tag"> <a href="/tag/spanner/" style="font-size: 86%"> spanner </a> </span> <span class="site-tag"> <a href="/tag/sql/" style="font-size: 84%"> sql </a> </span> <span class="site-tag"> <a href="/tag/sqlserver/" style="font-size: 274%"> sqlserver </a> </span> <span class="site-tag"> <a href="/tag/tensorflow/" style="font-size: 82%"> tensorflow </a> </span> <span class="site-tag"> <a href="/tag/testcontainers/" style="font-size: 88%"> testcontainers </a> </span> <span class="site-tag"> <a href="/tag/tests/" style="font-size: 82%"> tests </a> </span> <span class="site-tag"> <a href="/tag/time-series/" style="font-size: 82%"> time series </a> </span> <span class="site-tag"> <a href="/tag/topics/" style="font-size: 82%"> topics </a> </span> <span class="site-tag"> <a href="/tag/tracing/" style="font-size: 82%"> tracing </a> </span> <span class="site-tag"> <a href="/tag/vagrant/" style="font-size: 82%"> vagrant </a> </span> <span class="site-tag"> <a href="/tag/vitess/" style="font-size: 190%"> vitess </a> </span> <span class="site-tag"> <a href="/tag/website/" style="font-size: 84%"> website </a> </span> </div> </div> </div> </div> </div> <div class="col-md-9"> <div class="post"> <div class="row" style="margin-left: 0; margin-right: 0; margin-bottom: 10px"> <div class="col-sm-12" style="padding-left: 0px"> <div style="display: table-cell; vertical-align: top"> <div style=" width: 72px; border: 1px solid #ccc; padding: 3px; display: inline-block; "> <img src="/assets/images/ccranfor.jpg" style="width: 64px;"> </div> </div> <div style="display: table-cell; vertical-align: top"> <div style="margin-left: 8px"> <span class="hidden-sm hidden-xs" style="font-size: 2.75rem; line-height: 1"> <a href="/blog/2022/09/16/debezium-2.0-beta2-released/">Debezium 2.0.0.Beta2 Released</a> </span> <span class="hidden-md hidden-lg" style="font-size: 2rem; line-height: 1"> <a href="/blog/2022/09/16/debezium-2.0-beta2-released/">Debezium 2.0.0.Beta2 Released</a> </span> <div class="byline" style="line-height: 1"> <em> September 16, 2022 by </em> <em> Chris Cranford </em> <div class="hidden-xs" style="margin-top: 5px"> <a class="label label-info hidden-sm hidden-xs" href="/tag/releases/">releases</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/mysql/">mysql</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/postgres/">postgres</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/sqlserver/">sqlserver</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/cassandra/">cassandra</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/oracle/">oracle</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/db2/">db2</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/vitess/">vitess</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/outbox/">outbox</a> </div> </div> </div> </div> </div> </div> <div class="grid__item width-12-12"><div class="paragraph"> <p>I am excited to announce the release of Debezium <strong>2.0.0.Beta2</strong>!</p> </div> <div class="paragraph"> <p>This release contains several breaking changes, stability fixes, and bug fixes, all to inch us closer to 2.0.0.Final. Overall, this release contains a total of <a href="https://issues.redhat.com/issues/?jql=project%20%3D%20DBZ%20AND%20fixVersion%20%3D%202.0.0.Beta2%20ORDER%20BY%20component%20ASC">107 issues</a> that were fixed.</p> </div> <div class="paragraph"> <p></p> </div> <div class="paragraph"> <p>If you intend to upgrade to 2.0.0.Beta2, we strongly recommend that you read the release notes before the upgrade to understand all breaking changes. The following noteworthy list of changes are those we&#8217;ll cover in this blog post, some of which are breaking:</p> </div> <div class="ulist"> <ul> <li> <p>[breaking] <a href="#new-connector-property-namespaces">New connector property namespaces</a></p> </li> <li> <p>[potentially breaking] <a href="#all-debezium-schemas-are-named">All event schemas properly named and versioned</a></p> </li> <li> <p>[potentially breaking] <a href="#skipped-operations">Skipped operations now includes truncate events by default</a></p> </li> <li> <p><a href="#mysql-binlog-compression-support">MySQL binlog compression support</a></p> </li> <li> <p><a href="#cassandra4-incremental-commit-log-support">Cassandra 4 incremental commit log support</a></p> </li> <li> <p><a href="#pause-and-resume-incremental-snapshots">Pausing and resuming paused incremental snapshots</a></p> </li> <li> <p><a href="#custom-sql-filtering-incremental-snapshots">Custom SQL filtering for incremental snapshots</a></p> </li> <li> <p><a href="#signal-collection-automatically-registered">Signal collection now added to table include list automatically</a></p> </li> <li> <p><a href="#multitasking-vitess">Multitasking support for the Vitess connector</a></p> </li> </ul> </div> <div class="sect1"> <h2 id="new-connector-property-namespaces">New connector property namespaces</h2> <div class="sectionbody"> <div class="paragraph"> <p>One of the largest overhauls going into Debezium 2.0 is the introduction of new connector property namespaces. Starting in Debezium 2.0 Beta2 and onward, many connector properties have been relocated with new names. This is a breaking change and affects most, if not all, connector deployments during the upgrade process.</p> </div> <div class="paragraph"> <p>Debezium previously used the prefix "database." with a plethora of varied connector properties. Some of these properties were meant to be passed directly to the JDBC driver and in other cases to the database history implementations, and so on. Unfortunately, we identified situations where some properties were being passed to underlying implementations that weren&#8217;t intended. While this wasn&#8217;t creating any type of regression or problem, it could potentially introduce a future issue if there were property name collisions, for example, a JDBC driver property that matched with a "database." prefixed Debezium connector property.</p> </div> <div class="paragraph"> <p>The following describes the changes to the connector properties</p> </div> <div class="ulist"> <ul> <li> <p>All configurations previously prefixed as <code>database.history.</code> are now to be prefixed using <code>schema.history.internal.</code> instead.</p> </li> <li> <p>All JDBC pass-thru options previously specified using <code>database.</code> prefix should now be prefixed using <code>driver.</code> instead.</p> </li> <li> <p>The <code>database.server.name</code> connector property renamed to <code>topic.prefix</code>.</p> </li> <li> <p>The MongoDB <code>mongodb.name</code> connector property aligned to use <code>topic.prefix</code> instead.</p> </li> </ul> </div> <div class="paragraph"> <p>Again, please review your connector configurations prior to deployment and adjust accordingly.</p> </div> </div> </div> <div class="sect1"> <h2 id="all-debezium-schemas-are-named">All Debezium event schemas are named and versioned</h2> <div class="sectionbody"> <div class="paragraph"> <p>Debezium change events are emitted with a schema definition, which contains metadata about the fields such as the type, whether it&#8217;s required, and so on. In previous iterations of Debezium, some schema definitions did not have explicit names nor were they being explicitly versioned. In this release, we&#8217;ve moved to making sure that all schema definitions have an explicit name and version associated with them. The goal of this change is to help with future event structure compatibility, particularly for those who are using schema registries. However, if you are currently using a schema registry, be aware that this change may lead to schema compatibility issues during the upgrade process.</p> </div> </div> </div> <div class="sect1"> <h2 id="skipped-operations">Skipped operations default to truncate events</h2> <div class="sectionbody"> <div class="paragraph"> <p>Debezium supports skipping specific event types by including the <code>skipped.operations</code> connector property in the connector&#8217;s configuration. This feature can be useful if you&#8217;re only interested in a subset of operations, such as only inserts and updates but not deletions.</p> </div> <div class="paragraph"> <p>One specific event type, truncates (<code>t</code>), is only supported by a subset of relational connectors and whether these events were to be skipped wasn&#8217;t consistent. In this release, we have aligned the <code>skipped.operations</code> behavior so that if the connector supports truncate events, these events are skipped by default.</p> </div> <div class="paragraph"> <p>Please review the following rule-set:</p> </div> <div class="ulist"> <ul> <li> <p>Connector supports truncate events and isn&#8217;t the Oracle connector</p> </li> <li> <p>Connector configuration does not specify the <code>skipped.operations</code> in the configuration</p> </li> </ul> </div> <div class="paragraph"> <p>If all the above are true, then the connector&#8217;s behavior will change after the upgrade. If you wish to continue to emit truncate events, the <code>skipped.operations=none</code> configuration will be required.</p> </div> </div> </div> <div class="sect1"> <h2 id="mysql-binlog-compression-support">MySQL binlog compression support</h2> <div class="sectionbody"> <div class="paragraph"> <p>In this release, Debezium now supports reading of binlog entries that have been written with compression enabled. In version 8.0.20, MySQL adds the ability to compress binlog events using the ZSTD algorithm. To enable compression, you must toggle the <code>binlog.transaction_compression</code> variable on the MySQL server to <code>ON</code>. When compression is enabled, the binlog behaves as usual, except that the contents of the binlog entries are compressed to save space, and are replicated to in compressed format to replicas, significantly reducing network overhead for larger transactions.</p> </div> <div class="paragraph"> <p>If you&#8217;re interested in reading more about MySQL binlog compression, you can refer to the <a href="https://dev.mysql.com/doc/refman/8.0/en/binary-log-transaction-compression.html">Binary Log Transaction Compression</a> section of the MySQL documentation for more details.</p> </div> </div> </div> <div class="sect1"> <h2 id="cassandra4-incremental-commit-log-support">Cassandra 4 incremental commit log support</h2> <div class="sectionbody"> <div class="paragraph"> <p><a href="https://cassandra.apache.org/doc/latest/cassandra/operating/cdc.html">Cassandra 4</a> has improved the integration with CDC by adding a feature that when the fsync operation occurs, Cassandra will update a CDC-based index file to contain the latest offset values. This index file allows CDC implementations to read up to the offset that is considered durable in Cassandra.</p> </div> <div class="paragraph"> <p>In this release, Debezium now uses this CDC-based index file to eliminate the inherent delay in processing CDC events from Cassandra that previously existed. This should provide Cassandra users a substantial improvement in CDC with Debezium, and gives an incentive to consider Cassandra 4 over Cassandra 3.</p> </div> </div> </div> <div class="sect1"> <h2 id="pause-and-resume-incremental-snapshots">Pause and resume incremental snapshots</h2> <div class="sectionbody"> <div class="paragraph"> <p>Incremental snapshots have become an integral feature in Debezium. The incremental snapshot feature allows users to re-run a snapshot on one or more collections/tables for a variety of reasons. Incremental snapshots were originally introduced with just a <em>start</em> signal. We eventually added the ability to <em>stop</em> an ongoing incremental snapshot or to be able to remove a subset of collections/tables from an in-progress incremental snapshot.</p> </div> <div class="paragraph"> <p>In this release, we&#8217;ve built on top of the existing signal foundation and we&#8217;ve introduced two new signals, one to <em>pause</em> an in-progress incremental snapshot and then another to <em>resume</em> the incremental snapshot if it has previously been paused. To pause an incremental snapshot, a <code>pause-snapshot</code> signal must be sent, and to resume, a <code>resume-snapshot</code> signal can be used.</p> </div> <div class="paragraph"> <p>These two new signals can be sent using the signal table strategy or the Kafka signal topic strategy for MySQL. Please refer to the <a href="https://debezium.io/documentation/reference/2.0/configuration/signalling.html#_signal_actions">signal support documentation</a> for more details on signals and how they work.</p> </div> </div> </div> <div class="sect1"> <h2 id="custom-sql-filtering-incremental-snapshots">Custom SQL filtering for incremental snapshots</h2> <div class="sectionbody"> <div class="paragraph"> <p>Although uncommon, there may be scenarios such as a connector misconfiguration, where a specific record or subset of records needs to be re-emitted to the topic. Unfortunately, incremental snapshots have traditionally been an all-or-nothing type of process, where we would re-emit all records from a collection or table as a part of the snapshot.</p> </div> <div class="paragraph"> <p>In this release, a new <code>additional-condition</code> property can be specified in the signal payload, allowing the signal to dictate a SQL-based predicate to control what subset of records should be included in the incremental snapshot instead of the default behavior of <em>all rows</em>.</p> </div> <div class="paragraph"> <p>The following example illustrates sending an incremental snapshot signal for the <code>products</code> table, but instead of sending all rows from the table to the topic, the <code>additional-condition</code> property has been specified to restrict the snapshot to only send events that relate to product id equal to <code>12</code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">execute-snapshot</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">data</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">data-collections</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">inventory.products</span><span class="delimiter">&quot;</span></span>],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">INCREMENTAL</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">additional-condition</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">product_id=12</span><span class="delimiter">&quot;</span></span>
  }
}</code></pre> </div> </div> <div class="paragraph"> <p>We believe this new incremental snapshot feature will be tremendously helpful for a variety of reasons, without always having to re-snapshot all rows when only a subset of data is required.</p> </div> </div> </div> <div class="sect1"> <h2 id="signal-collection-automatically-registered">Signal collection automatically added to include filters</h2> <div class="sectionbody"> <div class="paragraph"> <p>In prior releases of Debezium, the signal collection/table used for incremental snapshots had to be manually added to your <code>table.include.list</code> connector property. A big theme in this release was improvements on incremental snapshots, so we&#8217;ve taken this opportunity to streamline this as well. Starting in this release, Debezium will automatically add the signal collection/table to the table inclusion filters, avoiding the need for users to manually add it.</p> </div> <div class="paragraph"> <p>This change does not impose any compatibility issues. Connector configurations that already include the signal collection/table in the <code>table.include.list</code> property will continue to work without requiring any changes. However, if you wish to align your configuration with current behavior, you can also safely remove the signal collection/table from the <code>table.include.list</code>, and Debezium will begin to handle this for you automatically.</p> </div> </div> </div> <div class="sect1"> <h2 id="multitasking-vitess">Multitasking support for Vitess connector</h2> <div class="sectionbody"> <div class="paragraph"> <p>The Vitess connector previously allowed operation in two different modes that depended entirely on whether the connector configuration specified any shard details. Unfortunately in both cases, each resulted in a single task responsible for performing the VStream processing. For larger Vitess installations with many shards, this architecture could begin to show latency issues as it may not be able to keep up with all the changes across all shards. And even more complex, when specifying the shard details, this required manually resolving the shards across the cluster and starting a single Debezium connector per shard, which is both error-prone and more importantly could result in deploying many Debezium connectors.</p> </div> <div class="paragraph"> <p>The Vitess community recognized this and sought to find a solution that addresses all these problems, both from a maintenance and error perspective. In Debezium 2.0 Beta2, the Vitess connector now automatically resolves the shards via a discovery mechanism, quite similar to that of MongoDB. This discovery mechanism will then split the load across multiple tasks, allowing for a single deployment of Debezium running a task per shard or shard lists, depending on the maximum number of allowed tasks for the connector.</p> </div> <div class="paragraph"> <p>During the upgrade, the Vitess connector will automatically migrate the offset storage to the new format used with the multitasking behavior. But be aware that once you&#8217;ve upgraded, you won&#8217;t be able to downgrade to an earlier version as the offset storage format will have changed.</p> </div> </div> </div> <div class="sect1"> <h2 id="other_fixes_improvements">Other fixes &amp; improvements</h2> <div class="sectionbody"> <div class="paragraph"> <p>There are many bugfixes and stability changes in this release, some noteworthy are:</p> </div> <div class="ulist"> <ul> <li> <p>Source info of incremental snapshot events exports wrong data <a href="https://issues.redhat.com/browse/DBZ-4329">DBZ-4329</a></p> </li> <li> <p>Deprecate internal key/value converter options <a href="https://issues.redhat.com/browse/DBZ-4617">DBZ-4617</a></p> </li> <li> <p>"No maximum LSN recorded" log message can be spammed on low-activity databases <a href="https://issues.redhat.com/browse/DBZ-4631">DBZ-4631</a></p> </li> <li> <p>Redis Sink config properties are not passed to DB history <a href="https://issues.redhat.com/browse/DBZ-5035">DBZ-5035</a></p> </li> <li> <p>Upgrade SQL Server driver to 10.2.1.jre8 <a href="https://issues.redhat.com/browse/DBZ-5290">DBZ-5290</a></p> </li> <li> <p>HTTP sink not retrying failing requests <a href="https://issues.redhat.com/browse/DBZ-5307">DBZ-5307</a></p> </li> <li> <p>Translation from mongodb document to kafka connect schema fails when nested arrays contain no elements <a href="https://issues.redhat.com/browse/DBZ-5434">DBZ-5434</a></p> </li> <li> <p>Duplicate SCNs on same thread Oracle RAC mode incorrectly processed <a href="https://issues.redhat.com/browse/DBZ-5439">DBZ-5439</a></p> </li> <li> <p>Deprecate legacy topic selector for all connectors <a href="https://issues.redhat.com/browse/DBZ-5457">DBZ-5457</a></p> </li> <li> <p>Remove the dependency of JdbcConnection on DatabaseSchema <a href="https://issues.redhat.com/browse/DBZ-5470">DBZ-5470</a></p> </li> <li> <p>Missing the regex properties validation before start connector of DefaultRegexTopicNamingStrategy <a href="https://issues.redhat.com/browse/DBZ-5471">DBZ-5471</a></p> </li> <li> <p>Create Index DDL fails to parse when using TABLESPACE clause with quoted identifier <a href="https://issues.redhat.com/browse/DBZ-5472">DBZ-5472</a></p> </li> <li> <p>Outbox doesn&#8217;t check array consistency properly when it determines its schema <a href="https://issues.redhat.com/browse/DBZ-5475">DBZ-5475</a></p> </li> <li> <p>Misleading statistics written to the log <a href="https://issues.redhat.com/browse/DBZ-5476">DBZ-5476</a></p> </li> <li> <p>Remove SQL Server SourceTimestampMode <a href="https://issues.redhat.com/browse/DBZ-5477">DBZ-5477</a></p> </li> <li> <p>Debezium connector task didn&#8217;t retry when failover in mongodb 5 <a href="https://issues.redhat.com/browse/DBZ-5479">DBZ-5479</a></p> </li> <li> <p>Better error reporting for signal table failures <a href="https://issues.redhat.com/browse/DBZ-5484">DBZ-5484</a></p> </li> <li> <p>Oracle DATADUMP DDL cannot be parsed <a href="https://issues.redhat.com/browse/DBZ-5488">DBZ-5488</a></p> </li> <li> <p>Upgrade PostgreSQL driver to 42.4.1 <a href="https://issues.redhat.com/browse/DBZ-5493">DBZ-5493</a></p> </li> <li> <p>Mysql connector parser the ddl statement failed when including keyword "buckets" <a href="https://issues.redhat.com/browse/DBZ-5499">DBZ-5499</a></p> </li> <li> <p>duplicate call to config.validateAndRecord() in RedisDatabaseHistory <a href="https://issues.redhat.com/browse/DBZ-5506">DBZ-5506</a></p> </li> <li> <p>DDL statement couldn&#8217;t be parsed : mismatched input 'ENGINE' <a href="https://issues.redhat.com/browse/DBZ-5508">DBZ-5508</a></p> </li> <li> <p>Use “database.dbnames” in SQL Server docs <a href="https://issues.redhat.com/browse/DBZ-5516">DBZ-5516</a></p> </li> <li> <p>LogMiner DML parser incorrectly interprets concatenation operator inside quoted column value <a href="https://issues.redhat.com/browse/DBZ-5521">DBZ-5521</a></p> </li> <li> <p>Mysql Connector DDL Parser does not parse all privileges <a href="https://issues.redhat.com/browse/DBZ-5522">DBZ-5522</a></p> </li> <li> <p>CREATE TABLE with JSON-based CHECK constraint clause causes MultipleParsingExceptions <a href="https://issues.redhat.com/browse/DBZ-5526">DBZ-5526</a></p> </li> <li> <p>Disable preferring DDL before logical schema in history recovery <a href="https://issues.redhat.com/browse/DBZ-5535">DBZ-5535</a></p> </li> <li> <p>EmbeddedEngine should initialize Connector using SourceConnectorContext <a href="https://issues.redhat.com/browse/DBZ-5534">DBZ-5534</a></p> </li> <li> <p>Support EMPTY column identifier <a href="https://issues.redhat.com/browse/DBZ-5550">DBZ-5550</a></p> </li> <li> <p>Use TCCL as the default classloader to load interface implementations <a href="https://issues.redhat.com/browse/DBZ-5561">DBZ-5561</a></p> </li> <li> <p>max.queue.size.in.bytes is invalid <a href="https://issues.redhat.com/browse/DBZ-5569">DBZ-5569</a></p> </li> <li> <p>Language type for listings in automatic topic creation <a href="https://issues.redhat.com/browse/DBZ-5573">DBZ-5573</a></p> </li> <li> <p>Upgrade mysql-binlog-connector-java library version <a href="https://issues.redhat.com/browse/DBZ-5574">DBZ-5574</a></p> </li> <li> <p>Vitess: Handle VStream close unexpectedly <a href="https://issues.redhat.com/browse/DBZ-5579">DBZ-5579</a></p> </li> <li> <p>Error when parsing alter sql <a href="https://issues.redhat.com/browse/DBZ-5587">DBZ-5587</a></p> </li> <li> <p>Field validation errors are misleading for positive, non-zero expectations <a href="https://issues.redhat.com/browse/DBZ-5588">DBZ-5588</a></p> </li> <li> <p>Mysql connector can&#8217;t handle the case-sensitive of rename/change column statement <a href="https://issues.redhat.com/browse/DBZ-5589">DBZ-5589</a></p> </li> <li> <p>LIST_VALUE_CLAUSE not allowing TIMESTAMP LITERAL <a href="https://issues.redhat.com/browse/DBZ-5592">DBZ-5592</a></p> </li> <li> <p>Oracle DDL does not support comments on materialized views <a href="https://issues.redhat.com/browse/DBZ-5595">DBZ-5595</a></p> </li> <li> <p>Oracle DDL does not support DEFAULT ON NULL <a href="https://issues.redhat.com/browse/DBZ-5605">DBZ-5605</a></p> </li> <li> <p>Datatype mdsys.sdo_geometry not supported <a href="https://issues.redhat.com/browse/DBZ-5609">DBZ-5609</a></p> </li> </ul> </div> <div class="paragraph"> <p>Altogether, a total of <a href="https://issues.redhat.com/issues/?jql=project%20%3D%20DBZ%20AND%20fixVersion%20%3D%202.0.0.Beta2%20ORDER%20BY%20component%20ASC">107 issues</a> were fixed for this release.</p> </div> <div class="paragraph"> <p>A big thank you to all the contributors from the community who worked on this release: <a href="https://github.com/ahmedjami">Ahmed ELJAMI</a>, <a href="https://github.com/ahus1">Alexander Schwartz</a>, <a href="https://github.com/aloubyansky">Alexey Loubyansky</a>, Gabor[Andras], <a href="https://github.com/ani-sha">Anisha Mohanty</a>, <a href="https://github.com/roldanbob">Bob Roldan</a>, <a href="https://github.com/Naros">Chris Cranford</a>, <a href="https://github.com/davsclaus">Claus Ibsen</a>, <a href="https://github.com/debjeetsarkar">Debjeet Sarkar</a>, <a href="https://github.com/ggaborg">Gabor Andras</a>, <a href="https://github.com/gunnarmorling">Gunnar Morling</a>, <a href="https://github.com/ruanhang1993">Hang Ruan</a>, <a href="https://github.com/harveyyue">Harvey Yue</a>, <a href="https://github.com/HenryCaiHaiying">Henry Cai</a>, <a href="https://github.com/nicholas-fwang">Inki Hwang</a>, <a href="https://github.com/jcechace">Jakub Cechacek</a>, <a href="https://github.com/DerGut">Jannik Steinmann</a>, <a href="https://github.com/jeremy-l-ford">Jeremy Ford</a>, <a href="https://github.com/novotnyJiri">Jiri Novotny</a>, <a href="https://github.com/jpechane">Jiri Pechanec</a>, <a href="https://github.com/kgalieva">Katerina Galieva</a>, <a href="https://github.com/winklerm">Marek Winkler</a>, <a href="https://github.com/MartinMedek">Martin Medek</a>, <a href="https://github.com/nitinitt">Nitin Chhabra</a>, <a href="https://github.com/thangdc94">Phạm Ngọc Thắng</a>, <a href="https://github.com/roldanbob">Robert Roldan</a>, <a href="https://github.com/druud">Ruud H.G. van Tol</a>, <a href="https://github.com/jaegwonseo">Seo Jae-kwon</a>, <a href="https://github.com/morozov">Sergei Morozov</a>, <a href="https://github.com/smiklosovic">Stefan Miklosovic</a>, <a href="https://github.com/ramanenka">Vadzim Ramanenka</a>, <a href="https://github.com/vivekwassan">Vivek Wassan</a>, <a href="https://github.com/vjuranek">Vojtech Juranek</a>, <a href="https://github.com/GOODBOY008">Zhongqiang Gong</a>, <a href="https://github.com/BetaCat0">合龙 张</a>, <a href="https://github.com/comil4444">崔世杰</a>, and <a href="https://github.com/pkgonan">민규 김</a>!</p> </div> </div> </div> <div class="sect1"> <h2 id="whats_next">What&#8217;s next?</h2> <div class="sectionbody"> <div class="paragraph"> <p>With the release of Debezium 2.0 Beta2, we&#8217;re in the home stretch toward 2.0.0.Final. The community should expect a CR1 by the end of September and 2.0.0.Final released by the middle of October.</p> </div> <div class="paragraph"> <p>In addition, our very own Gunnar Morling and I will be guests on the upcoming <a href="https://quarkus.io/insights">Quarkus Insights</a> podcast, episode #103. We will be discussing Debezium and Quarkus, how Debezium leverages the power of Quarkus, a virtual how-to on embedding Debezium in a Quarkus-based application, and discussing all new features in Debezium 2.0. Be sure to check out the podcast and let us what you think!</p> </div> </div> </div></div> </div> <div class="well"> <div class="row"> <div class="col-md-8"> <h2>Chris Cranford</h2> <p> <span class="bio-size">Chris is a software engineer at Red Hat. He previously was a member of the Hibernate ORM team and now works on Debezium. He lives in North Carolina just a few hours from Red Hat towers.</span> </p> <p class="bio-size"> <a href="https://github.com/naros"> <i class="icon-github"></i> </a> &nbsp; <a href="https://www.linkedin.com/in/crancran"> <i class="icon-linkedin"></i> </a> &nbsp; </p> </div> <div class="col-md-4"> <img alt="" class="img-responsive pull-right portrait" src="/assets/images/ccranfor.jpg"/> </div> </div> </div> <ul class="pager pager-blog"> <li class="previous"> <a href="/blog/2022/07/27/debezium-2.0-beta1-released/" class="previous"> &laquo; Previous</a> </li> <li class="next"><a href="/blog/2022/09/26/debezium-1-9-6-final-released/">Next &raquo; </a></li> </ul> <div class="row"> <div class="col-md-12"> <hr> <h2>About Debezium</h2> <p> Debezium is an open source distributed platform that turns your existing databases into event streams, so applications can see and respond almost instantly to each committed row-level change in the databases. Debezium is built on top of <a href="http://kafka.apache.org/">Kafka</a> and provides <a href="http://kafka.apache.org/documentation.html#connect">Kafka Connect</a> compatible connectors that monitor specific database management systems. Debezium records the history of data changes in Kafka logs, so your application can be stopped and restarted at any time and can easily consume all of the events it missed while it was not running, ensuring that all events are processed correctly and completely. Debezium is <a href="/license/">open source</a> under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>. </p> </div> </div> <div class="row"> <div class="col-md-12"> <h2>Get involved</h2> <p> We hope you find Debezium interesting and useful, and want to give it a try. Follow us on Twitter <a href="https://twitter.com/debezium">@debezium</a>, <a href="https://debezium.zulipchat.com/#narrow/stream/302529-users">chat with us on Zulip</a>, or join our <a href="https://groups.google.com/forum/#!forum/debezium">mailing list</a> to talk with the community. All of the code is open source <a href="https://github.com/debezium/">on GitHub</a>, so build the code locally and help us improve ours existing connectors and add even more connectors. If you find problems or have ideas how we can improve Debezium, please let us know or <a href="https://issues.redhat.com/projects/DBZ/issues/">log an issue</a>. </p> </div> </div> <div id="disqus_thread"></div> <script>var disqus_config=function(){this.page.url="https://debezium.io/blog/2022/09/16/debezium-2.0-beta2-released/",this.page.identifier="https://debezium.io/blog/2022/09/16/debezium-2.0-beta2-released/"};!function(){var e=document,t=e.createElement("script");t.src="https://Debezium.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}();</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> </div> </div> <footer class="container"> <div> <div class="row mr-0 ml-0"> <div class="col-md-5 col-md-offset-1"> <h4>Debezium</h4> <p> &#169; 2023 Debezium Community <br/> <br/> <i class="icon-fire"></i> Mixed with <a href="https://getbootstrap.com/">Bootstrap</a>, baked by <a href="https://jekyllrb.com/">Jekyll</a>. <br/> <i class="icon-flag"></i> Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>. <br/> <i class="icon-flag-alt"></i> Code released under <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>. <br/> <i class="icon-file-alt"></i> <a href="https://www.redhat.com/legal/legal_statement.html" title="Terms">Terms</a> | <a href="https://www.redhat.com/legal/privacy_statement.html" title="Privacy Policy">Privacy</a> </p> <p>Rev: <a target="_blank" href="https://github.com/debezium/debezium.github.io/commit/c09c2eb7bdbfb1b6ce482728b09c46dd47000f26">c09c2eb</a> </p> </div> <div class="col-md-3"> <h4>Documentation</h4> <ul class="list-unstyled"> <li><a href="/documentation/reference/stable/features.html" title="Features">Features</a></li> <li> <a href="/documentation/reference/stable/install.html" title="Install">Install</a> </li> <li> <a href="/documentation/reference/stable/architecture.html" title="Architecture">Architecture</a> </li> <li><a href="/documentation/faq/" title="FAQ">FAQ</a></li> <li> <a href="/community/contribute/" title="Contribute">Contribute</a> </li> </ul> </div> <div class="col-md-3"> <h4>Connect</h4> <ul class="list-unstyled"> <li><a href="/blog" title="Blog">Blog</a></li> <li> <a href="https://twitter.com/debezium" title="Twitter">Twitter</a> </li> <li><a href="https://github.com/debezium" title="GitHub">GitHub</a></li> <li><a href="https://debezium.zulipchat.com/#narrow/stream/302529-users" title="Chat">Chat</a></li> <li> <a href="https://groups.google.com/forum/#!forum/debezium" title="Google Groups">Google Groups</a> </li> <li> <a href="https://stackoverflow.com/questions/tagged/debezium" title="StackOverflow">StackOverflow</a> </li> </ul> </div> </div> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <a href="https://www.redhat.com/"> <img src="/assets/images/Logo-Red_Hat-Sponsored_By-B-Standard-RGB.svg"/> </a> </div> </div> </div> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-76464546-1"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-76464546-1");</script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> <script type="text/javascript" src="/assets/javascript/vanilla-back-to-top.min.js"></script> <script type="text/javascript" src="/assets/javascript/highlight.min.js"></script> <script>addBackToTop({scrollDuration:400}),hljs.initHighlightingOnLoad();</script> </body> </html>