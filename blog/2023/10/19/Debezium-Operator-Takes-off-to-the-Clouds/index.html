<!DOCTYPE html> <html> <head> <title>Debezium Operator Takes off to the Clouds</title> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="description" content="Debezium is an open source distributed platform for change data capture. Start it up, point it at your databases, and your apps can start responding to all of the inserts, updates, and deletes that other apps commit to your databases. Debezium is durable and fast, so your apps can respond quickly and never miss an event, even when things go wrong."> <meta content="Debezium" property="og:site_name"> <meta content="Debezium Operator Takes off to the Clouds" property="og:title"> <meta content="https://debezium.io/assets/images/color_black_debezium_type_1200px.png" property="og:image" name="image"> <meta property="og:description" content="Debezium is an open source distributed platform for change data capture. Start it up, point it at your databases, and your apps can start responding to all of the inserts, updates, and deletes that other apps commit to your databases. Debezium is durable and fast, so your apps can respond quickly and never miss an event, even when things go wrong."> <meta property="og:url" content="https://debezium.io/blog/2023/10/19/Debezium-Operator-Takes-off-to-the-Clouds/"> <meta name="twitter:site" content="@debezium"> <meta name="twitter:title" content="Debezium Operator Takes off to the Clouds"> <meta name="twitter:creator" content="@jcechace"> <meta name="twitter:description" content="Debezium is an open source distributed platform for change data capture. Start it up, point it at your databases, and your apps can start responding to all of the inserts, updates, and deletes that other apps commit to your databases. Debezium is durable and fast, so your apps can respond quickly and never miss an event, even when things go wrong."> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="https://debezium.io/assets/images/color_black_debezium_type_1200px.png"> <meta property="twitter:url" content="https://debezium.io/blog/2023/10/19/Debezium-Operator-Takes-off-to-the-Clouds/"> <link rel="alternate" type="application/rss+xml" title="Debezium Blog" href="/blog.atom"> <link rel="shortcut icon" type="image/png" href="/favicon.ico"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css"/> <link rel="stylesheet" href="/assets/css/custom.css"/> <link rel="stylesheet" href="/assets/css/highlight.min.css"/> <link rel="stylesheet" href="/assets/css/coderay.css"/> </head> <body class="post"> <div id="rhbar"> <a class="jbdevlogo" href="https://developers.redhat.com"></a> <a class="rhlogo" href="https://www.redhat.com/"></a> </div> <div id> <div class="container" id="content"> <nav class="navbar navbar-inverse navbar-fix"> <div class="container-fluid"> <div class="navbar-header"> <button class="navbar-toggle collapsed border-0" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"><img class="project-logo" src="/assets/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 5px; margin-top: -5px;"></a> </div> <div class="collapse navbar-collapse collapsed" id="navigation"> <ul class="nav navbar-nav pull-right"> <li> <a href="/documentation/faq" class="">FAQ</a> </li> <li class="item"> <a href="/documentation/" class="">Documentation</a> </li> <li> <a href="/releases/" class="">Releases</a> </li> <li> <a href="/community/" class="">Community</a> </li> <li class="active"> <a href="/blog/" class="active">Blog</a> </li> </ul> </div> </div> </nav> <div class="row post-text-padding row-no-expand"> <div class="col-md-3"><div id="leftdocnav"> <div class="hidden-lg hidden-md hidden-sm"> <button class="navbar-toggle docssubmenu-toggle collapsed" data-target="#docssubmenu" data-toggle="collapse" style=" float: none; background-color: #656565; border-color: #656565; width: 100%; color: #fff; "> Navigation Menu </button> </div> <div class="collapse" id="docssubmenu"> <div class="doc-pills"> <ul class="nav nav-pills nav-stacked"> <li class="item"> <a href="/blog">Home</a> <div class="icon"><span class="icon-home"></span></div> </li> <li class="item"> <a href="/archives">Archive</a> <div class="icon"><span class="icon-arrow-down"></span></div> </li> <li class="item"> <a href="/blog.atom">Feed</a> <div class="icon"><span class="icon-rss"></span></div> </li> </ul> </div> <p></p> <div class="featured-posts"> <div id="#featured" style="margin-bottom: 4px; border-bottom: 1px solid #ccc; font-size: 115%; margin-left: 2px;">Featured Posts</div> <ul style="padding-inline-start: 22px;"> <li style="margin-bottom: 3px;"> <a href="/blog/2024/07/08/async-embedded-engine/" style="font-size: 95%;"> Debezium asynchronous engine </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2024/01/11/Debezium-and-TimescaleDB/" style="font-size: 95%;"> Debezium and TimescaleDB </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/12/20/JDBC-sink-connector-batch-support/" style="font-size: 95%;"> Streamlined Performance: Debezium JDBC connector batch support </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/10/19/Debezium-Operator-Takes-off-to-the-Clouds/" style="font-size: 95%;"> Debezium Operator Takes off to the Clouds </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/10/05/Debezium-JMX-signaling-and-notifications/" style="font-size: 95%;"> Debezium signaling and notifications - Part 3: JMX channel </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/09/23/flink-spark-online-learning/" style="font-size: 95%;"> Online machine learning with the data streams from the database </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/07/10/custom-http-signaling-notification/" style="font-size: 95%;"> Debezium signaling and notifications - Part 2: Customisation </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/06/27/Debezium-signaling-and-notifications/" style="font-size: 95%;"> Debezium signaling and notifications - Part 1 </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/05/02/tensorflow-mnist-classification/" style="font-size: 95%;"> Image classification with Debezium and TensorFlow </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2020/11/04/streaming-vitess-at-bolt/" style="font-size: 95%;"> Streaming Vitess at Bolt </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2020/02/10/event-sourcing-vs-cdc/" style="font-size: 95%;"> Distributed Data for Microservices — Event Sourcing vs. Change Data Capture </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2019/10/01/audit-logs-with-change-data-capture-and-stream-processing/" style="font-size: 95%;"> Building Audit Logs with Change Data Capture and Stream Processing </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2019/07/12/streaming-cassandra-at-wepay-part-1/" style="font-size: 95%;"> Streaming Cassandra at WePay - Part 1 </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2019/02/19/reliable-microservices-data-exchange-with-the-outbox-pattern/" style="font-size: 95%;"> Reliable Microservices Data Exchange With the Outbox Pattern </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/12/05/automating-cache-invalidation-with-change-data-capture/" style="font-size: 95%;"> Automating Cache Invalidation With Change Data Capture </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/09/20/materializing-aggregate-views-with-hibernate-and-debezium/" style="font-size: 95%;"> Materializing Aggregate Views With Hibernate and Debezium </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/07/19/advantages-of-log-based-change-data-capture/" style="font-size: 95%;"> Five Advantages of Log-Based Change Data Capture </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/03/08/creating-ddd-aggregates-with-debezium-and-kafka-streams/" style="font-size: 95%;"> Creating DDD aggregates with Debezium and Kafka Streams </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/01/17/streaming-to-elasticsearch/" style="font-size: 95%;"> Streaming Data Changes from Your Database to Elasticsearch </a> </li> </ul> </div> <p></p> <p></p> <div class="cloud-tags"> <div id="tags" style="margin-bottom: 4px; border-bottom: 1px solid #ccc; font-size: 115%; margin-left: 2px;"> Tags </div> <div class="tag-cloud"> <span class="site-tag"> <a href="/tag/apache-kafka/" style="font-size: 82%"> apache kafka </a> </span> <span class="site-tag"> <a href="/tag/apache-kafka/" style="font-size: 96%"> apache kafka </a> </span> <span class="site-tag"> <a href="/tag/apicurio/" style="font-size: 82%"> apicurio </a> </span> <span class="site-tag"> <a href="/tag/avro/" style="font-size: 84%"> avro </a> </span> <span class="site-tag"> <a href="/tag/aws/" style="font-size: 82%"> aws </a> </span> <span class="site-tag"> <a href="/tag/batch/" style="font-size: 82%"> batch </a> </span> <span class="site-tag"> <a href="/tag/caassandra/" style="font-size: 86%"> caassandra </a> </span> <span class="site-tag"> <a href="/tag/camel/" style="font-size: 82%"> camel </a> </span> <span class="site-tag"> <a href="/tag/cassandra/" style="font-size: 298%"> cassandra </a> </span> <span class="site-tag"> <a href="/tag/cdc/" style="font-size: 82%"> cdc </a> </span> <span class="site-tag"> <a href="/tag/channels/" style="font-size: 82%"> channels </a> </span> <span class="site-tag"> <a href="/tag/community/" style="font-size: 124%"> community </a> </span> <span class="site-tag"> <a href="/tag/community-stories/" style="font-size: 84%"> community stories </a> </span> <span class="site-tag"> <a href="/tag/connectors/" style="font-size: 82%"> connectors </a> </span> <span class="site-tag"> <a href="/tag/containers/" style="font-size: 82%"> containers </a> </span> <span class="site-tag"> <a href="/tag/cqrs/" style="font-size: 84%"> cqrs </a> </span> <span class="site-tag"> <a href="/tag/custom/" style="font-size: 82%"> custom </a> </span> <span class="site-tag"> <a href="/tag/datalake/" style="font-size: 82%"> datalake </a> </span> <span class="site-tag"> <a href="/tag/db2/" style="font-size: 282%"> db2 </a> </span> <span class="site-tag"> <a href="/tag/ddd/" style="font-size: 82%"> ddd </a> </span> <span class="site-tag"> <a href="/tag/debezium/" style="font-size: 106%"> debezium </a> </span> <span class="site-tag"> <a href="/tag/debezium-server/" style="font-size: 94%"> debezium server </a> </span> <span class="site-tag"> <a href="/tag/debezium-ui/" style="font-size: 90%"> debezium ui </a> </span> <span class="site-tag"> <a href="/tag/deduplication/" style="font-size: 82%"> deduplication </a> </span> <span class="site-tag"> <a href="/tag/discussion/" style="font-size: 114%"> discussion </a> </span> <span class="site-tag"> <a href="/tag/docker/" style="font-size: 186%"> docker </a> </span> <span class="site-tag"> <a href="/tag/elasticsearch/" style="font-size: 82%"> elasticsearch </a> </span> <span class="site-tag"> <a href="/tag/event-sourcing/" style="font-size: 82%"> event sourcing </a> </span> <span class="site-tag"> <a href="/tag/exactly-once-semantics/" style="font-size: 82%"> exactly once semantics </a> </span> <span class="site-tag"> <a href="/tag/example/" style="font-size: 88%"> example </a> </span> <span class="site-tag"> <a href="/tag/examples/" style="font-size: 118%"> examples </a> </span> <span class="site-tag"> <a href="/tag/features/" style="font-size: 94%"> features </a> </span> <span class="site-tag"> <a href="/tag/fedora/" style="font-size: 82%"> fedora </a> </span> <span class="site-tag"> <a href="/tag/flink/" style="font-size: 84%"> flink </a> </span> <span class="site-tag"> <a href="/tag/hiring/" style="font-size: 84%"> hiring </a> </span> <span class="site-tag"> <a href="/tag/ibmi/" style="font-size: 106%"> ibmi </a> </span> <span class="site-tag"> <a href="/tag/iceberg/" style="font-size: 82%"> iceberg </a> </span> <span class="site-tag"> <a href="/tag/informix/" style="font-size: 116%"> informix </a> </span> <span class="site-tag"> <a href="/tag/integration/" style="font-size: 86%"> integration </a> </span> <span class="site-tag"> <a href="/tag/introduction/" style="font-size: 84%"> introduction </a> </span> <span class="site-tag"> <a href="/tag/jaeger/" style="font-size: 82%"> jaeger </a> </span> <span class="site-tag"> <a href="/tag/jdbc/" style="font-size: 118%"> jdbc </a> </span> <span class="site-tag"> <a href="/tag/json/" style="font-size: 82%"> json </a> </span> <span class="site-tag"> <a href="/tag/kafka/" style="font-size: 94%"> kafka </a> </span> <span class="site-tag"> <a href="/tag/kafka-streams/" style="font-size: 82%"> kafka streams </a> </span> <span class="site-tag"> <a href="/tag/kafka-streams/" style="font-size: 86%"> kafka streams </a> </span> <span class="site-tag"> <a href="/tag/kogito/" style="font-size: 82%"> kogito </a> </span> <span class="site-tag"> <a href="/tag/ksql/" style="font-size: 82%"> ksql </a> </span> <span class="site-tag"> <a href="/tag/kubernetes/" style="font-size: 86%"> kubernetes </a> </span> <span class="site-tag"> <a href="/tag/lakehouse/" style="font-size: 82%"> lakehouse </a> </span> <span class="site-tag"> <a href="/tag/machine-learning/" style="font-size: 86%"> machine learning </a> </span> <span class="site-tag"> <a href="/tag/mariadb/" style="font-size: 114%"> mariadb </a> </span> <span class="site-tag"> <a href="/tag/microservices/" style="font-size: 84%"> microservices </a> </span> <span class="site-tag"> <a href="/tag/mongo/" style="font-size: 86%"> mongo </a> </span> <span class="site-tag"> <a href="/tag/mongodb/" style="font-size: 300%"> mongodb </a> </span> <span class="site-tag"> <a href="/tag/mysql/" style="font-size: 436%"> mysql </a> </span> <span class="site-tag"> <a href="/tag/news/" style="font-size: 112%"> news </a> </span> <span class="site-tag"> <a href="/tag/newsletter/" style="font-size: 88%"> newsletter </a> </span> <span class="site-tag"> <a href="/tag/notifications/" style="font-size: 86%"> notifications </a> </span> <span class="site-tag"> <a href="/tag/online-learning/" style="font-size: 84%"> online learning </a> </span> <span class="site-tag"> <a href="/tag/operator/" style="font-size: 84%"> operator </a> </span> <span class="site-tag"> <a href="/tag/oracle/" style="font-size: 332%"> oracle </a> </span> <span class="site-tag"> <a href="/tag/outbox/" style="font-size: 270%"> outbox </a> </span> <span class="site-tag"> <a href="/tag/performance/" style="font-size: 82%"> performance </a> </span> <span class="site-tag"> <a href="/tag/postgres/" style="font-size: 406%"> postgres </a> </span> <span class="site-tag"> <a href="/tag/presentation/" style="font-size: 84%"> presentation </a> </span> <span class="site-tag"> <a href="/tag/production/" style="font-size: 82%"> production </a> </span> <span class="site-tag"> <a href="/tag/quarkus/" style="font-size: 92%"> quarkus </a> </span> <span class="site-tag"> <a href="/tag/questdb/" style="font-size: 82%"> questdb </a> </span> <span class="site-tag"> <a href="/tag/rds/" style="font-size: 84%"> rds </a> </span> <span class="site-tag"> <a href="/tag/releases/" style="font-size: 418%"> releases </a> </span> <span class="site-tag"> <a href="/tag/schema/" style="font-size: 82%"> schema </a> </span> <span class="site-tag"> <a href="/tag/scylla/" style="font-size: 82%"> scylla </a> </span> <span class="site-tag"> <a href="/tag/secrets/" style="font-size: 82%"> secrets </a> </span> <span class="site-tag"> <a href="/tag/sentry/" style="font-size: 82%"> sentry </a> </span> <span class="site-tag"> <a href="/tag/serialization/" style="font-size: 82%"> serialization </a> </span> <span class="site-tag"> <a href="/tag/signaling/" style="font-size: 86%"> signaling </a> </span> <span class="site-tag"> <a href="/tag/smt/" style="font-size: 84%"> smt </a> </span> <span class="site-tag"> <a href="/tag/snapshots/" style="font-size: 84%"> snapshots </a> </span> <span class="site-tag"> <a href="/tag/spanner/" style="font-size: 158%"> spanner </a> </span> <span class="site-tag"> <a href="/tag/spark/" style="font-size: 84%"> spark </a> </span> <span class="site-tag"> <a href="/tag/sql/" style="font-size: 84%"> sql </a> </span> <span class="site-tag"> <a href="/tag/sqlserver/" style="font-size: 346%"> sqlserver </a> </span> <span class="site-tag"> <a href="/tag/tensorflow/" style="font-size: 82%"> tensorflow </a> </span> <span class="site-tag"> <a href="/tag/testcontainers/" style="font-size: 88%"> testcontainers </a> </span> <span class="site-tag"> <a href="/tag/tests/" style="font-size: 82%"> tests </a> </span> <span class="site-tag"> <a href="/tag/time-series/" style="font-size: 82%"> time series </a> </span> <span class="site-tag"> <a href="/tag/timescaledb/" style="font-size: 82%"> timescaledb </a> </span> <span class="site-tag"> <a href="/tag/topics/" style="font-size: 82%"> topics </a> </span> <span class="site-tag"> <a href="/tag/tracing/" style="font-size: 82%"> tracing </a> </span> <span class="site-tag"> <a href="/tag/transactions/" style="font-size: 82%"> transactions </a> </span> <span class="site-tag"> <a href="/tag/ui/" style="font-size: 82%"> ui </a> </span> <span class="site-tag"> <a href="/tag/vagrant/" style="font-size: 82%"> vagrant </a> </span> <span class="site-tag"> <a href="/tag/vitess/" style="font-size: 262%"> vitess </a> </span> <span class="site-tag"> <a href="/tag/website/" style="font-size: 84%"> website </a> </span> </div> </div> </div> </div> </div> <div class="col-md-9"> <div class="post"> <div class="row" style="margin-left: 0; margin-right: 0; margin-bottom: 10px"> <div class="col-sm-12" style="padding-left: 0px"> <div style="display: table-cell; vertical-align: top"> <div style=" width: 72px; border: 1px solid #ccc; padding: 3px; display: inline-block; "> <img src="/assets/images/jcechace.jpg" style="width: 64px;"> </div> </div> <div style="display: table-cell; vertical-align: top"> <div style="margin-left: 8px"> <span class="hidden-sm hidden-xs" style="font-size: 2.75rem; line-height: 1"> <a href="/blog/2023/10/19/Debezium-Operator-Takes-off-to-the-Clouds/">Debezium Operator Takes off to the Clouds</a> </span> <span class="hidden-md hidden-lg" style="font-size: 2rem; line-height: 1"> <a href="/blog/2023/10/19/Debezium-Operator-Takes-off-to-the-Clouds/">Debezium Operator Takes off to the Clouds</a> </span> <div class="byline" style="line-height: 1"> <em> October 19, 2023 by </em> <em> Čecháček Jakub </em> <div class="hidden-xs" style="margin-top: 5px"> <a class="label label-info hidden-sm hidden-xs" href="/tag/debezium/">debezium</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/features/">features</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/kubernetes/">kubernetes</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/operator/">operator</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/debezium-server/">debezium-server</a> </div> </div> </div> </div> </div> </div> <div class="grid__item width-12-12"><div class="paragraph"> <p>With Debezium 2.3, we introduced a preview of a brand new Debezium Operator with the aim to provide seamless deployment of Debezium Server to Kubernetes (k8s) clusters. The Debezium 2.4.0.Final release brings the next step towards the full support of this component. With this release, we are happy to announce that Debezium Operator is now available in the OperatorHub <a href="https://operatorhub.io/operator/debezium-operator">catalog</a> for Kubernetes as well as in the community operator catalog embedded in the OpenShift and OKD distributions. The operator remains in the incubation phase; however, the full support of this component is approaching fast.</p> </div> <div class="paragraph"> <p></p> </div> <div class="sect1"> <h2 id="the_goal">The Goal</h2> <div class="sectionbody"> <div class="paragraph"> <p>In this article, we will demonstrate how to stream changes from a PostgreSQL database into Apache Kafka using Debezium Server deployed in Kubernetes cluster. We will also show some of the capabilities of our new k8s integration. For convenience, all code snippets and Kubernetes manifests used in the tutorial are also available in our <a href="https://github.com/debezium/debezium-examples/tree/main/operator/tutorial-postgresql-kafka">GitHub repository for examples</a>.</p> </div> </div> </div> <div class="sect1"> <h2 id="preparing_the_environment">Preparing the Environment</h2> <div class="sectionbody"> <div class="paragraph"> <p>Before deploying the operator and, consequently, Debezium Server, we need an environment to deploy into. In this section we will showcase how to provision a local Kubernetes cluster running a PostgreSQL database and the Apache Kafka broker. Note that it is not required for the database and/or the Kafka broker to run inside Kubernetes, we just chose to do so for the purpose of this demonstration.</p> </div> <div class="sect2"> <h3 id="running_a_local_kubernetes_cluster">Running a Local Kubernetes Cluster</h3> <div class="paragraph"> <p>You can skip this part if you already have a running Kubernetes cluster available; however, make sure you possess cluster-admin permissions as these are required for the operator installation. If not, then read on.</p> </div> <div class="paragraph"> <p>There are multiple tools available to run a local k8s cluster, such as <a href="https://minikube.sigs.k8s.io/docs/">Minikube</a>, <a href="https://kind.sigs.k8s.io/">Kind</a>, or <a href="https://docs.docker.com/desktop/kubernetes/">Docker Desktop</a>. In this article we will be using Kind to create a local single node cluster.</p> </div> <div class="paragraph"> <p><strong>Prerequisites</strong></p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p><a href="https://kubernetes.io/docs/tasks/tools/#kubectl">Install</a> <code>kubectl</code> distribution for your platform.</p> </li> <li> <p><a href="https://kind.sigs.k8s.io/docs/user/quick-start/#installation">Install</a> <code>Kind</code> distribution for your platform.</p> </li> </ol> </div> <div class="paragraph"> <p>Once you have both <code>kubectl</code> and <code>kind</code> installed, create a local Kubernetes cluster by executing the following:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">kind create cluster --name debezium</code></pre> </div> </div> <div class="paragraph"> <p>We can now configure the cluster context for <code>kubectl</code> and check the status of our new k8s environment by running the following command:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">$ kubectl cluster-info --context kind-debezium

Kubernetes control plane is running at https://127.0.0.1:64815
CoreDNS is running at https://127.0.0.1:64815/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</code></pre> </div> </div> <div class="paragraph"> <p>As the last step of our cluster deployment, we will create a new namespace for the required infrastructure:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">kubectl create namespace debezium</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="deploying_the_infrastructure">Deploying the Infrastructure</h3> <div class="paragraph"> <p>In this section we will prepare the required infrastructure&#8201;&#8212;&#8201;the PostgreSQL database as well as an instance of the Kafka broker.</p> </div> <div class="sect3"> <h4 id="postgresql_database">PostgreSQL Database</h4> <div class="paragraph"> <p>Let&#8217;s start with deploying the PostgreSQL database by executing the command below.</p> </div> <div class="admonitionblock caution"> <table> <tr> <td class="icon"> <i class="fa icon-caution" title="Caution"></i> </td> <td class="content"> For simplicity, we are using an ephemeral volume mounts which means that any modification done to our database instance will not persist when the pod is recreated. </td> </tr> </table> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">kubectl create -f https://raw.githubusercontent.com/debezium/debezium-examples/main/operator/tutorial-postgresql-kafka/infra/001_postgresql.yml -n debezium</code></pre> </div> </div> <div class="paragraph"> <p>The yaml file fed to <code>kubectl</code> contains several Kubernetes manifests:</p> </div> <div class="listingblock"> <div class="title">001_postgresql.yml</div> <div class="content"> <pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">apiVersion</span>: <span class="string"><span class="content">v1 </span></span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="key">kind</span>: <span class="string"><span class="content">Secret</span></span>
<span class="key">metadata</span>:
  <span class="key">name</span>: <span class="string"><span class="content">postgresql-credentials</span></span>
<span class="key">type</span>: <span class="string"><span class="content">opaque</span></span>
<span class="key">data</span>:
  <span class="key">POSTGRES_DB</span>: <span class="string"><span class="content">ZGViZXppdW0=</span></span>
  <span class="key">POSTGRES_USER</span>: <span class="string"><span class="content">ZGViZXppdW0=</span></span>
  <span class="key">POSTGRES_PASSWORD</span>: <span class="string"><span class="content">ZGViZXppdW0=</span></span>
<span class="head"><span class="head">---</span></span>
<span class="key">kind</span>: <span class="string"><span class="content">Deployment </span></span><i class="conum" data-value="2"></i><b>(2)</b>
<span class="key">apiVersion</span>: <span class="string"><span class="content">apps/v1</span></span>
<span class="key">metadata</span>:
  <span class="key">name</span>: <span class="string"><span class="content">postgresql</span></span>
  <span class="key">labels</span>:
    <span class="key">app</span>: <span class="string"><span class="content">postgresql</span></span>
<span class="key">spec</span>:
  <span class="key">replicas</span>: <span class="string"><span class="content">1</span></span>
  <span class="key">selector</span>:
    <span class="key">matchLabels</span>:
      <span class="key">app</span>: <span class="string"><span class="content">postgresql</span></span>
      <span class="key">deployment</span>: <span class="string"><span class="content">postgresql</span></span>
  <span class="key">template</span>:
    <span class="key">metadata</span>:
      <span class="key">labels</span>:
        <span class="key">app</span>: <span class="string"><span class="content">postgresql</span></span>
        <span class="key">deployment</span>: <span class="string"><span class="content">postgresql</span></span>
    <span class="key">spec</span>:
      <span class="key">containers</span>:
        - <span class="string"><span class="content">resources: {}</span></span>
          <span class="key">name</span>: <span class="string"><span class="content">postgresql</span></span>
          <span class="key">envFrom</span>:
            - <span class="string"><span class="content">secretRef:</span><span class="content">
                name: postgresql-credentials</span></span>
          <span class="key">ports</span>:
            - <span class="string"><span class="content">containerPort: 5432</span></span>
              <span class="key">protocol</span>: <span class="string"><span class="content">TCP</span></span>
          <span class="key">imagePullPolicy</span>: <span class="string"><span class="content">IfNotPresent</span></span>
          <span class="key">livenessProbe</span>:
            <span class="key">initialDelaySeconds</span>: <span class="string"><span class="content">30</span></span>
            <span class="key">tcpSocket</span>:
              <span class="key">port</span>: <span class="string"><span class="content">5432</span></span>
            <span class="key">timeoutSeconds</span>: <span class="string"><span class="content">1</span></span>
          <span class="key">readinessProbe</span>:
            <span class="key">exec</span>:
              <span class="key">command</span>:
                - <span class="string"><span class="delimiter">&quot;</span><span class="content">/bin/sh</span><span class="delimiter">&quot;</span></span>
                - <span class="string"><span class="delimiter">&quot;</span><span class="content">-i</span><span class="delimiter">&quot;</span></span>
                - <span class="string"><span class="delimiter">&quot;</span><span class="content">-c</span><span class="delimiter">&quot;</span></span>
                - <span class="string"><span class="delimiter">&quot;</span><span class="content">PGPASSWORD=${POSTGRES_PASSWORD} /usr/bin/psql -w -U ${POSTGRES_USER} -d ${POSTGRES_DB} -c 'SELECT 1'</span><span class="delimiter">&quot;</span></span>
            <span class="key">initialDelaySeconds</span>: <span class="string"><span class="content">5</span></span>
            <span class="key">timeoutSeconds</span>: <span class="string"><span class="content">1</span></span>
          <span class="key">terminationMessagePolicy</span>: <span class="string"><span class="content">File</span></span>
          <span class="key">terminationMessagePath</span>: <span class="string"><span class="content">/dev/termination-log</span></span>
          <span class="key">image</span>: <span class="string"><span class="content">quay.io/debezium/example-postgres:latest</span></span>
      <span class="key">restartPolicy</span>: <span class="string"><span class="content">Always</span></span>
      <span class="key">terminationGracePeriodSeconds</span>: <span class="string"><span class="content">30</span></span>
      <span class="key">dnsPolicy</span>: <span class="string"><span class="content">ClusterFirst</span></span>
  <span class="key">strategy</span>:
    <span class="key">type</span>: <span class="string"><span class="content">Recreate</span></span>
<span class="head"><span class="head">---</span></span>
<span class="key">apiVersion</span>: <span class="string"><span class="content">v1 </span></span><i class="conum" data-value="3"></i><b>(3)</b>
<span class="key">kind</span>: <span class="string"><span class="content">Service</span></span>
<span class="key">metadata</span>:
  <span class="key">name</span>: <span class="string"><span class="content">postgresql</span></span>
<span class="key">spec</span>:
  <span class="key">selector</span>:
    <span class="key">app</span>: <span class="string"><span class="content">postgresql</span></span>
    <span class="key">deployment</span>: <span class="string"><span class="content">postgresql</span></span>
  <span class="key">ports</span>:
    - <span class="string"><span class="content">name: db</span></span>
      <span class="key">port</span>: <span class="string"><span class="content">5432</span></span>
      <span class="key">targetPort</span>: <span class="string"><span class="content">5432</span></span></code></pre> </div> </div> <div class="colist arabic"> <table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Secret providing database credentials.</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>Database Deployment.</td> </tr> <tr> <td><i class="conum" data-value="3"></i><b>3</b></td> <td>Database Service.</td> </tr> </table> </div> <div class="paragraph"> <p>The secret is not only attached as environment variables to the database pod, but it will be also used later to reference these credentials in the connector configuration.</p> </div> <div class="paragraph"> <p>You can check that your PostgreSQL database was deployed correctly by running:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">$ kubectl get deployments -n debezium

NAME                        READY   UP-TO-DATE   AVAILABLE
postgresql                  1/1     1            1</code></pre> </div> </div> </div> <div class="sect3"> <h4 id="kafka_broker">Kafka Broker</h4> <div class="paragraph"> <p>To deploy the Kafka broker instance we will take an advantage of the <a href="https://strimzi.io/">Strimzi Operator</a>.</p> </div> <div class="paragraph"> <p>First we will deploy the Strimzi operator itself by running the command below. Please note the <code>namespace</code> parameter in the URL&#8201;&#8212;&#8201;it&#8217;s important as it ensures that Kubernetes objects required by Strimzi are created in the correct namespace.</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">kubectl create -f https://strimzi.io/install/latest?namespace=debezium</code></pre> </div> </div> <div class="paragraph"> <p>After some time you can check that your Strimzi operator is running with:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">$ kubectl get deployments -n debezium

NAME                        READY   UP-TO-DATE   AVAILABLE
strimzi-cluster-operator    1/1     1            1</code></pre> </div> </div> <div class="paragraph"> <p>With the Strimzi operator installed we can deploy an instance of the Kafka broker.</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">kubectl create -f https://raw.githubusercontent.com/debezium/debezium-examples/main/operator/tutorial-postgresql-kafka/infra/002_kafka-ephemeral.yml -n debezium</code></pre> </div> </div> <div class="paragraph"> <p>This command deploys a minimal working configuration of the Kafka broker as described in the used yaml file.</p> </div> <div class="listingblock"> <div class="title">002_kafka-ephemeral.yml</div> <div class="content"> <pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">apiVersion</span>: <span class="string"><span class="content">kafka.strimzi.io/v1beta2</span></span>
<span class="key">kind</span>: <span class="string"><span class="content">Kafka</span></span>
<span class="key">metadata</span>:
  <span class="key">name</span>: <span class="string"><span class="content">dbz-kafka</span></span>
<span class="key">spec</span>:
  <span class="key">kafka</span>:
    <span class="key">version</span>: <span class="string"><span class="content">3.4.0</span></span>
    <span class="key">replicas</span>: <span class="string"><span class="content">1</span></span>
    <span class="key">listeners</span>:
      - <span class="string"><span class="content">name: plain</span></span>
        <span class="key">port</span>: <span class="string"><span class="content">9092</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">internal</span></span>
        <span class="key">tls</span>: <span class="string"><span class="content">false</span></span>
      - <span class="string"><span class="content">name: tls</span></span>
        <span class="key">port</span>: <span class="string"><span class="content">9093</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">internal</span></span>
        <span class="key">tls</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">config</span>:
      <span class="key">offsets.topic.replication.factor</span>: <span class="string"><span class="content">1</span></span>
      <span class="key">transaction.state.log.replication.factor</span>: <span class="string"><span class="content">1</span></span>
      <span class="key">transaction.state.log.min.isr</span>: <span class="string"><span class="content">1</span></span>
      <span class="key">default.replication.factor</span>: <span class="string"><span class="content">1</span></span>
      <span class="key">min.insync.replicas</span>: <span class="string"><span class="content">1</span></span>
      <span class="key">inter.broker.protocol.version</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">3.4</span><span class="delimiter">&quot;</span></span>
    <span class="key">storage</span>:
      <span class="key">type</span>: <span class="string"><span class="content">ephemeral</span></span>
  <span class="key">zookeeper</span>:
    <span class="key">replicas</span>: <span class="string"><span class="content">1</span></span>
    <span class="key">storage</span>:
      <span class="key">type</span>: <span class="string"><span class="content">ephemeral</span></span>
  <span class="key">entityOperator</span>:
    <span class="key">topicOperator</span>: <span class="string"><span class="content">{}</span></span>
    <span class="key">userOperator</span>: <span class="string"><span class="content">{}</span></span></code></pre> </div> </div> <div class="admonitionblock caution"> <table> <tr> <td class="icon"> <i class="fa icon-caution" title="Caution"></i> </td> <td class="content"> Once again this configuration uses an ephemeral storage and only a single replica of the Kafka broker&#8201;&#8212;&#8201;a configuration not suitable for production. </td> </tr> </table> </div> <div class="paragraph"> <p>To check your Kafka deployment execute the following:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">$ kubectl get pods -n debezium

NAME                                         READY   STATUS    RESTARTS
dbz-kafka-entity-operator-844ffdcd54-cdq92   3/3     Running   0
dbz-kafka-kafka-0                            1/1     Running   0
dbz-kafka-zookeeper-0                        1/1     Running   0</code></pre> </div> </div> </div> <div class="sect3"> <h4 id="deploying_debezium_operator">Deploying Debezium Operator</h4> <div class="paragraph"> <p>With the Kubernetes environment and the required infrastructure at our disposal we can now move onto the main star of the tutorial&#8201;&#8212;&#8201;brand new Debezium Operator. There are currently two ways to deploy the operator to your Kubernetes cluster. You can either apply a set of Kubernetes manifests to your cluster (similarly to what we did with the database and the Strimzi operator), or directly from the <a href="https://operatorhub.io/">OperatorHub</a> operator catalog.</p> </div> </div> </div> <div class="sect2"> <h3 id="deploying_debezium_operator_from_operator_catalog">Deploying Debezium Operator from Operator Catalog</h3> <div class="paragraph"> <p>In this section we will use the <a href="https://olm.operatorframework.io/">Operator Lifecycle Manager</a> to create a subscription to the operator available in the <a href="https://operatorhub.io/">OperatorHub catalog</a>. As we mentioned previously, Debezium is one of the <a href="https://operatorhub.io/operator/debezium-operator">available operators</a>.</p> </div> <div class="paragraph"> <p>Among other things, using OLM also allows you to configure the scope of namespaces watched by the operator from a single namespace to the entire cluster. However, <a href="https://olm.operatorframework.io/docs/advanced-tasks/operator-scoping-with-operatorgroups/">this configuration</a> is out of the scope (pun intended!) for this tutorial. The process below will install the operator into the <code>operators</code> namespace&#8201;&#8212;&#8201;which is by default intended for cluster-wide operators.</p> </div> <div class="paragraph"> <p>First we need to install OLM itself by running the following shell commands&#8201;&#8212;&#8201;skip this if OLM is already installed in your cluster.</p> </div> <div class="paragraph"> <p>This is a one-time process and any production k8s cluster which provides access to operator catalogs would already have OLM installed.</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">curl -L https://github.com/operator-framework/operator-lifecycle-manager/releases/download/v0.25.0/install.sh -o install.sh
chmod +x install.sh
./install.sh v0.25.0</code></pre> </div> </div> <div class="paragraph"> <p>Once OLM is up and running in your cluster you can subscribe to Debezium Operator.</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">kubectl create -f https://raw.githubusercontent.com/debezium/debezium-examples/main/operator/tutorial-postgresql-kafka/infra/010_debezium-subscription.yml</code></pre> </div> </div> <div class="paragraph"> <p>Once again, we will examine the contents of the <code>subscription.yml</code> file in order to get a better understanding of what we have just done.</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">apiVersion: operators.coreos.com/v1alpha1
kind: Subscription  <i class="conum" data-value="1"></i><b>(1)</b>
metadata:
  name: debezium-operator-subscription
  namespace: operators <i class="conum" data-value="2"></i><b>(2)</b>
spec:
  installPlanApproval: Automatic
  name: debezium-operator <i class="conum" data-value="3"></i><b>(3)</b>
  source: operatorhubio-catalog <i class="conum" data-value="4"></i><b>(4)</b>
  sourceNamespace: olm <i class="conum" data-value="5"></i><b>(5)</b>
  startingCSV: debezium-operator.v2.4.0</code></pre> </div> </div> <div class="colist arabic"> <table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>The <code>Subscription</code> object instructs OLM to install a operator from the operator catalog.</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>The target namespace for the operator installation.</td> </tr> <tr> <td><i class="conum" data-value="3"></i><b>3</b></td> <td>The name of the installed operator.</td> </tr> <tr> <td><i class="conum" data-value="4"></i><b>4</b></td> <td>The name of the operator catalog.</td> </tr> <tr> <td><i class="conum" data-value="5"></i><b>5</b></td> <td>The namespace containing the operator catalog.</td> </tr> </table> </div> <div class="paragraph"> <p>You can learn more about installing operators through OLM subscription in the <a href="https://olm.operatorframework.io/docs/tasks/install-operator-with-olm/">OLM documentation</a>.</p> </div> <div class="paragraph"> <p>You should now have Debezium Operator ready to manage Debezium Server deployments across your entire Kubernetes cluster. You can check that the operator is indeed up and running with the following command:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">$ kubectl get deployments -n operators

NAME                        READY   UP-TO-DATE   AVAILABLE
debezium-operator           1/1     1            1</code></pre> </div> </div> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> <td class="content"> In the previous section, we chose to deploy the Strimzi operator by directly applying a set of k8s manifests to our cluster. However, Strimzi is also one of the operators available in the OperatorHub catalog and as such could be also installed via OLM. </td> </tr> </table> </div> </div> <div class="sect2"> <h3 id="using_raw_kubernetes_manifests_to_deploy_debezium_operator">Using Raw Kubernetes Manifests to Deploy Debezium Operator</h3> <div class="paragraph"> <p>This options allows deployment of Debezium Operator into any Kubernetes cluster without the need for OLM.</p> </div> <div class="admonitionblock important"> <table> <tr> <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> <td class="content"> Debezium Operator deployed this way will be limited to managing the Debezium Server instances <strong>only in the same namespace as the operator</strong>. </td> </tr> </table> </div> <div class="paragraph"> <p>To deploy Debezium Operator we need to execute the following commands:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">kubectl create -f https://raw.githubusercontent.com/debezium/debezium-operator/2.4/k8/debeziumservers.debezium.io-v1.yml
kubectl create -f https://raw.githubusercontent.com/debezium/debezium-operator/2.4/k8/kubernetes.yml -n debezium</code></pre> </div> </div> <div class="paragraph"> <p>The first command installs the <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/#customresourcedefinitions">Custom Resource Definitions</a> for the resources required by Debezium Operator, while the second execution of <code>kubectl</code> deploys the operator itself.</p> </div> <div class="paragraph"> <p>With the operator deployed, you can now move to deploying the Debezium Server instance to start streaming changes from your database.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="deploying_debezium_server_to_the_k8s_cluster">Deploying Debezium Server to the K8s Cluster</h2> <div class="sectionbody"> <div class="paragraph"> <p>With Debezium Operator deployed one way or the other, we can now deploy Debezium Server itself!</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">kubectl create -f https://raw.githubusercontent.com/debezium/debezium-examples/main/operator/tutorial-postgresql-kafka/infra/011_debezium-server-ephemeral.yml -n debezium</code></pre> </div> </div> <div class="paragraph"> <p>Once again, let&#8217;s look closely at the Kubernetes manifest we just deployed.</p> </div> <div class="listingblock"> <div class="title">011_debezium-server-ephemeral.yml</div> <div class="content"> <pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">apiVersion</span>: <span class="string"><span class="content">debezium.io/v1alpha1</span></span>
<span class="key">kind</span>: <span class="string"><span class="content">DebeziumServer </span></span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="key">metadata</span>:
  <span class="key">name</span>: <span class="string"><span class="content">my-debezium </span></span><i class="conum" data-value="2"></i><b>(2)</b>
<span class="key">spec</span>:
  <span class="key">image</span>: <span class="string"><span class="content">quay.io/debezium/server:2.4.0.Final </span></span><i class="conum" data-value="3"></i><b>(3)</b>
  <span class="key">quarkus</span>: <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="key">config</span>:
      <span class="key">log.console.json</span>: <span class="string"><span class="content">false</span></span>
      <span class="key">kubernetes-config.enabled</span>: <span class="string"><span class="content">true</span></span>
      <span class="key">kubernetes-config.secrets</span>: <span class="string"><span class="content">postgresql-credentials</span></span>
  <span class="key">sink</span>: <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="key">type</span>: <span class="string"><span class="content">kafka</span></span>
    <span class="key">config</span>:
      <span class="key">producer.bootstrap.servers</span>: <span class="string"><span class="content">dbz-kafka-kafka-bootstrap:9092</span></span>
      <span class="key">producer.key.serializer</span>: <span class="string"><span class="content">org.apache.kafka.common.serialization.StringSerializer</span></span>
      <span class="key">producer.value.serializer</span>: <span class="string"><span class="content">org.apache.kafka.common.serialization.StringSerializer</span></span>
  <span class="key">source</span>: <i class="conum" data-value="6"></i><b>(6)</b>
    <span class="key">class</span>: <span class="string"><span class="content">io.debezium.connector.postgresql.PostgresConnector</span></span>
    <span class="key">config</span>:
      <span class="key">offset.storage.file.filename</span>: <span class="string"><span class="content">/debezium/data/offsets.dat</span></span>
      <span class="key">database.history</span>: <span class="string"><span class="content">io.debezium.relational.history.FileDatabaseHistory</span></span>
      <span class="key">database.hostname</span>: <span class="string"><span class="content">postgresql</span></span>
      <span class="key">database.port</span>: <span class="string"><span class="content">5432</span></span>
      <span class="key">database.user</span>: <span class="string"><span class="content">${POSTGRES_USER}</span></span>
      <span class="key">database.password</span>: <span class="string"><span class="content">${POSTGRES_PASSWORD}</span></span>
      <span class="key">database.dbname</span>: <span class="string"><span class="content">${POSTGRES_DB}</span></span>
      <span class="key">topic.prefix</span>: <span class="string"><span class="content">inventory</span></span>
      <span class="key">schema.include.list</span>: <span class="string"><span class="content">inventory</span></span></code></pre> </div> </div> <div class="colist arabic"> <table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>The resource type monitored by Debezium Operator.</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>The name of the deployed Debezium Server instance.</td> </tr> <tr> <td><i class="conum" data-value="3"></i><b>3</b></td> <td>An optional property specifying the container image.</td> </tr> <tr> <td><i class="conum" data-value="4"></i><b>4</b></td> <td>The Quarkus configuration used by Debezium Server.</td> </tr> <tr> <td><i class="conum" data-value="5"></i><b>5</b></td> <td>The Kafka sink configuration.</td> </tr> <tr> <td><i class="conum" data-value="6"></i><b>6</b></td> <td>The PostgreSQL source connector configuration.</td> </tr> </table> </div> <div class="paragraph"> <p>The <code>spec</code> part of the manifest will likely look familiar to anybody with previous Debezium Server experience as it is a more structured variant of the Debezium Server property configuration. In our case the <code>image</code> property is particularly redundant as it uses the default image for the installed operator version.</p> </div> <div class="paragraph"> <p>The quarkus part of the <code>spec</code> provides Debezium Server with access to the previously deployed <code>postgresql-credentials</code> secret containing the credentials to our database. You can see the <code>POSTGRES_USER</code> and other variables referenced later on in the configuration.</p> </div> <div class="paragraph"> <p>A bit more detailed description of the <code>DebeziumServer</code> custom resource can be found at <a href="https://github.com/debezium/debezium-operator/tree/2.4#debeziumserverspec-reference">GitHub</a>.</p> </div> <div class="sect2"> <h3 id="under_the_hood">Under the Hood</h3> <div class="paragraph"> <p>Debezium Operator will take care of creating everything required to run Debezium Server inside Kubernetes.</p> </div> <div class="ulist"> <ul> <li> <p>A service account used to run Debezium Server.</p> </li> <li> <p>Roles and role bindings allowing the read of config maps and secrets in the namespace where Debezium Server is being deployed.</p> </li> <li> <p>A config map containing the raw configuration for Debezium Server.</p> </li> <li> <p>The deployment itself.</p> </li> </ul> </div> </div> <div class="sect2"> <h3 id="verifying_the_deployment">Verifying the Deployment</h3> <div class="paragraph"> <p>You can check that the deployed Debezium Server instance in running with the following command:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">$ kubectl get deployments -n debezium

NAME                        READY   UP-TO-DATE   AVAILABLE
my-debezium                 1/1     1            1</code></pre> </div> </div> <div class="paragraph"> <p>With Debezium Server running, we can verify that it consumed all initial data from the database with the following command.</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="bash">kubectl exec dbz-kafka-kafka-0 -n debezium -- /opt/kafka/bin/kafka-console-consumer.sh \
    --bootstrap-server localhost:9092 \
    --from-beginning \
    --property print.key=true \
    --topic inventory.inventory.orders</code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="the_future_and_our_request">The Future and Our Request</h2> <div class="sectionbody"> <div class="paragraph"> <p>This is it for now. Before the operator gets full support, we intend to provide more detailed documentation and the ability to configure further the deployment with various things, such as custom pull secrets to support customized Debezium Server images stored in secured registries.</p> </div> <div class="paragraph"> <p>There are further plans to improve the structure of the <code>DebeziumServer</code> resources, provide the ability to assemble tailored distribution of Debezium Server declaratively, and maybe even improve our integration with Knative eventing. We are also planning improvements to the embedded engine and, consequently, the Debezium Server, which will one day allow us to take advantage of the horizontal scaling capabilities of Kubernetes.</p> </div> <div class="sect2"> <h3 id="you_can_help_us">You can Help us!</h3> <div class="paragraph"> <p>We want to ask our wonderful Debezium community to test the operator and let us know what you like and dislike and what features you miss. This way, we can shape this component according to your needs, and together, we will bring Debezium closer to providing cloud-native CDC capabilities.</p> </div> </div> </div> </div></div> </div> <div class="well"> <div class="row"> <div class="col-md-8"> <h2>Čecháček Jakub</h2> <p> <span class="bio-size">Jakub is a Principal Software Engineer at Red Hat. He lives in Czech Republic.</span> </p> <p class="bio-size"> <a href="https://github.com/jcechace"> <i class="icon-github"></i> </a> &nbsp; <a href="https://www.linkedin.com/in/jcechace"> <i class="icon-linkedin"></i> </a> &nbsp; </p> </div> <div class="col-md-4"> <img alt="" class="img-responsive pull-right portrait" src="/assets/images/jcechace.jpg"/> </div> </div> </div> <ul class="pager pager-blog"> <li class="previous"> <a href="/blog/2023/10/05/Debezium-JMX-signaling-and-notifications/" class="previous"> &laquo; Previous</a> </li> <li class="next"><a href="/blog/2023/10/26/debezium-2-5-alpha1-released/">Next &raquo; </a></li> </ul> <div class="row"> <div class="col-md-12"> <hr> <h2>About Debezium</h2> <p> Debezium is an open source distributed platform that turns your existing databases into event streams, so applications can see and respond almost instantly to each committed row-level change in the databases. Debezium is built on top of <a href="http://kafka.apache.org/">Kafka</a> and provides <a href="http://kafka.apache.org/documentation.html#connect">Kafka Connect</a> compatible connectors that monitor specific database management systems. Debezium records the history of data changes in Kafka logs, so your application can be stopped and restarted at any time and can easily consume all of the events it missed while it was not running, ensuring that all events are processed correctly and completely. Debezium is <a href="/license/">open source</a> under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>. </p> </div> </div> <div class="row"> <div class="col-md-12"> <h2>Get involved</h2> <p> We hope you find Debezium interesting and useful, and want to give it a try. Follow us on Twitter <a href="https://twitter.com/debezium">@debezium</a>, <a href="https://debezium.zulipchat.com/#narrow/stream/302529-users">chat with us on Zulip</a>, or join our <a href="https://groups.google.com/forum/#!forum/debezium">mailing list</a> to talk with the community. All of the code is open source <a href="https://github.com/debezium/">on GitHub</a>, so build the code locally and help us improve ours existing connectors and add even more connectors. If you find problems or have ideas how we can improve Debezium, please let us know or <a href="https://issues.redhat.com/projects/DBZ/issues/">log an issue</a>. </p> </div> </div> <div id="disqus_thread"></div> <script>var disqus_config=function(){this.page.url="https://debezium.io/blog/2023/10/19/Debezium-Operator-Takes-off-to-the-Clouds/",this.page.identifier="https://debezium.io/blog/2023/10/19/Debezium-Operator-Takes-off-to-the-Clouds/"};!function(){var e=document,t=e.createElement("script");t.src="https://Debezium.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}();</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> </div> </div> <footer class="container"> <div> <div class="row mr-0 ml-0"> <div class="col-md-5 col-md-offset-1"> <h4>Debezium</h4> <p> &#169; 2024 Debezium Community <br/> <br/> <i class="icon-fire"></i> Mixed with <a href="https://getbootstrap.com/">Bootstrap</a>, baked by <a href="https://jekyllrb.com/">Jekyll</a>. <br/> <i class="icon-flag"></i> Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>. <br/> <i class="icon-flag-alt"></i> Code released under <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>. <br/> <i class="icon-file-alt"></i> <a href="https://www.redhat.com/legal/legal_statement.html" title="Terms">Terms</a> | <a href="https://www.redhat.com/legal/privacy_statement.html" title="Privacy Policy">Privacy</a> </p> <p>Rev: <a target="_blank" href="https://github.com/debezium/debezium.github.io/commit/8ac89c2305b6242fa14d5323b027884ffaded65e">8ac89c2</a> </p> </div> <div class="col-md-3"> <h4>Documentation</h4> <ul class="list-unstyled"> <li><a href="/documentation/reference/stable/features.html" title="Features">Features</a></li> <li> <a href="/documentation/reference/stable/install.html" title="Install">Install</a> </li> <li> <a href="/documentation/reference/stable/architecture.html" title="Architecture">Architecture</a> </li> <li><a href="/documentation/faq/" title="FAQ">FAQ</a></li> <li> <a href="/community/contribute/" title="Contribute">Contribute</a> </li> </ul> </div> <div class="col-md-3"> <h4>Connect</h4> <ul class="list-unstyled"> <li><a href="/blog" title="Blog">Blog</a></li> <li> <a href="https://twitter.com/debezium" title="Twitter">Twitter</a> </li> <li><a href="https://github.com/debezium" title="GitHub">GitHub</a></li> <li><a href="https://debezium.zulipchat.com/#narrow/stream/302529-users" title="Chat">Chat</a></li> <li> <a href="https://groups.google.com/forum/#!forum/debezium" title="Google Groups">Google Groups</a> </li> <li> <a href="https://stackoverflow.com/questions/tagged/debezium" title="StackOverflow">StackOverflow</a> </li> </ul> </div> </div> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <a href="https://www.redhat.com/"> <img src="/assets/images/Logo-Red_Hat-Sponsored_By-B-Standard-RGB.svg"/> </a> </div> </div> </div> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-76464546-1"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-76464546-1");</script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> <script type="text/javascript" src="/assets/javascript/vanilla-back-to-top.min.js"></script> <script type="text/javascript" src="/assets/javascript/highlight.min.js"></script> <script>addBackToTop({scrollDuration:400}),hljs.initHighlightingOnLoad();</script> </body> </html>