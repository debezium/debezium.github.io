<!DOCTYPE html> <html> <head> <title>Debezium 2.2.0.Alpha1 Released</title> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="description" content="Debezium is an open source distributed platform for change data capture. Start it up, point it at your databases, and your apps can start responding to all of the inserts, updates, and deletes that other apps commit to your databases. Debezium is durable and fast, so your apps can respond quickly and never miss an event, even when things go wrong."> <meta content="Debezium" property="og:site_name"> <meta content="Debezium 2.2.0.Alpha1 Released" property="og:title"> <meta content="https://debezium.io/assets/images/color_black_debezium_type_1200px.png" property="og:image" name="image"> <meta property="og:description" content="Debezium is an open source distributed platform for change data capture. Start it up, point it at your databases, and your apps can start responding to all of the inserts, updates, and deletes that other apps commit to your databases. Debezium is durable and fast, so your apps can respond quickly and never miss an event, even when things go wrong."> <meta property="og:url" content="https://debezium.io/blog/2023/01/19/debezium-2-2-alpha1-released/"> <meta name="twitter:site" content="@debezium"> <meta name="twitter:title" content="Debezium 2.2.0.Alpha1 Released"> <meta name="twitter:creator" content="@ccranfor"> <meta name="twitter:description" content="Debezium is an open source distributed platform for change data capture. Start it up, point it at your databases, and your apps can start responding to all of the inserts, updates, and deletes that other apps commit to your databases. Debezium is durable and fast, so your apps can respond quickly and never miss an event, even when things go wrong."> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="https://debezium.io/assets/images/color_black_debezium_type_1200px.png"> <meta property="twitter:url" content="https://debezium.io/blog/2023/01/19/debezium-2-2-alpha1-released/"> <link rel="alternate" type="application/rss+xml" title="Debezium Blog" href="/blog.atom"> <link rel="shortcut icon" type="image/png" href="/favicon.ico"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css"/> <link rel="stylesheet" href="/assets/css/custom.css"/> <link rel="stylesheet" href="/assets/css/highlight.min.css"/> <link rel="stylesheet" href="/assets/css/coderay.css"/> </head> <body class="post"> <div id="rhbar"> <a class="jbdevlogo" href="https://developers.redhat.com"></a> <a class="rhlogo" href="https://www.redhat.com/"></a> </div> <div id> <div class="container" id="content"> <nav class="navbar navbar-inverse navbar-fix"> <div class="container-fluid"> <div class="navbar-header"> <button class="navbar-toggle collapsed border-0" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"><img class="project-logo" src="/assets/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 5px; margin-top: -5px;"></a> </div> <div class="collapse navbar-collapse collapsed" id="navigation"> <ul class="nav navbar-nav pull-right"> <li> <a href="/documentation/faq" class="">FAQ</a> </li> <li class="item"> <a href="/documentation/" class="">Documentation</a> </li> <li> <a href="/releases/" class="">Releases</a> </li> <li> <a href="/community/" class="">Community</a> </li> <li class="active"> <a href="/blog/" class="active">Blog</a> </li> </ul> </div> </div> </nav> <div class="row post-text-padding row-no-expand"> <div class="col-md-3"><div id="leftdocnav"> <div class="hidden-lg hidden-md hidden-sm"> <button class="navbar-toggle docssubmenu-toggle collapsed" data-target="#docssubmenu" data-toggle="collapse" style=" float: none; background-color: #656565; border-color: #656565; width: 100%; color: #fff; "> Navigation Menu </button> </div> <div class="collapse" id="docssubmenu"> <div class="doc-pills"> <ul class="nav nav-pills nav-stacked"> <li class="item"> <a href="/blog">Home</a> <div class="icon"><span class="icon-home"></span></div> </li> <li class="item"> <a href="/archives">Archive</a> <div class="icon"><span class="icon-arrow-down"></span></div> </li> <li class="item"> <a href="/blog.atom">Feed</a> <div class="icon"><span class="icon-rss"></span></div> </li> </ul> </div> <p></p> <div class="featured-posts"> <div id="#featured" style="margin-bottom: 4px; border-bottom: 1px solid #ccc; font-size: 115%; margin-left: 2px;">Featured Posts</div> <ul style="padding-inline-start: 22px;"> <li style="margin-bottom: 3px;"> <a href="/blog/2024/01/11/Debezium-and-TimescaleDB/" style="font-size: 95%;"> Debezium and TimescaleDB </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/12/20/JDBC-sink-connector-batch-support/" style="font-size: 95%;"> Streamlined Performance: Debezium JDBC connector batch support </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/10/19/Debezium-Operator-Takes-off-to-the-Clouds/" style="font-size: 95%;"> Debezium Operator Takes off to the Clouds </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/10/05/Debezium-JMX-signaling-and-notifications/" style="font-size: 95%;"> Debezium signaling and notifications - Part 3: JMX channel </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/09/23/flink-spark-online-learning/" style="font-size: 95%;"> Online machine learning with the data streams from the database </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/07/10/custom-http-signaling-notification/" style="font-size: 95%;"> Debezium signaling and notifications - Part 2: Customisation </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/06/27/Debezium-signaling-and-notifications/" style="font-size: 95%;"> Debezium signaling and notifications - Part 1 </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2023/05/02/tensorflow-mnist-classification/" style="font-size: 95%;"> Image classification with Debezium and TensorFlow </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2020/11/04/streaming-vitess-at-bolt/" style="font-size: 95%;"> Streaming Vitess at Bolt </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2020/02/10/event-sourcing-vs-cdc/" style="font-size: 95%;"> Distributed Data for Microservices — Event Sourcing vs. Change Data Capture </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2019/10/01/audit-logs-with-change-data-capture-and-stream-processing/" style="font-size: 95%;"> Building Audit Logs with Change Data Capture and Stream Processing </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2019/07/12/streaming-cassandra-at-wepay-part-1/" style="font-size: 95%;"> Streaming Cassandra at WePay - Part 1 </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2019/02/19/reliable-microservices-data-exchange-with-the-outbox-pattern/" style="font-size: 95%;"> Reliable Microservices Data Exchange With the Outbox Pattern </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/12/05/automating-cache-invalidation-with-change-data-capture/" style="font-size: 95%;"> Automating Cache Invalidation With Change Data Capture </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/09/20/materializing-aggregate-views-with-hibernate-and-debezium/" style="font-size: 95%;"> Materializing Aggregate Views With Hibernate and Debezium </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/07/19/advantages-of-log-based-change-data-capture/" style="font-size: 95%;"> Five Advantages of Log-Based Change Data Capture </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/03/08/creating-ddd-aggregates-with-debezium-and-kafka-streams/" style="font-size: 95%;"> Creating DDD aggregates with Debezium and Kafka Streams </a> </li> <li style="margin-bottom: 3px;"> <a href="/blog/2018/01/17/streaming-to-elasticsearch/" style="font-size: 95%;"> Streaming Data Changes from Your Database to Elasticsearch </a> </li> </ul> </div> <p></p> <p></p> <div class="cloud-tags"> <div id="tags" style="margin-bottom: 4px; border-bottom: 1px solid #ccc; font-size: 115%; margin-left: 2px;"> Tags </div> <div class="tag-cloud"> <span class="site-tag"> <a href="/tag/apache-kafka/" style="font-size: 82%"> apache kafka </a> </span> <span class="site-tag"> <a href="/tag/apache-kafka/" style="font-size: 94%"> apache kafka </a> </span> <span class="site-tag"> <a href="/tag/apicurio/" style="font-size: 82%"> apicurio </a> </span> <span class="site-tag"> <a href="/tag/avro/" style="font-size: 84%"> avro </a> </span> <span class="site-tag"> <a href="/tag/aws/" style="font-size: 82%"> aws </a> </span> <span class="site-tag"> <a href="/tag/batch/" style="font-size: 82%"> batch </a> </span> <span class="site-tag"> <a href="/tag/caassandra/" style="font-size: 86%"> caassandra </a> </span> <span class="site-tag"> <a href="/tag/camel/" style="font-size: 82%"> camel </a> </span> <span class="site-tag"> <a href="/tag/cassandra/" style="font-size: 270%"> cassandra </a> </span> <span class="site-tag"> <a href="/tag/cdc/" style="font-size: 82%"> cdc </a> </span> <span class="site-tag"> <a href="/tag/channels/" style="font-size: 82%"> channels </a> </span> <span class="site-tag"> <a href="/tag/community/" style="font-size: 124%"> community </a> </span> <span class="site-tag"> <a href="/tag/community-stories/" style="font-size: 84%"> community stories </a> </span> <span class="site-tag"> <a href="/tag/connectors/" style="font-size: 82%"> connectors </a> </span> <span class="site-tag"> <a href="/tag/containers/" style="font-size: 82%"> containers </a> </span> <span class="site-tag"> <a href="/tag/cqrs/" style="font-size: 84%"> cqrs </a> </span> <span class="site-tag"> <a href="/tag/custom/" style="font-size: 82%"> custom </a> </span> <span class="site-tag"> <a href="/tag/datalake/" style="font-size: 82%"> datalake </a> </span> <span class="site-tag"> <a href="/tag/db2/" style="font-size: 254%"> db2 </a> </span> <span class="site-tag"> <a href="/tag/ddd/" style="font-size: 82%"> ddd </a> </span> <span class="site-tag"> <a href="/tag/debezium/" style="font-size: 104%"> debezium </a> </span> <span class="site-tag"> <a href="/tag/debezium-server/" style="font-size: 92%"> debezium server </a> </span> <span class="site-tag"> <a href="/tag/debezium-ui/" style="font-size: 90%"> debezium ui </a> </span> <span class="site-tag"> <a href="/tag/deduplication/" style="font-size: 82%"> deduplication </a> </span> <span class="site-tag"> <a href="/tag/discussion/" style="font-size: 114%"> discussion </a> </span> <span class="site-tag"> <a href="/tag/docker/" style="font-size: 186%"> docker </a> </span> <span class="site-tag"> <a href="/tag/elasticsearch/" style="font-size: 82%"> elasticsearch </a> </span> <span class="site-tag"> <a href="/tag/event-sourcing/" style="font-size: 82%"> event sourcing </a> </span> <span class="site-tag"> <a href="/tag/exactly-once-semantics/" style="font-size: 82%"> exactly once semantics </a> </span> <span class="site-tag"> <a href="/tag/example/" style="font-size: 88%"> example </a> </span> <span class="site-tag"> <a href="/tag/examples/" style="font-size: 116%"> examples </a> </span> <span class="site-tag"> <a href="/tag/features/" style="font-size: 92%"> features </a> </span> <span class="site-tag"> <a href="/tag/fedora/" style="font-size: 82%"> fedora </a> </span> <span class="site-tag"> <a href="/tag/flink/" style="font-size: 82%"> flink </a> </span> <span class="site-tag"> <a href="/tag/hiring/" style="font-size: 84%"> hiring </a> </span> <span class="site-tag"> <a href="/tag/iceberg/" style="font-size: 82%"> iceberg </a> </span> <span class="site-tag"> <a href="/tag/informix/" style="font-size: 88%"> informix </a> </span> <span class="site-tag"> <a href="/tag/integration/" style="font-size: 86%"> integration </a> </span> <span class="site-tag"> <a href="/tag/introduction/" style="font-size: 84%"> introduction </a> </span> <span class="site-tag"> <a href="/tag/jaeger/" style="font-size: 82%"> jaeger </a> </span> <span class="site-tag"> <a href="/tag/jdbc/" style="font-size: 92%"> jdbc </a> </span> <span class="site-tag"> <a href="/tag/json/" style="font-size: 82%"> json </a> </span> <span class="site-tag"> <a href="/tag/kafka/" style="font-size: 94%"> kafka </a> </span> <span class="site-tag"> <a href="/tag/kafka-streams/" style="font-size: 82%"> kafka streams </a> </span> <span class="site-tag"> <a href="/tag/kafka-streams/" style="font-size: 86%"> kafka streams </a> </span> <span class="site-tag"> <a href="/tag/kogito/" style="font-size: 82%"> kogito </a> </span> <span class="site-tag"> <a href="/tag/ksql/" style="font-size: 82%"> ksql </a> </span> <span class="site-tag"> <a href="/tag/kubernetes/" style="font-size: 84%"> kubernetes </a> </span> <span class="site-tag"> <a href="/tag/lakehouse/" style="font-size: 82%"> lakehouse </a> </span> <span class="site-tag"> <a href="/tag/machine-learning/" style="font-size: 84%"> machine learning </a> </span> <span class="site-tag"> <a href="/tag/mariadb/" style="font-size: 90%"> mariadb </a> </span> <span class="site-tag"> <a href="/tag/microservices/" style="font-size: 84%"> microservices </a> </span> <span class="site-tag"> <a href="/tag/mongo/" style="font-size: 86%"> mongo </a> </span> <span class="site-tag"> <a href="/tag/mongodb/" style="font-size: 272%"> mongodb </a> </span> <span class="site-tag"> <a href="/tag/mysql/" style="font-size: 408%"> mysql </a> </span> <span class="site-tag"> <a href="/tag/news/" style="font-size: 112%"> news </a> </span> <span class="site-tag"> <a href="/tag/newsletter/" style="font-size: 88%"> newsletter </a> </span> <span class="site-tag"> <a href="/tag/notifications/" style="font-size: 86%"> notifications </a> </span> <span class="site-tag"> <a href="/tag/online-learning/" style="font-size: 82%"> online learning </a> </span> <span class="site-tag"> <a href="/tag/operator/" style="font-size: 82%"> operator </a> </span> <span class="site-tag"> <a href="/tag/oracle/" style="font-size: 304%"> oracle </a> </span> <span class="site-tag"> <a href="/tag/outbox/" style="font-size: 242%"> outbox </a> </span> <span class="site-tag"> <a href="/tag/performance/" style="font-size: 82%"> performance </a> </span> <span class="site-tag"> <a href="/tag/postgres/" style="font-size: 378%"> postgres </a> </span> <span class="site-tag"> <a href="/tag/presentation/" style="font-size: 84%"> presentation </a> </span> <span class="site-tag"> <a href="/tag/production/" style="font-size: 82%"> production </a> </span> <span class="site-tag"> <a href="/tag/quarkus/" style="font-size: 92%"> quarkus </a> </span> <span class="site-tag"> <a href="/tag/questdb/" style="font-size: 82%"> questdb </a> </span> <span class="site-tag"> <a href="/tag/rds/" style="font-size: 84%"> rds </a> </span> <span class="site-tag"> <a href="/tag/releases/" style="font-size: 390%"> releases </a> </span> <span class="site-tag"> <a href="/tag/schema/" style="font-size: 82%"> schema </a> </span> <span class="site-tag"> <a href="/tag/scylla/" style="font-size: 82%"> scylla </a> </span> <span class="site-tag"> <a href="/tag/secrets/" style="font-size: 82%"> secrets </a> </span> <span class="site-tag"> <a href="/tag/sentry/" style="font-size: 82%"> sentry </a> </span> <span class="site-tag"> <a href="/tag/serialization/" style="font-size: 82%"> serialization </a> </span> <span class="site-tag"> <a href="/tag/signaling/" style="font-size: 86%"> signaling </a> </span> <span class="site-tag"> <a href="/tag/smt/" style="font-size: 84%"> smt </a> </span> <span class="site-tag"> <a href="/tag/snapshots/" style="font-size: 84%"> snapshots </a> </span> <span class="site-tag"> <a href="/tag/spanner/" style="font-size: 130%"> spanner </a> </span> <span class="site-tag"> <a href="/tag/spark/" style="font-size: 82%"> spark </a> </span> <span class="site-tag"> <a href="/tag/sql/" style="font-size: 84%"> sql </a> </span> <span class="site-tag"> <a href="/tag/sqlserver/" style="font-size: 318%"> sqlserver </a> </span> <span class="site-tag"> <a href="/tag/tensorflow/" style="font-size: 82%"> tensorflow </a> </span> <span class="site-tag"> <a href="/tag/testcontainers/" style="font-size: 88%"> testcontainers </a> </span> <span class="site-tag"> <a href="/tag/tests/" style="font-size: 82%"> tests </a> </span> <span class="site-tag"> <a href="/tag/time-series/" style="font-size: 82%"> time series </a> </span> <span class="site-tag"> <a href="/tag/timescaledb/" style="font-size: 82%"> timescaledb </a> </span> <span class="site-tag"> <a href="/tag/topics/" style="font-size: 82%"> topics </a> </span> <span class="site-tag"> <a href="/tag/tracing/" style="font-size: 82%"> tracing </a> </span> <span class="site-tag"> <a href="/tag/transactions/" style="font-size: 82%"> transactions </a> </span> <span class="site-tag"> <a href="/tag/vagrant/" style="font-size: 82%"> vagrant </a> </span> <span class="site-tag"> <a href="/tag/vitess/" style="font-size: 234%"> vitess </a> </span> <span class="site-tag"> <a href="/tag/website/" style="font-size: 84%"> website </a> </span> </div> </div> </div> </div> </div> <div class="col-md-9"> <div class="post"> <div class="row" style="margin-left: 0; margin-right: 0; margin-bottom: 10px"> <div class="col-sm-12" style="padding-left: 0px"> <div style="display: table-cell; vertical-align: top"> <div style=" width: 72px; border: 1px solid #ccc; padding: 3px; display: inline-block; "> <img src="/assets/images/ccranfor.jpg" style="width: 64px;"> </div> </div> <div style="display: table-cell; vertical-align: top"> <div style="margin-left: 8px"> <span class="hidden-sm hidden-xs" style="font-size: 2.75rem; line-height: 1"> <a href="/blog/2023/01/19/debezium-2-2-alpha1-released/">Debezium 2.2.0.Alpha1 Released</a> </span> <span class="hidden-md hidden-lg" style="font-size: 2rem; line-height: 1"> <a href="/blog/2023/01/19/debezium-2-2-alpha1-released/">Debezium 2.2.0.Alpha1 Released</a> </span> <div class="byline" style="line-height: 1"> <em> January 19, 2023 by </em> <em> Chris Cranford </em> <div class="hidden-xs" style="margin-top: 5px"> <a class="label label-info hidden-sm hidden-xs" href="/tag/releases/">releases</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/mongodb/">mongodb</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/mysql/">mysql</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/postgres/">postgres</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/sqlserver/">sqlserver</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/cassandra/">cassandra</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/oracle/">oracle</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/db2/">db2</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/vitess/">vitess</a> <a class="label label-info hidden-sm hidden-xs" href="/tag/outbox/">outbox</a> </div> </div> </div> </div> </div> </div> <div class="grid__item width-12-12"><div class="paragraph"> <p>It&#8217;s my pleasure to announce not only the first release of the Debezium 2.2 series, but also the first release of Debezium in 2023, <strong>2.2.0.Alpha</strong>!</p> </div> <div class="paragraph"> <p>The Debezium 2.2.0.Alpha1 release includes some breaking changes, a number of bug fixes, and some noteworthy improvements and features, including but not limited to:</p> </div> <div class="ulist"> <ul> <li> <p>[Breaking Change] - <code>ZonedTimestamp</code> values will no longer truncate fractional seconds.</p> </li> <li> <p>[New] - Support ingesting changes from an Oracle logical stand-by database</p> </li> <li> <p>[New] - Support Amazon S3 buckets using the Debezium Storage API</p> </li> <li> <p>[New] - Support retrying database connections during connector start-up</p> </li> <li> <p>[New] - Debezium Server sink connector support for Apache RocketMQ and Infinispan</p> </li> </ul> </div> <div class="paragraph"> <p></p> </div> <div class="paragraph"> <p>Let&#8217;s take a few moments and dive into some of the features in more detail!</p> </div> <div class="sect1"> <h2 id="breaking_change">Breaking Change</h2> <div class="sectionbody"> <div class="paragraph"> <p>An edge case was reported in <a href="https://issues.redhat.com/browse/issues/DBZ-5996">DBZ-5996</a> where if a temporal column used <code>ZonedTimestamp</code> and if the column&#8217;s value had <code>0</code> micro or nanoseconds, rather than emitting the value as <code>2023-01-19T12:30:00.123000Z</code>, the value would be emitted in a truncated way as <code>2023-01-19T12:30:00.123Z</code>. This could lead to other issues with converters used in the event pipeline when the output from that column could be formatted inconsistently.</p> </div> <div class="paragraph"> <p>In order to remedy the edge case, the <code>ZonedTimestamp</code> implementation will now pad the fraction-based seconds value of the column&#8217;s value to the length/scale of the source database column. Using the example above of a <code>TIMESTAMP(6)</code> MySQL column type, the emitted value will now properly reflect a value of <code>2023-01-19T12:30:00.123000Z</code>.</p> </div> <div class="paragraph"> <p>While this change in behavior is likely to have minimal impact to most users, we wanted to bring attention to it in the event that you&#8217;ve perhaps used other means to handle this edge case in your pipelines. If you have, you should be able to rely on Debezium to emit the value consistently, even when the fraction-based seconds is <code>0</code>.</p> </div> </div> </div> <div class="sect1"> <h2 id="ingesting_changes_from_oracle_logical_stand_bys">Ingesting changes from Oracle logical stand-bys</h2> <div class="sectionbody"> <div class="paragraph"> <p>The Debezium for Oracle connector normally manages what is called a <em>flush table</em>, which is an internal table used to manage the flush cycles used by the Oracle Log Writer Buffer (LGWR) process. This flushing process requires that the user account the connector uses to have permission to create and write to this table. Logical stand-by databases often have more restrictive rules about data manipulation and may even be read-only, therefore, writing to the database is unfavorable or even not permissible.</p> </div> <div class="paragraph"> <p>To support an Oracle read-only logical stand-by database, we introduced a flag to disable the creation and management of this <em>flush table</em>. This feature can be used with both Oracle Standalone and Oracle RAC installations, and is currently considered incubating, meaning its subject to change in the future.</p> </div> <div class="paragraph"> <p>In order to enable Oracle read-only logical stand-by support, add the following connector option:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="properties">internal.log.mining.read.only=true</code></pre> </div> </div> <div class="paragraph"> <p>In a future version, we plan to add support for an Oracle read-only physical stand-by database.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> <div class="paragraph"> <p>This configuration option is prefixed with <code>internal.</code>, meaning that it&#8217;s considered an undocumented and experimental feature. The semantics and behavior of this option are subject to change in future versions that may not be guaranteed forward or backward compatible.</p> </div> </td> </tr> </table> </div> </div> </div> <div class="sect1"> <h2 id="using_amazon_s3_buckets_with_storage_api">Using Amazon S3 buckets with Storage API</h2> <div class="sectionbody"> <div class="paragraph"> <p>Debezium provides a Storage API framework that enables connectors to store offset and schema history state in a variety of persistence datastores. Moreover, the framework enables contributors to extend the API by adding new storage implementations with ease. Currently, the Storage API framework supports the local FileSystem, a Kafka Topic, or Redis datastores.</p> </div> <div class="paragraph"> <p>With Debezium 2.2, we&#8217;re pleased to add Amazon S3 buckets as part of that framework, allowing the schema history to be persisted to an S3 bucket. An example connector configuration using S3 might look like the following:</p> </div> <div class="listingblock properties"> <div class="content"> <pre class="CodeRay highlight"><code>...
schema.history.internal=io.debezium.storage.s3.history
schema.history.internal.s3.access.key.id=aa
schema.history.internal.s3.secret.access.key=bb
schema.history.internal.s3.region.name=aws-global
schema.history.internal.s3.bucket.name=debezium
schema.history.internal.s3.object.name=db-history.log
schema.history.internal.s3.endpoint=http://&lt;server&gt;:&lt;port&gt;</code></pre> </div> </div> <div class="dlist"> <dl> <dt class="hdlist1"><code>schema.history.internal.s3.access.key.id</code></dt> <dd> <p>Specifies the access key required to authenticate to S3.</p> </dd> <dt class="hdlist1"><code>schema.history.internal.s3.secret.access.key</code></dt> <dd> <p>Specifies the secret access key required to authenticate to S3.</p> </dd> <dt class="hdlist1"><code>schema.history.internal.s3.region.name</code></dt> <dd> <p>Specifies the region where the S3 bucket is available.</p> </dd> <dt class="hdlist1"><code>schema.history.internal.s3.bucket.name</code></dt> <dd> <p>Specifies the name of the S3 bucket where the schema history is to be persisted.</p> </dd> <dt class="hdlist1"><code>schema.history.internal.s3.object.name</code></dt> <dd> <p>Specifies the object name in the bucket where the schema history is to be persisted.</p> </dd> <dt class="hdlist1"><code>schema.history.internal.s3.endpoint</code></dt> <dd> <p>Specifies the S3 endpoint with the format of <code><a href="http://&lt;server&gt;:&lt;port&gt" class="bare">http://&lt;server&gt;:&lt;port&gt</a>;</code>.</p> </dd> </dl> </div> </div> </div> <div class="sect1"> <h2 id="retry_database_connections_on_start_up">Retry database connections on start-up</h2> <div class="sectionbody"> <div class="paragraph"> <p>In previous releases of Debezium, the connector start-up phase used a fail-fast strategy. Simply put, this meant that if we couldn&#8217;t connect, authenticate, or performs any of the start-up phase steps required by the connector, the connector would enter a <code>FAILED</code> state.</p> </div> <div class="paragraph"> <p>One specific problem area for users is if the connector gracefully starts, runs for a period of time, and then eventually encounters some fatal error. If the error is related to a resource that wasn&#8217;t accessed during the connector&#8217;s start-up lifecycle, the connector would typically gracefully restart just fine. However, the situation is different if the problem was related to the database&#8217;s availability and the database was still unavailable during the connector&#8217;s start-up phase. In this situation, the connector would fail-fast, and would enter a <code>FAILED</code> state, requiring manual intervention.</p> </div> <div class="paragraph"> <p>The fail-fast approach served Debezium well over the years, but in a world where a resource can come and go without warning, it became clear that changes were needed to improve Debezium&#8217;s reliability and resiliency. While the Kafka Connect&#8217;s retry/back-off framework has helped in this regard, that doesn&#8217;t address the concerns with start-up resources being unavailable with how the code is currently written.</p> </div> <div class="paragraph"> <p>Debezium 2.2 changes this landscape, shifting how we integrate with Kafka Connect&#8217;s source connector API slightly. Instead of accessing potentially unavailable resources during the start-up lifecycle, we moved that access to a later phase in the connector&#8217;s lifecycle. In effect, the Debezium start-up code is executed lazily that accesses potentially unavailable resources, which allows us to take advantage of the Kafka Connect retry/back-off framework even during our start-up code. In short, if the database is still unavailable during the connector&#8217;s start-up, the connector will continue to retry/back-off if Kafka Connect retries are enabled. Only once the maximum number of retry attempts has been reached or a non-retriable error occurs will the connector task enter a <code>FAILED</code> state.</p> </div> <div class="paragraph"> <p>We hope this brings more reliability and resiliency for the Debezium experience, improving how errors are handled in an ever-changing landscape, and provides a solid foundation to manage connector lifecycles.</p> </div> </div> </div> <div class="sect1"> <h2 id="rocketmq_and_infinispan_support_in_debezium_server">RocketMQ and Infinispan support in Debezium Server</h2> <div class="sectionbody"> <div class="paragraph"> <p>Debezium Server is a Quarkus-based framework that allows executing a Debezium connector from the command line, without Kafka or Kafka Connect, allowing the delivery of Debezium change events to any destination framework. With Debezium 2.2, two new sink connectors have been added to Debezium Server to support sending change events to Apache RocketMQ and to Infinispan.</p> </div> <div class="sect2"> <h3 id="rocketmq">RocketMQ</h3> <div class="paragraph"> <p><a href="https://rocketmq.apache.org">Apache RocketMQ</a> is a cloud-native messaging, eventing, and streaming real-time data processing platform that covers cloud-edge-device collaboration scenarios. In order to integrate Debezium Server with RocketMQ, the Debezium Server <code>application.properties</code> must be modified to include the following entries:</p> </div> <div class="listingblock"> <div class="title">application.properties</div> <div class="content"> <pre class="CodeRay highlight"><code data-lang="properties">debezium.sink.type=rocketmq
debezium.sink.rocketmq.producer.name.srv.addr=&lt;hostname&gt;:&lt;port&gt;
debezium.sink.rocketmq.producer.group=debezuim-group
debezium.sink.rocketmq.producer.max.message.size=4194304
debezium.sink.rocketmq.producer.send.msg.timeout=3000
debezium.sink.rocketmq.producer.acl.enabled=false
debezium.sink.rocketmq.producer.access.key=&lt;access-key&gt;
debezium.sink.rocketmq.producer.secret.key=&lt;secret-key&gt;</code></pre> </div> </div> <div class="paragraph"> <p>The above configuration specifies that the sink type to be used is <code>rocketmq</code>, which enables the use of the RocketMQ module. The following is a description of each of the properties shown above:</p> </div> <div class="dlist"> <dl> <dt class="hdlist1"><code>debezium.sink.rocketmq.producer.name.srv.addr</code></dt> <dd> <p>Specifies the host and port where Apache RocketMQ is available.</p> </dd> <dt class="hdlist1"><code>debezium.sink.rocketmq.producer.group</code></dt> <dd> <p>Specifies the name associated with the Apache RocketMQ producer group.</p> </dd> <dt class="hdlist1"><code>debezium.sink.rocketmq.producer.max.message.size</code></dt> <dd> <p>(Optional) Specifies the maximum number of bytes a message can be. Defaults to <code>4193404</code> (4MB).</p> </dd> <dt class="hdlist1"><code>debezium.sink.rocketmq.producer.send.msg.timeout</code></dt> <dd> <p>(Optional) Specifies the timeout in milliseconds when sending messages. Defaults to <code>3000</code> (3 seconds).</p> </dd> <dt class="hdlist1"><code>debezium.sink.rocketmq.producer.acl.enabled</code></dt> <dd> <p>(Optional) Controls whether access control lists are enabled. Defaults to <code>false</code>.</p> </dd> <dt class="hdlist1"><code>debezium.sink.rocketmq.producer.access.key</code></dt> <dd> <p>(Optional) The access key used for connecting to the Apache RocketMQ cluster.</p> </dd> <dt class="hdlist1"><code>debezium.sink.rocketmq.producer.secret.key</code></dt> <dd> <p>(Optional) The access secret used for connecting to the Apache RocketMQ cluster.</p> </dd> </dl> </div> <div class="paragraph"> <p>For more information on using Debezium Server with RocketMQ, see the <a href="/documentation/reference/2.2/operations/debezium-server.html#_apache_rocketmq">documentation</a>.</p> </div> </div> <div class="sect2"> <h3 id="infinispan">Infinispan</h3> <div class="paragraph"> <p><a href="https://infinispan.org">Infinispan</a> is an in-memory, distributed data store that offers flexible deployment options with robust capabilities to store, manage, and process data. Infinispan is based on the notion of a key-value store that allows storing any data type. In order to integrate Debezium Server with Infinispan, the Debezium Server <code>application.properties</code> must be modified to include the following entries:</p> </div> <div class="listingblock"> <div class="title">application.properties</div> <div class="content"> <pre class="CodeRay highlight"><code data-lang="properties">debezium.sink.type=infinispan
debezium.sink.infinispan.server.host=&lt;hostname&gt;
debezium.sink.infinispan.server.port=&lt;port&gt;
debezium.sink.infinispan.cache=&lt;cache-name&gt;
debezium.sink.infinispan.user=&lt;user&gt;
debezium.sink.infinispan.password=&lt;password&gt;</code></pre> </div> </div> <div class="paragraph"> <p>The above configuration specifies that the sink type to be used is <code>infinispan</code>, which enables the use of the Infinispan module. The following is a description of each of the properties shown above:</p> </div> <div class="dlist"> <dl> <dt class="hdlist1"><code>debezium.sink.infinispan.server.host</code></dt> <dd> <p>Specifies the host name of one of the servers in the Infinispan cluster. This configuration option can also supply a comma-separated list of hostnames as well, such as <code>hostname1,hostname2</code>.</p> </dd> <dt class="hdlist1"><code>debezium.sink.infinispan.server.port</code></dt> <dd> <p>Specifies the port of the Infinispan cluster. Defaults to <code>11222</code>.</p> </dd> <dt class="hdlist1"><code>debezium.sink.infinispan.cache</code></dt> <dd> <p>Specifies the name of the Infinispan cache to write change events.</p> </dd> </dl> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> <div class="paragraph"> <p>The Infinispan sink requires that the cache be created manually ahead of time. This enables the ability to create the cache with any variable configuration needed to fit your requirements.</p> </div> </td> </tr> </table> </div> <div class="dlist"> <dl> <dt class="hdlist1"><code>debezium.sink.infinispan.user</code></dt> <dd> <p>An optional configuration to specify the user to authenticate with, if authentication is required.</p> </dd> <dt class="hdlist1"><code>debezium.sink.infinispan.password</code></dt> <dd> <p>An optional configuration to specify the password for the authenticating user, if authentication is required.</p> </dd> </dl> </div> <div class="paragraph"> <p>For more information on using Debezium Server with Infinispan, see the <a href="/documentation/reference/2.2/operations/debezium-server.html#_infinispan">documentation</a>.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="other_fixes">Other fixes</h2> <div class="sectionbody"> <div class="paragraph"> <p>There were quite a number of bugfixes and stability changes in this release, some noteworthy are:</p> </div> <div class="ulist"> <ul> <li> <p>Remove option for specifying driver class from MySQL Connector <a href="https://issues.redhat.com/browse/DBZ-4663">DBZ-4663</a></p> </li> <li> <p>Debezium is not working with Apicurio and custom truststores <a href="https://issues.redhat.com/browse/DBZ-5282">DBZ-5282</a></p> </li> <li> <p>Show/Hide password does not work on Connectors View details screen <a href="https://issues.redhat.com/browse/DBZ-5322">DBZ-5322</a></p> </li> <li> <p>Oracle cannot undo change <a href="https://issues.redhat.com/browse/DBZ-5907">DBZ-5907</a></p> </li> <li> <p>Postgresql Data Loss on restarts <a href="https://issues.redhat.com/browse/DBZ-5915">DBZ-5915</a></p> </li> <li> <p>Add support for Connect Headers to Debezium Server <a href="https://issues.redhat.com/browse/DBZ-5926">DBZ-5926</a></p> </li> <li> <p>Oracle Multithreading lost data <a href="https://issues.redhat.com/browse/DBZ-5945">DBZ-5945</a></p> </li> <li> <p>Spanner connector is missing JSR-310 dependency <a href="https://issues.redhat.com/browse/DBZ-5959">DBZ-5959</a></p> </li> <li> <p>Truncate records incompatible with ExtractNewRecordState <a href="https://issues.redhat.com/browse/DBZ-5966">DBZ-5966</a></p> </li> <li> <p>Computed partition must not be negative <a href="https://issues.redhat.com/browse/DBZ-5967">DBZ-5967</a></p> </li> <li> <p>Table size log message for snapshot.select.statement.overrides tables not correct <a href="https://issues.redhat.com/browse/DBZ-5985">DBZ-5985</a></p> </li> <li> <p>NPE in execute snapshot signal with exclude.tables config on giving wrong table name <a href="https://issues.redhat.com/browse/DBZ-5988">DBZ-5988</a></p> </li> <li> <p>There is a problem with postgresql connector parsing the boundary value of money type <a href="https://issues.redhat.com/browse/DBZ-5991">DBZ-5991</a></p> </li> <li> <p>Log statement for unparseable DDL statement in MySqlDatabaseSchema contains placeholder <a href="https://issues.redhat.com/browse/DBZ-5993">DBZ-5993</a></p> </li> <li> <p>Postgresql connector parses the null of the money type into 0 <a href="https://issues.redhat.com/browse/DBZ-6001">DBZ-6001</a></p> </li> <li> <p>Postgres LSN check should honor event.processing.failure.handling.mode <a href="https://issues.redhat.com/browse/DBZ-6012">DBZ-6012</a></p> </li> </ul> </div> <div class="paragraph"> <p>Altogether, <a href="https://issues.redhat.com/issues/?jql=project%20%3D%20DBZ%20AND%20fixVersion%20%3D%202.2.0.Alpha1%20ORDER%20BY%20component%20ASC">42 issues</a> were fixed for this release. A big thank you to all the contributors from the community who worked on this release: Akshansh Jain, Gabor, <a href="https://github.com/adasari">Anil Dasari</a>, <a href="https://github.com/akanimesh7">Animesh Kumar</a>, <a href="https://github.com/ani-sha">Anisha Mohanty</a>, <a href="https://github.com/roldanbob">Bob Roldan</a>, <a href="https://github.com/Naros">Chris Cranford</a>, <a href="https://github.com/erdinctaskin">Erdinç Taşkın</a>, <a href="https://github.com/govi20">Govinda Sakhare</a>, <a href="https://github.com/harveyyue">Harvey Yue</a>, <a href="https://github.com/blcksrx">Hossein Torabi</a>, <a href="https://github.com/indraraj">Indra Shukla</a>, <a href="https://github.com/jakzal">Jakub Zalas</a>, <a href="https://github.com/jeremy-l-ford">Jeremy Ford</a>, <a href="https://github.com/jpechane">Jiri Pechanec</a>, <a href="https://github.com/joschi">Jochen Schalanda</a>, <a href="https://github.com/Lucascanna">Luca Scannapieco</a>, <a href="https://github.com/mfvitale">Mario Fiore Vitale</a>, <a href="https://github.com/dude0001">Mark Lambert</a>, <a href="https://github.com/rajdangwal">Rajendra Dangwal</a>, <a href="https://github.com/sunxiaojian">Sun Xiao Jian</a>, <a href="https://github.com/vjuranek">Vojtech Juranek</a>, <a href="https://github.com/yoheimuta">Yohei Yoshimuta</a>, and <a href="https://github.com/yoheimuta">yohei yoshimuta</a>!</p> </div> </div> </div> <div class="sect1"> <h2 id="whats_next">What&#8217;s Next?</h2> <div class="sectionbody"> <div class="paragraph"> <p>As the road to Debezium 2.2 is just starting, this initial release covers quite a lot of the features we&#8217;ve outlined our recent 2023 <a href="#/roadmap">road map</a> update. However, there are still a number of features that are still in active development, which include:</p> </div> <div class="ulist"> <ul> <li> <p>Configurable signal channels, enabling users to send signals not only from a database table or a Kafka topic, but also from other means such as an HTTP endpoint, the file system, etc.</p> </li> <li> <p>The Debezium JDBC sink connector that supports native Debezium change events out-of-the-box, without requiring the use of the Event Flattening transformation.</p> </li> <li> <p>A new single message transformation, <code>ExtractChangedRecordState</code>, that supports adding headers to the emitted event that describes that fields were changed or unchanged by the source event.</p> </li> <li> <p>And a plethora of enhancements to Debezium&#8217;s UI</p> </li> </ul> </div> <div class="paragraph"> <p>As we continue development on Debezium 2.2 and bugfixes to Debezium 2.1, we would love to hear your feedback or suggestions, whether it&#8217;s regarding our road map, the changes in this release, or something you&#8217;d like to see that we haven&#8217;t mentioned. Be sure to get in touch with us on the <a href="https://groups.google.com/g/debezium">mailing list</a> or our <a href="https://debezium.zulipchat.com/login/#narrow/stream/302529-users">chat</a> if there is. Or if you just want to stop by and give us a "Hello", we&#8217;d welcome that too.</p> </div> <div class="paragraph"> <p>Until next time&#8230;&#8203;</p> </div> </div> </div></div> </div> <div class="well"> <div class="row"> <div class="col-md-8"> <h2>Chris Cranford</h2> <p> <span class="bio-size">Chris is a software engineer at Red Hat. He previously was a member of the Hibernate ORM team and now works on Debezium. He lives in North Carolina just a few hours from Red Hat towers.</span> </p> <p class="bio-size"> <a href="https://github.com/naros"> <i class="icon-github"></i> </a> &nbsp; <a href="https://www.linkedin.com/in/crancran"> <i class="icon-linkedin"></i> </a> &nbsp; </p> </div> <div class="col-md-4"> <img alt="" class="img-responsive pull-right portrait" src="/assets/images/ccranfor.jpg"/> </div> </div> </div> <ul class="pager pager-blog"> <li class="previous"> <a href="/blog/2023/01/06/change-data-capture-with-questdb-and-debezium/" class="previous"> &laquo; Previous</a> </li> <li class="next"><a href="/blog/2023/01/24/we-are-hiring-2/">Next &raquo; </a></li> </ul> <div class="row"> <div class="col-md-12"> <hr> <h2>About Debezium</h2> <p> Debezium is an open source distributed platform that turns your existing databases into event streams, so applications can see and respond almost instantly to each committed row-level change in the databases. Debezium is built on top of <a href="http://kafka.apache.org/">Kafka</a> and provides <a href="http://kafka.apache.org/documentation.html#connect">Kafka Connect</a> compatible connectors that monitor specific database management systems. Debezium records the history of data changes in Kafka logs, so your application can be stopped and restarted at any time and can easily consume all of the events it missed while it was not running, ensuring that all events are processed correctly and completely. Debezium is <a href="/license/">open source</a> under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>. </p> </div> </div> <div class="row"> <div class="col-md-12"> <h2>Get involved</h2> <p> We hope you find Debezium interesting and useful, and want to give it a try. Follow us on Twitter <a href="https://twitter.com/debezium">@debezium</a>, <a href="https://debezium.zulipchat.com/#narrow/stream/302529-users">chat with us on Zulip</a>, or join our <a href="https://groups.google.com/forum/#!forum/debezium">mailing list</a> to talk with the community. All of the code is open source <a href="https://github.com/debezium/">on GitHub</a>, so build the code locally and help us improve ours existing connectors and add even more connectors. If you find problems or have ideas how we can improve Debezium, please let us know or <a href="https://issues.redhat.com/projects/DBZ/issues/">log an issue</a>. </p> </div> </div> <div id="disqus_thread"></div> <script>var disqus_config=function(){this.page.url="https://debezium.io/blog/2023/01/19/debezium-2-2-alpha1-released/",this.page.identifier="https://debezium.io/blog/2023/01/19/debezium-2-2-alpha1-released/"};!function(){var e=document,t=e.createElement("script");t.src="https://Debezium.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}();</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> </div> </div> <footer class="container"> <div> <div class="row mr-0 ml-0"> <div class="col-md-5 col-md-offset-1"> <h4>Debezium</h4> <p> &#169; 2024 Debezium Community <br/> <br/> <i class="icon-fire"></i> Mixed with <a href="https://getbootstrap.com/">Bootstrap</a>, baked by <a href="https://jekyllrb.com/">Jekyll</a>. <br/> <i class="icon-flag"></i> Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>. <br/> <i class="icon-flag-alt"></i> Code released under <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>. <br/> <i class="icon-file-alt"></i> <a href="https://www.redhat.com/legal/legal_statement.html" title="Terms">Terms</a> | <a href="https://www.redhat.com/legal/privacy_statement.html" title="Privacy Policy">Privacy</a> </p> <p>Rev: <a target="_blank" href="https://github.com/debezium/debezium.github.io/commit/63cccab0b143f4e62d4ebb5ca764602d57399ede">63cccab</a> </p> </div> <div class="col-md-3"> <h4>Documentation</h4> <ul class="list-unstyled"> <li><a href="/documentation/reference/stable/features.html" title="Features">Features</a></li> <li> <a href="/documentation/reference/stable/install.html" title="Install">Install</a> </li> <li> <a href="/documentation/reference/stable/architecture.html" title="Architecture">Architecture</a> </li> <li><a href="/documentation/faq/" title="FAQ">FAQ</a></li> <li> <a href="/community/contribute/" title="Contribute">Contribute</a> </li> </ul> </div> <div class="col-md-3"> <h4>Connect</h4> <ul class="list-unstyled"> <li><a href="/blog" title="Blog">Blog</a></li> <li> <a href="https://twitter.com/debezium" title="Twitter">Twitter</a> </li> <li><a href="https://github.com/debezium" title="GitHub">GitHub</a></li> <li><a href="https://debezium.zulipchat.com/#narrow/stream/302529-users" title="Chat">Chat</a></li> <li> <a href="https://groups.google.com/forum/#!forum/debezium" title="Google Groups">Google Groups</a> </li> <li> <a href="https://stackoverflow.com/questions/tagged/debezium" title="StackOverflow">StackOverflow</a> </li> </ul> </div> </div> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <a href="https://www.redhat.com/"> <img src="/assets/images/Logo-Red_Hat-Sponsored_By-B-Standard-RGB.svg"/> </a> </div> </div> </div> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-76464546-1"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-76464546-1");</script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> <script type="text/javascript" src="/assets/javascript/vanilla-back-to-top.min.js"></script> <script type="text/javascript" src="/assets/javascript/highlight.min.js"></script> <script>addBackToTop({scrollDuration:400}),hljs.initHighlightingOnLoad();</script> </body> </html>