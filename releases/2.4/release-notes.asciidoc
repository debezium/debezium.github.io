---
layout: release-notes
title: Release Notes for Debezium 2.4
debezium-version: "2.4"
---
:toc:
:toc-placement: macro
:toclevels: 1
:sectanchors:
:linkattrs:
:icons: font

All notable changes for Debezium releases are documented in this file.
Release numbers follow http://semver.org[Semantic Versioning].

toc::[]

[[release-2.4.1-final]]
== *Release 2.4.1.Final* _(November 16th 2023)_

See the https://issues.redhat.com/secure/ReleaseNote.jspa?projectId=12317320&version=12414496[complete list of issues].

=== Kafka compatibility

This release has been built against Kafka Connect 3.5.1 and has been tested with version 3.5.1 of the Kafka brokers.
See the https://kafka.apache.org/documentation/#upgrade[Kafka documentation] for compatibility with other versions of Kafka brokers.


=== Upgrading

Before upgrading any connector, be sure to check the backward-incompatible changes that have been made since the release you were using.

When you decide to upgrade one of these connectors to 2.4.1.Final from any earlier versions,
first check the migration notes for the version you're using.
Gracefully stop the running connector, remove the old plugin files, install the 2.4.1.Final plugin files, and restart the connector using the same configuration.
Upon restart, the 2.4.1.Final connectors will continue where the previous connector left off.
As one might expect, all change events previously written to Kafka by the old connector will not be modified.

If you are using our container images, then please do not forget to pull them fresh from https://quay.io/organization/debezium[Quay.io].


=== Breaking changes

There are no breaking changes in this release.


=== New features

* Provide capability to set image pull secrets in DS k8s CRD https://issues.redhat.com/browse/DBZ-6962[DBZ-6962]
* Add displayName and description metadata to DebeziumServer CRD in OLM Bundle https://issues.redhat.com/browse/DBZ-7011[DBZ-7011]
* Provide resources to set pod requests and limits in DS k8s CRD https://issues.redhat.com/browse/DBZ-7052[DBZ-7052]
* Provide svc to better collects dbz-server metrics  in DS k8s https://issues.redhat.com/browse/DBZ-7053[DBZ-7053]


=== Fixes

* Oracle RAC throws ORA-00310: archive log sequence required https://issues.redhat.com/browse/DBZ-5350[DBZ-5350]
* oracle missing CDC data https://issues.redhat.com/browse/DBZ-5656[DBZ-5656]
* Missing oracle cdc records https://issues.redhat.com/browse/DBZ-5750[DBZ-5750]
* Multiple debezium:offsets Redis clients https://issues.redhat.com/browse/DBZ-6952[DBZ-6952]
* Wrong case-behavior for non-avro column name in sink connector https://issues.redhat.com/browse/DBZ-6958[DBZ-6958]
* Missing events from Oracle 19c https://issues.redhat.com/browse/DBZ-6963[DBZ-6963]
* Handle properly bytea field for jdbc sink to postgresql https://issues.redhat.com/browse/DBZ-6967[DBZ-6967]
* Debezium jdbc sink process truncate event failure https://issues.redhat.com/browse/DBZ-6970[DBZ-6970]
* Debezium jdbc sink should throw not supporting schema change topic exception https://issues.redhat.com/browse/DBZ-6990[DBZ-6990]
* OLM bundle version for GA releases is invalid https://issues.redhat.com/browse/DBZ-6994[DBZ-6994]
* ALTER TABLE fails when adding multiple columns to JDBC sink target https://issues.redhat.com/browse/DBZ-6999[DBZ-6999]
* Invalid Link to zulip chat in CSV metadata https://issues.redhat.com/browse/DBZ-7000[DBZ-7000]
* Make sure to terminate the task once connectivity is lost to either the rebalance or sync topic https://issues.redhat.com/browse/DBZ-7001[DBZ-7001]
* Missing .metadata.annotations.repository field in CSV metadata https://issues.redhat.com/browse/DBZ-7003[DBZ-7003]
* Single quote replication and loss of data https://issues.redhat.com/browse/DBZ-7006[DBZ-7006]
* Oracle connector: Payload size over 76020 bytes are getting truncated https://issues.redhat.com/browse/DBZ-7018[DBZ-7018]
* DDL statement couldn't be parsed https://issues.redhat.com/browse/DBZ-7030[DBZ-7030]
* Debezium Embedded Infinispan Performs Slowly https://issues.redhat.com/browse/DBZ-7047[DBZ-7047]
* Field exclusion does not work with events of removed fields https://issues.redhat.com/browse/DBZ-7058[DBZ-7058]
* Debezium crashes on parsing MySQL DDL statement (specific INSERT) https://issues.redhat.com/browse/DBZ-7119[DBZ-7119]
* Debezium-ddl-parser crashes on parsing MySQL DDL statement (specific UNION) https://issues.redhat.com/browse/DBZ-7140[DBZ-7140]


=== Other changes

* Further refactoring to correct downstream rendering of incremental snapshots topics https://issues.redhat.com/browse/DBZ-6997[DBZ-6997]
* Use optional schema for Timezone Converter tests https://issues.redhat.com/browse/DBZ-7020[DBZ-7020]
* Update operator dependencies and add qosdk platform bom https://issues.redhat.com/browse/DBZ-7048[DBZ-7048]
* Consolidate resource labels and annotations https://issues.redhat.com/browse/DBZ-7064[DBZ-7064]
* Allow DS JMX to use username-password authentication on k8 https://issues.redhat.com/browse/DBZ-7087[DBZ-7087]



[[release-2.4.0-final]]
== *Release 2.4.0.Final* _(October 3rd 2023)_

See the https://issues.redhat.com/secure/ReleaseNote.jspa?projectId=12317320&version=12411356[complete list of issues].

=== Kafka compatibility

This release has been built against Kafka Connect 3.5.1 and has been tested with version 3.5.1 of the Kafka brokers.
See the https://kafka.apache.org/documentation/#upgrade[Kafka documentation] for compatibility with other versions of Kafka brokers.


=== Upgrading

Before upgrading any connector, be sure to check the backward-incompatible changes that have been made since the release you were using.

When you decide to upgrade one of these connectors to 2.4.0.Final from any earlier versions,
first check the migration notes for the version you're using.
Gracefully stop the running connector, remove the old plugin files, install the 2.4.0.Final plugin files, and restart the connector using the same configuration.
Upon restart, the 2.4.0.Final connectors will continue where the previous connector left off.
As one might expect, all change events previously written to Kafka by the old connector will not be modified.

If you are using our container images, then please do not forget to pull them fresh from https://quay.io/organization/debezium[Quay.io].


=== Breaking changes

There are no breaking changes in this release.


=== New features

* Add timestamp to Notification https://issues.redhat.com/browse/DBZ-6793[DBZ-6793]
* Documentation for cursor.oversize.skip.threshold is missing units https://issues.redhat.com/browse/DBZ-6968[DBZ-6968]
* Add MongoDB Connector support for `filtering.match.mode=regex|literal` property https://issues.redhat.com/browse/DBZ-6973[DBZ-6973]


=== Fixes

* Debezium Outbox not working with CloudEventsConverter https://issues.redhat.com/browse/DBZ-3642[DBZ-3642]
* Incremental snapshot data-collections are not deduplicated https://issues.redhat.com/browse/DBZ-6787[DBZ-6787]
* MongoDB connector no longer requires cluster-wide privileges https://issues.redhat.com/browse/DBZ-6888[DBZ-6888]
* Timezone Transformation can't work https://issues.redhat.com/browse/DBZ-6940[DBZ-6940]
* MySQL Kafka Signalling documentation is incorrect https://issues.redhat.com/browse/DBZ-6941[DBZ-6941]
* Infinite loop when using OR condition in additional-condition https://issues.redhat.com/browse/DBZ-6956[DBZ-6956]
* Filter out specified DDL events logic is reverted https://issues.redhat.com/browse/DBZ-6966[DBZ-6966]
* DDL parser does not support NOCOPY keyword https://issues.redhat.com/browse/DBZ-6971[DBZ-6971]
* Decrease time spent in handling rebalance events https://issues.redhat.com/browse/DBZ-6974[DBZ-6974]
* ParsingException (MySQL/MariaDB): User specification with whitespace https://issues.redhat.com/browse/DBZ-6978[DBZ-6978]
* RecordsStreamProducerIT#shouldReceiveChangesForInfinityNumericWithInfinity fails on Postgres < 14 https://issues.redhat.com/browse/DBZ-6986[DBZ-6986]
* PostgresConnectorIT#shouldAddNewFieldToSourceInfo may fail as the schema may not exists https://issues.redhat.com/browse/DBZ-6987[DBZ-6987]


=== Other changes

* Add option to use apicurio with TLS to system level testsuite https://issues.redhat.com/browse/DBZ-6954[DBZ-6954]



[[release-2.4.0-cr1]]
== *Release 2.4.0.CR1* _(September 22nd 2023)_

See the https://issues.redhat.com/secure/ReleaseNote.jspa?projectId=12317320&version=12413673[complete list of issues].

=== Kafka compatibility

This release has been built against Kafka Connect 3.5.1 and has been tested with version 3.5.1 of the Kafka brokers.
See the https://kafka.apache.org/documentation/#upgrade[Kafka documentation] for compatibility with other versions of Kafka brokers.


=== Upgrading

Before upgrading any connector, be sure to check the backward-incompatible changes that have been made since the release you were using.

When you decide to upgrade one of these connectors to 2.4.0.CR1 from any earlier versions,
first check the migration notes for the version you're using.
Gracefully stop the running connector, remove the old plugin files, install the 2.4.0.CR1 plugin files, and restart the connector using the same configuration.
Upon restart, the 2.4.0.CR1 connectors will continue where the previous connector left off.
As one might expect, all change events previously written to Kafka by the old connector will not be modified.

If you are using our container images, then please do not forget to pull them fresh from https://quay.io/organization/debezium[Quay.io].


=== Breaking changes

Vitess connector was retrying only a subset of errors by default.
This behaviour is changed and only explicitly defined errors are not retried (https://issues.redhat.com/browse/DBZ-6944[DBZ-6944]).



=== New features

* Update mongodb incremental snapshot to allow multiple threads reading chunks https://issues.redhat.com/browse/DBZ-6518[DBZ-6518]
* Support for GKE workload identities https://issues.redhat.com/browse/DBZ-6885[DBZ-6885]
* Support for PostgreSQL 16 https://issues.redhat.com/browse/DBZ-6911[DBZ-6911]
* Vitess connector should retry on not found errors https://issues.redhat.com/browse/DBZ-6939[DBZ-6939]


=== Fixes

* Ad-hoc blocking snaps trigger emits schema changes of all tables https://issues.redhat.com/browse/DBZ-6828[DBZ-6828]
* When the start_scn corresponding to the existence of a transaction in V$TRANSACTION is 0, log mining starts from the oldest scn when the oracle connector is started for the first time https://issues.redhat.com/browse/DBZ-6869[DBZ-6869]
* Ensure that the connector can handle rebalance events robustly https://issues.redhat.com/browse/DBZ-6870[DBZ-6870]
* OpenLogReplicator confirmation can resend or omit events on restarts https://issues.redhat.com/browse/DBZ-6895[DBZ-6895]
* ExtractNewRecordState's schema cache is not updated with arrival of the ddl change event https://issues.redhat.com/browse/DBZ-6901[DBZ-6901]
* Misleading Debezium error message when RDI port is not specified in application.properties https://issues.redhat.com/browse/DBZ-6902[DBZ-6902]
* Generting protobuf files to target/generated-sources breaks build https://issues.redhat.com/browse/DBZ-6903[DBZ-6903]
* Clean log printout in Redis Debezium Sink https://issues.redhat.com/browse/DBZ-6908[DBZ-6908]
* Values being omitted from list of JSON object https://issues.redhat.com/browse/DBZ-6910[DBZ-6910]
* fix logger named https://issues.redhat.com/browse/DBZ-6935[DBZ-6935]
* MySql connector get NPE when snapshot.mode is set to never and signal data collection configured https://issues.redhat.com/browse/DBZ-6937[DBZ-6937]
* Sanity check / retry for redo logs does not work per Oracle RAC thread https://issues.redhat.com/browse/DBZ-6938[DBZ-6938]
* Drop events has wrong table changes information https://issues.redhat.com/browse/DBZ-6945[DBZ-6945]
* Remove spaces from Signal and Notification MBean's ObjectName https://issues.redhat.com/browse/DBZ-6957[DBZ-6957]


=== Other changes

* Migrate all examples from mongodb.hosts to mongodb.connection.string https://issues.redhat.com/browse/DBZ-6893[DBZ-6893]



[[release-2.4.0-beta2]]
== *Release 2.4.0.Beta2* _(September 13rd 2023)_

See the https://issues.redhat.com/secure/ReleaseNote.jspa?projectId=12317320&version=12412109[complete list of issues].

=== Kafka compatibility

This release has been built against Kafka Connect 3.5.1 and has been tested with version 3.5.1 of the Kafka brokers.
See the https://kafka.apache.org/documentation/#upgrade[Kafka documentation] for compatibility with other versions of Kafka brokers.


=== Upgrading

Before upgrading any connector, be sure to check the backward-incompatible changes that have been made since the release you were using.

When you decide to upgrade one of these connectors to 2.4.0.Beta2 from any earlier versions,
first check the migration notes for the version you're using.
Gracefully stop the running connector, remove the old plugin files, install the 2.4.0.Beta2 plugin files, and restart the connector using the same configuration.
Upon restart, the 2.4.0.Beta2 connectors will continue where the previous connector left off.
As one might expect, all change events previously written to Kafka by the old connector will not be modified.

If you are using our container images, then please do not forget to pull them fresh from https://quay.io/organization/debezium[Quay.io].


=== Breaking changes

Deprecated MongoDB connection connfiguration via `mongodb.hosts` and  `mongodb.members.autodiscover` options was removed.
Only configuration via connection string is now supported (https://issues.redhat.com/browse/DBZ-6892[DBZ-6892]).


=== New features

* Ingest changes via OpenLogReplicator https://issues.redhat.com/browse/DBZ-2543[DBZ-2543]
* Only publish deltas instead of full snapshots to reduce size of sync event messages https://issues.redhat.com/browse/DBZ-6458[DBZ-6458]
* SMT for handling timezone conversions https://issues.redhat.com/browse/DBZ-6567[DBZ-6567]
* Support custom authentication on MongoDB connector https://issues.redhat.com/browse/DBZ-6741[DBZ-6741]
* Document `mongodb.authentication.class` https://issues.redhat.com/browse/DBZ-6788[DBZ-6788]
* Support truncating large columns https://issues.redhat.com/browse/DBZ-6844[DBZ-6844]
* Always reset VStream grpc channel when max size is exceeded https://issues.redhat.com/browse/DBZ-6852[DBZ-6852]
* Add an overview page for Connector detail https://issues.redhat.com/browse/DBZ-6856[DBZ-6856]
* Avoid getting NPE when executing the arrived method in ExecuteSnapshot https://issues.redhat.com/browse/DBZ-6865[DBZ-6865]
* Configurable order of user defined and internal aggregation pipeline  https://issues.redhat.com/browse/DBZ-6872[DBZ-6872]
* Add support for MongoDB 7 https://issues.redhat.com/browse/DBZ-6882[DBZ-6882]


=== Fixes

* Documentation content section in the debezium.io scroll over to the top header. https://issues.redhat.com/browse/DBZ-5942[DBZ-5942]
* Postgres - Incremental snapshot fails on tables with an enum type in the primary key https://issues.redhat.com/browse/DBZ-6481[DBZ-6481]
* schema.history.internal.store.only.captured.databases.ddl flag not considered while snapshot schema to history topic https://issues.redhat.com/browse/DBZ-6712[DBZ-6712]
* ExtractNewDocumentState for MongoDB ignore previous document state when handling delete event's with REWRITE https://issues.redhat.com/browse/DBZ-6725[DBZ-6725]
* MongoDB New Document State Extraction: original name overriding does not work https://issues.redhat.com/browse/DBZ-6773[DBZ-6773]
* Error with propagation source column name https://issues.redhat.com/browse/DBZ-6831[DBZ-6831]
* Kafka offset store fails with NPE https://issues.redhat.com/browse/DBZ-6853[DBZ-6853]
* JDBC Offset storage - configuration of table name does not work https://issues.redhat.com/browse/DBZ-6855[DBZ-6855]
* JDBC sink insert fails with Oracle target database due to semicolon https://issues.redhat.com/browse/DBZ-6857[DBZ-6857]
* Oracle test shouldContinueToUpdateOffsetsEvenWhenTableIsNotChanged fails with NPE https://issues.redhat.com/browse/DBZ-6860[DBZ-6860]
* Tombstone events causes NPE on JDBC connector https://issues.redhat.com/browse/DBZ-6862[DBZ-6862]
* Debezium-MySQL not filtering AWS RDS internal events https://issues.redhat.com/browse/DBZ-6864[DBZ-6864]
* errors.max.retries = 0 Causes retrievable error to be ignored https://issues.redhat.com/browse/DBZ-6866[DBZ-6866]
* Streaming aggregation pipeline broken for combination of database filter and signal collection https://issues.redhat.com/browse/DBZ-6867[DBZ-6867]
* ChangeStream aggregation pipeline fails on large documents which should be excluded https://issues.redhat.com/browse/DBZ-6871[DBZ-6871]
* Oracle alter table drop constraint fails when cascading index https://issues.redhat.com/browse/DBZ-6876[DBZ-6876]


=== Other changes

* Docs for Timezone SMT https://issues.redhat.com/browse/DBZ-6835[DBZ-6835]
* Write a blog post for custom properties step in DBZ UI https://issues.redhat.com/browse/DBZ-6838[DBZ-6838]
* Improve website/documentation artifact links https://issues.redhat.com/browse/DBZ-6850[DBZ-6850]
* Add possibility to add on-demand adjusted testing farm execution https://issues.redhat.com/browse/DBZ-6854[DBZ-6854]
* Oracle connector test suite logging no longer works https://issues.redhat.com/browse/DBZ-6859[DBZ-6859]
* Increase Oracle log level to DEBUG for several key important log messages https://issues.redhat.com/browse/DBZ-6880[DBZ-6880]
* Document cursor pipeline ordering and oversize document handling mode https://issues.redhat.com/browse/DBZ-6883[DBZ-6883]



[[release-2.4.0-beta1]]
== *Release 2.4.0.Beta1* _(August 29th 2023)_

See the https://issues.redhat.com/secure/ReleaseNote.jspa?projectId=12317320&version=12411390[complete list of issues].

=== Kafka compatibility

This release has been built against Kafka Connect 3.5.1 and has been tested with version 3.5.1 of the Kafka brokers.
See the https://kafka.apache.org/documentation/#upgrade[Kafka documentation] for compatibility with other versions of Kafka brokers.


=== Upgrading

Before upgrading any connector, be sure to check the backward-incompatible changes that have been made since the release you were using.

When you decide to upgrade one of these connectors to 2.4.0.Beta1 from any earlier versions,
first check the migration notes for the version you're using.
Gracefully stop the running connector, remove the old plugin files, install the 2.4.0.Beta1 plugin files, and restart the connector using the same configuration.
Upon restart, the 2.4.0.Beta1 connectors will continue where the previous connector left off.
As one might expect, all change events previously written to Kafka by the old connector will not be modified.

If you are using our container images, then please do not forget to pull them fresh from https://quay.io/organization/debezium[Quay.io].


=== Breaking changes

Oracle SCN metrics were exposed as strings.
This could prevent ceratin tools like JMX exporter from scraping them.
Debezium currently exposes them as numerc `BigInteger` (https://issues.redhat.com/browse/DBZ-6798[DBZ-6798]).



=== New features

* Provide by DDL type schema event filtering https://issues.redhat.com/browse/DBZ-6240[DBZ-6240]
* Add support for TimescaleDB https://issues.redhat.com/browse/DBZ-6482[DBZ-6482]
* Max transaction duration for Oracle connector https://issues.redhat.com/browse/DBZ-6615[DBZ-6615]
* Debezium 2.3.0.Final Missing Kafka Channel Documentation https://issues.redhat.com/browse/DBZ-6688[DBZ-6688]
* Make the Kafka channel consumer group ID configurable for the PostgreSQL connector https://issues.redhat.com/browse/DBZ-6689[DBZ-6689]
* Use JSON format for JMX Notification userData https://issues.redhat.com/browse/DBZ-6742[DBZ-6742]
* Use custom RowDeserializers in case of binlog compression https://issues.redhat.com/browse/DBZ-6786[DBZ-6786]
* Create a shardless topic naming strategy for vitess connector https://issues.redhat.com/browse/DBZ-6800[DBZ-6800]
* JDBC sink does not support SQL Server identity inserts  https://issues.redhat.com/browse/DBZ-6801[DBZ-6801]
* Allow the embedded infinispan global configuration to be configurable https://issues.redhat.com/browse/DBZ-6808[DBZ-6808]
* SqlServer connector send heartbeats when there is no change in the DB https://issues.redhat.com/browse/DBZ-6811[DBZ-6811]
* Make finished partition deletion delay configurable. https://issues.redhat.com/browse/DBZ-6814[DBZ-6814]
* Add vcs.xml for idea https://issues.redhat.com/browse/DBZ-6825[DBZ-6825]
* Make partial and multi-response transactions debug level logs https://issues.redhat.com/browse/DBZ-6830[DBZ-6830]


=== Fixes

* Debezium heartbeat.action.query does not start before writing to WAL. https://issues.redhat.com/browse/DBZ-6635[DBZ-6635]
* Schema name changed with Custom topic naming strategy https://issues.redhat.com/browse/DBZ-6641[DBZ-6641]
* Wrong behavior of quote.identifiers in JdbcSinkConnector https://issues.redhat.com/browse/DBZ-6682[DBZ-6682]
* Toasted UUID array is not properly processed https://issues.redhat.com/browse/DBZ-6720[DBZ-6720]
* Debezium crashes on parsing MySQL DDL statement (specific JOIN) https://issues.redhat.com/browse/DBZ-6724[DBZ-6724]
* When using pgoutput in postgres connector, (+/-)Infinity is not supported in decimal values https://issues.redhat.com/browse/DBZ-6758[DBZ-6758]
* Outbox transformation can cause connector to crash https://issues.redhat.com/browse/DBZ-6760[DBZ-6760]
* MongoDB New Document State Extraction: nonexistent field for add.headers https://issues.redhat.com/browse/DBZ-6774[DBZ-6774]
* Mongodb connector tests are massively failing when executed on 7.0-rc version https://issues.redhat.com/browse/DBZ-6779[DBZ-6779]
* Dbz crashes on parsing MySQL DDL statement (SELECT 1.;) https://issues.redhat.com/browse/DBZ-6780[DBZ-6780]
* Mysql connector tests are failing when executed without any profile https://issues.redhat.com/browse/DBZ-6791[DBZ-6791]
* Dbz crashed on parsing MySQL DDL statement (SELECT 1 + @sum:=1 AS ss;) https://issues.redhat.com/browse/DBZ-6794[DBZ-6794]
* MySQL DDL parser - REPEAT function not accepted https://issues.redhat.com/browse/DBZ-6803[DBZ-6803]
* Fix bug with getsnapshottingtask https://issues.redhat.com/browse/DBZ-6820[DBZ-6820]
* Dbz crashes on DDL statement (non Latin chars in variables) https://issues.redhat.com/browse/DBZ-6821[DBZ-6821]
* Not trim the default value for the BIGINT and SMALLINT types when parsing MySQL DDL https://issues.redhat.com/browse/DBZ-6824[DBZ-6824]
* PostgresConnectorIT#shouldAddNewFieldToSourceInfo fails randomly https://issues.redhat.com/browse/DBZ-6839[DBZ-6839]
* Wrong filtered comments https://issues.redhat.com/browse/DBZ-6840[DBZ-6840]
* Intermittend test failure: BaseSourceTaskTest.verifyTaskRestartsSuccessfully https://issues.redhat.com/browse/DBZ-6841[DBZ-6841]


=== Other changes

* Upstream documentation connector config is not unified https://issues.redhat.com/browse/DBZ-6704[DBZ-6704]
* Blocking snapshot must take snapshot configurations from signal https://issues.redhat.com/browse/DBZ-6731[DBZ-6731]
* Documentation Request - Property File Configuration - Off-Heap Event Buffering with Embedded Infinispan https://issues.redhat.com/browse/DBZ-6813[DBZ-6813]
* Onboard testing farm https://issues.redhat.com/browse/DBZ-6827[DBZ-6827]
* When using `skip.messages.without.change=true` a WARN log message is reported for each record https://issues.redhat.com/browse/DBZ-6843[DBZ-6843]



[[release-2.4.0-alpha2]]
== *Release 2.4.0.Alpha2* _(August 9th 2023)_

See the https://issues.redhat.com/secure/ReleaseNote.jspa?projectId=12317320&version=12410665[complete list of issues].

=== Kafka compatibility

This release has been built against Kafka Connect 3.5.1 and has been tested with version 3.5.1 of the Kafka brokers.
See the https://kafka.apache.org/documentation/#upgrade[Kafka documentation] for compatibility with other versions of Kafka brokers.


=== Upgrading

Before upgrading any connector, be sure to check the backward-incompatible changes that have been made since the release you were using.

When you decide to upgrade one of these connectors to 2.4.0.Alpha2 from any earlier versions,
first check the migration notes for the version you're using.
Gracefully stop the running connector, remove the old plugin files, install the 2.4.0.Alpha2 plugin files, and restart the connector using the same configuration.
Upon restart, the 2.4.0.Alpha2 connectors will continue where the previous connector left off.
As one might expect, all change events previously written to Kafka by the old connector will not be modified.

If you are using our container images, then please do not forget to pull them fresh from https://quay.io/organization/debezium[Quay.io].


=== Breaking changes

Debezium Server package provided only Cassandra 4 connector.
All connectors are now provided but an environment variable must be configured to select the one to use (https://issues.redhat.com/browse/DBZ-6638[DBZ-6638]).

MySQL did not set precision for `BIGINT` in precise mode.
The precision is now set which can lead to a schema incompatibility (https://issues.redhat.com/browse/DBZ-6714[DBZ-6714]).

Default value for default Oracle LogMiner query fetch size was increase to `10000` (https://issues.redhat.com/browse/DBZ-6729[DBZ-6729]).

Vitess connector mapped `_bin` collated string columns to binary data.
The columns are now correctly mapped to strings (https://issues.redhat.com/browse/DBZ-6748[DBZ-6748]).

Vitess connector previously applied schema changes across all shards.
The schema changes are now correctly applied for each shard individually (https://issues.redhat.com/browse/DBZ-6775[DBZ-6775]).
If you are using a `io.debezium.schema.DefaultTopicNamingStrategy` (or a derivative) then you should switch to `io.debezium.connector.vitess.TableTopicNamingStrategy` to preserve the same topics. Now the `DefaultTopicNamingStrategy` will route messages to topics based on which shard the change occurred in.


=== New features

* Switch tracing to OpenTelemetry https://issues.redhat.com/browse/DBZ-2862[DBZ-2862]
* Update the Edit connector UI to incorporate the feedback received from team in demo https://issues.redhat.com/browse/DBZ-6514[DBZ-6514]
* Support blocking ad-hoc snapshots https://issues.redhat.com/browse/DBZ-6566[DBZ-6566]
* Add new parameters to RabbitMQ consumer https://issues.redhat.com/browse/DBZ-6581[DBZ-6581]
* Document read preference changes in 2.4 https://issues.redhat.com/browse/DBZ-6591[DBZ-6591]
* Log appropriate error when JDBC connector receive SchemaChange record  https://issues.redhat.com/browse/DBZ-6655[DBZ-6655]
* Send tombstone events when partition queries are finished https://issues.redhat.com/browse/DBZ-6658[DBZ-6658]
* Propagate source column name and allow sink to use it https://issues.redhat.com/browse/DBZ-6684[DBZ-6684]
* Disable jdk-outreach-workflow.yml in forked personal repo https://issues.redhat.com/browse/DBZ-6702[DBZ-6702]
* Support alternative JDBC drivers in MySQL connector https://issues.redhat.com/browse/DBZ-6727[DBZ-6727]
* Add STOPPED and RESTARTING connector states to testing library https://issues.redhat.com/browse/DBZ-6734[DBZ-6734]
* Add a new parameter for selecting the db index when using Redis Storage https://issues.redhat.com/browse/DBZ-6759[DBZ-6759]
* Table schemas should be updated for each shard individually https://issues.redhat.com/browse/DBZ-6775[DBZ-6775]


=== Fixes

* Connector drop down causes a scroll bar https://issues.redhat.com/browse/DBZ-5421[DBZ-5421]
* Provide outline for drawer component showing connector details https://issues.redhat.com/browse/DBZ-5831[DBZ-5831]
* Modify scroll for the running connector component https://issues.redhat.com/browse/DBZ-5832[DBZ-5832]
* Connector restart regression https://issues.redhat.com/browse/DBZ-6213[DBZ-6213]
* Document Optimal MongoDB Oplog Config for Resiliency  https://issues.redhat.com/browse/DBZ-6455[DBZ-6455]
* JDBC Schema History: When the table name is passed as dbName.tableName, the connector does not start https://issues.redhat.com/browse/DBZ-6484[DBZ-6484]
* Oracle DDL parser does not properly detect end of statement when comments obfuscate the semicolon https://issues.redhat.com/browse/DBZ-6599[DBZ-6599]
* Received an unexpected message type that does not have an 'after' Debezium block https://issues.redhat.com/browse/DBZ-6637[DBZ-6637]
* When Debezium Mongodb connector encounter authentication or under privilege errors, the connection between debezium and mongodb keeps going up. https://issues.redhat.com/browse/DBZ-6643[DBZ-6643]
* Snapshot will not capture data when signal.data.collection is present without table.include.list https://issues.redhat.com/browse/DBZ-6669[DBZ-6669]
* Retriable operations are retried infinitely since error handlers are not reused https://issues.redhat.com/browse/DBZ-6670[DBZ-6670]
* Oracle DDL parser does not support column visibility on ALTER TABLE https://issues.redhat.com/browse/DBZ-6677[DBZ-6677]
* Partition duplication after rebalances with single leader task https://issues.redhat.com/browse/DBZ-6685[DBZ-6685]
* JDBC Sink Connector Fails on Loading Flat Data Containing Struct Type Fields from Kafka https://issues.redhat.com/browse/DBZ-6686[DBZ-6686]
* SQLSyntaxErrorException using Debezium JDBC Sink connector https://issues.redhat.com/browse/DBZ-6687[DBZ-6687]
* Should use topic.prefix rather than connector.server.name in MBean namings https://issues.redhat.com/browse/DBZ-6690[DBZ-6690]
* CDC - Debezium x RabbitMQ - Debezium Server crashes when an UPDATE/DELETE on source database (PostgreSQL) https://issues.redhat.com/browse/DBZ-6691[DBZ-6691]
* Missing operationTime field on ping command when executed against Atlas  https://issues.redhat.com/browse/DBZ-6700[DBZ-6700]
* MongoDB SRV protocol not working in Debezium Server https://issues.redhat.com/browse/DBZ-6701[DBZ-6701]
* Custom properties step not working correctly in validation of the properties added by user https://issues.redhat.com/browse/DBZ-6711[DBZ-6711]
* Add tzdata-java to UI installation Dockerfile https://issues.redhat.com/browse/DBZ-6713[DBZ-6713]
* Refactor EmbeddedEngine::run method https://issues.redhat.com/browse/DBZ-6715[DBZ-6715]
* Oracle fails to process a DROP USER https://issues.redhat.com/browse/DBZ-6716[DBZ-6716]
* Oracle LogMiner mining distance calculation should be skipped when upper bounds is not within distance https://issues.redhat.com/browse/DBZ-6733[DBZ-6733]
* MariaDB: Unparseable DDL statement (ALTER TABLE IF EXISTS) https://issues.redhat.com/browse/DBZ-6736[DBZ-6736]
* MySQL dialect does not properly recognize non-default value longblob types due to typo https://issues.redhat.com/browse/DBZ-6753[DBZ-6753]
* Postgres tests for toasted byte array and toasted date array fail with decoderbufs plugin https://issues.redhat.com/browse/DBZ-6767[DBZ-6767]
* Notifications and signals leaks between MBean instances when using JMX channels https://issues.redhat.com/browse/DBZ-6777[DBZ-6777]
* Oracle XML column types are not properly resolved when adding XMLTYPE column during streaming https://issues.redhat.com/browse/DBZ-6782[DBZ-6782]


=== Other changes

* Highlight information about how to configure the schema history topic to store data only for intended tables https://issues.redhat.com/browse/DBZ-6219[DBZ-6219]
* Blogpost about custom signalling/notification channels https://issues.redhat.com/browse/DBZ-6478[DBZ-6478]
* NotificationIT with Oracle xstream fails randomly https://issues.redhat.com/browse/DBZ-6672[DBZ-6672]
* Flaky Oracle test: shouldCaptureChangesForTransactionsAcrossSnapshotBoundaryWithoutReemittingDDLChanges https://issues.redhat.com/browse/DBZ-6673[DBZ-6673]
* Update documentation on XML and RAW data types https://issues.redhat.com/browse/DBZ-6676[DBZ-6676]
* Use descriptive text instead of ‘-1’ in ‘Time since last event’ for no event case  https://issues.redhat.com/browse/DBZ-6681[DBZ-6681]
* MongoDB upstream documentation duplication https://issues.redhat.com/browse/DBZ-6705[DBZ-6705]
* Upstream documentation missing types for configurations https://issues.redhat.com/browse/DBZ-6707[DBZ-6707]
* Exit test suite consumption loop when connector has stopped https://issues.redhat.com/browse/DBZ-6730[DBZ-6730]
* Update Quarkus to 3.2.3.Final https://issues.redhat.com/browse/DBZ-6740[DBZ-6740]
* Decouple Debezium Server and Extension Quarkus versions https://issues.redhat.com/browse/DBZ-6744[DBZ-6744]
* SingleProcessor remove redundant filter logic https://issues.redhat.com/browse/DBZ-6745[DBZ-6745]
* OracheSchemaMigrationIT fails after adding RAW data type support https://issues.redhat.com/browse/DBZ-6751[DBZ-6751]
* Missing or misspelled IDs result in downstream build errors https://issues.redhat.com/browse/DBZ-6754[DBZ-6754]
* Bump the MySQL binlog client version to 0.28.1 which includes significant GTID event performance improvements https://issues.redhat.com/browse/DBZ-6783[DBZ-6783]
* Add new Redis Sink connector parameter description to the documentation https://issues.redhat.com/browse/DBZ-6784[DBZ-6784]
* Upgrade Kafka to 3.5.1 https://issues.redhat.com/browse/DBZ-6785[DBZ-6785]



[[release-2.4.0-alpha1]]
== *Release 2.4.0.Alpha1* _(July 14th 2023)_

See the https://issues.redhat.com/secure/ReleaseNote.jspa?projectId=12317320&version=12409716[complete list of issues].

=== Kafka compatibility

This release has been built against Kafka Connect 3.5.0 and has been tested with version 3.5.0 of the Kafka brokers.
See the https://kafka.apache.org/documentation/#upgrade[Kafka documentation] for compatibility with other versions of Kafka brokers.


=== Upgrading

Before upgrading any connector, be sure to check the backward-incompatible changes that have been made since the release you were using.

When you decide to upgrade one of these connectors to 2.4.0.Alpha1 from any earlier versions,
first check the migration notes for the version you're using.
Gracefully stop the running connector, remove the old plugin files, install the 2.4.0.Alpha1 plugin files, and restart the connector using the same configuration.
Upon restart, the 2.4.0.Alpha1 connectors will continue where the previous connector left off.
As one might expect, all change events previously written to Kafka by the old connector will not be modified.

If you are using our container images, then please do not forget to pull them fresh from https://quay.io/organization/debezium[Quay.io].


=== Breaking changes

MongoDB connector interanlly used primary preferred hard-coded behaviour in certain scenarios.
This is no longer the case and the connection string seting is used (https://issues.redhat.com/browse/DBZ-6521[DBZ-6521]).

Vitess connector source info now contains the shard that was the source of the event (https://issues.redhat.com/browse/DBZ-6617[DBZ-6617]).



=== New features

* Capture & display critical connector metrics for Debezium UI https://issues.redhat.com/browse/DBZ-5321[DBZ-5321]
* Don't require cluster-wide privileges when watching a single database/collection https://issues.redhat.com/browse/DBZ-6182[DBZ-6182]
* Debezium Offset-Editor example application https://issues.redhat.com/browse/DBZ-6338[DBZ-6338]
* Notify about initial snapshot progress https://issues.redhat.com/browse/DBZ-6416[DBZ-6416]
* Set Readpreference tags in the MongoDB client  https://issues.redhat.com/browse/DBZ-6468[DBZ-6468]
* MySqlSnapshotChangeEventSource parallel execute createSchemaEventsForTables  https://issues.redhat.com/browse/DBZ-6472[DBZ-6472]
* Refactor errors.max.retries to common connector framework https://issues.redhat.com/browse/DBZ-6573[DBZ-6573]
* Explain failure on existing publication update when switching to `filtered` from `all_tables`  https://issues.redhat.com/browse/DBZ-6577[DBZ-6577]
* Debezium should honor read preference from connection string https://issues.redhat.com/browse/DBZ-6578[DBZ-6578]
* Document support for database restricted privileges for 2.4 https://issues.redhat.com/browse/DBZ-6592[DBZ-6592]
* Use source field in topic in table.format.name https://issues.redhat.com/browse/DBZ-6595[DBZ-6595]
* Support authentication with TC MongoDB deployments https://issues.redhat.com/browse/DBZ-6596[DBZ-6596]
* Support for getting primary key from header https://issues.redhat.com/browse/DBZ-6602[DBZ-6602]
* Support for custom tags in the connector metrics https://issues.redhat.com/browse/DBZ-6603[DBZ-6603]
* Update docs for new shard field https://issues.redhat.com/browse/DBZ-6627[DBZ-6627]
* Improve JDBC connector documentation https://issues.redhat.com/browse/DBZ-6632[DBZ-6632]
* Add configurable timeout to initialization procedure https://issues.redhat.com/browse/DBZ-6653[DBZ-6653]
* Introduce internal config option to control how close to CURRENT_SCN Oracle may mine https://issues.redhat.com/browse/DBZ-6660[DBZ-6660]
* Add support for XML_TYPE column type to Debezium connector for Oracle https://issues.redhat.com/browse/DBZ-3605[DBZ-3605]

=== Fixes

* Mysql connector fails to parse statement FLUSH FIREWALL_RULES https://issues.redhat.com/browse/DBZ-3925[DBZ-3925]
* Snapshot result not saved if LAST record is filtered out https://issues.redhat.com/browse/DBZ-5464[DBZ-5464]
* CloudEventsConverter throws static error on Kafka Connect 3.5+ https://issues.redhat.com/browse/DBZ-6517[DBZ-6517]
* Dependency io.debezium:debezium-testing-testcontainers affects logback in tests https://issues.redhat.com/browse/DBZ-6525[DBZ-6525]
* Batches with DELETE statement first will skip everything else https://issues.redhat.com/browse/DBZ-6576[DBZ-6576]
* Oracle unsupported DDL statement - drop multiple partitions https://issues.redhat.com/browse/DBZ-6585[DBZ-6585]
* Only Struct objects supported for [Header field insertion], found: null https://issues.redhat.com/browse/DBZ-6588[DBZ-6588]
* Support PostgreSQL coercion for UUID, JSON, and JSONB data types https://issues.redhat.com/browse/DBZ-6589[DBZ-6589]
* MySQL parser cannot parse CAST AS dec https://issues.redhat.com/browse/DBZ-6590[DBZ-6590]
* Excessive Log Message 'Marking Processed Record for Topic' https://issues.redhat.com/browse/DBZ-6597[DBZ-6597]
* Fixed DataCollections for table scan completion notificaiton https://issues.redhat.com/browse/DBZ-6605[DBZ-6605]
* Oracle connector is not recoverable if ORA-01327 is wrapped by another JDBC or Oracle exception https://issues.redhat.com/browse/DBZ-6610[DBZ-6610]
* Fatal error when parsing Mysql (Percona 5.7.39-42) procedure https://issues.redhat.com/browse/DBZ-6613[DBZ-6613]
* Build of Potgres connector fails when building against Kafka 2.X https://issues.redhat.com/browse/DBZ-6614[DBZ-6614]
* Upgrade postgresql driver to v42.6.0 https://issues.redhat.com/browse/DBZ-6619[DBZ-6619]
* MySQL ALTER USER with RETAIN CURRENT PASSWORD fails with parsing exception https://issues.redhat.com/browse/DBZ-6622[DBZ-6622]
* Inaccurate documentation regarding additional-condition https://issues.redhat.com/browse/DBZ-6628[DBZ-6628]
* Oracle connection SQLRecoverableExceptions are not retried by default https://issues.redhat.com/browse/DBZ-6633[DBZ-6633]
* Cannot delete non-null interval value https://issues.redhat.com/browse/DBZ-6648[DBZ-6648]
* ConcurrentModificationException thrown in Debezium 2.3 https://issues.redhat.com/browse/DBZ-6650[DBZ-6650]
* Dbz crashes on parsing Mysql Procedure Code (Statement Labels) https://issues.redhat.com/browse/DBZ-6651[DBZ-6651]
* CloudEvents converter is broken for JSON message deserialization https://issues.redhat.com/browse/DBZ-6654[DBZ-6654]
* Vitess: Connector fails if table name is a mysql reserved word https://issues.redhat.com/browse/DBZ-6656[DBZ-6656]
* Junit conflicts cause by test-containers module using transitive Junit5 from quarkus https://issues.redhat.com/browse/DBZ-6659[DBZ-6659]


=== Other changes

* Add the API endpoint to expose running connector metrics https://issues.redhat.com/browse/DBZ-5359[DBZ-5359]
* Display critical connector metrics https://issues.redhat.com/browse/DBZ-5360[DBZ-5360]
* Define and document schema history topic messages schema https://issues.redhat.com/browse/DBZ-5518[DBZ-5518]
* Align query.fetch.size across connectors https://issues.redhat.com/browse/DBZ-5676[DBZ-5676]
* Upgrade to Apache Kafka 3.5.0 https://issues.redhat.com/browse/DBZ-6047[DBZ-6047]
* Remove downstream related code from UI Frontend code https://issues.redhat.com/browse/DBZ-6394[DBZ-6394]
* Make Signal actions extensible https://issues.redhat.com/browse/DBZ-6417[DBZ-6417]
* Cleanup duplicit jobs from jenkins https://issues.redhat.com/browse/DBZ-6535[DBZ-6535]
* Implement sharded mongo ocp deployment and integration tests  https://issues.redhat.com/browse/DBZ-6538[DBZ-6538]
* Refactor retry handling in Redis schema history https://issues.redhat.com/browse/DBZ-6594[DBZ-6594]
* Upgrade Quarkus to 3.2.0.Final https://issues.redhat.com/browse/DBZ-6626[DBZ-6626]
* Upgrade kcctl to 1.0.0.Beta3 https://issues.redhat.com/browse/DBZ-6642[DBZ-6642]
* Upgrade gRPC to 1.56.1 https://issues.redhat.com/browse/DBZ-6649[DBZ-6649]
* Disable Kafka 2.x CRON trigger https://issues.redhat.com/browse/DBZ-6667[DBZ-6667]

