---
layout: release-notes
title: Release Notes for Debezium 2.0
debezium-version: "2.0"
---
:toc:
:toc-placement: macro
:toclevels: 1
:sectanchors:
:linkattrs:
:icons: font

All notable changes for Debezium releases are documented in this file.
Release numbers follow http://semver.org[Semantic Versioning].

toc::[]

[[release-2.0.0-beta2]]
== *Release 2.0.0.Beta2* _(September 16th 2022)_

See the https://issues.redhat.com/secure/ReleaseNote.jspa?projectId=12317320&version=12392459[complete list of issues].

=== Kafka compatibility

This release has been built against Kafka Connect 3.2.1 and has been tested with version 3.2.1 of the Kafka brokers.
See the https://kafka.apache.org/documentation/#upgrade[Kafka documentation] for compatibility with other versions of Kafka brokers.


=== Upgrading

Before upgrading any connector, be sure to check the backward-incompatible changes that have been made since the release you were using.

When you decide to upgrade one of these connectors to 2.0.0.Beta2 from any earlier versions,
first check the migration notes for the version you're using.
Gracefully stop the running connector, remove the old plugin files, install the 2.0.0.Beta2 plugin files, and restart the connector using the new configuration parameter names.
Upon restart, the 2.0.0.Beta2 connectors will continue where the previous connector left off.
As one might expect, all change events previously written to Kafka by the old connector will not be modified.

If you are using our container images, then please do not forget to pull them fresh from https://hub.docker.com/u/debezium[DockerHub].


=== Breaking changes

Object sizes for memory queue limits are no longer calculated using reflection but estimated based on message schema. This is not supported for Cassandra connector (https://issues.redhat.com/browse/DBZ-2766[DBZ-2766]).

All schemas used by Debezium are now defined in a central point, properly named and versioned (https://issues.redhat.com/browse/DBZ-4365[DBZ-4365], https://issues.redhat.com/browse/DBZ-5044[DBZ-5044]). This can lead to schema compatibility issues if a schema registry is used.

The connector parameter naming was overhauled and separated into distinct trees. The connector configuration must be updated (https://issues.redhat.com/browse/DBZ-5043[DBZ-5043]).


Most Debezium connectors now restart by default when an exception related to communication (SqlException, IOException) is thrown (https://issues.redhat.com/browse/DBZ-5244[DBZ-5244]).



=== New features

* Support binlog compression for MySQL https://issues.redhat.com/browse/DBZ-2663[DBZ-2663]
* Limit log output for "Streaming requested from LSN" warnings https://issues.redhat.com/browse/DBZ-3007[DBZ-3007]
* Redis Sink - Change the format of the message sent to the stream https://issues.redhat.com/browse/DBZ-4441[DBZ-4441]
* Debezium UI frontend should use new URLs and new JSON schema descriptors https://issues.redhat.com/browse/DBZ-4619[DBZ-4619]
* Provide a signal to pause/resume a running incremental snapshot https://issues.redhat.com/browse/DBZ-4727[DBZ-4727]
* support mongodb connection string as configuration option https://issues.redhat.com/browse/DBZ-4733[DBZ-4733]
* Update Readme on github for Cassandra 4.x support https://issues.redhat.com/browse/DBZ-4839[DBZ-4839]
* Debezium Server verifies existence and format of the config file https://issues.redhat.com/browse/DBZ-5116[DBZ-5116]
* Include Oracle Debezium Connector in Debezium Server distribution https://issues.redhat.com/browse/DBZ-5122[DBZ-5122]
* Smart Backfills | Ability to backfill selective data https://issues.redhat.com/browse/DBZ-5327[DBZ-5327]
* Support multiple tasks in vitess connector https://issues.redhat.com/browse/DBZ-5382[DBZ-5382]
* Enhancing Cassandra 4 Connector to read incremental changes and not wait for Commit Log file to be marked complete https://issues.redhat.com/browse/DBZ-5410[DBZ-5410]
* Unsupported non-relational tables should be gracefully skipped by the connector during streaming https://issues.redhat.com/browse/DBZ-5441[DBZ-5441]
* Support incremental snapshot stop-snapshot signal sourced from Kafka topic https://issues.redhat.com/browse/DBZ-5453[DBZ-5453]
* Upgrade Kafka client to 3.2.1 https://issues.redhat.com/browse/DBZ-5463[DBZ-5463]
* Restart SQL Server task on "Socket closed" exception https://issues.redhat.com/browse/DBZ-5478[DBZ-5478]
* Augment a uniqueness key filed/value in regex topic naming strategy https://issues.redhat.com/browse/DBZ-5480[DBZ-5480]
* Support wait/nowait clause in mariadb https://issues.redhat.com/browse/DBZ-5485[DBZ-5485]


=== Fixes

* Source info of incremental snapshot events exports wrong data https://issues.redhat.com/browse/DBZ-4329[DBZ-4329]
* "No maximum LSN recorded" log message can be spammed on low-activity databases https://issues.redhat.com/browse/DBZ-4631[DBZ-4631]
* Redis Sink config properties are not passed to DB history  https://issues.redhat.com/browse/DBZ-5035[DBZ-5035]
* HTTP sink not retrying failing requests https://issues.redhat.com/browse/DBZ-5307[DBZ-5307]
* Translation from mongodb document to kafka connect schema fails when nested arrays contain no elements https://issues.redhat.com/browse/DBZ-5434[DBZ-5434]
* Duplicate SCNs on same thread Oracle RAC mode incorrectly processed https://issues.redhat.com/browse/DBZ-5439[DBZ-5439]
* Typo in postgresql document. https://issues.redhat.com/browse/DBZ-5450[DBZ-5450]
* Unit test fails on Windows https://issues.redhat.com/browse/DBZ-5452[DBZ-5452]
* Missing the regex properties validation before start connector of DefaultRegexTopicNamingStrategy  https://issues.redhat.com/browse/DBZ-5471[DBZ-5471]
* Create Index DDL fails to parse when using TABLESPACE clause with quoted identifier https://issues.redhat.com/browse/DBZ-5472[DBZ-5472]
* Outbox doesn't check array consistecy properly when it detemines its schema https://issues.redhat.com/browse/DBZ-5475[DBZ-5475]
* Misleading statistics written to the log https://issues.redhat.com/browse/DBZ-5476[DBZ-5476]
* Debezium connector task didn't retry when failover in mongodb 5 https://issues.redhat.com/browse/DBZ-5479[DBZ-5479]
* ReadOnlyIncrementalSnapshotIT testStopSnapshotKafkaSignal randomly fails https://issues.redhat.com/browse/DBZ-5483[DBZ-5483]
* Better error reporting for signal table failures https://issues.redhat.com/browse/DBZ-5484[DBZ-5484]


=== Other changes

* Add signal table automatically to include list https://issues.redhat.com/browse/DBZ-3293[DBZ-3293]
* No documentation for snapshot.include.collection.list property for Db2 connector https://issues.redhat.com/browse/DBZ-4345[DBZ-4345]
* Deprecate internal key/value converter options  https://issues.redhat.com/browse/DBZ-4617[DBZ-4617]
* Run system testsuite inside OpenShift  https://issues.redhat.com/browse/DBZ-5165[DBZ-5165]
* Upgrade SQL Server driver to 10.2.1.jre8 https://issues.redhat.com/browse/DBZ-5290[DBZ-5290]
* Rewrite oracle tests pipeline job to matrix job https://issues.redhat.com/browse/DBZ-5412[DBZ-5412]
* Debezium on ROSA sanity testing https://issues.redhat.com/browse/DBZ-5416[DBZ-5416]
* Update link format in shared tutorial file https://issues.redhat.com/browse/DBZ-5422[DBZ-5422]
* Deprecate legacy topic selector for all connectors https://issues.redhat.com/browse/DBZ-5457[DBZ-5457]
* Remove community conditionalization in signaling doc for Oracle incremental and ad hoc snapshots content https://issues.redhat.com/browse/DBZ-5458[DBZ-5458]
* Remove the dependency of JdbcConnection on DatabaseSchema https://issues.redhat.com/browse/DBZ-5470[DBZ-5470]
* Remove SQL Server SourceTimestampMode https://issues.redhat.com/browse/DBZ-5477[DBZ-5477]



[[release-2.0.0-beta1]]
== *Release 2.0.0.Beta1* _(July 26th 2022)_

See the https://issues.redhat.com/secure/ReleaseNote.jspa?projectId=12317320&version=12391139[complete list of issues].

=== Kafka compatibility

This release has been built against Kafka Connect 3.2.0 and has been tested with version 3.2.0 of the Kafka brokers.
See the https://kafka.apache.org/documentation/#upgrade[Kafka documentation] for compatibility with other versions of Kafka brokers.


=== Upgrading

Before upgrading any connector, be sure to check the backward-incompatible changes that have been made since the release you were using.

When you decide to upgrade one of these connectors to 2.0.0.Beta1 from any earlier versions,
first check the migration notes for the version you're using.
Gracefully stop the running connector, remove the old plugin files, install the 2.0.0.Beta1 plugin files, and restart the connector using the same configuration.
Upon restart, the 2.0.0.Beta1 connectors will continue where the previous connector left off.
As one might expect, all change events previously written to Kafka by the old connector will not be modified.

If you are using our container images, then please do not forget to pull them fresh from https://hub.docker.com/u/debezium[DockerHub].


=== Breaking changes

Debezium previously exposed connector metrics as a single tuple of snapshot, streaming, and history-based beans.
With this release, connector metrics have migrated to a multi-partition scheme, which means that the naming and how metrics are exposed has changed as a part of https://issues.redhat.com/browse/DBZ-4726[DBZ-4726].
Please be sure to review your metrics gathering processes if you're using tools like Grafana, Prometheus, or other JMX metrics gathering frameworks.

Debezium previously provided support for reading and storing offsets, history, and other bits as a part of the `debezium-core` module.
With this release, we've introduced a new module called `debezium-storage` with implementations for _local file_ and _Kafka_ based storage approaches (https://issues.redhat.com/browse/DBZ-5229[DBZ-5229]).
This approach provides a wonderful extension point going forward to introduce other storage implementations as the need arises.
When upgrading, you may need to adjust your application's dependencies depending on what storage module implementations your code depends upon.



=== New features

* Pluggable topic selector https://issues.redhat.com/browse/DBZ-4180[DBZ-4180]
* Read Debezium Metrics From Debezium Server Consumer https://issues.redhat.com/browse/DBZ-5235[DBZ-5235]
* Treat SQLServerException with "Broken pipe (Write failed)" exception message as a retriable exception https://issues.redhat.com/browse/DBZ-5292[DBZ-5292]
* Include user that committed change in metadata (oracle) https://issues.redhat.com/browse/DBZ-5358[DBZ-5358]
* UI Add  debezium-ui i18n zh translation https://issues.redhat.com/browse/DBZ-5379[DBZ-5379]
* Support storing extended attributes in relational model and JSON schema history topic https://issues.redhat.com/browse/DBZ-5396[DBZ-5396]
* Validate topic naming strategy relative topic name properties https://issues.redhat.com/browse/DBZ-5414[DBZ-5414]
* Verify the unique index whether including function or arbitrary expression https://issues.redhat.com/browse/DBZ-5424[DBZ-5424]
* Remove the duplicated SimpleDdlParserListener from mysql connector https://issues.redhat.com/browse/DBZ-5425[DBZ-5425]


=== Fixes

* MongoConnector's field exclusion configuration does not work with fields with the same name but from different collections https://issues.redhat.com/browse/DBZ-4846[DBZ-4846]
* User input are not consistent on Filter step for the DBZ connectors https://issues.redhat.com/browse/DBZ-5246[DBZ-5246]
* KafkaDatabaseHistory without check database history topic create result  caused UnknowTopicOrPartitionException https://issues.redhat.com/browse/DBZ-5249[DBZ-5249]
* Lob type data is inconsistent between source and sink, after modifying the primary key https://issues.redhat.com/browse/DBZ-5295[DBZ-5295]
* Caused by: java.io.EOFException: Failed to read next byte from position 2005308603 https://issues.redhat.com/browse/DBZ-5333[DBZ-5333]
* Incremental Snapshot: Oracle table name parsing does not support periods in DB name https://issues.redhat.com/browse/DBZ-5336[DBZ-5336]
* Support PostgreSQL default value function calls with schema prefixes https://issues.redhat.com/browse/DBZ-5340[DBZ-5340]
* Unsigned tinyint conversion fails for MySQL 8.x https://issues.redhat.com/browse/DBZ-5343[DBZ-5343]
* Log a warning when an unsupported LogMiner operation is detected for a captured table https://issues.redhat.com/browse/DBZ-5351[DBZ-5351]
* NullPointerException thrown when unique index based on both system and non-system generated columns https://issues.redhat.com/browse/DBZ-5356[DBZ-5356]
* MySQL Connector column hash v2 does not work https://issues.redhat.com/browse/DBZ-5366[DBZ-5366]
* Outbox JSON expansion fails when nested arrays contain no elements https://issues.redhat.com/browse/DBZ-5367[DBZ-5367]
* docker-maven-plugin needs to be upgraded for Mac Apple M1 https://issues.redhat.com/browse/DBZ-5369[DBZ-5369]
* AWS DocumentDB (with MongoDB Compatibility) Connect Fail https://issues.redhat.com/browse/DBZ-5371[DBZ-5371]
* Oracle Xstream does not propagate commit timestamp to transaction metadata https://issues.redhat.com/browse/DBZ-5373[DBZ-5373]
* UI View connector config in non-first cluster return 404 https://issues.redhat.com/browse/DBZ-5378[DBZ-5378]
* CommitScn not logged in expected format https://issues.redhat.com/browse/DBZ-5381[DBZ-5381]
* org.postgresql.util.PSQLException: Bad value for type timestamp/date/time: CURRENT_TIMESTAMP https://issues.redhat.com/browse/DBZ-5384[DBZ-5384]
* Missing "previousId" property with parsing the rename statement in kafka history topic https://issues.redhat.com/browse/DBZ-5386[DBZ-5386]
* Check constraint introduces a column based on constraint in the schema change event. https://issues.redhat.com/browse/DBZ-5390[DBZ-5390]
* The column is referenced as PRIMARY KEY, but a matching column is not defined in table https://issues.redhat.com/browse/DBZ-5398[DBZ-5398]
* Clarify which database name to use for signal.data.collection when using Oracle with pluggable database support https://issues.redhat.com/browse/DBZ-5399[DBZ-5399]
* Timestamp with time zone column's default values not in GMT https://issues.redhat.com/browse/DBZ-5403[DBZ-5403]
* Upgrade to Kafka 3.1 broke build compatibility with Kafka 2.x and Kafka 3.0 https://issues.redhat.com/browse/DBZ-5404[DBZ-5404]
* PostgresConnectorIT#shouldRecoverFromRetriableException fails randomly https://issues.redhat.com/browse/DBZ-5408[DBZ-5408]


=== Other changes

* Clean-up unused documentation variables https://issues.redhat.com/browse/DBZ-2595[DBZ-2595]
* Intermittent test failures on CI: EventProcessingFailureHandlingIT https://issues.redhat.com/browse/DBZ-4004[DBZ-4004]
* Clarify whether SQL Server on Azure is a supported configuration or not https://issues.redhat.com/browse/DBZ-4312[DBZ-4312]
* Remove redundant setting of last events https://issues.redhat.com/browse/DBZ-5047[DBZ-5047]
* Rename `docker-images` repository and JIRA component to `container-images` https://issues.redhat.com/browse/DBZ-5048[DBZ-5048]
* Update instructions for deploying Debezium on RHEL (downstream-only change) https://issues.redhat.com/browse/DBZ-5293[DBZ-5293]
* Add ts_ms field to examples of transaction boundary events and examples and update property description in documentation https://issues.redhat.com/browse/DBZ-5334[DBZ-5334]
* Oracle GitHub actions workflow no longer run tests on pushes https://issues.redhat.com/browse/DBZ-5349[DBZ-5349]
* Unify job names in jenkins system-tests https://issues.redhat.com/browse/DBZ-5392[DBZ-5392]
* Build stable branches for connector-specific repos https://issues.redhat.com/browse/DBZ-5409[DBZ-5409]
* Oracle non-cdb builds do not use the correct environment settings https://issues.redhat.com/browse/DBZ-5411[DBZ-5411]
* Update the topic naming strategy doc to all connectors https://issues.redhat.com/browse/DBZ-5413[DBZ-5413]
* Address User guide review comments for Oracle connector https://issues.redhat.com/browse/DBZ-5418[DBZ-5418]
* OracleSchemaMigrationIT fails on non-pluggable (non-CDB) databases https://issues.redhat.com/browse/DBZ-5419[DBZ-5419]



[[release-2.0.0-alpha3]]
== *Release 2.0.0.Alpha3* _(July 1st 2022)_

See the https://issues.redhat.com/secure/ReleaseNote.jspa?projectId=12317320&version=12385342[complete list of issues].

=== Kafka compatibility

This release has been built against Kafka Connect 3.2.0 and has been tested with version 3.2.0 of the Kafka brokers.
See the https://kafka.apache.org/documentation/#upgrade[Kafka documentation] for compatibility with other versions of Kafka brokers.


=== Upgrading

Before upgrading any connector, be sure to check the backward-incompatible changes that have been made since the release you were using.

When you decide to upgrade one of these connectors to 2.0.0.Alpha3 from any earlier versions,
first check the migration notes for the version you're using.
Gracefully stop the running connector, remove the old plugin files, install the 2.0.0.Alpha3 plugin files, and restart the connector using the same configuration.
Upon restart, the 2.0.0.Alpha3 connectors will continue where the previous connector left off.
As one might expect, all change events previously written to Kafka by the old connector will not be modified.

If you are using our container images, then please do not forget to pull them fresh from https://hub.docker.com/u/debezium[DockerHub].


=== Breaking changes

There are no breaking changes in this release.


=== New features

* Mysql Commit Timestamp https://issues.redhat.com/browse/DBZ-5170[DBZ-5170]
* Include event scn in Oracle records https://issues.redhat.com/browse/DBZ-5225[DBZ-5225]
* Redis Store does not work with GCP Managed Redis https://issues.redhat.com/browse/DBZ-5268[DBZ-5268]


=== Fixes

* Incorrect loading of LSN from offsets https://issues.redhat.com/browse/DBZ-3942[DBZ-3942]
* Database history recovery will retain old tables after they've been renamed https://issues.redhat.com/browse/DBZ-4451[DBZ-4451]
* Adding new table with incremental snapshots not working https://issues.redhat.com/browse/DBZ-4834[DBZ-4834]
* BigDecimal has mismatching scale value for given Decimal schema https://issues.redhat.com/browse/DBZ-4890[DBZ-4890]
* Debezium has never found starting LSN https://issues.redhat.com/browse/DBZ-5031[DBZ-5031]
* Data duplication problem using postgresql source on debezium server https://issues.redhat.com/browse/DBZ-5070[DBZ-5070]
* Cursor fetch is used for all results during connection https://issues.redhat.com/browse/DBZ-5084[DBZ-5084]
* Debezuim connector fails at parsing select statement overrides when table name has space https://issues.redhat.com/browse/DBZ-5198[DBZ-5198]
* DDL statement couldn't be parsed 2 - Oracle connector 1.9.3.Final https://issues.redhat.com/browse/DBZ-5230[DBZ-5230]
* Debezium server duplicates scripting jar files https://issues.redhat.com/browse/DBZ-5232[DBZ-5232]
* Cannot convert field type tinyint(1) unsigned to boolean https://issues.redhat.com/browse/DBZ-5236[DBZ-5236]
* Oracle unparsable ddl create table https://issues.redhat.com/browse/DBZ-5237[DBZ-5237]
* Postgres Incremental Snapshot on parent partitioned table not working https://issues.redhat.com/browse/DBZ-5240[DBZ-5240]
* Character set influencers are not properly parsed on default values https://issues.redhat.com/browse/DBZ-5241[DBZ-5241]
* Dupicate SCNs on Oracle RAC installations incorrectly processed https://issues.redhat.com/browse/DBZ-5245[DBZ-5245]
* NPE when using Debezium Embedded in Quarkus https://issues.redhat.com/browse/DBZ-5251[DBZ-5251]
* Oracle LogMiner may fail with an in-progress transaction in an archive log that has been deleted https://issues.redhat.com/browse/DBZ-5256[DBZ-5256]
* Order of source block table names in a rename schema change event is not deterministic https://issues.redhat.com/browse/DBZ-5257[DBZ-5257]
* Debezium fails to connect to replicaset if a node is down https://issues.redhat.com/browse/DBZ-5260[DBZ-5260]
* No changes to commit_scn when oracle-connector got new lob data https://issues.redhat.com/browse/DBZ-5266[DBZ-5266]
* Invalid date 'SEPTEMBER 31' https://issues.redhat.com/browse/DBZ-5267[DBZ-5267]
* database.history.store.only.captured.tables.ddl not suppressing logs https://issues.redhat.com/browse/DBZ-5270[DBZ-5270]
* io.debezium.text.ParsingException: DDL statement couldn't be parsed https://issues.redhat.com/browse/DBZ-5271[DBZ-5271]
* Deadlock during snapshot with Mongo connector https://issues.redhat.com/browse/DBZ-5272[DBZ-5272]
* Mysql parser is not able to handle variables in KILL command https://issues.redhat.com/browse/DBZ-5273[DBZ-5273]
* Debezium server fail when connect to Azure Event Hubs https://issues.redhat.com/browse/DBZ-5279[DBZ-5279]
* ORA-01086 savepoint never established raised when database history topic cannot be created or does not exist https://issues.redhat.com/browse/DBZ-5281[DBZ-5281]
* Enabling database.history.store.only.captured.tables.ddl does not restrict history topic records https://issues.redhat.com/browse/DBZ-5285[DBZ-5285]


=== Other changes

* Add script SMT test case to OCP test suite https://issues.redhat.com/browse/DBZ-2581[DBZ-2581]
* Confusing example for schema change topic https://issues.redhat.com/browse/DBZ-4713[DBZ-4713]
* Update cache-invalidation example https://issues.redhat.com/browse/DBZ-4754[DBZ-4754]
* Switch from static yaml descriptors to dynamic objects https://issues.redhat.com/browse/DBZ-4830[DBZ-4830]
* Verify that snapshot deployments build and deploy javadocs https://issues.redhat.com/browse/DBZ-4875[DBZ-4875]
* DelayStrategy should accept Duration rather than long ms https://issues.redhat.com/browse/DBZ-4902[DBZ-4902]
* Use maven 3.8.4 version with enforcer plugin https://issues.redhat.com/browse/DBZ-5069[DBZ-5069]
* Add option for '*' wildcard usage testsuite preparation jenkins jobs https://issues.redhat.com/browse/DBZ-5190[DBZ-5190]
* Use the Maven wrapper in the Github and Jenkins workflows https://issues.redhat.com/browse/DBZ-5207[DBZ-5207]
* Improve performance of OracleConnectorIT shouldIgnoreAllTablesInExcludedSchemas test https://issues.redhat.com/browse/DBZ-5226[DBZ-5226]
* Document use of JAR artifact to build Debezium scripting SMT into Kafka Connect https://issues.redhat.com/browse/DBZ-5227[DBZ-5227]
* Create shared adoc fragments for specifying MBean name format in connector metrics sections https://issues.redhat.com/browse/DBZ-5233[DBZ-5233]
* Build Oracle connector by default without Maven profiles https://issues.redhat.com/browse/DBZ-5234[DBZ-5234]
* Remove reference to removed case insensitive option in Oracle README.md https://issues.redhat.com/browse/DBZ-5250[DBZ-5250]
* Several Oracle tests do not get database name from TestHelper https://issues.redhat.com/browse/DBZ-5258[DBZ-5258]
* Upgrade to Quarkus 2.10.0.Final https://issues.redhat.com/browse/DBZ-5259[DBZ-5259]
* Upgrade PostgreSQL driver to 42.4.0 https://issues.redhat.com/browse/DBZ-5261[DBZ-5261]
* Refactor ChangeEventQueue to better support n:1 threads https://issues.redhat.com/browse/DBZ-5277[DBZ-5277]
* Upgrade MongoDB driver to 4.6.1 https://issues.redhat.com/browse/DBZ-5287[DBZ-5287]



[[release-2.0.0-alpha2]]
== *Release 2.0.0.Alpha2* _(June 9th 2022)_

See the https://issues.redhat.com/secure/ReleaseNote.jspa?projectId=12317320&version=12385341[complete list of issues].

=== Kafka compatibility

This release has been built against Kafka Connect 3.2.0 and has been tested with version 3.2.0 of the Kafka brokers.
See the https://kafka.apache.org/documentation/#upgrade[Kafka documentation] for compatibility with other versions of Kafka brokers.


=== Upgrading

Before upgrading any connector, be sure to check the backward-incompatible changes that have been made since the release you were using.

When you decide to upgrade one of these connectors to 2.0.0.Alpha2 from any earlier versions,
first check the migration notes for the version you're using.
Gracefully stop the running connector, remove the old plugin files, install the 2.0.0.Alpha2 plugin files, and restart the connector using the same configuration.
Upon restart, the 2.0.0.Alpha2 connectors will continue where the previous connector left off.
As one might expect, all change events previously written to Kafka by the old connector will not be modified.

If you are using our container images, then please do not forget to pull them fresh from https://hub.docker.com/u/debezium[DockerHub].


=== Breaking changes

Debezium MySQL connector represented `FLOAT` datatype as `FLOAT64`.
Now the correct type `FLOAT32` is used (https://issues.redhat.com/browse/DBZ-3865[DBZ-3865]).

MongoDB connector no longer supports streaming from `oplog`.
The connector fully switched to change streams streaming (https://issues.redhat.com/browse/DBZ-4951[DBZ-4951]).

All connectors now use multi-partitioned codebase.
This has impact only on project developers (https://issues.redhat.com/browse/DBZ-5042[DBZ-5042]).

All deprecated configuration options were removed (https://issues.redhat.com/browse/DBZ-5045[DBZ-5045]).


=== New features

* Provide a signal to stop the running incremental snapshot https://issues.redhat.com/browse/DBZ-4251[DBZ-4251]
* SQL Server - Fail connector when a user doesn't have the right permission (CDCReader) https://issues.redhat.com/browse/DBZ-4346[DBZ-4346]
* Allow mongodb-connector to decode Binary payloads https://issues.redhat.com/browse/DBZ-4600[DBZ-4600]
* Add UI backend tests for SQL Server connector https://issues.redhat.com/browse/DBZ-4867[DBZ-4867]
* direct usage of debezium engine ignores ChangeConsumer.supportsTombstoneEvents https://issues.redhat.com/browse/DBZ-5052[DBZ-5052]
* Config the cache size property for ByLogicalTableRouter caches https://issues.redhat.com/browse/DBZ-5072[DBZ-5072]
* Introduce a new extension api for query debezium version https://issues.redhat.com/browse/DBZ-5092[DBZ-5092]
* Introduce a new field "ts_ms" to identify the process time for schema change event https://issues.redhat.com/browse/DBZ-5098[DBZ-5098]
* MongoDB Connector should use RawBsonDocument instead of Document https://issues.redhat.com/browse/DBZ-5113[DBZ-5113]


=== Fixes

* Postgres existing publication is not updated with the new table https://issues.redhat.com/browse/DBZ-3921[DBZ-3921]
* Error and connector stops when DDL contains lateral https://issues.redhat.com/browse/DBZ-4780[DBZ-4780]
* Schema changes should flush SCN to offsets if there are no other active transactions https://issues.redhat.com/browse/DBZ-4782[DBZ-4782]
* Connector stops streaming after a re-balance https://issues.redhat.com/browse/DBZ-4792[DBZ-4792]
* MySQL connector increment snapshot failed parse datetime column lenth when connector set "snapshot.fetch.size": 20000  https://issues.redhat.com/browse/DBZ-4939[DBZ-4939]
* [MySQL Debezium] DDL Parsing error - CREATE OR REPLACE TABLE https://issues.redhat.com/browse/DBZ-4958[DBZ-4958]
* InstanceAlreadyExistsException during MongoDb connector metrics registration https://issues.redhat.com/browse/DBZ-5011[DBZ-5011]
* DateTimeParseException: Text 'infinity' could not be parsed in Postgres connector https://issues.redhat.com/browse/DBZ-5014[DBZ-5014]
* PostgreSQL ENUM default values are missing from generated schema https://issues.redhat.com/browse/DBZ-5038[DBZ-5038]
* Debezium official documentation typo https://issues.redhat.com/browse/DBZ-5040[DBZ-5040]
* Fix inconsistent transaction id when handling transactional messages in Vitess connector https://issues.redhat.com/browse/DBZ-5063[DBZ-5063]
* 4 Connections per connector (postgres) https://issues.redhat.com/browse/DBZ-5074[DBZ-5074]
* Oracle documentation refers to archive_log_target rather than archive_lag_target https://issues.redhat.com/browse/DBZ-5076[DBZ-5076]
* 'ALTER TABLE mytable DROP FOREIGN KEY IF EXISTS mytable_fk' no viable alternative at input 'ALTER TABLE mytable DROP FOREIGN KEY IF' https://issues.redhat.com/browse/DBZ-5077[DBZ-5077]
* Oracle Logminer: records missed during switch from snapshot to streaming mode https://issues.redhat.com/browse/DBZ-5085[DBZ-5085]
* Interrupting a snapshot process can hang for some JDBC drivers https://issues.redhat.com/browse/DBZ-5087[DBZ-5087]
* Debezium fails to undo change event due to transaction id ending in ffffffff with LogMiner https://issues.redhat.com/browse/DBZ-5090[DBZ-5090]
* Table changes are not filled in schema changes from snapshot https://issues.redhat.com/browse/DBZ-5096[DBZ-5096]
* Postgresql connector does not retry one some errors when postgres is taken offline https://issues.redhat.com/browse/DBZ-5097[DBZ-5097]
* Parsing zero day fails https://issues.redhat.com/browse/DBZ-5099[DBZ-5099]
* Cannot Set debezium.sink.kafka.producer.ssl.endpoint.identification.algorithm to empty value  https://issues.redhat.com/browse/DBZ-5105[DBZ-5105]
* Debezium connector failed with create table statement https://issues.redhat.com/browse/DBZ-5108[DBZ-5108]
* Current version of surefire/failsafe skips tests on failure in BeforeAll https://issues.redhat.com/browse/DBZ-5112[DBZ-5112]


=== Other changes

* Restructure documentation for custom converters https://issues.redhat.com/browse/DBZ-4588[DBZ-4588]
* Document *xmin.fetch.interval.ms* property for Postgres connector https://issues.redhat.com/browse/DBZ-4734[DBZ-4734]
* Update to Quarkus 2.9.2.Final https://issues.redhat.com/browse/DBZ-4806[DBZ-4806]
* Upgrade Oracle driver to 21.5.0.0 https://issues.redhat.com/browse/DBZ-4877[DBZ-4877]
* Execute Debezium UI build when core library is changed https://issues.redhat.com/browse/DBZ-4947[DBZ-4947]
* Remove unused Oracle connector code https://issues.redhat.com/browse/DBZ-4973[DBZ-4973]
* Links to cassandra 3 and 4 artifacts no longer work for Debezium 1.9+ https://issues.redhat.com/browse/DBZ-5055[DBZ-5055]
* Align Postgresql driver with Quarkus https://issues.redhat.com/browse/DBZ-5060[DBZ-5060]
* Outdated links in Javadoc documentation https://issues.redhat.com/browse/DBZ-5075[DBZ-5075]
* Rename "Mysql" to "MySql" in related MysqlFieldReader interface https://issues.redhat.com/browse/DBZ-5078[DBZ-5078]
* Create CI job for maven repository verification https://issues.redhat.com/browse/DBZ-5082[DBZ-5082]
* Remove database.server.id default value handler, no longer auto-generated. https://issues.redhat.com/browse/DBZ-5100[DBZ-5100]
* Upgrade Jackson Databind to 2.13.2.2 https://issues.redhat.com/browse/DBZ-5107[DBZ-5107]
* Switch to released version of Fixture5 extension in System testsuite https://issues.redhat.com/browse/DBZ-5114[DBZ-5114]



[[release-2.0.0-alpha1]]
== *Release 2.0.0.Alpha1* _(April 28th 2022)_

See the https://issues.redhat.com/secure/ReleaseNote.jspa?projectId=12377386&version=12380203[complete list of issues].

=== Kafka compatibility

This release has been built against Kafka Connect 3.1.0 and has been tested with version 3.1.0 of the Kafka brokers.
See the https://kafka.apache.org/documentation/#upgrade[Kafka documentation] for compatibility with other versions of Kafka brokers.


=== Upgrading

Before upgrading any connector, be sure to check the backward-incompatible changes that have been made since the release you were using.

When you decide to upgrade one of these connectors to 2.0.0.Alpha1 from any earlier versions,
first check the migration notes for the version you're using.
Gracefully stop the running connector, remove the old plugin files, install the 2.0.0.Alpha1 plugin files, and restart the connector using the same configuration.
Upon restart, the 2.0.0.Alpha1 connectors will continue where the previous connector left off.
As one might expect, all change events previously written to Kafka by the old connector will not be modified.

If you are using our container images, then please do not forget to pull them fresh from https://hub.docker.com/u/debezium[DockerHub].


=== Breaking changes

Java 11 is required to run Debezium in any form: Kafka Connect plug-in, Debezium engine and Debezium Server (https://issues.redhat.com/browse/DBZ-4949[DBZ-4949]).

Maven 3.8.4 is required to build Debezium (https://issues.redhat.com/browse/DBZ-5064[DBZ-5064]).

PostgreSQL connector no longer supports old versions of `protobuf` decoding plug-in that do not have transaction and default value support (https://issues.redhat.com/browse/DBZ-703[DBZ-703]).

PostgreSQL connector no longer supports `wal2json` decoding plug-in (dehttps://issues.redhat.com/browse/DBZ-4156[DBZ-4156]).
`pgoutput` decoding plug-in is recommended as the replacement.

Legacy implementation of MySQL connector was removed (https://issues.redhat.com/browse/DBZ-4950[DBZ-4950]).

Confluent Avro converters are no longer present in ebezium container images (https://issues.redhat.com/browse/DBZ-4952[DBZ-4952]).

JDBC legacy date/time properties support was removed from MySQL connector (https://issues.redhat.com/browse/DBZ-4965[DBZ-4965]).




=== New features

* Implement Pub/Sub Lite change consumer https://issues.redhat.com/browse/DBZ-4450[DBZ-4450]
* Include Instant Client in Docker build for Oracle in Tutorial examples https://issues.redhat.com/browse/DBZ-1013[DBZ-1013]
* Add Google Pub/Sub emulator support https://issues.redhat.com/browse/DBZ-4491[DBZ-4491]
* Making Postgres `PSQLException: This connection has been closed.` retriable https://issues.redhat.com/browse/DBZ-4948[DBZ-4948]
* ORA-04030: out of process memory when trying to allocate 65568 bytes (Logminer LCR c,krvxrib:buffer) https://issues.redhat.com/browse/DBZ-4963[DBZ-4963]
* Should store event header timestamp in HistoryRecord https://issues.redhat.com/browse/DBZ-4998[DBZ-4998]
* DBZ-UI: In the Edit/Duplicate connector flow make the access/secret key/password/Client Secret filed as editable. https://issues.redhat.com/browse/DBZ-5001[DBZ-5001]
* adjust LogMiner batch size based on comparison with currently used batch size https://issues.redhat.com/browse/DBZ-5005[DBZ-5005]


=== Fixes

* Connector throws java.lang.ArrayIndexOutOfBoundsException https://issues.redhat.com/browse/DBZ-3848[DBZ-3848]
* Document no relevant tables should be in the SYS or SYSTEM tablespaces. https://issues.redhat.com/browse/DBZ-4762[DBZ-4762]
* Getting java.sql.SQLException: ORA-01291: missing logfile while running with archive log only https://issues.redhat.com/browse/DBZ-4879[DBZ-4879]
* Debezium uses wrong LCR format for Oracle 12.1 https://issues.redhat.com/browse/DBZ-4932[DBZ-4932]
* Oracle duplicates on connector restart https://issues.redhat.com/browse/DBZ-4936[DBZ-4936]
* Oracle truncate causes exception https://issues.redhat.com/browse/DBZ-4953[DBZ-4953]
* NPE caused by io.debezium.connector.oracle.antlr.listener.ColumnDefinitionParserListener.resolveColumnDataType https://issues.redhat.com/browse/DBZ-4976[DBZ-4976]
* Oracle connector may throw NullPointerException when stopped after an unsuccessful startup https://issues.redhat.com/browse/DBZ-4978[DBZ-4978]
* NPE for non-table related DDLs https://issues.redhat.com/browse/DBZ-4979[DBZ-4979]
* CTE statements aren't parsed by MySQL connector https://issues.redhat.com/browse/DBZ-4980[DBZ-4980]
* Missing SSL configuration option in the debezium mongodb connector UI https://issues.redhat.com/browse/DBZ-4981[DBZ-4981]
* Unsupported MySQL Charsets during Snapshotting for fields with custom converter https://issues.redhat.com/browse/DBZ-4983[DBZ-4983]
* Outbox Transform does not allow expanded payload with additional fields in the envelope https://issues.redhat.com/browse/DBZ-4989[DBZ-4989]
* Redis Sink - clientSetname is taking place before auth https://issues.redhat.com/browse/DBZ-4993[DBZ-4993]
* CLOB with single quotes causes parser exception https://issues.redhat.com/browse/DBZ-4994[DBZ-4994]
* Oracle DDL parser fails on references_clause with no column list https://issues.redhat.com/browse/DBZ-4996[DBZ-4996]
* Can't use 'local' database through mongos https://issues.redhat.com/browse/DBZ-5003[DBZ-5003]
* Triggering Incremental Snapshot on MongoDB connector throws json parsing error https://issues.redhat.com/browse/DBZ-5015[DBZ-5015]
* Jenkins jobs fail to download debezium-bom https://issues.redhat.com/browse/DBZ-5017[DBZ-5017]
* Redis Sink - Check if client is not null before closing it https://issues.redhat.com/browse/DBZ-5019[DBZ-5019]
* Cassandra 3 handler does not process partition deletions correctly https://issues.redhat.com/browse/DBZ-5022[DBZ-5022]
* Keyspaces should be initialised in all schema change listeners on sessions startup. https://issues.redhat.com/browse/DBZ-5023[DBZ-5023]
* SQL Server in multi-partition mode fails if a new database is added to an existing configuration https://issues.redhat.com/browse/DBZ-5033[DBZ-5033]
* Mysql tests start before MySQL DB constainer is running https://issues.redhat.com/browse/DBZ-5054[DBZ-5054]
* Debezium server configuration properties not rendered correctly https://issues.redhat.com/browse/DBZ-5058[DBZ-5058]


=== Other changes

* Add integration test for Oracle database.url configurations https://issues.redhat.com/browse/DBZ-3318[DBZ-3318]
* Build Cassandra 3.x connector with Java 11 https://issues.redhat.com/browse/DBZ-4910[DBZ-4910]
* Add ignoreSnapshots build option to release pipeline https://issues.redhat.com/browse/DBZ-4957[DBZ-4957]
* Update Pulsar client version used by Debezium Server https://issues.redhat.com/browse/DBZ-4961[DBZ-4961]
* Intermittent failure of RedisStreamIT.testRedisConnectionRetry https://issues.redhat.com/browse/DBZ-4966[DBZ-4966]
* Add triggers for 2.x paths in Github CI https://issues.redhat.com/browse/DBZ-4971[DBZ-4971]
* Debezium raised an exception and the task was still running https://issues.redhat.com/browse/DBZ-4987[DBZ-4987]
* Nexus Staging Maven plugin is incompatible with OpenJDK 17 https://issues.redhat.com/browse/DBZ-5025[DBZ-5025]
* Duplicate definition of Maven plugins https://issues.redhat.com/browse/DBZ-5026[DBZ-5026]
* OracleOffsetContextTest should be scoped to LogMiner only https://issues.redhat.com/browse/DBZ-5028[DBZ-5028]
* Scope several new Oracle tests to LogMiner only https://issues.redhat.com/browse/DBZ-5029[DBZ-5029]
* Failure in jdk outreach jobs https://issues.redhat.com/browse/DBZ-5041[DBZ-5041]
* Update artifact server job listing script https://issues.redhat.com/browse/DBZ-5051[DBZ-5051]
* Add FAQ about ORA-01882 and Oracle 11 to documentation https://issues.redhat.com/browse/DBZ-5057[DBZ-5057]
* Upgrade to Quarkus 2.8.2.Final https://issues.redhat.com/browse/DBZ-5062[DBZ-5062]
